{"version":3,"file":"video.js","mappings":"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","sources":["webpack://@project/extension/../node_modules/es-define-property/index.js","webpack://@project/extension/../node_modules/es-define-property/node_modules/get-intrinsic/index.js","webpack://@project/extension/../node_modules/es-errors/eval.js","webpack://@project/extension/../node_modules/es-errors/index.js","webpack://@project/extension/../node_modules/es-errors/range.js","webpack://@project/extension/../node_modules/es-errors/ref.js","webpack://@project/extension/../node_modules/es-errors/syntax.js","webpack://@project/extension/../node_modules/es-errors/type.js","webpack://@project/extension/../node_modules/es-errors/uri.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/fxp.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/util.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/validator.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/xmlparser/XMLParser.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/xmlparser/node2json.js","webpack://@project/extension/../node_modules/fast-xml-parser/src/xmlparser/xmlNode.js","webpack://@project/extension/../node_modules/function-bind/implementation.js","webpack://@project/extension/../node_modules/function-bind/index.js","webpack://@project/extension/../node_modules/get-intrinsic/index.js","webpack://@project/extension/../node_modules/global/window.js","webpack://@project/extension/../node_modules/gopd/index.js","webpack://@project/extension/../node_modules/has-proto/index.js","webpack://@project/extension/../node_modules/has-symbols/index.js","webpack://@project/extension/../node_modules/has-symbols/shams.js","webpack://@project/extension/../node_modules/hasown/index.js","webpack://@project/extension/../node_modules/jsonschema/lib/attribute.js","webpack://@project/extension/../node_modules/jsonschema/lib/helpers.js","webpack://@project/extension/../node_modules/jsonschema/lib/index.js","webpack://@project/extension/../node_modules/jsonschema/lib/scan.js","webpack://@project/extension/../node_modules/jsonschema/lib/validator.js","webpack://@project/extension/../node_modules/object-inspect/index.js","webpack://@project/extension/../node_modules/sanitize-filename/index.js","webpack://@project/extension/../node_modules/strnum/strnum.js","webpack://@project/extension/../node_modules/truncate-utf8-bytes/browser.js","webpack://@project/extension/../node_modules/truncate-utf8-bytes/lib/truncate.js","webpack://@project/extension/../node_modules/url/node_modules/call-bind/callBound.js","webpack://@project/extension/../node_modules/url/node_modules/call-bind/index.js","webpack://@project/extension/../node_modules/url/node_modules/define-data-property/index.js","webpack://@project/extension/../node_modules/url/node_modules/get-intrinsic/index.js","webpack://@project/extension/../node_modules/url/node_modules/has-property-descriptors/index.js","webpack://@project/extension/../node_modules/url/node_modules/punycode/punycode.js","webpack://@project/extension/../node_modules/url/node_modules/qs/lib/formats.js","webpack://@project/extension/../node_modules/url/node_modules/qs/lib/index.js","webpack://@project/extension/../node_modules/url/node_modules/qs/lib/parse.js","webpack://@project/extension/../node_modules/url/node_modules/qs/lib/stringify.js","webpack://@project/extension/../node_modules/url/node_modules/qs/lib/utils.js","webpack://@project/extension/../node_modules/url/node_modules/set-function-length/index.js","webpack://@project/extension/../node_modules/url/node_modules/side-channel/index.js","webpack://@project/extension/../node_modules/url/url.js","webpack://@project/extension/../node_modules/utf8-byte-length/browser.js","webpack://@project/extension/../node_modules/vtt.js/lib/index.js","webpack://@project/extension/../node_modules/vtt.js/lib/vtt.js","webpack://@project/extension/../node_modules/vtt.js/lib/vttcue-extended.js","webpack://@project/extension/../node_modules/vtt.js/lib/vttcue.js","webpack://@project/extension/../node_modules/vtt.js/lib/vttregion-extended.js","webpack://@project/extension/../node_modules/vtt.js/lib/vttregion.js","webpack://@project/extension/webpack/bootstrap","webpack://@project/extension/webpack/runtime/compat get default export","webpack://@project/extension/webpack/runtime/define property getters","webpack://@project/extension/webpack/runtime/global","webpack://@project/extension/webpack/runtime/hasOwnProperty shorthand","webpack://@project/extension/webpack/runtime/node module decorator","webpack://@project/extension/../common/src/model.ts","webpack://@project/extension/../common/util/util.ts","webpack://@project/extension/../common/src/image-transformer.ts","webpack://@project/extension/../common/src/message.ts","webpack://@project/extension/../common/src/auto-pause-context.ts","webpack://@project/extension/../common/src/offscreen-dom-cache.ts","webpack://@project/extension/../common/audio-clip/mp3-encoder.ts","webpack://@project/extension/../node_modules/hotkeys-js/dist/hotkeys.esm.js","webpack://@project/extension/../common/settings/settings.ts","webpack://@project/extension/../common/key-binder/key-binder.ts","webpack://@project/extension/../common/settings/settings-provider.ts","webpack://@project/extension/../common/settings/settings-import-export.ts","webpack://@project/extension/../common/settings/index.ts","webpack://@project/extension/../node_modules/ass-compiler/src/parser/effect.js","webpack://@project/extension/../node_modules/ass-compiler/src/parser/drawing.js","webpack://@project/extension/../node_modules/ass-compiler/src/parser/tag.js","webpack://@project/extension/../node_modules/ass-compiler/src/parser/tags.js","webpack://@project/extension/../node_modules/ass-compiler/src/parser/text.js","webpack://@project/extension/../node_modules/ass-compiler/src/parser/time.js","webpack://@project/extension/../node_modules/ass-compiler/src/parser/dialogue.js","webpack://@project/extension/../node_modules/ass-compiler/src/parser/format.js","webpack://@project/extension/../node_modules/ass-compiler/src/utils.js","webpack://@project/extension/../node_modules/ass-compiler/src/parser/style.js","webpack://@project/extension/../node_modules/ass-compiler/src/compiler/drawing.js","webpack://@project/extension/../node_modules/ass-compiler/src/compiler/tag.js","webpack://@project/extension/../node_modules/ass-compiler/src/compiler/text.js","webpack://@project/extension/../node_modules/ass-compiler/src/compiler/dialogues.js","webpack://@project/extension/../node_modules/ass-compiler/src/compiler/styles.js","webpack://@project/extension/../node_modules/@qgustavor/srt-parser/dist/index.js","webpack://@project/extension/../common/subtitle-reader/subtitle-reader.ts","webpack://@project/extension/../node_modules/ass-compiler/src/compiler/index.js","webpack://@project/extension/../node_modules/ass-compiler/src/parser/index.js","webpack://@project/extension/./src/services/extension-settings-storage.ts","webpack://@project/extension/./src/services/extension-config.ts","webpack://@project/extension/./src/services/build-flags.ts","webpack://@project/extension/./src/services/localization-fetcher.ts","webpack://@project/extension/./src/services/frame-bridge-client.ts","webpack://@project/extension/./src/services/ui-frame.ts","webpack://@project/extension/../common/base64/index.ts","webpack://@project/extension/./src/services/mp3-worker-factory.ts","webpack://@project/extension/../common/global-state/index.ts","webpack://@project/extension/./src/services/extension-global-state-provider.ts","webpack://@project/extension/./src/controllers/anki-ui-controller.ts","webpack://@project/extension/./src/controllers/controls-controller.ts","webpack://@project/extension/./src/services/image-element.ts","webpack://@project/extension/./src/controllers/drag-controller.ts","webpack://@project/extension/./src/controllers/mobile-gesture-controller.ts","webpack://@project/extension/./src/services/element-overlay.ts","webpack://@project/extension/./src/controllers/mobile-video-overlay-controller.ts","webpack://@project/extension/./src/controllers/notification-controller.ts","webpack://@project/extension/../node_modules/@flatten-js/interval-tree/dist/main.esm.js","webpack://@project/extension/../common/subtitle-collection/subtitle-collection.ts","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://@project/extension/../node_modules/i18next/dist/esm/i18next.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/toArray.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://@project/extension/./src/controllers/subtitle-controller.ts","webpack://@project/extension/./src/services/pages.ts","webpack://@project/extension/../node_modules/@videojs/vhs-utils/es/stream.js","webpack://@project/extension/../node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@project/extension/../node_modules/@videojs/vhs-utils/es/decode-b64-to-uint8-array.js","webpack://@project/extension/../node_modules/m3u8-parser/dist/m3u8-parser.es.js","webpack://@project/extension/./src/controllers/video-data-sync-controller.ts","webpack://@project/extension/./src/services/audio-recorder.ts","webpack://@project/extension/../common/device-detection/mobile.ts","webpack://@project/extension/./src/services/i18n.ts","webpack://@project/extension/./src/services/key-bindings.ts","webpack://@project/extension/./src/services/update-alert.ts","webpack://@project/extension/./src/services/binding.ts","webpack://@project/extension/./src/controllers/video-select-controller.ts","webpack://@project/extension/../node_modules/uuid/dist/esm-browser/rng.js","webpack://@project/extension/../node_modules/uuid/dist/esm-browser/regex.js","webpack://@project/extension/../node_modules/uuid/dist/esm-browser/stringify.js","webpack://@project/extension/../node_modules/uuid/dist/esm-browser/validate.js","webpack://@project/extension/../node_modules/uuid/dist/esm-browser/v4.js","webpack://@project/extension/./src/services/frame-info.ts","webpack://@project/extension/../common/browser-detection/index.ts","webpack://@project/extension/./src/controllers/tab-anki-ui-controller.ts","webpack://@project/extension/./src/services/shadow-roots.ts","webpack://@project/extension/./src/video.ts"],"sourcesContent":["'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\n/** @type {import('.')} */\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true) || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n","'use strict';\n\nvar undefined;\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\nvar hasProto = require('has-proto')();\n\nvar getProto = Object.getPrototypeOf || (\n\thasProto\n\t\t? function (x) { return x.__proto__; } // eslint-disable-line no-proto\n\t\t: null\n);\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n","'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n","'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n","'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n","'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n","'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n","'use strict';\n\nconst validator = require('./validator');\nconst XMLParser = require('./xmlparser/XMLParser');\nconst XMLBuilder = require('./xmlbuilder/json2xml');\n\nmodule.exports = {\n  XMLParser: XMLParser,\n  XMLValidator: validator,\n  XMLBuilder: XMLBuilder\n}","'use strict';\n\nconst nameStartChar = ':A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\nconst nameChar = nameStartChar + '\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\nconst nameRegexp = '[' + nameStartChar + '][' + nameChar + ']*'\nconst regexName = new RegExp('^' + nameRegexp + '$');\n\nconst getAllMatches = function(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    allmatches.startIndex = regex.lastIndex - match[0].length;\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n};\n\nconst isName = function(string) {\n  const match = regexName.exec(string);\n  return !(match === null || typeof match === 'undefined');\n};\n\nexports.isExist = function(v) {\n  return typeof v !== 'undefined';\n};\n\nexports.isEmptyObject = function(obj) {\n  return Object.keys(obj).length === 0;\n};\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nexports.merge = function(target, a, arrayMode) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      if (arrayMode === 'strict') {\n        target[keys[i]] = [ a[keys[i]] ];\n      } else {\n        target[keys[i]] = a[keys[i]];\n      }\n    }\n  }\n};\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nexports.getValue = function(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n};\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\nexports.isName = isName;\nexports.getAllMatches = getAllMatches;\nexports.nameRegexp = nameRegexp;\n","'use strict';\n\nconst util = require('./util');\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  unpairedTags: []\n};\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nexports.validate = function (xmlData, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n  const tags = [];\n  let tagFound = false;\n\n  //indicates that the root tag has been closed (aka. depth 0 has been reached)\n  let reachedRoot = false;\n\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  \n  for (let i = 0; i < xmlData.length; i++) {\n\n    if (xmlData[i] === '<' && xmlData[i+1] === '?') {\n      i+=2;\n      i = readPI(xmlData,i);\n      if (i.err) return i;\n    }else if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n      let tagStartPos = i;\n      i++;\n      \n      if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (; i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r'; i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          //continue;\n          i--;\n        }\n        if (!validateTagName(tagName)) {\n          let msg;\n          if (tagName.trim().length === 0) {\n            msg = \"Invalid space after '<'.\";\n          } else {\n            msg = \"Tag '\"+tagName+\"' is an invalid name.\";\n          }\n          return getErrorObject('InvalidTag', msg, getLineNumberForPosition(xmlData, i));\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return getErrorObject('InvalidAttr', \"Attributes for '\"+tagName+\"' have open quote.\", getLineNumberForPosition(xmlData, i));\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          const attrStrStart = i - attrStr.length;\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, attrStrStart + isValid.err.line));\n          }\n        } else if (closingTag) {\n          if (!result.tagClosed) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' doesn't have proper closing.\", getLineNumberForPosition(xmlData, i));\n          } else if (attrStr.trim().length > 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' can't have attributes or invalid starting.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg.tagName) {\n              let openPos = getLineNumberForPosition(xmlData, otg.tagStartPos);\n              return getErrorObject('InvalidTag',\n                \"Expected closing tag '\"+otg.tagName+\"' (opened in line \"+openPos.line+\", col \"+openPos.col+\") instead of closing tag '\"+tagName+\"'.\",\n                getLineNumberForPosition(xmlData, tagStartPos));\n            }\n\n            //when there are no more tags, we reached the root level.\n            if (tags.length == 0) {\n              reachedRoot = true;\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid !== true) {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, i - attrStr.length + isValid.err.line));\n          }\n\n          //if the root level has been reached before ...\n          if (reachedRoot === true) {\n            return getErrorObject('InvalidXml', 'Multiple possible root nodes found.', getLineNumberForPosition(xmlData, i));\n          } else if(options.unpairedTags.indexOf(tagName) !== -1){\n            //don't push into stack\n          } else {\n            tags.push({tagName, tagStartPos});\n          }\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else if (xmlData[i+1] === '?') {\n              i = readPI(xmlData, ++i);\n              if (i.err) return i;\n            } else{\n              break;\n            }\n          } else if (xmlData[i] === '&') {\n            const afterAmp = validateAmpersand(xmlData, i);\n            if (afterAmp == -1)\n              return getErrorObject('InvalidChar', \"char '&' is not expected.\", getLineNumberForPosition(xmlData, i));\n            i = afterAmp;\n          }else{\n            if (reachedRoot === true && !isWhiteSpace(xmlData[i])) {\n              return getErrorObject('InvalidXml', \"Extra text at the end\", getLineNumberForPosition(xmlData, i));\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if ( isWhiteSpace(xmlData[i])) {\n        continue;\n      }\n      return getErrorObject('InvalidChar', \"char '\"+xmlData[i]+\"' is not expected.\", getLineNumberForPosition(xmlData, i));\n    }\n  }\n\n  if (!tagFound) {\n    return getErrorObject('InvalidXml', 'Start tag expected.', 1);\n  }else if (tags.length == 1) {\n      return getErrorObject('InvalidTag', \"Unclosed tag '\"+tags[0].tagName+\"'.\", getLineNumberForPosition(xmlData, tags[0].tagStartPos));\n  }else if (tags.length > 0) {\n      return getErrorObject('InvalidXml', \"Invalid '\"+\n          JSON.stringify(tags.map(t => t.tagName), null, 4).replace(/\\r?\\n/g, '')+\n          \"' found.\", {line: 1, col: 1});\n  }\n\n  return true;\n};\n\nfunction isWhiteSpace(char){\n  return char === ' ' || char === '\\t' || char === '\\n'  || char === '\\r';\n}\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  const start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      const tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return getErrorObject('InvalidXml', 'XML declaration allowed only at the start of the document.', getLineNumberForPosition(xmlData, i));\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nconst doubleQuote = '\"';\nconst singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  let tagClosed = false;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        tagClosed = true;\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {\n    value: attrStr,\n    index: i,\n    tagClosed: tagClosed\n  };\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = util.getAllMatches(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' has no space in starting.\", getPositionFromMatch(matches[i]))\n    } else if (matches[i][3] !== undefined && matches[i][4] === undefined) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' is without value.\", getPositionFromMatch(matches[i]));\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return getErrorObject('InvalidAttr', \"boolean attribute '\"+matches[i][2]+\"' is not allowed.\", getPositionFromMatch(matches[i]));\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName)) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is an invalid name.\", getPositionFromMatch(matches[i]));\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is repeated.\", getPositionFromMatch(matches[i]));\n    }\n  }\n\n  return true;\n}\n\nfunction validateNumberAmpersand(xmlData, i) {\n  let re = /\\d/;\n  if (xmlData[i] === 'x') {\n    i++;\n    re = /[\\da-fA-F]/;\n  }\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === ';')\n      return i;\n    if (!xmlData[i].match(re))\n      break;\n  }\n  return -1;\n}\n\nfunction validateAmpersand(xmlData, i) {\n  // https://www.w3.org/TR/xml/#dt-charref\n  i++;\n  if (xmlData[i] === ';')\n    return -1;\n  if (xmlData[i] === '#') {\n    i++;\n    return validateNumberAmpersand(xmlData, i);\n  }\n  let count = 0;\n  for (; i < xmlData.length; i++, count++) {\n    if (xmlData[i].match(/\\w/) && count < 20)\n      continue;\n    if (xmlData[i] === ';')\n      break;\n    return -1;\n  }\n  return i;\n}\n\nfunction getErrorObject(code, message, lineNumber) {\n  return {\n    err: {\n      code: code,\n      msg: message,\n      line: lineNumber.line || lineNumber,\n      col: lineNumber.col,\n    },\n  };\n}\n\nfunction validateAttrName(attrName) {\n  return util.isName(attrName);\n}\n\n// const startsWithXML = /^xml/i;\n\nfunction validateTagName(tagname) {\n  return util.isName(tagname) /* && !tagname.match(startsWithXML) */;\n}\n\n//this function returns the line number for the character at the given index\nfunction getLineNumberForPosition(xmlData, index) {\n  const lines = xmlData.substring(0, index).split(/\\r?\\n/);\n  return {\n    line: lines.length,\n\n    // column number is last line's length + 1, because column numbering starts at 1:\n    col: lines[lines.length - 1].length + 1\n  };\n}\n\n//this function returns the position of the first character of match within attrStr\nfunction getPositionFromMatch(match) {\n  return match.startIndex + match[1].length;\n}\n","'use strict';\n//parse Empty Node as self closing node\nconst buildFromOrderedJs = require('./orderedJs2Xml');\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function(key, a) {\n    return a;\n  },\n  attributeValueProcessor: function(attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [\n    { regex: new RegExp(\"&\", \"g\"), val: \"&amp;\" },//it must be on top\n    { regex: new RegExp(\">\", \"g\"), val: \"&gt;\" },\n    { regex: new RegExp(\"<\", \"g\"), val: \"&lt;\" },\n    { regex: new RegExp(\"\\'\", \"g\"), val: \"&apos;\" },\n    { regex: new RegExp(\"\\\"\", \"g\"), val: \"&quot;\" }\n  ],\n  processEntities: true,\n  stopNodes: []\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes || this.options.attributesGroupName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n\n  this.processTextOrObjNode = processTextOrObjNode\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n\n  if (this.options.suppressEmptyNode) {\n    this.buildTextNode = buildEmptyTextNode;\n    this.buildObjNode = buildEmptyObjNode;\n  } else {\n    this.buildTextNode = buildTextValNode;\n    this.buildObjNode = buildObjectNode;\n  }\n\n  this.buildTextValNode = buildTextValNode;\n  this.buildObjectNode = buildObjectNode;\n\n  this.replaceEntitiesValue = replaceEntitiesValue;\n  this.buildAttrPairStr = buildAttrPairStr;\n}\n\nBuilder.prototype.build = function(jObj) {\n  if(this.options.preserveOrder){\n    return buildFromOrderedJs(jObj, this.options);\n  }else {\n    if(Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1){\n      jObj = {\n        [this.options.arrayNodeName] : jObj\n      }\n    }\n    return this.j2x(jObj, 0).val;\n  }\n};\n\nBuilder.prototype.j2x = function(jObj, level) {\n  let attrStr = '';\n  let val = '';\n  for (let key in jObj) {\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node\n    } else if (jObj[key] === null) {\n      if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n      else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      }else {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n          else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          val += this.processTextOrObjNode(item, key, level)\n        } else {\n          val += this.buildTextNode(item, key, '', level);\n        }\n      }\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level)\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nfunction buildAttrPairStr(attrName, val){\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n}\n\nfunction processTextOrObjNode (object, key, level) {\n  const result = this.j2x(object, level + 1);\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjNode(result.val, key, result.attrStr, level);\n  }\n}\n\nfunction buildObjectNode(val, key, attrStr, level) {\n  let tagEndExp = '</' + key + this.tagEndChar;\n  let piClosingChar = \"\";\n  \n  if(key[0] === \"?\") {\n    piClosingChar = \"?\";\n    tagEndExp = \"\";\n  }\n\n  if (attrStr && val.indexOf('<') === -1) {\n    return ( this.indentate(level) + '<' +  key + attrStr + piClosingChar + '>' + val + tagEndExp );\n  } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n    return this.indentate(level) + `<!--${val}-->` + this.newLine;\n  }else {\n    return (\n      this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar +\n      val +\n      this.indentate(level) + tagEndExp    );\n  }\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n  }\n}\n\nfunction buildTextValNode(val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` +  this.newLine;\n  }else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `<!--${val}-->` +  this.newLine;\n  }else{\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n  \n    if( textValue === '' && this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n      if(this.options.suppressUnpairedNode){\n        return this.indentate(level) + '<' + key + this.tagEndChar;\n      }else{\n        return this.indentate(level) + '<' + key + \"/\" + this.tagEndChar;\n      }\n    } else{\n      return (\n        this.indentate(level) + '<' + key + attrStr + '>' +\n         textValue +\n        '</' + key + this.tagEndChar  );\n    }\n\n  }\n}\n\nfunction replaceEntitiesValue(textValue){\n  if(textValue && textValue.length > 0 && this.options.processEntities){\n    for (let i=0; i<this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n}\n\nfunction buildEmptyTextNode(val, key, attrStr, level) {\n  if( val === '' && this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n    if(this.options.suppressUnpairedNode){\n      return this.indentate(level) + '<' + key + this.tagEndChar;\n    }else{\n      return this.indentate(level) + '<' + key + \"/\" + this.tagEndChar;\n    }\n  }else if (val !== '') { //empty\n    return this.buildTextValNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar; //PI tag\n    else return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar; //normal\n  }\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix)) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = Builder;\n","const EOL = \"\\n\";\n\n/**\n * \n * @param {array} jArray \n * @param {any} options \n * @returns \n */\nfunction toXml(jArray, options){\n    return arrToStr( jArray, options, \"\", 0);\n}\n\nfunction arrToStr(arr, options, jPath, level){\n    let xmlStr = \"\";\n\n    let indentation = \"\";\n    if(options.format && options.indentBy.length > 0){//TODO: this logic can be avoided for each call\n        indentation = EOL + \"\" + options.indentBy.repeat(level);\n    }\n\n    for (let i = 0; i < arr.length; i++) {\n        const tagObj = arr[i];\n        const tagName = propName(tagObj);\n        let newJPath = \"\";\n        if(jPath.length === 0) newJPath = tagName\n        else newJPath = `${jPath}.${tagName}`;\n\n        if(tagName === options.textNodeName){\n            let tagText = tagObj[tagName];\n            if(!isStopNode(newJPath, options)){\n                tagText = options.tagValueProcessor( tagName, tagText);\n                tagText = replaceEntitiesValue(tagText, options);\n            }\n            xmlStr += indentation + tagText;\n            continue;\n        }else if( tagName === options.cdataPropName){\n            xmlStr += indentation + `<![CDATA[${tagObj[tagName][0][options.textNodeName]}]]>`;\n            continue;\n        }else if( tagName === options.commentPropName){\n            xmlStr += indentation + `<!--${tagObj[tagName][0][options.textNodeName]}-->`;\n            continue;\n        }else if( tagName[0] === \"?\"){\n            const attStr = attr_to_str(tagObj[\":@\"], options);\n            const tempInd = tagName === \"?xml\" ? \"\" : indentation;\n            let piTextNodeName = tagObj[tagName][0][options.textNodeName];\n            piTextNodeName = piTextNodeName.length !== 0 ? \" \" + piTextNodeName : \"\"; //remove extra spacing\n            xmlStr += tempInd + `<${tagName}${piTextNodeName}${attStr}?>`;\n            continue;\n        }\n        const attStr = attr_to_str(tagObj[\":@\"], options);\n        let tagStart =  indentation + `<${tagName}${attStr}`;\n        let tagValue = arrToStr(tagObj[tagName], options, newJPath, level + 1);\n        if(options.unpairedTags.indexOf(tagName) !== -1){\n            if(options.suppressUnpairedNode)  xmlStr += tagStart + \">\"; \n            else xmlStr += tagStart + \"/>\"; \n        }else if( (!tagValue || tagValue.length === 0) && options.suppressEmptyNode){ \n            xmlStr += tagStart + \"/>\"; \n        }else{ \n            //TODO: node with only text value should not parse the text value in next line\n            xmlStr += tagStart + `>${tagValue}${indentation}</${tagName}>` ;\n        }\n    }\n    \n    return xmlStr;\n}\n\nfunction propName(obj){\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      if(key !== \":@\") return key;\n    }\n  }\n\nfunction attr_to_str(attrMap, options){\n    let attrStr = \"\";\n    if(attrMap && !options.ignoreAttributes){\n        for (let attr in attrMap){\n            let attrVal = options.attributeValueProcessor(attr, attrMap[attr]);\n            attrVal = replaceEntitiesValue(attrVal, options);\n            if(attrVal === true && options.suppressBooleanAttributes){\n                attrStr+= ` ${attr.substr(options.attributeNamePrefix.length)}`;\n            }else{\n                attrStr+= ` ${attr.substr(options.attributeNamePrefix.length)}=\"${attrVal}\"`;\n            }\n        }\n    }\n    return attrStr;\n}\n\nfunction isStopNode(jPath, options){\n    jPath = jPath.substr(0,jPath.length - options.textNodeName.length - 1);\n    let tagName = jPath.substr(jPath.lastIndexOf(\".\") + 1);\n    for(let index in options.stopNodes){\n        if(options.stopNodes[index] === jPath || options.stopNodes[index] === \"*.\"+tagName) return true;\n    }\n    return false;\n}\n\nfunction replaceEntitiesValue(textValue, options){\n    if(textValue && textValue.length > 0 && options.processEntities){\n      for (let i=0; i< options.entities.length; i++) {\n        const entity = options.entities[i];\n        textValue = textValue.replace(entity.regex, entity.val);\n      }\n    }\n    return textValue;\n  }\nmodule.exports = toXml;","//TODO: handle comments\nfunction readDocType(xmlData, i){\n    \n    const entities = {};\n    if( xmlData[i + 3] === 'O' &&\n         xmlData[i + 4] === 'C' &&\n         xmlData[i + 5] === 'T' &&\n         xmlData[i + 6] === 'Y' &&\n         xmlData[i + 7] === 'P' &&\n         xmlData[i + 8] === 'E')\n    {    \n        i = i+9;\n        let angleBracketsCount = 1;\n        let hasBody = false, entity = false, comment = false;\n        let exp = \"\";\n        for(;i<xmlData.length;i++){\n            if (xmlData[i] === '<') {\n                if( hasBody && \n                     xmlData[i+1] === '!' &&\n                     xmlData[i+2] === 'E' &&\n                     xmlData[i+3] === 'N' &&\n                     xmlData[i+4] === 'T' &&\n                     xmlData[i+5] === 'I' &&\n                     xmlData[i+6] === 'T' &&\n                     xmlData[i+7] === 'Y'\n                ){\n                    i += 7;\n                    entity = true;\n                }else if( hasBody && \n                    xmlData[i+1] === '!' &&\n                     xmlData[i+2] === 'E' &&\n                     xmlData[i+3] === 'L' &&\n                     xmlData[i+4] === 'E' &&\n                     xmlData[i+5] === 'M' &&\n                     xmlData[i+6] === 'E' &&\n                     xmlData[i+7] === 'N' &&\n                     xmlData[i+8] === 'T'\n                ){\n                    //Not supported\n                    i += 8;\n                }else if( //comment\n                    xmlData[i+1] === '!' &&\n                    xmlData[i+2] === '-' &&\n                    xmlData[i+3] === '-'\n                ){\n                    comment = true;\n                }else{\n                    throw new Error(\"Invalid DOCTYPE\");\n                }\n                angleBracketsCount++;\n                exp = \"\";\n            } else if (xmlData[i] === '>') {\n                if(comment){\n                    if( xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\"){\n                        comment = false;\n                    }else{\n                        throw new Error(`Invalid XML comment in DOCTYPE`);\n                    }\n                }else if(entity){\n                    parseEntityExp(exp, entities);\n                    entity = false;\n                }\n                angleBracketsCount--;\n                if (angleBracketsCount === 0) {\n                  break;\n                }\n            }else if( xmlData[i] === '['){\n                hasBody = true;\n            }else{\n                exp += xmlData[i];\n            }\n        }\n        if(angleBracketsCount !== 0){\n            throw new Error(`Unclosed DOCTYPE`);\n        }\n    }else{\n        throw new Error(`Invalid Tag instead of DOCTYPE`);\n    }\n    return {entities, i};\n}\n\nconst entityRegex = RegExp(\"^\\\\s([a-zA-z0-0]+)[ \\t](['\\\"])([^&]+)\\\\2\");\nfunction parseEntityExp(exp, entities){\n    const match = entityRegex.exec(exp);\n    if(match){\n        entities[ match[1] ] = {\n            regx : RegExp( `&${match[1]};`,\"g\"),\n            val: match[3]\n        };\n    }\n}\nmodule.exports = readDocType;","\nconst defaultOptions = {\n    preserveOrder: false,\n    attributeNamePrefix: '@_',\n    attributesGroupName: false,\n    textNodeName: '#text',\n    ignoreAttributes: true,\n    removeNSPrefix: false, // remove NS from tag name or attribute name if true\n    allowBooleanAttributes: false, //a tag can have attributes without any value\n    //ignoreRootElement : false,\n    parseTagValue: true,\n    parseAttributeValue: false,\n    trimValues: true, //Trim string values of tag and attributes\n    cdataPropName: false,\n    numberParseOptions: {\n      hex: true,\n      leadingZeros: true\n    },\n    tagValueProcessor: function(tagName, val) {\n      return val;\n    },\n    attributeValueProcessor: function(attrName, val) {\n      return val;\n    },\n    stopNodes: [], //nested tags will not be parsed even for errors\n    alwaysCreateTextNode: false,\n    isArray: () => false,\n    commentPropName: false,\n    unpairedTags: [],\n    processEntities: true,\n    htmlEntities: false,\n    ignoreDeclaration: false,\n    ignorePiTags: false\n};\n   \nconst buildOptions = function(options) {\n    return Object.assign({}, defaultOptions, options);\n};\n\nexports.buildOptions = buildOptions;\nexports.defaultOptions = defaultOptions;","'use strict';\n///@ts-check\n\nconst util = require('../util');\nconst xmlNode = require('./xmlNode');\nconst readDocType = require(\"./DocTypeReader\");\nconst toNumber = require(\"strnum\");\n\nconst regx =\n  '<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\\\/)(NAME)\\\\s*>))([^<]*)'\n  .replace(/NAME/g, util.nameRegexp);\n\n//const tagsRegx = new RegExp(\"<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*\"+cdataRegx+\")*([^<]+)?\",\"g\");\n//const tagsRegx = new RegExp(\"<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)(\"+cdataRegx+\"([^<]*))*([^<]+)?\",\"g\");\n\nclass OrderedObjParser{\n  constructor(options){\n    this.options = options;\n    this.currentNode = null;\n    this.tagsNodeStack = [];\n    this.docTypeEntities = {};\n    this.lastEntities = {\n      \"amp\" : { regex: /&(amp|#38|#x26);/g, val : \"&\"},\n      \"apos\" : { regex: /&(apos|#39|#x27);/g, val : \"'\"},\n      \"gt\" : { regex: /&(gt|#62|#x3E);/g, val : \">\"},\n      \"lt\" : { regex: /&(lt|#60|#x3C);/g, val : \"<\"},\n      \"quot\" : { regex: /&(quot|#34|#x22);/g, val : \"\\\"\"},\n    };\n    this.htmlEntities = {\n      \"space\": { regex: /&(nbsp|#160);/g, val: \" \" },\n      // \"lt\" : { regex: /&(lt|#60);/g, val: \"<\" },\n      // \"gt\" : { regex: /&(gt|#62);/g, val: \">\" },\n      // \"amp\" : { regex: /&(amp|#38);/g, val: \"&\" },\n      // \"quot\" : { regex: /&(quot|#34);/g, val: \"\\\"\" },\n      // \"apos\" : { regex: /&(apos|#39);/g, val: \"'\" },\n      \"cent\" : { regex: /&(cent|#162);/g, val: \"¢\" },\n      \"pound\" : { regex: /&(pound|#163);/g, val: \"£\" },\n      \"yen\" : { regex: /&(yen|#165);/g, val: \"¥\" },\n      \"euro\" : { regex: /&(euro|#8364);/g, val: \"€\" },\n      \"copyright\" : { regex: /&(copy|#169);/g, val: \"©\" },\n      \"reg\" : { regex: /&(reg|#174);/g, val: \"®\" },\n      \"inr\" : { regex: /&(inr|#8377);/g, val: \"₹\" },\n    };\n    this.addExternalEntities = addExternalEntities;\n    this.parseXml = parseXml;\n    this.parseTextData = parseTextData;\n    this.resolveNameSpace = resolveNameSpace;\n    this.buildAttributesMap = buildAttributesMap;\n    this.isItStopNode = isItStopNode;\n    this.replaceEntitiesValue = replaceEntitiesValue;\n    this.readStopNodeData = readStopNodeData;\n    this.saveTextToParentTag = saveTextToParentTag;\n  }\n\n}\n\nfunction addExternalEntities(externalEntities){\n  const entKeys = Object.keys(externalEntities);\n  for (let i = 0; i < entKeys.length; i++) {\n    const ent = entKeys[i];\n    this.lastEntities[ent] = {\n       regex: new RegExp(\"&\"+ent+\";\",\"g\"),\n       val : externalEntities[ent]\n    }\n  }\n}\n\n/**\n * @param {string} val\n * @param {string} tagName\n * @param {string} jPath\n * @param {boolean} dontTrim\n * @param {boolean} hasAttributes\n * @param {boolean} isLeafNode\n * @param {boolean} escapeEntities\n */\nfunction parseTextData(val, tagName, jPath, dontTrim, hasAttributes, isLeafNode, escapeEntities) {\n  if (val !== undefined) {\n    if (this.options.trimValues && !dontTrim) {\n      val = val.trim();\n    }\n    if(val.length > 0){\n      if(!escapeEntities) val = this.replaceEntitiesValue(val);\n      \n      const newval = this.options.tagValueProcessor(tagName, val, jPath, hasAttributes, isLeafNode);\n      if(newval === null || newval === undefined){\n        //don't parse\n        return val;\n      }else if(typeof newval !== typeof val || newval !== val){\n        //overwrite\n        return newval;\n      }else if(this.options.trimValues){\n        return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n      }else{\n        const trimmedVal = val.trim();\n        if(trimmedVal === val){\n          return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n        }else{\n          return val;\n        }\n      }\n    }\n  }\n}\n\nfunction resolveNameSpace(tagname) {\n  if (this.options.removeNSPrefix) {\n    const tags = tagname.split(':');\n    const prefix = tagname.charAt(0) === '/' ? '/' : '';\n    if (tags[0] === 'xmlns') {\n      return '';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp(\"([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*(['\\\"])((.|\\n)*?)\\\\2\",\"gm\");\nconst attrsRegx = new RegExp('([^\\\\s=]+)\\\\s*(=\\\\s*([\\'\"])([\\\\s\\\\S]*?)\\\\3)?', 'gm');\n\nfunction buildAttributesMap(attrStr, jPath) {\n  if (!this.options.ignoreAttributes && typeof attrStr === 'string') {\n    // attrStr = attrStr.replace(/\\r?\\n/g, ' ');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = util.getAllMatches(attrStr, attrsRegx);\n    const len = matches.length; //don't make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = this.resolveNameSpace(matches[i][1]);\n      let oldVal = matches[i][4];\n      const aName = this.options.attributeNamePrefix + attrName;\n      if (attrName.length) {\n        if (oldVal !== undefined) {\n          if (this.options.trimValues) {\n            oldVal = oldVal.trim();\n          }\n          oldVal = this.replaceEntitiesValue(oldVal);\n          const newVal = this.options.attributeValueProcessor(attrName, oldVal, jPath);\n          if(newVal === null || newVal === undefined){\n            //don't parse\n            attrs[aName] = oldVal;\n          }else if(typeof newVal !== typeof oldVal || newVal !== oldVal){\n            //overwrite\n            attrs[aName] = newVal;\n          }else{\n            //parse\n            attrs[aName] = parseValue(\n              oldVal,\n              this.options.parseAttributeValue,\n              this.options.numberParseOptions\n            );\n          }\n        } else if (this.options.allowBooleanAttributes) {\n          attrs[aName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (this.options.attributesGroupName) {\n      const attrCollection = {};\n      attrCollection[this.options.attributesGroupName] = attrs;\n      return attrCollection;\n    }\n    return attrs;\n  }\n}\n\nconst parseXml = function(xmlData) {\n  xmlData = xmlData.replace(/\\r\\n?/g, \"\\n\"); //TODO: remove this line\n  const xmlObj = new xmlNode('!xml');\n  let currentNode = xmlObj;\n  let textData = \"\";\n  let jPath = \"\";\n  for(let i=0; i< xmlData.length; i++){//for each char in XML data\n    const ch = xmlData[i];\n    if(ch === '<'){\n      // const nextIndex = i+1;\n      // const _2ndChar = xmlData[nextIndex];\n      if( xmlData[i+1] === '/') {//Closing Tag\n        const closeIndex = findClosingIndex(xmlData, \">\", i, \"Closing Tag is not closed.\")\n        let tagName = xmlData.substring(i+2,closeIndex).trim();\n\n        if(this.options.removeNSPrefix){\n          const colonIndex = tagName.indexOf(\":\");\n          if(colonIndex !== -1){\n            tagName = tagName.substr(colonIndex+1);\n          }\n        }\n\n        if(currentNode){\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        }\n\n        jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n        \n        currentNode = this.tagsNodeStack.pop();//avoid recurssion, set the parent tag scope\n        textData = \"\";\n        i = closeIndex;\n      } else if( xmlData[i+1] === '?') {\n\n        let tagData = readTagExp(xmlData,i, false, \"?>\");\n        if(!tagData) throw new Error(\"Pi Tag is not closed.\");\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        if( (this.options.ignoreDeclaration && tagData.tagName === \"?xml\") || this.options.ignorePiTags){\n\n        }else{\n  \n          const childNode = new xmlNode(tagData.tagName);\n          childNode.add(this.options.textNodeName, \"\");\n          \n          if(tagData.tagName !== tagData.tagExp && tagData.attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagData.tagExp, jPath);\n          }\n          currentNode.addChild(childNode);\n\n        }\n\n\n        i = tagData.closeIndex + 1;\n      } else if(xmlData.substr(i + 1, 3) === '!--') {\n        const endIndex = findClosingIndex(xmlData, \"-->\", i+4, \"Comment is not closed.\")\n        if(this.options.commentPropName){\n          const comment = xmlData.substring(i + 4, endIndex - 2);\n\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n          currentNode.add(this.options.commentPropName, [ { [this.options.textNodeName] : comment } ]);\n        }\n        i = endIndex;\n      } else if( xmlData.substr(i + 1, 2) === '!D') {\n        const result = readDocType(xmlData, i);\n        this.docTypeEntities = result.entities;\n        i = result.i;\n      }else if(xmlData.substr(i + 1, 2) === '![') {\n        const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"CDATA is not closed.\") - 2;\n        const tagExp = xmlData.substring(i + 9,closeIndex);\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n        //cdata should be set even if it is 0 length string\n        if(this.options.cdataPropName){\n          // let val = this.parseTextData(tagExp, this.options.cdataPropName, jPath + \".\" + this.options.cdataPropName, true, false, true);\n          // if(!val) val = \"\";\n          currentNode.add(this.options.cdataPropName, [ { [this.options.textNodeName] : tagExp } ]);\n        }else{\n          let val = this.parseTextData(tagExp, currentNode.tagname, jPath, true, false, true);\n          if(!val) val = \"\";\n          currentNode.add(this.options.textNodeName, val);\n        }\n        \n        i = closeIndex + 2;\n      }else {//Opening tag\n       \n        let result = readTagExp(xmlData,i, this. options.removeNSPrefix);\n        let tagName= result.tagName;\n        let tagExp = result.tagExp;\n        let attrExpPresent = result.attrExpPresent;\n        let closeIndex = result.closeIndex;\n        \n        //save text as child node\n        if (currentNode && textData) {\n          if(currentNode.tagname !== '!xml'){\n            //when nested tag is found\n            textData = this.saveTextToParentTag(textData, currentNode, jPath, false);\n          }\n        }\n\n        if(tagName !== xmlObj.tagname){\n          jPath += jPath ? \".\" + tagName : tagName;\n        }\n\n        //check if last tag was unpaired tag\n        const lastTag = currentNode;\n        if(lastTag && this.options.unpairedTags.indexOf(lastTag.tagname) !== -1 ){\n          currentNode = this.tagsNodeStack.pop();\n        }\n\n        if (this.isItStopNode(this.options.stopNodes, jPath, tagName)) { //TODO: namespace\n          let tagContent = \"\";\n          //self-closing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            i = result.closeIndex;\n          }\n          //boolean tag\n          else if(this.options.unpairedTags.indexOf(tagName) !== -1){\n            i = result.closeIndex;\n          }\n          //normal tag\n          else{\n            //read until closing tag is found\n            const result = this.readStopNodeData(xmlData, tagName, closeIndex + 1);\n            if(!result) throw new Error(`Unexpected end of ${tagName}`);\n            i = result.i;\n            tagContent = result.tagContent;\n          }\n\n          const childNode = new xmlNode(tagName);\n          if(tagName !== tagExp && attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath);\n          }\n          if(tagContent) {\n            tagContent = this.parseTextData(tagContent, tagName, jPath, true, attrExpPresent, true, true);\n          }\n          \n          jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          childNode.add(this.options.textNodeName, tagContent);\n          \n          currentNode.addChild(childNode);\n        }else{\n  //selfClosing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === \"/\"){ //remove trailing '/'\n              tagName = tagName.substr(0, tagName.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n\n            const childNode = new xmlNode(tagName);\n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath);\n            }\n            jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n            currentNode.addChild(childNode);\n          }\n    //opening tag\n          else{\n            const childNode = new xmlNode( tagName);\n            this.tagsNodeStack.push(currentNode);\n            \n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath);\n            }\n            currentNode.addChild(childNode);\n            currentNode = childNode;\n          }\n          textData = \"\";\n          i = closeIndex;\n        }\n      }\n    }else{\n      textData += xmlData[i];\n    }\n  }\n  return xmlObj.child;\n}\n\nconst replaceEntitiesValue = function(val){\n  if(this.options.processEntities){\n    for(let entityName in this.docTypeEntities){\n      const entity = this.docTypeEntities[entityName];\n      val = val.replace( entity.regx, entity.val);\n    }\n    for(let entityName in this.lastEntities){\n      const entity = this.lastEntities[entityName];\n      val = val.replace( entity.regex, entity.val);\n    }\n    if(this.options.htmlEntities){\n      for(let entityName in this.htmlEntities){\n        const entity = this.htmlEntities[entityName];\n        val = val.replace( entity.regex, entity.val);\n      }\n    }\n  }\n  return val;\n}\nfunction saveTextToParentTag(textData, currentNode, jPath, isLeafNode) {\n  if (textData) { //store previously collected data as textNode\n    if(isLeafNode === undefined) isLeafNode = Object.keys(currentNode.child).length === 0\n    \n    textData = this.parseTextData(textData,\n      currentNode.tagname,\n      jPath,\n      false,\n      currentNode[\":@\"] ? Object.keys(currentNode[\":@\"]).length !== 0 : false,\n      isLeafNode);\n\n    if (textData !== undefined && textData !== \"\")\n      currentNode.add(this.options.textNodeName, textData);\n    textData = \"\";\n  }\n  return textData;\n}\n\n//TODO: use jPath to simplify the logic\n/**\n * \n * @param {string[]} stopNodes \n * @param {string} jPath\n * @param {string} currentTagName \n */\nfunction isItStopNode(stopNodes, jPath, currentTagName){\n  const allNodesExp = \"*.\" + currentTagName;\n  for (const stopNodePath in stopNodes) {\n    const stopNodeExp = stopNodes[stopNodePath];\n    if( allNodesExp === stopNodeExp || jPath === stopNodeExp  ) return true;\n  }\n  return false;\n}\n\n/**\n * Returns the tag Expression and where it is ending handling single-dobule quotes situation\n * @param {string} xmlData \n * @param {number} i starting index\n * @returns \n */\nfunction tagExpWithClosingIndex(xmlData, i, closingChar = \">\"){\n  let attrBoundary;\n  let tagExp = \"\";\n  for (let index = i; index < xmlData.length; index++) {\n    let ch = xmlData[index];\n    if (attrBoundary) {\n        if (ch === attrBoundary) attrBoundary = \"\";//reset\n    } else if (ch === '\"' || ch === \"'\") {\n        attrBoundary = ch;\n    } else if (ch === closingChar[0]) {\n      if(closingChar[1]){\n        if(xmlData[index + 1] === closingChar[1]){\n          return {\n            data: tagExp,\n            index: index\n          }\n        }\n      }else{\n        return {\n          data: tagExp,\n          index: index\n        }\n      }\n    } else if (ch === '\\t') {\n      ch = \" \"\n    }\n    tagExp += ch;\n  }\n}\n\nfunction findClosingIndex(xmlData, str, i, errMsg){\n  const closingIndex = xmlData.indexOf(str, i);\n  if(closingIndex === -1){\n    throw new Error(errMsg)\n  }else{\n    return closingIndex + str.length - 1;\n  }\n}\n\nfunction readTagExp(xmlData,i, removeNSPrefix, closingChar = \">\"){\n  const result = tagExpWithClosingIndex(xmlData, i+1, closingChar);\n  if(!result) return;\n  let tagExp = result.data;\n  const closeIndex = result.index;\n  const separatorIndex = tagExp.search(/\\s/);\n  let tagName = tagExp;\n  let attrExpPresent = true;\n  if(separatorIndex !== -1){//separate tag name and attributes expression\n    tagName = tagExp.substr(0, separatorIndex).replace(/\\s\\s*$/, '');\n    tagExp = tagExp.substr(separatorIndex + 1);\n  }\n\n  if(removeNSPrefix){\n    const colonIndex = tagName.indexOf(\":\");\n    if(colonIndex !== -1){\n      tagName = tagName.substr(colonIndex+1);\n      attrExpPresent = tagName !== result.data.substr(colonIndex + 1);\n    }\n  }\n\n  return {\n    tagName: tagName,\n    tagExp: tagExp,\n    closeIndex: closeIndex,\n    attrExpPresent: attrExpPresent,\n  }\n}\n/**\n * find paired tag for a stop node\n * @param {string} xmlData \n * @param {string} tagName \n * @param {number} i \n */\nfunction readStopNodeData(xmlData, tagName, i){\n  const startIndex = i;\n  for (; i < xmlData.length; i++) {\n    if( xmlData[i] === \"<\" && xmlData[i+1] === \"/\"){ \n        const closeIndex = findClosingIndex(xmlData, \">\", i, `${tagName} is not closed`);\n        let closeTagName = xmlData.substring(i+2,closeIndex).trim();\n        if(closeTagName === tagName){\n          return {\n            tagContent: xmlData.substring(startIndex, i),\n            i : closeIndex\n          }\n        }\n        i=closeIndex;\n      }\n  }//end for loop\n}\n\nfunction parseValue(val, shouldParse, options) {\n  if (shouldParse && typeof val === 'string') {\n    //console.log(options)\n    const newval = val.trim();\n    if(newval === 'true' ) return true;\n    else if(newval === 'false' ) return false;\n    else return toNumber(val, options);\n  } else {\n    if (util.isExist(val)) {\n      return val;\n    } else {\n      return '';\n    }\n  }\n}\n\n\nmodule.exports = OrderedObjParser;\n","const { buildOptions} = require(\"./OptionsBuilder\");\nconst OrderedObjParser = require(\"./OrderedObjParser\");\nconst { prettify} = require(\"./node2json\");\nconst validator = require('../validator');\n\nclass XMLParser{\n    \n    constructor(options){\n        this.externalEntities = {};\n        this.options = buildOptions(options);\n        \n    }\n    /**\n     * Parse XML dats to JS object \n     * @param {string|Buffer} xmlData \n     * @param {boolean|Object} validationOption \n     */\n    parse(xmlData,validationOption){\n        if(typeof xmlData === \"string\"){\n        }else if( xmlData.toString){\n            xmlData = xmlData.toString();\n        }else{\n            throw new Error(\"XML data is accepted in String or Bytes[] form.\")\n        }\n        if( validationOption){\n            if(validationOption === true) validationOption = {}; //validate with default options\n            \n            const result = validator.validate(xmlData, validationOption);\n            if (result !== true) {\n              throw Error( `${result.err.msg}:${result.err.line}:${result.err.col}` )\n            }\n          }\n        const orderedObjParser = new OrderedObjParser(this.options);\n        orderedObjParser.addExternalEntities(this.externalEntities);\n        const orderedResult = orderedObjParser.parseXml(xmlData);\n        if(this.options.preserveOrder || orderedResult === undefined) return orderedResult;\n        else return prettify(orderedResult, this.options);\n    }\n\n    /**\n     * Add Entity which is not by default supported by this library\n     * @param {string} key \n     * @param {string} value \n     */\n    addEntity(key, value){\n        if(value.indexOf(\"&\") !== -1){\n            throw new Error(\"Entity value can't have '&'\")\n        }else if(key.indexOf(\"&\") !== -1 || key.indexOf(\";\") !== -1){\n            throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\")\n        }else{\n            this.externalEntities[key] = value;\n        }\n    }\n}\n\nmodule.exports = XMLParser;","'use strict';\n\n/**\n * \n * @param {array} node \n * @param {any} options \n * @returns \n */\nfunction prettify(node, options){\n  return compress( node, options);\n}\n\n/**\n * \n * @param {array} arr \n * @param {object} options \n * @param {string} jPath \n * @returns object\n */\nfunction compress(arr, options, jPath){\n  let text;\n  const compressedObj = {};\n  for (let i = 0; i < arr.length; i++) {\n    const tagObj = arr[i];\n    const property = propName(tagObj);\n    let newJpath = \"\";\n    if(jPath === undefined) newJpath = property;\n    else newJpath = jPath + \".\" + property;\n\n    if(property === options.textNodeName){\n      if(text === undefined) text = tagObj[property];\n      else text += \"\" + tagObj[property];\n    }else if(property === undefined){\n      continue;\n    }else if(tagObj[property]){\n      \n      let val = compress(tagObj[property], options, newJpath);\n      const isLeaf = isLeafTag(val, options);\n\n      if(tagObj[\":@\"]){\n        assignAttributes( val, tagObj[\":@\"], newJpath, options);\n      }else if(Object.keys(val).length === 1 && val[options.textNodeName] !== undefined && !options.alwaysCreateTextNode){\n        val = val[options.textNodeName];\n      }else if(Object.keys(val).length === 0){\n        if(options.alwaysCreateTextNode) val[options.textNodeName] = \"\";\n        else val = \"\";\n      }\n\n      if(compressedObj[property] !== undefined) {\n        if(!Array.isArray(compressedObj[property])) {\n          compressedObj[property] = [ compressedObj[property] ];\n        }\n        compressedObj[property].push(val);\n      }else{\n        //TODO: if a node is not an array, then check if it should be an array\n        //also determine if it is a leaf node\n        if (options.isArray(property, newJpath, isLeaf )) {\n          compressedObj[property] = [val];\n        }else{\n          compressedObj[property] = val;\n        }\n      }\n    }\n    \n  }\n  // if(text && text.length > 0) compressedObj[options.textNodeName] = text;\n  if(typeof text === \"string\"){\n    if(text.length > 0) compressedObj[options.textNodeName] = text;\n  }else if(text !== undefined) compressedObj[options.textNodeName] = text;\n  return compressedObj;\n}\n\nfunction propName(obj){\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if(key !== \":@\") return key;\n  }\n}\n\nfunction assignAttributes(obj, attrMap, jpath, options){\n  if (attrMap) {\n    const keys = Object.keys(attrMap);\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      const atrrName = keys[i];\n      if (options.isArray(atrrName, jpath + \".\" + atrrName, true, true)) {\n        obj[atrrName] = [ attrMap[atrrName] ];\n      } else {\n        obj[atrrName] = attrMap[atrrName];\n      }\n    }\n  }\n}\n\nfunction isLeafTag(obj, options){\n  const propCount = Object.keys(obj).length;\n  if( propCount === 0 || (propCount === 1 && obj[options.textNodeName]) ) return true;\n  return false;\n}\nexports.prettify = prettify;\n","'use strict';\n\nclass XmlNode{\n  constructor(tagname) {\n    this.tagname = tagname;\n    this.child = []; //nested tags, text, cdata, comments in order\n    this[\":@\"] = {}; //attributes map\n  }\n  add(key,val){\n    // this.child.push( {name : key, val: val, isCdata: isCdata });\n    this.child.push( {[key]: val });\n  }\n  addChild(node) {\n    if(node[\":@\"] && Object.keys(node[\":@\"]).length > 0){\n      this.child.push( { [node.tagname]: node.child, [\":@\"]: node[\":@\"] });\n    }else{\n      this.child.push( { [node.tagname]: node.child });\n    }\n  };\n};\n\n\nmodule.exports = XmlNode;","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar undefined;\n\nvar $SyntaxError = SyntaxError;\nvar $Function = Function;\nvar $TypeError = TypeError;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\nvar hasProto = require('has-proto')();\n\nvar getProto = Object.getPrototypeOf || (\n\thasProto\n\t\t? function (x) { return x.__proto__; } // eslint-disable-line no-proto\n\t\t: null\n);\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%ReferenceError%': ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\nvar test = {\n\tfoo: {}\n};\n\nvar $Object = Object;\n\nmodule.exports = function hasProto() {\n\treturn { __proto__: test }.foo === test.foo && !({ __proto__: null } instanceof $Object);\n};\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {(o: {}, p: PropertyKey) => p is keyof o} */\nmodule.exports = bind.call(call, $hasOwn);\n","'use strict';\n\nvar helpers = require('./helpers');\n\n/** @type ValidatorResult */\nvar ValidatorResult = helpers.ValidatorResult;\n/** @type SchemaError */\nvar SchemaError = helpers.SchemaError;\n\nvar attribute = {};\n\nattribute.ignoreProperties = {\n  // informative properties\n  'id': true,\n  'default': true,\n  'description': true,\n  'title': true,\n  // arguments to other properties\n  'additionalItems': true,\n  'then': true,\n  'else': true,\n  // special-handled properties\n  '$schema': true,\n  '$ref': true,\n  'extends': true,\n};\n\n/**\n * @name validators\n */\nvar validators = attribute.validators = {};\n\n/**\n * Validates whether the instance if of a certain type\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.type = function validateType (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var types = Array.isArray(schema.type) ? schema.type : [schema.type];\n  if (!types.some(this.testType.bind(this, instance, schema, options, ctx))) {\n    var list = types.map(function (v) {\n      if(!v) return;\n      var id = v.$id || v.id;\n      return id ? ('<' + id + '>') : (v+'');\n    });\n    result.addError({\n      name: 'type',\n      argument: list,\n      message: \"is not of a type(s) \" + list,\n    });\n  }\n  return result;\n};\n\nfunction testSchemaNoThrow(instance, options, ctx, callback, schema){\n  var throwError = options.throwError;\n  var throwAll = options.throwAll;\n  options.throwError = false;\n  options.throwAll = false;\n  var res = this.validateSchema(instance, schema, options, ctx);\n  options.throwError = throwError;\n  options.throwAll = throwAll;\n\n  if (!res.valid && callback instanceof Function) {\n    callback(res);\n  }\n  return res.valid;\n}\n\n/**\n * Validates whether the instance matches some of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.anyOf = function validateAnyOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  if (!Array.isArray(schema.anyOf)){\n    throw new SchemaError(\"anyOf must be an array\");\n  }\n  if (!schema.anyOf.some(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res){inner.importErrors(res);}\n    ))) {\n    var list = schema.anyOf.map(function (v, i) {\n      var id = v.$id || v.id;\n      if(id) return '<' + id + '>';\n      return(v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n    });\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'anyOf',\n      argument: list,\n      message: \"is not any of \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance matches every given schema\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.allOf = function validateAllOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.allOf)){\n    throw new SchemaError(\"allOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var self = this;\n  schema.allOf.forEach(function(v, i){\n    var valid = self.validateSchema(instance, v, options, ctx);\n    if(!valid.valid){\n      var id = v.$id || v.id;\n      var msg = id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n      result.addError({\n        name: 'allOf',\n        argument: { id: msg, length: valid.errors.length, valid: valid },\n        message: 'does not match allOf schema ' + msg + ' with ' + valid.errors.length + ' error[s]:',\n      });\n      result.importErrors(valid);\n    }\n  });\n  return result;\n};\n\n/**\n * Validates whether the instance matches exactly one of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.oneOf = function validateOneOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.oneOf)){\n    throw new SchemaError(\"oneOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  var count = schema.oneOf.filter(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res) {inner.importErrors(res);}\n    ) ).length;\n  var list = schema.oneOf.map(function (v, i) {\n    var id = v.$id || v.id;\n    return id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n  });\n  if (count!==1) {\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'oneOf',\n      argument: list,\n      message: \"is not exactly one from \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates \"then\" or \"else\" depending on the result of validating \"if\"\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.if = function validateIf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) return null;\n  if (!helpers.isSchema(schema.if)) throw new Error('Expected \"if\" keyword to be a schema');\n  var ifValid = testSchemaNoThrow.call(this, instance, options, ctx, null, schema.if);\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var res;\n  if(ifValid){\n    if (schema.then === undefined) return;\n    if (!helpers.isSchema(schema.then)) throw new Error('Expected \"then\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.then, options, ctx.makeChild(schema.then));\n    result.importErrors(res);\n  }else{\n    if (schema.else === undefined) return;\n    if (!helpers.isSchema(schema.else)) throw new Error('Expected \"else\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.else, options, ctx.makeChild(schema.else));\n    result.importErrors(res);\n  }\n  return result;\n};\n\nfunction getEnumerableProperty(object, key){\n  // Determine if `key` shows up in `for(var key in object)`\n  // First test Object.hasOwnProperty.call as an optimization: that guarantees it does\n  if(Object.hasOwnProperty.call(object, key)) return object[key];\n  // Test `key in object` as an optimization; false means it won't\n  if(!(key in object)) return;\n  while( (object = Object.getPrototypeOf(object)) ){\n    if(Object.propertyIsEnumerable.call(object, key)) return object[key];\n  }\n}\n\n/**\n * Validates propertyNames\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.propertyNames = function validatePropertyNames (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var subschema = schema.propertyNames!==undefined ? schema.propertyNames : {};\n  if(!helpers.isSchema(subschema)) throw new SchemaError('Expected \"propertyNames\" to be a schema (object or boolean)');\n\n  for (var property in instance) {\n    if(getEnumerableProperty(instance, property) !== undefined){\n      var res = this.validateSchema(property, subschema, options, ctx.makeChild(subschema));\n      result.importErrors(res);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates properties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.properties = function validateProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var properties = schema.properties || {};\n  for (var property in properties) {\n    var subschema = properties[property];\n    if(subschema===undefined){\n      continue;\n    }else if(subschema===null){\n      throw new SchemaError('Unexpected null, expected schema in \"properties\"');\n    }\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, subschema, options, ctx);\n    }\n    var prop = getEnumerableProperty(instance, property);\n    var res = this.validateSchema(prop, subschema, options, ctx.makeChild(subschema, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n  return result;\n};\n\n/**\n * Test a specific property within in instance against the additionalProperties schema attribute\n * This ignores properties with definitions in the properties schema attribute, but no other attributes.\n * If too many more types of property-existence tests pop up they may need their own class of tests (like `type` has)\n * @private\n * @return {boolean}\n */\nfunction testAdditionalProperty (instance, schema, options, ctx, property, result) {\n  if(!this.types.object(instance)) return;\n  if (schema.properties && schema.properties[property] !== undefined) {\n    return;\n  }\n  if (schema.additionalProperties === false) {\n    result.addError({\n      name: 'additionalProperties',\n      argument: property,\n      message: \"is not allowed to have the additional property \" + JSON.stringify(property),\n    });\n  } else {\n    var additionalProperties = schema.additionalProperties || {};\n\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, additionalProperties, options, ctx);\n    }\n\n    var res = this.validateSchema(instance[property], additionalProperties, options, ctx.makeChild(additionalProperties, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n}\n\n/**\n * Validates patternProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.patternProperties = function validatePatternProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var patternProperties = schema.patternProperties || {};\n\n  for (var property in instance) {\n    var test = true;\n    for (var pattern in patternProperties) {\n      var subschema = patternProperties[pattern];\n      if(subschema===undefined){\n        continue;\n      }else if(subschema===null){\n        throw new SchemaError('Unexpected null, expected schema in \"patternProperties\"');\n      }\n      try {\n        var regexp = new RegExp(pattern, 'u');\n      } catch(_e) {\n        // In the event the stricter handling causes an error, fall back on the forgiving handling\n        // DEPRECATED\n        regexp = new RegExp(pattern);\n      }\n      if (!regexp.test(property)) {\n        continue;\n      }\n      test = false;\n\n      if (typeof options.preValidateProperty == 'function') {\n        options.preValidateProperty(instance, property, subschema, options, ctx);\n      }\n\n      var res = this.validateSchema(instance[property], subschema, options, ctx.makeChild(subschema, property));\n      if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n      result.importErrors(res);\n    }\n    if (test) {\n      testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates additionalProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.additionalProperties = function validateAdditionalProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  // if patternProperties is defined then we'll test when that one is called instead\n  if (schema.patternProperties) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in instance) {\n    testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minProperties = function validateMinProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length >= schema.minProperties)) {\n    result.addError({\n      name: 'minProperties',\n      argument: schema.minProperties,\n      message: \"does not meet minimum property length of \" + schema.minProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxProperties = function validateMaxProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length <= schema.maxProperties)) {\n    result.addError({\n      name: 'maxProperties',\n      argument: schema.maxProperties,\n      message: \"does not meet maximum property length of \" + schema.maxProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates items when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.items = function validateItems (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.items===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  instance.every(function (value, i) {\n    if(Array.isArray(schema.items)){\n      var items =  schema.items[i]===undefined ? schema.additionalItems : schema.items[i];\n    }else{\n      var items = schema.items;\n    }\n    if (items === undefined) {\n      return true;\n    }\n    if (items === false) {\n      result.addError({\n        name: 'items',\n        message: \"additionalItems not permitted\",\n      });\n      return false;\n    }\n    var res = self.validateSchema(value, items, options, ctx.makeChild(items, i));\n    if(res.instance !== result.instance[i]) result.instance[i] = res.instance;\n    result.importErrors(res);\n    return true;\n  });\n  return result;\n};\n\n/**\n * Validates the \"contains\" keyword\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.contains = function validateContains (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.contains===undefined) return;\n  if (!helpers.isSchema(schema.contains)) throw new Error('Expected \"contains\" keyword to be a schema');\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var count = instance.some(function (value, i) {\n    var res = self.validateSchema(value, schema.contains, options, ctx.makeChild(schema.contains, i));\n    return res.errors.length===0;\n  });\n  if(count===false){\n    result.addError({\n      name: 'contains',\n      argument: schema.contains,\n      message: \"must contain an item matching given schema\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates minimum and exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minimum = function validateMinimum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMinimum && schema.exclusiveMinimum === true) {\n    if(!(instance > schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than \" + schema.minimum,\n      });\n    }\n  } else {\n    if(!(instance >= schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than or equal to \" + schema.minimum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates maximum and exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maximum = function validateMaximum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMaximum && schema.exclusiveMaximum === true) {\n    if(!(instance < schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than \" + schema.maximum,\n      });\n    }\n  } else {\n    if(!(instance <= schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than or equal to \" + schema.maximum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMinimum = function validateExclusiveMinimum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMinimum, which is handled by the \"minimum\" keyword.\n  if(typeof schema.exclusiveMinimum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance > schema.exclusiveMinimum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMinimum',\n      argument: schema.exclusiveMinimum,\n      message: \"must be strictly greater than \" + schema.exclusiveMinimum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMaximum = function validateExclusiveMaximum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMaximum, which is handled by the \"maximum\" keyword.\n  if(typeof schema.exclusiveMaximum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance < schema.exclusiveMaximum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMaximum',\n      argument: schema.exclusiveMaximum,\n      message: \"must be strictly less than \" + schema.exclusiveMaximum,\n    });\n  }\n  return result;\n};\n\n/**\n * Perform validation for multipleOf and divisibleBy, which are essentially the same.\n * @param instance\n * @param schema\n * @param validationType\n * @param errorMessage\n * @returns {String|null}\n */\nvar validateMultipleOfOrDivisbleBy = function validateMultipleOfOrDivisbleBy (instance, schema, options, ctx, validationType, errorMessage) {\n  if (!this.types.number(instance)) return;\n\n  var validationArgument = schema[validationType];\n  if (validationArgument == 0) {\n    throw new SchemaError(validationType + \" cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  var instanceDecimals = helpers.getDecimalPlaces(instance);\n  var divisorDecimals = helpers.getDecimalPlaces(validationArgument);\n\n  var maxDecimals = Math.max(instanceDecimals , divisorDecimals);\n  var multiplier = Math.pow(10, maxDecimals);\n\n  if (Math.round(instance * multiplier) % Math.round(validationArgument * multiplier) !== 0) {\n    result.addError({\n      name: validationType,\n      argument:  validationArgument,\n      message: errorMessage + JSON.stringify(validationArgument),\n    });\n  }\n\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.multipleOf = function validateMultipleOf (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"multipleOf\", \"is not a multiple of (divisible by) \");\n};\n\n/**\n * Validates multipleOf when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.divisibleBy = function validateDivisibleBy (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"divisibleBy\", \"is not divisible by (multiple of) \");\n};\n\n/**\n * Validates whether the instance value is present.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.required = function validateRequired (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined && schema.required === true) {\n    // A boolean form is implemented for reverse-compatibility with schemas written against older drafts\n    result.addError({\n      name: 'required',\n      message: \"is required\",\n    });\n  } else if (this.types.object(instance) && Array.isArray(schema.required)) {\n    schema.required.forEach(function(n){\n      if(getEnumerableProperty(instance, n)===undefined){\n        result.addError({\n          name: 'required',\n          argument: n,\n          message: \"requires property \" + JSON.stringify(n),\n        });\n      }\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value matches the regular expression, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.pattern = function validatePattern (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var pattern = schema.pattern;\n  try {\n    var regexp = new RegExp(pattern, 'u');\n  } catch(_e) {\n    // In the event the stricter handling causes an error, fall back on the forgiving handling\n    // DEPRECATED\n    regexp = new RegExp(pattern);\n  }\n  if (!instance.match(regexp)) {\n    result.addError({\n      name: 'pattern',\n      argument: schema.pattern,\n      message: \"does not match pattern \" + JSON.stringify(schema.pattern.toString()),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is of a certain defined format or a custom\n * format.\n * The following formats are supported for string types:\n *   - date-time\n *   - date\n *   - time\n *   - ip-address\n *   - ipv6\n *   - uri\n *   - color\n *   - host-name\n *   - alpha\n *   - alpha-numeric\n *   - utc-millisec\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {String|null}\n */\nvalidators.format = function validateFormat (instance, schema, options, ctx) {\n  if (instance===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!result.disableFormat && !helpers.isFormat(instance, schema.format, this)) {\n    result.addError({\n      name: 'format',\n      argument: schema.format,\n      message: \"does not conform to the \" + JSON.stringify(schema.format) + \" format\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minLength = function validateMinLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length >= schema.minLength)) {\n    result.addError({\n      name: 'minLength',\n      argument: schema.minLength,\n      message: \"does not meet minimum length of \" + schema.minLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxLength = function validateMaxLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  // TODO if this was already computed in \"minLength\", use that value instead of re-computing\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length <= schema.maxLength)) {\n    result.addError({\n      name: 'maxLength',\n      argument: schema.maxLength,\n      message: \"does not meet maximum length of \" + schema.maxLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains at least a minimum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minItems = function validateMinItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minItems)) {\n    result.addError({\n      name: 'minItems',\n      argument: schema.minItems,\n      message: \"does not meet minimum length of \" + schema.minItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains no more than a maximum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxItems = function validateMaxItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxItems)) {\n    result.addError({\n      name: 'maxItems',\n      argument: schema.maxItems,\n      message: \"does not meet maximum length of \" + schema.maxItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Deep compares arrays for duplicates\n * @param v\n * @param i\n * @param a\n * @private\n * @return {boolean}\n */\nfunction testArrays (v, i, a) {\n  var j, len = a.length;\n  for (j = i + 1, len; j < len; j++) {\n    if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Validates whether there are no duplicates, when the instance is an Array.\n * @param instance\n * @return {String|null}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (schema.uniqueItems!==true) return;\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validate for the presence of dependency properties, if the instance is an object.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.dependencies = function validateDependencies (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in schema.dependencies) {\n    if (instance[property] === undefined) {\n      continue;\n    }\n    var dep = schema.dependencies[property];\n    var childContext = ctx.makeChild(dep, property);\n    if (typeof dep == 'string') {\n      dep = [dep];\n    }\n    if (Array.isArray(dep)) {\n      dep.forEach(function (prop) {\n        if (instance[prop] === undefined) {\n          result.addError({\n            // FIXME there's two different \"dependencies\" errors here with slightly different outputs\n            // Can we make these the same? Or should we create different error types?\n            name: 'dependencies',\n            argument: childContext.propertyPath,\n            message: \"property \" + prop + \" not found, required by \" + childContext.propertyPath,\n          });\n        }\n      });\n    } else {\n      var res = this.validateSchema(instance, dep, options, childContext);\n      if(result.instance !== res.instance) result.instance = res.instance;\n      if (res && res.errors.length) {\n        result.addError({\n          name: 'dependencies',\n          argument: childContext.propertyPath,\n          message: \"does not meet dependency required by \" + childContext.propertyPath,\n        });\n        result.importErrors(res);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is one of the enumerated values.\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['enum'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema['enum'])) {\n    throw new SchemaError(\"enum expects an array\", schema);\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema['enum'].some(helpers.deepCompareStrict.bind(null, instance))) {\n    result.addError({\n      name: 'enum',\n      argument: schema['enum'],\n      message: \"is not one of enum values: \" + schema['enum'].map(String).join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance exactly matches a given value\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['const'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!helpers.deepCompareStrict(schema['const'], instance)) {\n    result.addError({\n      name: 'const',\n      argument: schema['const'],\n      message: \"does not exactly match expected constant: \" + schema['const'],\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance if of a prohibited type.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.not = validators.disallow = function validateNot (instance, schema, options, ctx) {\n  var self = this;\n  if(instance===undefined) return null;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var notTypes = schema.not || schema.disallow;\n  if(!notTypes) return null;\n  if(!Array.isArray(notTypes)) notTypes=[notTypes];\n  notTypes.forEach(function (type) {\n    if (self.testType(instance, schema, options, ctx, type)) {\n      var id = type && (type.$id || type.id);\n      var schemaId = id || type;\n      result.addError({\n        name: 'not',\n        argument: schemaId,\n        message: \"is of prohibited type \" + schemaId,\n      });\n    }\n  });\n  return result;\n};\n\nmodule.exports = attribute;\n","'use strict';\n\nvar uri = require('url');\n\nvar ValidationError = exports.ValidationError = function ValidationError (message, instance, schema, path, name, argument) {\n  if(Array.isArray(path)){\n    this.path = path;\n    this.property = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else if(path !== undefined){\n    this.property = path;\n  }\n  if (message) {\n    this.message = message;\n  }\n  if (schema) {\n    var id = schema.$id || schema.id;\n    this.schema = id || schema;\n  }\n  if (instance !== undefined) {\n    this.instance = instance;\n  }\n  this.name = name;\n  this.argument = argument;\n  this.stack = this.toString();\n};\n\nValidationError.prototype.toString = function toString() {\n  return this.property + ' ' + this.message;\n};\n\nvar ValidatorResult = exports.ValidatorResult = function ValidatorResult(instance, schema, options, ctx) {\n  this.instance = instance;\n  this.schema = schema;\n  this.options = options;\n  this.path = ctx.path;\n  this.propertyPath = ctx.propertyPath;\n  this.errors = [];\n  this.throwError = options && options.throwError;\n  this.throwFirst = options && options.throwFirst;\n  this.throwAll = options && options.throwAll;\n  this.disableFormat = options && options.disableFormat === true;\n};\n\nValidatorResult.prototype.addError = function addError(detail) {\n  var err;\n  if (typeof detail == 'string') {\n    err = new ValidationError(detail, this.instance, this.schema, this.path);\n  } else {\n    if (!detail) throw new Error('Missing error detail');\n    if (!detail.message) throw new Error('Missing error message');\n    if (!detail.name) throw new Error('Missing validator type');\n    err = new ValidationError(detail.message, this.instance, this.schema, this.path, detail.name, detail.argument);\n  }\n\n  this.errors.push(err);\n  if (this.throwFirst) {\n    throw new ValidatorResultError(this);\n  }else if(this.throwError){\n    throw err;\n  }\n  return err;\n};\n\nValidatorResult.prototype.importErrors = function importErrors(res) {\n  if (typeof res == 'string' || (res && res.validatorType)) {\n    this.addError(res);\n  } else if (res && res.errors) {\n    this.errors = this.errors.concat(res.errors);\n  }\n};\n\nfunction stringizer (v,i){\n  return i+': '+v.toString()+'\\n';\n}\nValidatorResult.prototype.toString = function toString(res) {\n  return this.errors.map(stringizer).join('');\n};\n\nObject.defineProperty(ValidatorResult.prototype, \"valid\", { get: function() {\n  return !this.errors.length;\n} });\n\nmodule.exports.ValidatorResultError = ValidatorResultError;\nfunction ValidatorResultError(result) {\n  if(Error.captureStackTrace){\n    Error.captureStackTrace(this, ValidatorResultError);\n  }\n  this.instance = result.instance;\n  this.schema = result.schema;\n  this.options = result.options;\n  this.errors = result.errors;\n}\nValidatorResultError.prototype = new Error();\nValidatorResultError.prototype.constructor = ValidatorResultError;\nValidatorResultError.prototype.name = \"Validation Error\";\n\n/**\n * Describes a problem with a Schema which prevents validation of an instance\n * @name SchemaError\n * @constructor\n */\nvar SchemaError = exports.SchemaError = function SchemaError (msg, schema) {\n  this.message = msg;\n  this.schema = schema;\n  Error.call(this, msg);\n  Error.captureStackTrace(this, SchemaError);\n};\nSchemaError.prototype = Object.create(Error.prototype,\n  {\n    constructor: {value: SchemaError, enumerable: false},\n    name: {value: 'SchemaError', enumerable: false},\n  });\n\nvar SchemaContext = exports.SchemaContext = function SchemaContext (schema, options, path, base, schemas) {\n  this.schema = schema;\n  this.options = options;\n  if(Array.isArray(path)){\n    this.path = path;\n    this.propertyPath = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else{\n    this.propertyPath = path;\n  }\n  this.base = base;\n  this.schemas = schemas;\n};\n\nSchemaContext.prototype.resolve = function resolve (target) {\n  return uri.resolve(this.base, target);\n};\n\nSchemaContext.prototype.makeChild = function makeChild(schema, propertyName){\n  var path = (propertyName===undefined) ? this.path : this.path.concat([propertyName]);\n  var id = schema.$id || schema.id;\n  var base = uri.resolve(this.base, id||'');\n  var ctx = new SchemaContext(schema, this.options, path, base, Object.create(this.schemas));\n  if(id && !ctx.schemas[base]){\n    ctx.schemas[base] = schema;\n  }\n  return ctx;\n};\n\nvar FORMAT_REGEXPS = exports.FORMAT_REGEXPS = {\n  // 7.3.1. Dates, Times, and Duration\n  'date-time': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\\.\\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,\n  'date': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,\n  'time': /^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,\n  'duration': /P(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S)|\\d+(D|M(\\d+D)?|Y(\\d+M(\\d+D)?)?)(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S))?|\\d+W)/i,\n\n  // 7.3.2. Email Addresses\n  // TODO: fix the email production\n  'email': /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/,\n  'idn-email': /^(\"(?:[!#-\\[\\]-\\u{10FFFF}]|\\\\[\\t -\\u{10FFFF}])*\"|[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*)@([!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*|\\[[!-Z\\^-\\u{10FFFF}]*\\])$/u,\n\n  // 7.3.3. Hostnames\n\n  // 7.3.4. IP Addresses\n  'ip-address': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n  // FIXME whitespace is invalid\n  'ipv6': /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/,\n\n  // 7.3.5. Resource Identifiers\n  // TODO: A more accurate regular expression for \"uri\" goes:\n  // [A-Za-z][+\\-.0-9A-Za-z]*:((/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?)?#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])|/?%[0-9A-Fa-f]{2}|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*(#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?)?\n  'uri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'uri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/,\n  'iri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'iri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\\u{10FFFF}]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/u,\n  'uuid': /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n\n  // 7.3.6. uri-template\n  'uri-template': /(%[0-9a-f]{2}|[!#$&(-;=?@\\[\\]_a-z~]|\\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?)*\\})*/iu,\n\n  // 7.3.7. JSON Pointers\n  'json-pointer': /^(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*$/iu,\n  'relative-json-pointer': /^\\d+(#|(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*)$/iu,\n\n  // hostname regex from: http://stackoverflow.com/a/1420225/5628\n  'hostname': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n  'host-name': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n\n  'utc-millisec': function (input) {\n    return (typeof input === 'string') && parseFloat(input) === parseInt(input, 10) && !isNaN(input);\n  },\n\n  // 7.3.8. regex\n  'regex': function (input) {\n    var result = true;\n    try {\n      new RegExp(input);\n    } catch (e) {\n      result = false;\n    }\n    return result;\n  },\n\n  // Other definitions\n  // \"style\" was removed from JSON Schema in draft-4 and is deprecated\n  'style': /[\\r\\n\\t ]*[^\\r\\n\\t ][^:]*:[\\r\\n\\t ]*[^\\r\\n\\t ;]*[\\r\\n\\t ]*;?/,\n  // \"color\" was removed from JSON Schema in draft-4 and is deprecated\n  'color': /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/,\n  'phone': /^\\+(?:[0-9] ?){6,14}[0-9]$/,\n  'alpha': /^[a-zA-Z]+$/,\n  'alphanumeric': /^[a-zA-Z0-9]+$/,\n};\n\nFORMAT_REGEXPS.regexp = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.pattern = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.ipv4 = FORMAT_REGEXPS['ip-address'];\n\nexports.isFormat = function isFormat (input, format, validator) {\n  if (typeof input === 'string' && FORMAT_REGEXPS[format] !== undefined) {\n    if (FORMAT_REGEXPS[format] instanceof RegExp) {\n      return FORMAT_REGEXPS[format].test(input);\n    }\n    if (typeof FORMAT_REGEXPS[format] === 'function') {\n      return FORMAT_REGEXPS[format](input);\n    }\n  } else if (validator && validator.customFormats &&\n      typeof validator.customFormats[format] === 'function') {\n    return validator.customFormats[format](input);\n  }\n  return true;\n};\n\nvar makeSuffix = exports.makeSuffix = function makeSuffix (key) {\n  key = key.toString();\n  // This function could be capable of outputting valid a ECMAScript string, but the\n  // resulting code for testing which form to use would be tens of thousands of characters long\n  // That means this will use the name form for some illegal forms\n  if (!key.match(/[.\\s\\[\\]]/) && !key.match(/^[\\d]/)) {\n    return '.' + key;\n  }\n  if (key.match(/^\\d+$/)) {\n    return '[' + key + ']';\n  }\n  return '[' + JSON.stringify(key) + ']';\n};\n\nexports.deepCompareStrict = function deepCompareStrict (a, b) {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    return a.every(function (v, i) {\n      return deepCompareStrict(a[i], b[i]);\n    });\n  }\n  if (typeof a === 'object') {\n    if (!a || !b) {\n      return a === b;\n    }\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    return aKeys.every(function (v) {\n      return deepCompareStrict(a[v], b[v]);\n    });\n  }\n  return a === b;\n};\n\nfunction deepMerger (target, dst, e, i) {\n  if (typeof e === 'object') {\n    dst[i] = deepMerge(target[i], e);\n  } else {\n    if (target.indexOf(e) === -1) {\n      dst.push(e);\n    }\n  }\n}\n\nfunction copyist (src, dst, key) {\n  dst[key] = src[key];\n}\n\nfunction copyistWithDeepMerge (target, src, dst, key) {\n  if (typeof src[key] !== 'object' || !src[key]) {\n    dst[key] = src[key];\n  }\n  else {\n    if (!target[key]) {\n      dst[key] = src[key];\n    } else {\n      dst[key] = deepMerge(target[key], src[key]);\n    }\n  }\n}\n\nfunction deepMerge (target, src) {\n  var array = Array.isArray(src);\n  var dst = array && [] || {};\n\n  if (array) {\n    target = target || [];\n    dst = dst.concat(target);\n    src.forEach(deepMerger.bind(null, target, dst));\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(copyist.bind(null, target, dst));\n    }\n    Object.keys(src).forEach(copyistWithDeepMerge.bind(null, target, src, dst));\n  }\n\n  return dst;\n}\n\nmodule.exports.deepMerge = deepMerge;\n\n/**\n * Validates instance against the provided schema\n * Implements URI+JSON Pointer encoding, e.g. \"%7e\"=\"~0\"=>\"~\", \"~1\"=\"%2f\"=>\"/\"\n * @param o\n * @param s The path to walk o along\n * @return any\n */\nexports.objectGetPath = function objectGetPath(o, s) {\n  var parts = s.split('/').slice(1);\n  var k;\n  while (typeof (k=parts.shift()) == 'string') {\n    var n = decodeURIComponent(k.replace(/~0/,'~').replace(/~1/g,'/'));\n    if (!(n in o)) return;\n    o = o[n];\n  }\n  return o;\n};\n\nfunction pathEncoder (v) {\n  return '/'+encodeURIComponent(v).replace(/~/g,'%7E');\n}\n/**\n * Accept an Array of property names and return a JSON Pointer URI fragment\n * @param Array a\n * @return {String}\n */\nexports.encodePath = function encodePointer(a){\n  // ~ must be encoded explicitly because hacks\n  // the slash is encoded by encodeURIComponent\n  return a.map(pathEncoder).join('');\n};\n\n\n/**\n * Calculate the number of decimal places a number uses\n * We need this to get correct results out of multipleOf and divisibleBy\n * when either figure is has decimal places, due to IEEE-754 float issues.\n * @param number\n * @returns {number}\n */\nexports.getDecimalPlaces = function getDecimalPlaces(number) {\n\n  var decimalPlaces = 0;\n  if (isNaN(number)) return decimalPlaces;\n\n  if (typeof number !== 'number') {\n    number = Number(number);\n  }\n\n  var parts = number.toString().split('e');\n  if (parts.length === 2) {\n    if (parts[1][0] !== '-') {\n      return decimalPlaces;\n    } else {\n      decimalPlaces = Number(parts[1].slice(1));\n    }\n  }\n\n  var decimalParts = parts[0].split('.');\n  if (decimalParts.length === 2) {\n    decimalPlaces += decimalParts[1].length;\n  }\n\n  return decimalPlaces;\n};\n\nexports.isSchema = function isSchema(val){\n  return (typeof val === 'object' && val) || (typeof val === 'boolean');\n};\n\n","'use strict';\n\nvar Validator = module.exports.Validator = require('./validator');\n\nmodule.exports.ValidatorResult = require('./helpers').ValidatorResult;\nmodule.exports.ValidatorResultError = require('./helpers').ValidatorResultError;\nmodule.exports.ValidationError = require('./helpers').ValidationError;\nmodule.exports.SchemaError = require('./helpers').SchemaError;\nmodule.exports.SchemaScanResult = require('./scan').SchemaScanResult;\nmodule.exports.scan = require('./scan').scan;\n\nmodule.exports.validate = function (instance, schema, options) {\n  var v = new Validator();\n  return v.validate(instance, schema, options);\n};\n","\"use strict\";\n\nvar urilib = require('url');\nvar helpers = require('./helpers');\n\nmodule.exports.SchemaScanResult = SchemaScanResult;\nfunction SchemaScanResult(found, ref){\n  this.id = found;\n  this.ref = ref;\n}\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param string uri\n * @param object schema\n * @return {Object}\n */\nmodule.exports.scan = function scan(base, schema){\n  function scanSchema(baseuri, schema){\n    if(!schema || typeof schema!='object') return;\n    // Mark all referenced schemas so we can tell later which schemas are referred to, but never defined\n    if(schema.$ref){\n      var resolvedUri = urilib.resolve(baseuri, schema.$ref);\n      ref[resolvedUri] = ref[resolvedUri] ? ref[resolvedUri]+1 : 0;\n      return;\n    }\n    var id = schema.$id || schema.id;\n    var ourBase = id ? urilib.resolve(baseuri, id) : baseuri;\n    if (ourBase) {\n      // If there's no fragment, append an empty one\n      if(ourBase.indexOf('#')<0) ourBase += '#';\n      if(found[ourBase]){\n        if(!helpers.deepCompareStrict(found[ourBase], schema)){\n          throw new Error('Schema <'+ourBase+'> already exists with different definition');\n        }\n        return found[ourBase];\n      }\n      found[ourBase] = schema;\n      // strip trailing fragment\n      if(ourBase[ourBase.length-1]=='#'){\n        found[ourBase.substring(0, ourBase.length-1)] = schema;\n      }\n    }\n    scanArray(ourBase+'/items', (Array.isArray(schema.items)?schema.items:[schema.items]));\n    scanArray(ourBase+'/extends', (Array.isArray(schema.extends)?schema.extends:[schema.extends]));\n    scanSchema(ourBase+'/additionalItems', schema.additionalItems);\n    scanObject(ourBase+'/properties', schema.properties);\n    scanSchema(ourBase+'/additionalProperties', schema.additionalProperties);\n    scanObject(ourBase+'/definitions', schema.definitions);\n    scanObject(ourBase+'/patternProperties', schema.patternProperties);\n    scanObject(ourBase+'/dependencies', schema.dependencies);\n    scanArray(ourBase+'/disallow', schema.disallow);\n    scanArray(ourBase+'/allOf', schema.allOf);\n    scanArray(ourBase+'/anyOf', schema.anyOf);\n    scanArray(ourBase+'/oneOf', schema.oneOf);\n    scanSchema(ourBase+'/not', schema.not);\n  }\n  function scanArray(baseuri, schemas){\n    if(!Array.isArray(schemas)) return;\n    for(var i=0; i<schemas.length; i++){\n      scanSchema(baseuri+'/'+i, schemas[i]);\n    }\n  }\n  function scanObject(baseuri, schemas){\n    if(!schemas || typeof schemas!='object') return;\n    for(var p in schemas){\n      scanSchema(baseuri+'/'+p, schemas[p]);\n    }\n  }\n\n  var found = {};\n  var ref = {};\n  scanSchema(base, schema);\n  return new SchemaScanResult(found, ref);\n};\n","'use strict';\n\nvar urilib = require('url');\n\nvar attribute = require('./attribute');\nvar helpers = require('./helpers');\nvar scanSchema = require('./scan').scan;\nvar ValidatorResult = helpers.ValidatorResult;\nvar ValidatorResultError = helpers.ValidatorResultError;\nvar SchemaError = helpers.SchemaError;\nvar SchemaContext = helpers.SchemaContext;\n//var anonymousBase = 'vnd.jsonschema:///';\nvar anonymousBase = '/';\n\n/**\n * Creates a new Validator object\n * @name Validator\n * @constructor\n */\nvar Validator = function Validator () {\n  // Allow a validator instance to override global custom formats or to have their\n  // own custom formats.\n  this.customFormats = Object.create(Validator.prototype.customFormats);\n  this.schemas = {};\n  this.unresolvedRefs = [];\n\n  // Use Object.create to make this extensible without Validator instances stepping on each other's toes.\n  this.types = Object.create(types);\n  this.attributes = Object.create(attribute.validators);\n};\n\n// Allow formats to be registered globally.\nValidator.prototype.customFormats = {};\n\n// Hint at the presence of a property\nValidator.prototype.schemas = null;\nValidator.prototype.types = null;\nValidator.prototype.attributes = null;\nValidator.prototype.unresolvedRefs = null;\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param schema\n * @param urn\n * @return {Object}\n */\nValidator.prototype.addSchema = function addSchema (schema, base) {\n  var self = this;\n  if (!schema) {\n    return null;\n  }\n  var scan = scanSchema(base||anonymousBase, schema);\n  var ourUri = base || schema.$id || schema.id;\n  for(var uri in scan.id){\n    this.schemas[uri] = scan.id[uri];\n  }\n  for(var uri in scan.ref){\n    // If this schema is already defined, it will be filtered out by the next step\n    this.unresolvedRefs.push(uri);\n  }\n  // Remove newly defined schemas from unresolvedRefs\n  this.unresolvedRefs = this.unresolvedRefs.filter(function(uri){\n    return typeof self.schemas[uri]==='undefined';\n  });\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchemaArray = function addSubSchemaArray(baseuri, schemas) {\n  if(!Array.isArray(schemas)) return;\n  for(var i=0; i<schemas.length; i++){\n    this.addSubSchema(baseuri, schemas[i]);\n  }\n};\n\nValidator.prototype.addSubSchemaObject = function addSubSchemaArray(baseuri, schemas) {\n  if(!schemas || typeof schemas!='object') return;\n  for(var p in schemas){\n    this.addSubSchema(baseuri, schemas[p]);\n  }\n};\n\n\n\n/**\n * Sets all the schemas of the Validator instance.\n * @param schemas\n */\nValidator.prototype.setSchemas = function setSchemas (schemas) {\n  this.schemas = schemas;\n};\n\n/**\n * Returns the schema of a certain urn\n * @param urn\n */\nValidator.prototype.getSchema = function getSchema (urn) {\n  return this.schemas[urn];\n};\n\n/**\n * Validates instance against the provided schema\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {Array}\n */\nValidator.prototype.validate = function validate (instance, schema, options, ctx) {\n  if((typeof schema !== 'boolean' && typeof schema !== 'object') || schema === null){\n    throw new SchemaError('Expected `schema` to be an object or boolean');\n  }\n  if (!options) {\n    options = {};\n  }\n  // This section indexes subschemas in the provided schema, so they don't need to be added with Validator#addSchema\n  // This will work so long as the function at uri.resolve() will resolve a relative URI to a relative URI\n  var id = schema.$id || schema.id;\n  var base = urilib.resolve(options.base||anonymousBase, id||'');\n  if(!ctx){\n    ctx = new SchemaContext(schema, options, [], base, Object.create(this.schemas));\n    if (!ctx.schemas[base]) {\n      ctx.schemas[base] = schema;\n    }\n    var found = scanSchema(base, schema);\n    for(var n in found.id){\n      var sch = found.id[n];\n      ctx.schemas[n] = sch;\n    }\n  }\n  if(options.required && instance===undefined){\n    var result = new ValidatorResult(instance, schema, options, ctx);\n    result.addError('is required, but is undefined');\n    return result;\n  }\n  var result = this.validateSchema(instance, schema, options, ctx);\n  if (!result) {\n    throw new Error('Result undefined');\n  }else if(options.throwAll && result.errors.length){\n    throw new ValidatorResultError(result);\n  }\n  return result;\n};\n\n/**\n* @param Object schema\n* @return mixed schema uri or false\n*/\nfunction shouldResolve(schema) {\n  var ref = (typeof schema === 'string') ? schema : schema.$ref;\n  if (typeof ref=='string') return ref;\n  return false;\n}\n\n/**\n * Validates an instance against the schema (the actual work horse)\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @private\n * @return {ValidatorResult}\n */\nValidator.prototype.validateSchema = function validateSchema (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  // Support for the true/false schemas\n  if(typeof schema==='boolean') {\n    if(schema===true){\n      // `true` is always valid\n      schema = {};\n    }else if(schema===false){\n      // `false` is always invalid\n      schema = {type: []};\n    }\n  }else if(!schema){\n    // This might be a string\n    throw new Error(\"schema is undefined\");\n  }\n\n  if (schema['extends']) {\n    if (Array.isArray(schema['extends'])) {\n      var schemaobj = {schema: schema, ctx: ctx};\n      schema['extends'].forEach(this.schemaTraverser.bind(this, schemaobj));\n      schema = schemaobj.schema;\n      schemaobj.schema = null;\n      schemaobj.ctx = null;\n      schemaobj = null;\n    } else {\n      schema = helpers.deepMerge(schema, this.superResolve(schema['extends'], ctx));\n    }\n  }\n\n  // If passed a string argument, load that schema URI\n  var switchSchema = shouldResolve(schema);\n  if (switchSchema) {\n    var resolved = this.resolve(schema, switchSchema, ctx);\n    var subctx = new SchemaContext(resolved.subschema, options, ctx.path, resolved.switchSchema, ctx.schemas);\n    return this.validateSchema(instance, resolved.subschema, options, subctx);\n  }\n\n  var skipAttributes = options && options.skipAttributes || [];\n  // Validate each schema attribute against the instance\n  for (var key in schema) {\n    if (!attribute.ignoreProperties[key] && skipAttributes.indexOf(key) < 0) {\n      var validatorErr = null;\n      var validator = this.attributes[key];\n      if (validator) {\n        validatorErr = validator.call(this, instance, schema, options, ctx);\n      } else if (options.allowUnknownAttributes === false) {\n        // This represents an error with the schema itself, not an invalid instance\n        throw new SchemaError(\"Unsupported attribute: \" + key, schema);\n      }\n      if (validatorErr) {\n        result.importErrors(validatorErr);\n      }\n    }\n  }\n\n  if (typeof options.rewrite == 'function') {\n    var value = options.rewrite.call(this, instance, schema, options, ctx);\n    result.instance = value;\n  }\n  return result;\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.schemaTraverser = function schemaTraverser (schemaobj, s) {\n  schemaobj.schema = helpers.deepMerge(schemaobj.schema, this.superResolve(s, schemaobj.ctx));\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.superResolve = function superResolve (schema, ctx) {\n  var ref = shouldResolve(schema);\n  if(ref) {\n    return this.resolve(schema, ref, ctx).subschema;\n  }\n  return schema;\n};\n\n/**\n* @private\n* @param Object schema\n* @param Object switchSchema\n* @param SchemaContext ctx\n* @return Object resolved schemas {subschema:String, switchSchema: String}\n* @throws SchemaError\n*/\nValidator.prototype.resolve = function resolve (schema, switchSchema, ctx) {\n  switchSchema = ctx.resolve(switchSchema);\n  // First see if the schema exists under the provided URI\n  if (ctx.schemas[switchSchema]) {\n    return {subschema: ctx.schemas[switchSchema], switchSchema: switchSchema};\n  }\n  // Else try walking the property pointer\n  var parsed = urilib.parse(switchSchema);\n  var fragment = parsed && parsed.hash;\n  var document = fragment && fragment.length && switchSchema.substr(0, switchSchema.length - fragment.length);\n  if (!document || !ctx.schemas[document]) {\n    throw new SchemaError(\"no such schema <\" + switchSchema + \">\", schema);\n  }\n  var subschema = helpers.objectGetPath(ctx.schemas[document], fragment.substr(1));\n  if(subschema===undefined){\n    throw new SchemaError(\"no such schema \" + fragment + \" located in <\" + document + \">\", schema);\n  }\n  return {subschema: subschema, switchSchema: switchSchema};\n};\n\n/**\n * Tests whether the instance if of a certain type.\n * @private\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @param type\n * @return {boolean}\n */\nValidator.prototype.testType = function validateType (instance, schema, options, ctx, type) {\n  if(type===undefined){\n    return;\n  }else if(type===null){\n    throw new SchemaError('Unexpected null in \"type\" keyword');\n  }\n  if (typeof this.types[type] == 'function') {\n    return this.types[type].call(this, instance);\n  }\n  if (type && typeof type == 'object') {\n    var res = this.validateSchema(instance, type, options, ctx);\n    return res === undefined || !(res && res.errors.length);\n  }\n  // Undefined or properties not on the list are acceptable, same as not being defined\n  return true;\n};\n\nvar types = Validator.prototype.types = {};\ntypes.string = function testString (instance) {\n  return typeof instance == 'string';\n};\ntypes.number = function testNumber (instance) {\n  // isFinite returns false for NaN, Infinity, and -Infinity\n  return typeof instance == 'number' && isFinite(instance);\n};\ntypes.integer = function testInteger (instance) {\n  return (typeof instance == 'number') && instance % 1 === 0;\n};\ntypes.boolean = function testBoolean (instance) {\n  return typeof instance == 'boolean';\n};\ntypes.array = function testArray (instance) {\n  return Array.isArray(instance);\n};\ntypes['null'] = function testNull (instance) {\n  return instance === null;\n};\ntypes.date = function testDate (instance) {\n  return instance instanceof Date;\n};\ntypes.any = function testAny (instance) {\n  return true;\n};\ntypes.object = function testObject (instance) {\n  // TODO: fix this - see #15\n  return instance && (typeof instance === 'object') && !(Array.isArray(instance)) && !(instance instanceof Date);\n};\n\nmodule.exports = Validator;\n","var hasMap = typeof Map === 'function' && Map.prototype;\nvar mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;\nvar mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;\nvar mapForEach = hasMap && Map.prototype.forEach;\nvar hasSet = typeof Set === 'function' && Set.prototype;\nvar setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;\nvar setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;\nvar setForEach = hasSet && Set.prototype.forEach;\nvar hasWeakMap = typeof WeakMap === 'function' && WeakMap.prototype;\nvar weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;\nvar hasWeakSet = typeof WeakSet === 'function' && WeakSet.prototype;\nvar weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;\nvar hasWeakRef = typeof WeakRef === 'function' && WeakRef.prototype;\nvar weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;\nvar booleanValueOf = Boolean.prototype.valueOf;\nvar objectToString = Object.prototype.toString;\nvar functionToString = Function.prototype.toString;\nvar $match = String.prototype.match;\nvar $slice = String.prototype.slice;\nvar $replace = String.prototype.replace;\nvar $toUpperCase = String.prototype.toUpperCase;\nvar $toLowerCase = String.prototype.toLowerCase;\nvar $test = RegExp.prototype.test;\nvar $concat = Array.prototype.concat;\nvar $join = Array.prototype.join;\nvar $arrSlice = Array.prototype.slice;\nvar $floor = Math.floor;\nvar bigIntValueOf = typeof BigInt === 'function' ? BigInt.prototype.valueOf : null;\nvar gOPS = Object.getOwnPropertySymbols;\nvar symToString = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? Symbol.prototype.toString : null;\nvar hasShammedSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'object';\n// ie, `has-tostringtag/shams\nvar toStringTag = typeof Symbol === 'function' && Symbol.toStringTag && (typeof Symbol.toStringTag === hasShammedSymbols ? 'object' : 'symbol')\n    ? Symbol.toStringTag\n    : null;\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\nvar gPO = (typeof Reflect === 'function' ? Reflect.getPrototypeOf : Object.getPrototypeOf) || (\n    [].__proto__ === Array.prototype // eslint-disable-line no-proto\n        ? function (O) {\n            return O.__proto__; // eslint-disable-line no-proto\n        }\n        : null\n);\n\nfunction addNumericSeparator(num, str) {\n    if (\n        num === Infinity\n        || num === -Infinity\n        || num !== num\n        || (num && num > -1000 && num < 1000)\n        || $test.call(/e/, str)\n    ) {\n        return str;\n    }\n    var sepRegex = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;\n    if (typeof num === 'number') {\n        var int = num < 0 ? -$floor(-num) : $floor(num); // trunc(num)\n        if (int !== num) {\n            var intStr = String(int);\n            var dec = $slice.call(str, intStr.length + 1);\n            return $replace.call(intStr, sepRegex, '$&_') + '.' + $replace.call($replace.call(dec, /([0-9]{3})/g, '$&_'), /_$/, '');\n        }\n    }\n    return $replace.call(str, sepRegex, '$&_');\n}\n\nvar utilInspect = require('./util.inspect');\nvar inspectCustom = utilInspect.custom;\nvar inspectSymbol = isSymbol(inspectCustom) ? inspectCustom : null;\n\nmodule.exports = function inspect_(obj, options, depth, seen) {\n    var opts = options || {};\n\n    if (has(opts, 'quoteStyle') && (opts.quoteStyle !== 'single' && opts.quoteStyle !== 'double')) {\n        throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');\n    }\n    if (\n        has(opts, 'maxStringLength') && (typeof opts.maxStringLength === 'number'\n            ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity\n            : opts.maxStringLength !== null\n        )\n    ) {\n        throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');\n    }\n    var customInspect = has(opts, 'customInspect') ? opts.customInspect : true;\n    if (typeof customInspect !== 'boolean' && customInspect !== 'symbol') {\n        throw new TypeError('option \"customInspect\", if provided, must be `true`, `false`, or `\\'symbol\\'`');\n    }\n\n    if (\n        has(opts, 'indent')\n        && opts.indent !== null\n        && opts.indent !== '\\t'\n        && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)\n    ) {\n        throw new TypeError('option \"indent\" must be \"\\\\t\", an integer > 0, or `null`');\n    }\n    if (has(opts, 'numericSeparator') && typeof opts.numericSeparator !== 'boolean') {\n        throw new TypeError('option \"numericSeparator\", if provided, must be `true` or `false`');\n    }\n    var numericSeparator = opts.numericSeparator;\n\n    if (typeof obj === 'undefined') {\n        return 'undefined';\n    }\n    if (obj === null) {\n        return 'null';\n    }\n    if (typeof obj === 'boolean') {\n        return obj ? 'true' : 'false';\n    }\n\n    if (typeof obj === 'string') {\n        return inspectString(obj, opts);\n    }\n    if (typeof obj === 'number') {\n        if (obj === 0) {\n            return Infinity / obj > 0 ? '0' : '-0';\n        }\n        var str = String(obj);\n        return numericSeparator ? addNumericSeparator(obj, str) : str;\n    }\n    if (typeof obj === 'bigint') {\n        var bigIntStr = String(obj) + 'n';\n        return numericSeparator ? addNumericSeparator(obj, bigIntStr) : bigIntStr;\n    }\n\n    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;\n    if (typeof depth === 'undefined') { depth = 0; }\n    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {\n        return isArray(obj) ? '[Array]' : '[Object]';\n    }\n\n    var indent = getIndent(opts, depth);\n\n    if (typeof seen === 'undefined') {\n        seen = [];\n    } else if (indexOf(seen, obj) >= 0) {\n        return '[Circular]';\n    }\n\n    function inspect(value, from, noIndent) {\n        if (from) {\n            seen = $arrSlice.call(seen);\n            seen.push(from);\n        }\n        if (noIndent) {\n            var newOpts = {\n                depth: opts.depth\n            };\n            if (has(opts, 'quoteStyle')) {\n                newOpts.quoteStyle = opts.quoteStyle;\n            }\n            return inspect_(value, newOpts, depth + 1, seen);\n        }\n        return inspect_(value, opts, depth + 1, seen);\n    }\n\n    if (typeof obj === 'function' && !isRegExp(obj)) { // in older engines, regexes are callable\n        var name = nameOf(obj);\n        var keys = arrObjKeys(obj, inspect);\n        return '[Function' + (name ? ': ' + name : ' (anonymous)') + ']' + (keys.length > 0 ? ' { ' + $join.call(keys, ', ') + ' }' : '');\n    }\n    if (isSymbol(obj)) {\n        var symString = hasShammedSymbols ? $replace.call(String(obj), /^(Symbol\\(.*\\))_[^)]*$/, '$1') : symToString.call(obj);\n        return typeof obj === 'object' && !hasShammedSymbols ? markBoxed(symString) : symString;\n    }\n    if (isElement(obj)) {\n        var s = '<' + $toLowerCase.call(String(obj.nodeName));\n        var attrs = obj.attributes || [];\n        for (var i = 0; i < attrs.length; i++) {\n            s += ' ' + attrs[i].name + '=' + wrapQuotes(quote(attrs[i].value), 'double', opts);\n        }\n        s += '>';\n        if (obj.childNodes && obj.childNodes.length) { s += '...'; }\n        s += '</' + $toLowerCase.call(String(obj.nodeName)) + '>';\n        return s;\n    }\n    if (isArray(obj)) {\n        if (obj.length === 0) { return '[]'; }\n        var xs = arrObjKeys(obj, inspect);\n        if (indent && !singleLineValues(xs)) {\n            return '[' + indentedJoin(xs, indent) + ']';\n        }\n        return '[ ' + $join.call(xs, ', ') + ' ]';\n    }\n    if (isError(obj)) {\n        var parts = arrObjKeys(obj, inspect);\n        if (!('cause' in Error.prototype) && 'cause' in obj && !isEnumerable.call(obj, 'cause')) {\n            return '{ [' + String(obj) + '] ' + $join.call($concat.call('[cause]: ' + inspect(obj.cause), parts), ', ') + ' }';\n        }\n        if (parts.length === 0) { return '[' + String(obj) + ']'; }\n        return '{ [' + String(obj) + '] ' + $join.call(parts, ', ') + ' }';\n    }\n    if (typeof obj === 'object' && customInspect) {\n        if (inspectSymbol && typeof obj[inspectSymbol] === 'function' && utilInspect) {\n            return utilInspect(obj, { depth: maxDepth - depth });\n        } else if (customInspect !== 'symbol' && typeof obj.inspect === 'function') {\n            return obj.inspect();\n        }\n    }\n    if (isMap(obj)) {\n        var mapParts = [];\n        if (mapForEach) {\n            mapForEach.call(obj, function (value, key) {\n                mapParts.push(inspect(key, obj, true) + ' => ' + inspect(value, obj));\n            });\n        }\n        return collectionOf('Map', mapSize.call(obj), mapParts, indent);\n    }\n    if (isSet(obj)) {\n        var setParts = [];\n        if (setForEach) {\n            setForEach.call(obj, function (value) {\n                setParts.push(inspect(value, obj));\n            });\n        }\n        return collectionOf('Set', setSize.call(obj), setParts, indent);\n    }\n    if (isWeakMap(obj)) {\n        return weakCollectionOf('WeakMap');\n    }\n    if (isWeakSet(obj)) {\n        return weakCollectionOf('WeakSet');\n    }\n    if (isWeakRef(obj)) {\n        return weakCollectionOf('WeakRef');\n    }\n    if (isNumber(obj)) {\n        return markBoxed(inspect(Number(obj)));\n    }\n    if (isBigInt(obj)) {\n        return markBoxed(inspect(bigIntValueOf.call(obj)));\n    }\n    if (isBoolean(obj)) {\n        return markBoxed(booleanValueOf.call(obj));\n    }\n    if (isString(obj)) {\n        return markBoxed(inspect(String(obj)));\n    }\n    // note: in IE 8, sometimes `global !== window` but both are the prototypes of each other\n    /* eslint-env browser */\n    if (typeof window !== 'undefined' && obj === window) {\n        return '{ [object Window] }';\n    }\n    if (obj === global) {\n        return '{ [object globalThis] }';\n    }\n    if (!isDate(obj) && !isRegExp(obj)) {\n        var ys = arrObjKeys(obj, inspect);\n        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;\n        var protoTag = obj instanceof Object ? '' : 'null prototype';\n        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? $slice.call(toStr(obj), 8, -1) : protoTag ? 'Object' : '';\n        var constructorTag = isPlainObject || typeof obj.constructor !== 'function' ? '' : obj.constructor.name ? obj.constructor.name + ' ' : '';\n        var tag = constructorTag + (stringTag || protoTag ? '[' + $join.call($concat.call([], stringTag || [], protoTag || []), ': ') + '] ' : '');\n        if (ys.length === 0) { return tag + '{}'; }\n        if (indent) {\n            return tag + '{' + indentedJoin(ys, indent) + '}';\n        }\n        return tag + '{ ' + $join.call(ys, ', ') + ' }';\n    }\n    return String(obj);\n};\n\nfunction wrapQuotes(s, defaultStyle, opts) {\n    var quoteChar = (opts.quoteStyle || defaultStyle) === 'double' ? '\"' : \"'\";\n    return quoteChar + s + quoteChar;\n}\n\nfunction quote(s) {\n    return $replace.call(String(s), /\"/g, '&quot;');\n}\n\nfunction isArray(obj) { return toStr(obj) === '[object Array]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isDate(obj) { return toStr(obj) === '[object Date]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isRegExp(obj) { return toStr(obj) === '[object RegExp]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isError(obj) { return toStr(obj) === '[object Error]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isString(obj) { return toStr(obj) === '[object String]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isNumber(obj) { return toStr(obj) === '[object Number]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isBoolean(obj) { return toStr(obj) === '[object Boolean]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\n\n// Symbol and BigInt do have Symbol.toStringTag by spec, so that can't be used to eliminate false positives\nfunction isSymbol(obj) {\n    if (hasShammedSymbols) {\n        return obj && typeof obj === 'object' && obj instanceof Symbol;\n    }\n    if (typeof obj === 'symbol') {\n        return true;\n    }\n    if (!obj || typeof obj !== 'object' || !symToString) {\n        return false;\n    }\n    try {\n        symToString.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isBigInt(obj) {\n    if (!obj || typeof obj !== 'object' || !bigIntValueOf) {\n        return false;\n    }\n    try {\n        bigIntValueOf.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };\nfunction has(obj, key) {\n    return hasOwn.call(obj, key);\n}\n\nfunction toStr(obj) {\n    return objectToString.call(obj);\n}\n\nfunction nameOf(f) {\n    if (f.name) { return f.name; }\n    var m = $match.call(functionToString.call(f), /^function\\s*([\\w$]+)/);\n    if (m) { return m[1]; }\n    return null;\n}\n\nfunction indexOf(xs, x) {\n    if (xs.indexOf) { return xs.indexOf(x); }\n    for (var i = 0, l = xs.length; i < l; i++) {\n        if (xs[i] === x) { return i; }\n    }\n    return -1;\n}\n\nfunction isMap(x) {\n    if (!mapSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        mapSize.call(x);\n        try {\n            setSize.call(x);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof Map; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakMap(x) {\n    if (!weakMapHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakMapHas.call(x, weakMapHas);\n        try {\n            weakSetHas.call(x, weakSetHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakMap; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakRef(x) {\n    if (!weakRefDeref || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakRefDeref.call(x);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isSet(x) {\n    if (!setSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        setSize.call(x);\n        try {\n            mapSize.call(x);\n        } catch (m) {\n            return true;\n        }\n        return x instanceof Set; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakSet(x) {\n    if (!weakSetHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakSetHas.call(x, weakSetHas);\n        try {\n            weakMapHas.call(x, weakMapHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakSet; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isElement(x) {\n    if (!x || typeof x !== 'object') { return false; }\n    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {\n        return true;\n    }\n    return typeof x.nodeName === 'string' && typeof x.getAttribute === 'function';\n}\n\nfunction inspectString(str, opts) {\n    if (str.length > opts.maxStringLength) {\n        var remaining = str.length - opts.maxStringLength;\n        var trailer = '... ' + remaining + ' more character' + (remaining > 1 ? 's' : '');\n        return inspectString($slice.call(str, 0, opts.maxStringLength), opts) + trailer;\n    }\n    // eslint-disable-next-line no-control-regex\n    var s = $replace.call($replace.call(str, /(['\\\\])/g, '\\\\$1'), /[\\x00-\\x1f]/g, lowbyte);\n    return wrapQuotes(s, 'single', opts);\n}\n\nfunction lowbyte(c) {\n    var n = c.charCodeAt(0);\n    var x = {\n        8: 'b',\n        9: 't',\n        10: 'n',\n        12: 'f',\n        13: 'r'\n    }[n];\n    if (x) { return '\\\\' + x; }\n    return '\\\\x' + (n < 0x10 ? '0' : '') + $toUpperCase.call(n.toString(16));\n}\n\nfunction markBoxed(str) {\n    return 'Object(' + str + ')';\n}\n\nfunction weakCollectionOf(type) {\n    return type + ' { ? }';\n}\n\nfunction collectionOf(type, size, entries, indent) {\n    var joinedEntries = indent ? indentedJoin(entries, indent) : $join.call(entries, ', ');\n    return type + ' (' + size + ') {' + joinedEntries + '}';\n}\n\nfunction singleLineValues(xs) {\n    for (var i = 0; i < xs.length; i++) {\n        if (indexOf(xs[i], '\\n') >= 0) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction getIndent(opts, depth) {\n    var baseIndent;\n    if (opts.indent === '\\t') {\n        baseIndent = '\\t';\n    } else if (typeof opts.indent === 'number' && opts.indent > 0) {\n        baseIndent = $join.call(Array(opts.indent + 1), ' ');\n    } else {\n        return null;\n    }\n    return {\n        base: baseIndent,\n        prev: $join.call(Array(depth + 1), baseIndent)\n    };\n}\n\nfunction indentedJoin(xs, indent) {\n    if (xs.length === 0) { return ''; }\n    var lineJoiner = '\\n' + indent.prev + indent.base;\n    return lineJoiner + $join.call(xs, ',' + lineJoiner) + '\\n' + indent.prev;\n}\n\nfunction arrObjKeys(obj, inspect) {\n    var isArr = isArray(obj);\n    var xs = [];\n    if (isArr) {\n        xs.length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            xs[i] = has(obj, i) ? inspect(obj[i], obj) : '';\n        }\n    }\n    var syms = typeof gOPS === 'function' ? gOPS(obj) : [];\n    var symMap;\n    if (hasShammedSymbols) {\n        symMap = {};\n        for (var k = 0; k < syms.length; k++) {\n            symMap['$' + syms[k]] = syms[k];\n        }\n    }\n\n    for (var key in obj) { // eslint-disable-line no-restricted-syntax\n        if (!has(obj, key)) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (isArr && String(Number(key)) === key && key < obj.length) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (hasShammedSymbols && symMap['$' + key] instanceof Symbol) {\n            // this is to prevent shammed Symbols, which are stored as strings, from being included in the string key section\n            continue; // eslint-disable-line no-restricted-syntax, no-continue\n        } else if ($test.call(/[^\\w$]/, key)) {\n            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));\n        } else {\n            xs.push(key + ': ' + inspect(obj[key], obj));\n        }\n    }\n    if (typeof gOPS === 'function') {\n        for (var j = 0; j < syms.length; j++) {\n            if (isEnumerable.call(obj, syms[j])) {\n                xs.push('[' + inspect(syms[j]) + ']: ' + inspect(obj[syms[j]], obj));\n            }\n        }\n    }\n    return xs;\n}\n","/*jshint node:true*/\n'use strict';\n\n/**\n * Replaces characters in strings that are illegal/unsafe for filenames.\n * Unsafe characters are either removed or replaced by a substitute set\n * in the optional `options` object.\n *\n * Illegal Characters on Various Operating Systems\n * / ? < > \\ : * | \"\n * https://kb.acronis.com/content/39790\n *\n * Unicode Control codes\n * C0 0x00-0x1f & C1 (0x80-0x9f)\n * http://en.wikipedia.org/wiki/C0_and_C1_control_codes\n *\n * Reserved filenames on Unix-based systems (\".\", \"..\")\n * Reserved filenames in Windows (\"CON\", \"PRN\", \"AUX\", \"NUL\", \"COM1\",\n * \"COM2\", \"COM3\", \"COM4\", \"COM5\", \"COM6\", \"COM7\", \"COM8\", \"COM9\",\n * \"LPT1\", \"LPT2\", \"LPT3\", \"LPT4\", \"LPT5\", \"LPT6\", \"LPT7\", \"LPT8\", and\n * \"LPT9\") case-insesitively and with or without filename extensions.\n *\n * Capped at 255 characters in length.\n * http://unix.stackexchange.com/questions/32795/what-is-the-maximum-allowed-filename-and-folder-size-with-ecryptfs\n *\n * @param  {String} input   Original filename\n * @param  {Object} options {replacement: String | Function }\n * @return {String}         Sanitized filename\n */\n\nvar truncate = require(\"truncate-utf8-bytes\");\n\nvar illegalRe = /[\\/\\?<>\\\\:\\*\\|\"]/g;\nvar controlRe = /[\\x00-\\x1f\\x80-\\x9f]/g;\nvar reservedRe = /^\\.+$/;\nvar windowsReservedRe = /^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\\..*)?$/i;\nvar windowsTrailingRe = /[\\. ]+$/;\n\nfunction sanitize(input, replacement) {\n  if (typeof input !== 'string') {\n    throw new Error('Input must be string');\n  }\n  var sanitized = input\n    .replace(illegalRe, replacement)\n    .replace(controlRe, replacement)\n    .replace(reservedRe, replacement)\n    .replace(windowsReservedRe, replacement)\n    .replace(windowsTrailingRe, replacement);\n  return truncate(sanitized, 255);\n}\n\nmodule.exports = function (input, options) {\n  var replacement = (options && options.replacement) || '';\n  var output = sanitize(input, replacement);\n  if (replacement === '') {\n    return output;\n  }\n  return sanitize(output, '');\n};\n","const hexRegex = /^[-+]?0x[a-fA-F0-9]+$/;\nconst numRegex = /^([\\-\\+])?(0*)(\\.[0-9]+([eE]\\-?[0-9]+)?|[0-9]+(\\.[0-9]+([eE]\\-?[0-9]+)?)?)$/;\n// const octRegex = /0x[a-z0-9]+/;\n// const binRegex = /0x[a-z0-9]+/;\n\n\n//polyfill\nif (!Number.parseInt && window.parseInt) {\n    Number.parseInt = window.parseInt;\n}\nif (!Number.parseFloat && window.parseFloat) {\n    Number.parseFloat = window.parseFloat;\n}\n\n  \nconst consider = {\n    hex :  true,\n    leadingZeros: true,\n    decimalPoint: \"\\.\",\n    eNotation: true\n    //skipLike: /regex/\n};\n\nfunction toNumber(str, options = {}){\n    // const options = Object.assign({}, consider);\n    // if(opt.leadingZeros === false){\n    //     options.leadingZeros = false;\n    // }else if(opt.hex === false){\n    //     options.hex = false;\n    // }\n\n    options = Object.assign({}, consider, options );\n    if(!str || typeof str !== \"string\" ) return str;\n    \n    let trimmedStr  = str.trim();\n    // if(trimmedStr === \"0.0\") return 0;\n    // else if(trimmedStr === \"+0.0\") return 0;\n    // else if(trimmedStr === \"-0.0\") return -0;\n\n    if(options.skipLike !== undefined && options.skipLike.test(trimmedStr)) return str;\n    else if (options.hex && hexRegex.test(trimmedStr)) {\n        return Number.parseInt(trimmedStr, 16);\n    // } else if (options.parseOct && octRegex.test(str)) {\n    //     return Number.parseInt(val, 8);\n    // }else if (options.parseBin && binRegex.test(str)) {\n    //     return Number.parseInt(val, 2);\n    }else{\n        //separate negative sign, leading zeros, and rest number\n        const match = numRegex.exec(trimmedStr);\n        if(match){\n            const sign = match[1];\n            const leadingZeros = match[2];\n            let numTrimmedByZeros = trimZeros(match[3]); //complete num without leading zeros\n            //trim ending zeros for floating number\n            \n            const eNotation = match[4] || match[6];\n            if(!options.leadingZeros && leadingZeros.length > 0 && sign && trimmedStr[2] !== \".\") return str; //-0123\n            else if(!options.leadingZeros && leadingZeros.length > 0 && !sign && trimmedStr[1] !== \".\") return str; //0123\n            else{//no leading zeros or leading zeros are allowed\n                const num = Number(trimmedStr);\n                const numStr = \"\" + num;\n                if(numStr.search(/[eE]/) !== -1){ //given number is long and parsed to eNotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(eNotation){ //given number has enotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(trimmedStr.indexOf(\".\") !== -1){ //floating number\n                    // const decimalPart = match[5].substr(1);\n                    // const intPart = trimmedStr.substr(0,trimmedStr.indexOf(\".\"));\n\n                    \n                    // const p = numStr.indexOf(\".\");\n                    // const givenIntPart = numStr.substr(0,p);\n                    // const givenDecPart = numStr.substr(p+1);\n                    if(numStr === \"0\" && (numTrimmedByZeros === \"\") ) return num; //0.0\n                    else if(numStr === numTrimmedByZeros) return num; //0.456. 0.79000\n                    else if( sign && numStr === \"-\"+numTrimmedByZeros) return num;\n                    else return str;\n                }\n                \n                if(leadingZeros){\n                    // if(numTrimmedByZeros === numStr){\n                    //     if(options.leadingZeros) return num;\n                    //     else return str;\n                    // }else return str;\n                    if(numTrimmedByZeros === numStr) return num;\n                    else if(sign+numTrimmedByZeros === numStr) return num;\n                    else return str;\n                }\n\n                if(trimmedStr === numStr) return num;\n                else if(trimmedStr === sign+numStr) return num;\n                // else{\n                //     //number with +/- sign\n                //     trimmedStr.test(/[-+][0-9]);\n\n                // }\n                return str;\n            }\n            // else if(!eNotation && trimmedStr && trimmedStr !== Number(trimmedStr) ) return str;\n            \n        }else{ //non-numeric string\n            return str;\n        }\n    }\n}\n\n/**\n * \n * @param {string} numStr without leading zeros\n * @returns \n */\nfunction trimZeros(numStr){\n    if(numStr && numStr.indexOf(\".\") !== -1){//float\n        numStr = numStr.replace(/0+$/, \"\"); //remove ending zeros\n        if(numStr === \".\")  numStr = \"0\";\n        else if(numStr[0] === \".\")  numStr = \"0\"+numStr;\n        else if(numStr[numStr.length-1] === \".\")  numStr = numStr.substr(0,numStr.length-1);\n        return numStr;\n    }\n    return numStr;\n}\nmodule.exports = toNumber\n","'use strict';\n\nvar truncate = require(\"./lib/truncate\");\nvar getLength = require(\"utf8-byte-length/browser\");\nmodule.exports = truncate.bind(null, getLength);\n","'use strict';\n\nfunction isHighSurrogate(codePoint) {\n  return codePoint >= 0xd800 && codePoint <= 0xdbff;\n}\n\nfunction isLowSurrogate(codePoint) {\n  return codePoint >= 0xdc00 && codePoint <= 0xdfff;\n}\n\n// Truncate string by size in bytes\nmodule.exports = function truncate(getLength, string, byteLength) {\n  if (typeof string !== \"string\") {\n    throw new Error(\"Input must be string\");\n  }\n\n  var charLength = string.length;\n  var curByteLength = 0;\n  var codePoint;\n  var segment;\n\n  for (var i = 0; i < charLength; i += 1) {\n    codePoint = string.charCodeAt(i);\n    segment = string[i];\n\n    if (isHighSurrogate(codePoint) && isLowSurrogate(string.charCodeAt(i + 1))) {\n      i += 1;\n      segment += string[i];\n    }\n\n    curByteLength += getLength(segment);\n\n    if (curByteLength === byteLength) {\n      return string.slice(0, i + 1);\n    }\n    else if (curByteLength > byteLength) {\n      return string.slice(0, i - segment.length + 1);\n    }\n  }\n\n  return string;\n};\n\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\nvar setFunctionLength = require('set-function-length');\n\nvar $TypeError = require('es-errors/type');\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $defineProperty = require('es-define-property');\nvar $max = GetIntrinsic('%Math.max%');\n\nmodule.exports = function callBind(originalFunction) {\n\tif (typeof originalFunction !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\tvar func = $reflectApply(bind, $call, arguments);\n\treturn setFunctionLength(\n\t\tfunc,\n\t\t1 + $max(0, originalFunction.length - (arguments.length - 1)),\n\t\ttrue\n\t);\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\n\nvar gopd = require('gopd');\n\n/** @type {import('.')} */\nmodule.exports = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty) {\n\t\t$defineProperty(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n","'use strict';\n\nvar undefined;\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\nvar hasProto = require('has-proto')();\n\nvar getProto = Object.getPrototypeOf || (\n\thasProto\n\t\t? function (x) { return x.__proto__; } // eslint-disable-line no-proto\n\t\t: null\n);\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\treturn !!$defineProperty;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!$defineProperty) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = {\n    'default': Format.RFC3986,\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return String(value);\n        }\n    },\n    RFC1738: Format.RFC1738,\n    RFC3986: Format.RFC3986\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowEmptyArrays: false,\n    allowPrototypes: false,\n    allowSparse: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decodeDotInKeys: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    duplicates: 'combine',\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictDepth: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = { __proto__: null };\n\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    cleanStr = cleanStr.replace(/%5B/gi, '[').replace(/%5D/gi, ']');\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        var existing = has.call(obj, key);\n        if (existing && options.duplicates === 'combine') {\n            obj[key] = utils.combine(obj[key], val);\n        } else if (!existing || options.duplicates === 'last') {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = options.allowEmptyArrays && (leaf === '' || (options.strictNullHandling && leaf === null))\n                ? []\n                : [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var decodedRoot = options.decodeDotInKeys ? cleanRoot.replace(/%2E/g, '.') : cleanRoot;\n            var index = parseInt(decodedRoot, 10);\n            if (!options.parseArrays && decodedRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== decodedRoot\n                && String(index) === decodedRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else if (decodedRoot !== '__proto__') {\n                obj[decodedRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, check strictDepth option for throw, else just add whatever is left\n\n    if (segment) {\n        if (options.strictDepth === true) {\n            throw new RangeError('Input depth exceeded depth option of ' + options.depth + ' and strictDepth is true');\n        }\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (typeof opts.allowEmptyArrays !== 'undefined' && typeof opts.allowEmptyArrays !== 'boolean') {\n        throw new TypeError('`allowEmptyArrays` option can only be `true` or `false`, when provided');\n    }\n\n    if (typeof opts.decodeDotInKeys !== 'undefined' && typeof opts.decodeDotInKeys !== 'boolean') {\n        throw new TypeError('`decodeDotInKeys` option can only be `true` or `false`, when provided');\n    }\n\n    if (opts.decoder !== null && typeof opts.decoder !== 'undefined' && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    var duplicates = typeof opts.duplicates === 'undefined' ? defaults.duplicates : opts.duplicates;\n\n    if (duplicates !== 'combine' && duplicates !== 'first' && duplicates !== 'last') {\n        throw new TypeError('The duplicates option must be either combine, first, or last');\n    }\n\n    var allowDots = typeof opts.allowDots === 'undefined' ? opts.decodeDotInKeys === true ? true : defaults.allowDots : !!opts.allowDots;\n\n    return {\n        allowDots: allowDots,\n        allowEmptyArrays: typeof opts.allowEmptyArrays === 'boolean' ? !!opts.allowEmptyArrays : defaults.allowEmptyArrays,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        allowSparse: typeof opts.allowSparse === 'boolean' ? opts.allowSparse : defaults.allowSparse,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decodeDotInKeys: typeof opts.decodeDotInKeys === 'boolean' ? opts.decodeDotInKeys : defaults.decodeDotInKeys,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        duplicates: duplicates,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictDepth: typeof opts.strictDepth === 'boolean' ? !!opts.strictDepth : defaults.strictDepth,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    if (options.allowSparse === true) {\n        return obj;\n    }\n\n    return utils.compact(obj);\n};\n","'use strict';\n\nvar getSideChannel = require('side-channel');\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    allowEmptyArrays: false,\n    arrayFormat: 'indices',\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encodeDotInKeys: false,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar sentinel = {};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    commaRoundTrip,\n    allowEmptyArrays,\n    strictNullHandling,\n    skipNulls,\n    encodeDotInKeys,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    format,\n    formatter,\n    encodeValuesOnly,\n    charset,\n    sideChannel\n) {\n    var obj = object;\n\n    var tmpSc = sideChannel;\n    var step = 0;\n    var findFlag = false;\n    while ((tmpSc = tmpSc.get(sentinel)) !== void undefined && !findFlag) {\n        // Where object last appeared in the ref tree\n        var pos = tmpSc.get(object);\n        step += 1;\n        if (typeof pos !== 'undefined') {\n            if (pos === step) {\n                throw new RangeError('Cyclic object value');\n            } else {\n                findFlag = true; // Break while\n            }\n        }\n        if (typeof tmpSc.get(sentinel) === 'undefined') {\n            step = 0;\n        }\n    }\n\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        });\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key', format) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key', format);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value', format))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        // we need to join elements in\n        if (encodeValuesOnly && encoder) {\n            obj = utils.maybeMap(obj, encoder);\n        }\n        objKeys = [{ value: obj.length > 0 ? obj.join(',') || null : void undefined }];\n    } else if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    var encodedPrefix = encodeDotInKeys ? prefix.replace(/\\./g, '%2E') : prefix;\n\n    var adjustedPrefix = commaRoundTrip && isArray(obj) && obj.length === 1 ? encodedPrefix + '[]' : encodedPrefix;\n\n    if (allowEmptyArrays && isArray(obj) && obj.length === 0) {\n        return adjustedPrefix + '[]';\n    }\n\n    for (var j = 0; j < objKeys.length; ++j) {\n        var key = objKeys[j];\n        var value = typeof key === 'object' && typeof key.value !== 'undefined' ? key.value : obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var encodedKey = allowDots && encodeDotInKeys ? key.replace(/\\./g, '%2E') : key;\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(adjustedPrefix, encodedKey) : adjustedPrefix\n            : adjustedPrefix + (allowDots ? '.' + encodedKey : '[' + encodedKey + ']');\n\n        sideChannel.set(object, step);\n        var valueSideChannel = getSideChannel();\n        valueSideChannel.set(sentinel, sideChannel);\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            commaRoundTrip,\n            allowEmptyArrays,\n            strictNullHandling,\n            skipNulls,\n            encodeDotInKeys,\n            generateArrayPrefix === 'comma' && encodeValuesOnly && isArray(obj) ? null : encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            format,\n            formatter,\n            encodeValuesOnly,\n            charset,\n            valueSideChannel\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (typeof opts.allowEmptyArrays !== 'undefined' && typeof opts.allowEmptyArrays !== 'boolean') {\n        throw new TypeError('`allowEmptyArrays` option can only be `true` or `false`, when provided');\n    }\n\n    if (typeof opts.encodeDotInKeys !== 'undefined' && typeof opts.encodeDotInKeys !== 'boolean') {\n        throw new TypeError('`encodeDotInKeys` option can only be `true` or `false`, when provided');\n    }\n\n    if (opts.encoder !== null && typeof opts.encoder !== 'undefined' && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    var arrayFormat;\n    if (opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if ('indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = defaults.arrayFormat;\n    }\n\n    if ('commaRoundTrip' in opts && typeof opts.commaRoundTrip !== 'boolean') {\n        throw new TypeError('`commaRoundTrip` must be a boolean, or absent');\n    }\n\n    var allowDots = typeof opts.allowDots === 'undefined' ? opts.encodeDotInKeys === true ? true : defaults.allowDots : !!opts.allowDots;\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: allowDots,\n        allowEmptyArrays: typeof opts.allowEmptyArrays === 'boolean' ? !!opts.allowEmptyArrays : defaults.allowEmptyArrays,\n        arrayFormat: arrayFormat,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        commaRoundTrip: opts.commaRoundTrip,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encodeDotInKeys: typeof opts.encodeDotInKeys === 'boolean' ? opts.encodeDotInKeys : defaults.encodeDotInKeys,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        format: format,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[options.arrayFormat];\n    var commaRoundTrip = generateArrayPrefix === 'comma' && options.commaRoundTrip;\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    var sideChannel = getSideChannel();\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            commaRoundTrip,\n            options.allowEmptyArrays,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encodeDotInKeys,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.format,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset,\n            sideChannel\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('✓')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar formats = require('./formats');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar limit = 1024;\n\n/* eslint operator-linebreak: [2, \"before\"] */\n\nvar encode = function encode(str, defaultEncoder, charset, kind, format) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var j = 0; j < string.length; j += limit) {\n        var segment = string.length >= limit ? string.slice(j, j + limit) : string;\n        var arr = [];\n\n        for (var i = 0; i < segment.length; ++i) {\n            var c = segment.charCodeAt(i);\n            if (\n                c === 0x2D // -\n                || c === 0x2E // .\n                || c === 0x5F // _\n                || c === 0x7E // ~\n                || (c >= 0x30 && c <= 0x39) // 0-9\n                || (c >= 0x41 && c <= 0x5A) // a-z\n                || (c >= 0x61 && c <= 0x7A) // A-Z\n                || (format === formats.RFC1738 && (c === 0x28 || c === 0x29)) // ( )\n            ) {\n                arr[arr.length] = segment.charAt(i);\n                continue;\n            }\n\n            if (c < 0x80) {\n                arr[arr.length] = hexTable[c];\n                continue;\n            }\n\n            if (c < 0x800) {\n                arr[arr.length] = hexTable[0xC0 | (c >> 6)]\n                    + hexTable[0x80 | (c & 0x3F)];\n                continue;\n            }\n\n            if (c < 0xD800 || c >= 0xE000) {\n                arr[arr.length] = hexTable[0xE0 | (c >> 12)]\n                    + hexTable[0x80 | ((c >> 6) & 0x3F)]\n                    + hexTable[0x80 | (c & 0x3F)];\n                continue;\n            }\n\n            i += 1;\n            c = 0x10000 + (((c & 0x3FF) << 10) | (segment.charCodeAt(i) & 0x3FF));\n\n            arr[arr.length] = hexTable[0xF0 | (c >> 18)]\n                + hexTable[0x80 | ((c >> 12) & 0x3F)]\n                + hexTable[0x80 | ((c >> 6) & 0x3F)]\n                + hexTable[0x80 | (c & 0x3F)];\n        }\n\n        out += arr.join('');\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar gOPD = require('gopd');\n\nvar $TypeError = require('es-errors/type');\nvar $floor = GetIntrinsic('%Math.floor%');\n\n/** @type {import('.')} */\nmodule.exports = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {\n\t\tthrow new $TypeError('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar callBound = require('call-bind/callBound');\nvar inspect = require('object-inspect');\n\nvar $TypeError = require('es-errors/type');\nvar $WeakMap = GetIntrinsic('%WeakMap%', true);\nvar $Map = GetIntrinsic('%Map%', true);\n\nvar $weakMapGet = callBound('WeakMap.prototype.get', true);\nvar $weakMapSet = callBound('WeakMap.prototype.set', true);\nvar $weakMapHas = callBound('WeakMap.prototype.has', true);\nvar $mapGet = callBound('Map.prototype.get', true);\nvar $mapSet = callBound('Map.prototype.set', true);\nvar $mapHas = callBound('Map.prototype.has', true);\n\n/*\n* This function traverses the list returning the node corresponding to the given key.\n*\n* That node is also moved to the head of the list, so that if it's accessed again we don't need to traverse the whole list. By doing so, all the recently used nodes can be accessed relatively quickly.\n*/\n/** @type {import('.').listGetNode} */\nvar listGetNode = function (list, key) { // eslint-disable-line consistent-return\n\t/** @type {typeof list | NonNullable<(typeof list)['next']>} */\n\tvar prev = list;\n\t/** @type {(typeof list)['next']} */\n\tvar curr;\n\tfor (; (curr = prev.next) !== null; prev = curr) {\n\t\tif (curr.key === key) {\n\t\t\tprev.next = curr.next;\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\tcurr.next = /** @type {NonNullable<typeof list.next>} */ (list.next);\n\t\t\tlist.next = curr; // eslint-disable-line no-param-reassign\n\t\t\treturn curr;\n\t\t}\n\t}\n};\n\n/** @type {import('.').listGet} */\nvar listGet = function (objects, key) {\n\tvar node = listGetNode(objects, key);\n\treturn node && node.value;\n};\n/** @type {import('.').listSet} */\nvar listSet = function (objects, key, value) {\n\tvar node = listGetNode(objects, key);\n\tif (node) {\n\t\tnode.value = value;\n\t} else {\n\t\t// Prepend the new node to the beginning of the list\n\t\tobjects.next = /** @type {import('.').ListNode<typeof value>} */ ({ // eslint-disable-line no-param-reassign, no-extra-parens\n\t\t\tkey: key,\n\t\t\tnext: objects.next,\n\t\t\tvalue: value\n\t\t});\n\t}\n};\n/** @type {import('.').listHas} */\nvar listHas = function (objects, key) {\n\treturn !!listGetNode(objects, key);\n};\n\n/** @type {import('.')} */\nmodule.exports = function getSideChannel() {\n\t/** @type {WeakMap<object, unknown>} */ var $wm;\n\t/** @type {Map<object, unknown>} */ var $m;\n\t/** @type {import('.').RootNode<unknown>} */ var $o;\n\n\t/** @type {import('.').Channel} */\n\tvar channel = {\n\t\tassert: function (key) {\n\t\t\tif (!channel.has(key)) {\n\t\t\t\tthrow new $TypeError('Side channel does not contain ' + inspect(key));\n\t\t\t}\n\t\t},\n\t\tget: function (key) { // eslint-disable-line consistent-return\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapGet($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapGet($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listGet($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thas: function (key) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapHas($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapHas($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listHas($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tset: function (key, value) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif (!$wm) {\n\t\t\t\t\t$wm = new $WeakMap();\n\t\t\t\t}\n\t\t\t\t$weakMapSet($wm, key, value);\n\t\t\t} else if ($Map) {\n\t\t\t\tif (!$m) {\n\t\t\t\t\t$m = new $Map();\n\t\t\t\t}\n\t\t\t\t$mapSet($m, key, value);\n\t\t\t} else {\n\t\t\t\tif (!$o) {\n\t\t\t\t\t// Initialize the linked list as an empty node, so that we don't have to special-case handling of the first node: we can always refer to it as (previous node).next, instead of something like (list).head\n\t\t\t\t\t$o = { key: {}, next: null };\n\t\t\t\t}\n\t\t\t\tlistSet($o, key, value);\n\t\t\t}\n\t\t}\n\t};\n\treturn channel;\n};\n","/*\n * Copyright Joyent, Inc. and other Node contributors.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to permit\n * persons to whom the Software is furnished to do so, subject to the\n * following conditions:\n *\n * The above copyright notice and this permission notice shall be included\n * in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n * NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n * USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n'use strict';\n\nvar punycode = require('punycode/');\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n/*\n * define these here so at least they only have to be\n * compiled once on the first module load.\n */\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n  portPattern = /:[0-9]*$/,\n\n  // Special case for a simple path URL\n  simplePathPattern = /^(\\/\\/?(?!\\/)[^?\\s]*)(\\?[^\\s]*)?$/,\n\n  /*\n   * RFC 2396: characters reserved for delimiting URLs.\n   * We actually just auto-escape these.\n   */\n  delims = [\n    '<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'\n  ],\n\n  // RFC 2396: characters not allowed for various reasons.\n  unwise = [\n    '{', '}', '|', '\\\\', '^', '`'\n  ].concat(delims),\n\n  // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n  autoEscape = ['\\''].concat(unwise),\n  /*\n   * Characters that are never ever allowed in a hostname.\n   * Note that any invalid chars are also handled, but these\n   * are the ones that are *expected* to be seen, so we fast-path\n   * them.\n   */\n  nonHostChars = [\n    '%', '/', '?', ';', '#'\n  ].concat(autoEscape),\n  hostEndingChars = [\n    '/', '?', '#'\n  ],\n  hostnameMaxLen = 255,\n  hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n  hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n  // protocols that can allow \"unsafe\" and \"unwise\" chars.\n  unsafeProtocol = {\n    javascript: true,\n    'javascript:': true\n  },\n  // protocols that never have a hostname.\n  hostlessProtocol = {\n    javascript: true,\n    'javascript:': true\n  },\n  // protocols that always contain a // bit.\n  slashedProtocol = {\n    http: true,\n    https: true,\n    ftp: true,\n    gopher: true,\n    file: true,\n    'http:': true,\n    'https:': true,\n    'ftp:': true,\n    'gopher:': true,\n    'file:': true\n  },\n  querystring = require('qs');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && typeof url === 'object' && url instanceof Url) { return url; }\n\n  var u = new Url();\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function (url, parseQueryString, slashesDenoteHost) {\n  if (typeof url !== 'string') {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  /*\n   * Copy chrome, IE, opera backslash-handling behavior.\n   * Back slashes before the query string get converted to forward slashes\n   * See: https://code.google.com/p/chromium/issues/detail?id=25916\n   */\n  var queryIndex = url.indexOf('?'),\n    splitter = queryIndex !== -1 && queryIndex < url.indexOf('#') ? '?' : '#',\n    uSplit = url.split(splitter),\n    slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  /*\n   * trim before proceeding.\n   * This is to support parse stuff like \"  http://foo.com  \\n\"\n   */\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  /*\n   * figure out if it's got a host\n   * user@server is *always* interpreted as a hostname, and url\n   * resolution will treat //foo/bar as host=foo,path=bar because that's\n   * how the browser resolves relative URLs.\n   */\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@/]+@[^@/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] && (slashes || (proto && !slashedProtocol[proto]))) {\n\n    /*\n     * there's a hostname.\n     * the first instance of /, ?, ;, or # ends the host.\n     *\n     * If there is an @ in the hostname, then non-host chars *are* allowed\n     * to the left of the last @ sign, unless some host-ending character\n     * comes *before* the @-sign.\n     * URLs are obnoxious.\n     *\n     * ex:\n     * http://a@b@c/ => user:a@b host:c\n     * http://a@b?@c => user:a host:c path:/?@c\n     */\n\n    /*\n     * v0.12 TODO(isaacs): This is not quite how Chrome does things.\n     * Review our test case against browsers more comprehensively.\n     */\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) { hostEnd = hec; }\n    }\n\n    /*\n     * at this point, either we have an explicit point where the\n     * auth portion cannot go past, or the last @ char is the decider.\n     */\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      /*\n       * atSign must be in auth portion.\n       * http://a@b/c@d => host:b auth:a path:/c@d\n       */\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    /*\n     * Now we have a portion which is definitely the auth.\n     * Pull that off.\n     */\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) { hostEnd = hec; }\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1) { hostEnd = rest.length; }\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    /*\n     * we've indicated that there is a hostname,\n     * so even if it's empty, it has to be present.\n     */\n    this.hostname = this.hostname || '';\n\n    /*\n     * if hostname begins with [ and ends with ]\n     * assume that it's an IPv6 address.\n     */\n    var ipv6Hostname = this.hostname[0] === '[' && this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) { continue; }\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              /*\n               * we replace non-ASCII char with a temporary placeholder\n               * we need this to make sure size of hostname is not\n               * broken by replacing non-ASCII by nothing\n               */\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      /*\n       * IDNA Support: Returns a punycoded representation of \"domain\".\n       * It only converts parts of the domain name that\n       * have non-ASCII characters, i.e. it doesn't matter if\n       * you call it with a domain that already is ASCII-only.\n       */\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    /*\n     * strip [ and ] from the hostname\n     * the host field still retains them, though\n     */\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  /*\n   * now rest is set to the post-host stuff.\n   * chop off any delim chars.\n   */\n  if (!unsafeProtocol[lowerProto]) {\n\n    /*\n     * First, make 100% sure that any \"autoEscape\" chars get\n     * escaped, even if encodeURIComponent doesn't think they\n     * need to be.\n     */\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1) { continue; }\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) { this.pathname = rest; }\n  if (slashedProtocol[lowerProto] && this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  // to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  /*\n   * ensure it's an object, and not a string url.\n   * If it's an obj, this is a no-op.\n   * this way, you can call url_format() on strings\n   * to clean up potentially wonky urls.\n   */\n  if (typeof obj === 'string') { obj = urlParse(obj); }\n  if (!(obj instanceof Url)) { return Url.prototype.format.call(obj); }\n  return obj.format();\n}\n\nUrl.prototype.format = function () {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n    pathname = this.pathname || '',\n    hash = this.hash || '',\n    host = false,\n    query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ? this.hostname : '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query && typeof this.query === 'object' && Object.keys(this.query).length) {\n    query = querystring.stringify(this.query, {\n      arrayFormat: 'repeat',\n      addQueryPrefix: false\n    });\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') { protocol += ':'; }\n\n  /*\n   * only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n   * unless they had them to begin with.\n   */\n  if (this.slashes || (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') { pathname = '/' + pathname; }\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') { hash = '#' + hash; }\n  if (search && search.charAt(0) !== '?') { search = '?' + search; }\n\n  pathname = pathname.replace(/[?#]/g, function (match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function (relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) { return relative; }\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function (relative) {\n  if (typeof relative === 'string') {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  /*\n   * hash is always overridden, no matter what.\n   * even href=\"\" will remove it.\n   */\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol') { result[rkey] = relative[rkey]; }\n    }\n\n    // urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] && result.hostname && !result.pathname) {\n      result.pathname = '/';\n      result.path = result.pathname;\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    /*\n     * if it's a known url protocol, then changing\n     * the protocol does weird things\n     * first, if it's not file:, then we MUST have a host,\n     * and if there was a path\n     * to begin with, then we MUST have a path.\n     * if it is file:, then the host is dropped,\n     * because that's known to be hostless.\n     * anything else is assumed to be absolute.\n     */\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift())) { }\n      if (!relative.host) { relative.host = ''; }\n      if (!relative.hostname) { relative.hostname = ''; }\n      if (relPath[0] !== '') { relPath.unshift(''); }\n      if (relPath.length < 2) { relPath.unshift(''); }\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = result.pathname && result.pathname.charAt(0) === '/',\n    isRelAbs = relative.host || relative.pathname && relative.pathname.charAt(0) === '/',\n    mustEndAbs = isRelAbs || isSourceAbs || (result.host && relative.pathname),\n    removeAllDots = mustEndAbs,\n    srcPath = result.pathname && result.pathname.split('/') || [],\n    relPath = relative.pathname && relative.pathname.split('/') || [],\n    psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  /*\n   * if the url is a non-slashed url, then relative\n   * links like ../.. should be able\n   * to crawl up to the hostname, as well.  This is strange.\n   * result.protocol has already been set by now.\n   * Later on, put the first path part into the host field.\n   */\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') { srcPath[0] = result.host; } else { srcPath.unshift(result.host); }\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') { relPath[0] = relative.host; } else { relPath.unshift(relative.host); }\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = relative.host || relative.host === '' ? relative.host : result.host;\n    result.hostname = relative.hostname || relative.hostname === '' ? relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    /*\n     * it's relative\n     * throw away the existing file, and take the new path instead.\n     */\n    if (!srcPath) { srcPath = []; }\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (relative.search != null) {\n    /*\n     * just pull out the search.\n     * like href='?foo'.\n     * Put this after the other two cases because it simplifies the booleans\n     */\n    if (psychotic) {\n      result.host = srcPath.shift();\n      result.hostname = result.host;\n      /*\n       * occationaly the auth can get stuck only in host\n       * this especially happens in cases like\n       * url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n       */\n      var authInHost = result.host && result.host.indexOf('@') > 0 ? result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.hostname = authInHost.shift();\n        result.host = result.hostname;\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    // to support http.request\n    if (result.pathname !== null || result.search !== null) {\n      result.path = (result.pathname ? result.pathname : '') + (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    /*\n     * no path at all.  easy.\n     * we've already handled the other stuff above.\n     */\n    result.pathname = null;\n    // to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  /*\n   * if a url ENDs in . or .., then it must get a trailing slash.\n   * however, if it ends in anything else non-slashy,\n   * then it must NOT get a trailing slash.\n   */\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (result.host || relative.host || srcPath.length > 1) && (last === '.' || last === '..') || last === '';\n\n  /*\n   * strip single dots, resolve double dots to parent dir\n   * if the path tries to go above the root, `up` ends up > 0\n   */\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' && (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' || (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = isAbsolute ? '' : srcPath.length ? srcPath.shift() : '';\n    result.host = result.hostname;\n    /*\n     * occationaly the auth can get stuck only in host\n     * this especially happens in cases like\n     * url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n     */\n    var authInHost = result.host && result.host.indexOf('@') > 0 ? result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.hostname = authInHost.shift();\n      result.host = result.hostname;\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (srcPath.length > 0) {\n    result.pathname = srcPath.join('/');\n  } else {\n    result.pathname = null;\n    result.path = null;\n  }\n\n  // to support request.http\n  if (result.pathname !== null || result.search !== null) {\n    result.path = (result.pathname ? result.pathname : '') + (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function () {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) { this.hostname = host; }\n};\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n","'use strict';\n\nfunction isHighSurrogate(codePoint) {\n  return codePoint >= 0xd800 && codePoint <= 0xdbff;\n}\n\nfunction isLowSurrogate(codePoint) {\n  return codePoint >= 0xdc00 && codePoint <= 0xdfff;\n}\n\n// Truncate string by size in bytes\nmodule.exports = function getByteLength(string) {\n  if (typeof string !== \"string\") {\n    throw new Error(\"Input must be string\");\n  }\n\n  var charLength = string.length;\n  var byteLength = 0;\n  var codePoint = null;\n  var prevCodePoint = null;\n  for (var i = 0; i < charLength; i++) {\n    codePoint = string.charCodeAt(i);\n    // handle 4-byte non-BMP chars\n    // low surrogate\n    if (isLowSurrogate(codePoint)) {\n      // when parsing previous hi-surrogate, 3 is added to byteLength\n      if (prevCodePoint != null && isHighSurrogate(prevCodePoint)) {\n        byteLength += 1;\n      }\n      else {\n        byteLength += 3;\n      }\n    }\n    else if (codePoint <= 0x7f ) {\n      byteLength += 1;\n    }\n    else if (codePoint >= 0x80 && codePoint <= 0x7ff) {\n      byteLength += 2;\n    }\n    else if (codePoint >= 0x800 && codePoint <= 0xffff) {\n      byteLength += 3;\n    }\n    prevCodePoint = codePoint;\n  }\n\n  return byteLength;\n};\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Default exports for Node. Export the extended versions of VTTCue and\n// VTTRegion in Node since we likely want the capability to convert back and\n// forth between JSON. If we don't then it's not that big of a deal since we're\n// off browser.\nmodule.exports = {\n  WebVTT: require(\"./vtt.js\").WebVTT,\n  VTTCue: require(\"./vttcue-extended.js\").VTTCue,\n  VTTRegion: require(\"./vttregion-extended.js\").VTTRegion\n};\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n\n(function(global) {\n  function makeColorSet(color, opacity) {\n    if(opacity === undefined) {\n      opacity = 1;\n    }\n    return \"rgba(\" + [parseInt(color.substring(0, 2), 16),\n                      parseInt(color.substring(2, 4), 16),\n                      parseInt(color.substring(4, 6), 16),\n                      opacity].join(\",\") + \")\";\n  }\n\n  var WebVTTPrefs = ['webvtt.font.color', 'webvtt.font.opacity', 'webvtt.font.scale',\n                     'webvtt.bg.color', 'webvtt.bg.opacity',\n                     'webvtt.edge.color', 'webvtt.edge.type'];\n\n  var fontScale = 1;\n\n  function observe(subject, topic, data) {\n    switch (data) {\n      case \"webvtt.font.color\":\n      case \"webvtt.font.opacity\":\n        var fontColor = Services.prefs.getCharPref(\"webvtt.font.color\");\n        var fontOpacity = Services.prefs.getIntPref(\"webvtt.font.opacity\") / 100;\n        WebVTTSet.fontSet = makeColorSet(fontColor, fontOpacity);\n        break;\n      case \"webvtt.font.scale\":\n        fontScale = Services.prefs.getIntPref(\"webvtt.font.scale\") / 100;\n        break;\n      case \"webvtt.bg.color\":\n      case \"webvtt.bg.opacity\":\n        var backgroundColor = Services.prefs.getCharPref(\"webvtt.bg.color\");\n        var backgroundOpacity = Services.prefs.getIntPref(\"webvtt.bg.opacity\") / 100;\n        WebVTTSet.backgroundSet = makeColorSet(backgroundColor, backgroundOpacity);\n        break;\n      case \"webvtt.edge.color\":\n      case \"webvtt.edge.type\":\n        var edgeTypeList = [\"\", \"0px 0px \", \"4px 4px 4px \", \"-2px -2px \", \"2px 2px \"];\n        var edgeType = Services.prefs.getIntPref(\"webvtt.edge.type\");\n        var edgeColor = Services.prefs.getCharPref(\"webvtt.edge.color\");\n        WebVTTSet.edgeSet = edgeTypeList[edgeType] + makeColorSet(edgeColor);\n        break;\n    }\n  }\n\n  if(typeof Services !== \"undefined\") {\n    var WebVTTSet = {};\n    WebVTTPrefs.forEach(function (pref) {\n      observe(undefined, undefined, pref);\n      Services.prefs.addObserver(pref, observe, false);\n    });\n  }\n\n  var _objCreate = Object.create || (function() {\n    function F() {}\n    return function(o) {\n      if (arguments.length !== 1) {\n        throw new Error('Object.create shim only accepts one parameter.');\n      }\n      F.prototype = o;\n      return new F();\n    };\n  })();\n\n  // Creates a new ParserError object from an errorData object. The errorData\n  // object should have default code and message properties. The default message\n  // property can be overriden by passing in a message parameter.\n  // See ParsingError.Errors below for acceptable errors.\n  function ParsingError(errorData, message) {\n    this.name = \"ParsingError\";\n    this.code = errorData.code;\n    this.message = message || errorData.message;\n  }\n  ParsingError.prototype = _objCreate(Error.prototype);\n  ParsingError.prototype.constructor = ParsingError;\n\n  // ParsingError metadata for acceptable ParsingErrors.\n  ParsingError.Errors = {\n    BadSignature: {\n      code: 0,\n      message: \"Malformed WebVTT signature.\"\n    },\n    BadTimeStamp: {\n      code: 1,\n      message: \"Malformed time stamp.\"\n    }\n  };\n\n  // Try to parse input as a time stamp.\n  function parseTimeStamp(input) {\n\n    function computeSeconds(h, m, s, f) {\n      return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n    }\n\n    var m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n    if (!m) {\n      return null;\n    }\n\n    if (m[3]) {\n      // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n      return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n    } else if (m[1] > 59) {\n      // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n      // First position is hours as it's over 59.\n      return computeSeconds(m[1], m[2], 0,  m[4]);\n    } else {\n      // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n      return computeSeconds(0, m[1], m[2], m[4]);\n    }\n  }\n\n  // A settings object holds key/value pairs and will ignore anything but the first\n  // assignment to a specific key.\n  function Settings() {\n    this.values = _objCreate(null);\n  }\n\n  Settings.prototype = {\n    // Only accept the first assignment to any key.\n    set: function(k, v) {\n      if (!this.get(k) && v !== \"\") {\n        this.values[k] = v;\n      }\n    },\n    // Return the value for a key, or a default value.\n    // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n    // a number of possible default values as properties where 'defaultKey' is\n    // the key of the property that will be chosen; otherwise it's assumed to be\n    // a single value.\n    get: function(k, dflt, defaultKey) {\n      if (defaultKey) {\n        return this.has(k) ? this.values[k] : dflt[defaultKey];\n      }\n      return this.has(k) ? this.values[k] : dflt;\n    },\n    // Check whether we have a value for a key.\n    has: function(k) {\n      return k in this.values;\n    },\n    // Accept a setting if its one of the given alternatives.\n    alt: function(k, v, a) {\n      for (var n = 0; n < a.length; ++n) {\n        if (v === a[n]) {\n          this.set(k, v);\n          break;\n        }\n      }\n    },\n    // Accept a setting if its a valid (signed) integer.\n    integer: function(k, v) {\n      if (/^-?\\d+$/.test(v)) { // integer\n        this.set(k, parseInt(v, 10));\n      }\n    },\n    // Accept a setting if its a valid percentage.\n    percent: function(k, v) {\n      var m;\n      if ((m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/))) {\n        v = parseFloat(v);\n        if (v >= 0 && v <= 100) {\n          this.set(k, v);\n          return true;\n        }\n      }\n      return false;\n    }\n  };\n\n  // Helper function to parse input into groups separated by 'groupDelim', and\n  // interprete each group as a key/value pair separated by 'keyValueDelim'.\n  function parseOptions(input, callback, keyValueDelim, groupDelim) {\n    var groups = groupDelim ? input.split(groupDelim) : [input];\n    for (var i in groups) {\n      if (typeof groups[i] !== \"string\") {\n        continue;\n      }\n      var kv = groups[i].split(keyValueDelim);\n      if (kv.length !== 2) {\n        continue;\n      }\n      var k = kv[0];\n      var v = kv[1];\n      callback(k, v);\n    }\n  }\n\n  function parseCue(input, cue, regionList) {\n    // Remember the original input if we need to throw an error.\n    var oInput = input;\n    // 4.1 WebVTT timestamp\n    function consumeTimeStamp() {\n      var ts = parseTimeStamp(input);\n      if (ts === null) {\n        throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n                              \"Malformed timestamp: \" + oInput);\n      }\n      // Remove time stamp from input.\n      input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n      return ts;\n    }\n\n    // 4.4.2 WebVTT cue settings\n    function consumeCueSettings(input, cue) {\n      var settings = new Settings();\n\n      parseOptions(input, function (k, v) {\n        switch (k) {\n        case \"region\":\n          // Find the last region we parsed with the same region id.\n          for (var i = regionList.length - 1; i >= 0; i--) {\n            if (regionList[i].id === v) {\n              settings.set(k, regionList[i].region);\n              break;\n            }\n          }\n          break;\n        case \"vertical\":\n          settings.alt(k, v, [\"rl\", \"lr\"]);\n          break;\n        case \"line\":\n          var vals = v.split(\",\"),\n              vals0 = vals[0];\n          settings.integer(k, vals0);\n          settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n          settings.alt(k, vals0, [\"auto\"]);\n          if (vals.length === 2) {\n            settings.alt(\"lineAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n          }\n          break;\n        case \"position\":\n          vals = v.split(\",\");\n          settings.percent(k, vals[0]);\n          if (vals.length === 2) {\n            settings.alt(\"positionAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n          }\n          break;\n        case \"size\":\n          settings.percent(k, v);\n          break;\n        case \"align\":\n          settings.alt(k, v, [\"start\", \"middle\", \"end\", \"left\", \"right\"]);\n          break;\n        }\n      }, /:/, /\\s/);\n\n      // Apply default values for any missing fields.\n      cue.region = settings.get(\"region\", null);\n      cue.vertical = settings.get(\"vertical\", \"\");\n      cue.line = settings.get(\"line\", \"auto\");\n      cue.lineAlign = settings.get(\"lineAlign\", \"start\");\n      cue.snapToLines = settings.get(\"snapToLines\", true);\n      cue.size = settings.get(\"size\", 100);\n      cue.align = settings.get(\"align\", \"middle\");\n      cue.position = settings.get(\"position\", \"auto\");\n      cue.positionAlign = settings.get(\"positionAlign\", {\n        start: \"start\",\n        left: \"start\",\n        middle: \"middle\",\n        end: \"end\",\n        right: \"end\"\n      }, cue.align);\n    }\n\n    function skipWhitespace() {\n      input = input.replace(/^\\s+/, \"\");\n    }\n\n    // 4.1 WebVTT cue timings.\n    skipWhitespace();\n    cue.startTime = consumeTimeStamp();   // (1) collect cue start time\n    skipWhitespace();\n    if (input.substr(0, 3) !== \"-->\") {     // (3) next characters must match \"-->\"\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n                             \"Malformed time stamp (time stamps must be separated by '-->'): \" +\n                             oInput);\n    }\n    input = input.substr(3);\n    skipWhitespace();\n    cue.endTime = consumeTimeStamp();     // (5) collect cue end time\n\n    // 4.1 WebVTT cue settings list.\n    skipWhitespace();\n    consumeCueSettings(input, cue);\n  }\n\n  var ESCAPE = {\n    \"&amp;\": \"&\",\n    \"&lt;\": \"<\",\n    \"&gt;\": \">\",\n    \"&lrm;\": \"\\u200e\",\n    \"&rlm;\": \"\\u200f\",\n    \"&nbsp;\": \"\\u00a0\"\n  };\n\n  var TAG_NAME = {\n    c: \"span\",\n    i: \"i\",\n    b: \"b\",\n    u: \"u\",\n    ruby: \"ruby\",\n    rt: \"rt\",\n    v: \"span\",\n    lang: \"span\"\n  };\n\n  var TAG_ANNOTATION = {\n    v: \"title\",\n    lang: \"lang\"\n  };\n\n  var NEEDS_PARENT = {\n    rt: \"ruby\"\n  };\n\n  // Parse content into a document fragment.\n  function parseContent(window, input) {\n    function nextToken() {\n      // Check for end-of-string.\n      if (!input) {\n        return null;\n      }\n\n      // Consume 'n' characters from the input.\n      function consume(result) {\n        input = input.substr(result.length);\n        return result;\n      }\n\n      var m = input.match(/^([^<]*)(<[^>]+>?)?/);\n      // If there is some text before the next tag, return it, otherwise return\n      // the tag.\n      return consume(m[1] ? m[1] : m[2]);\n    }\n\n    // Unescape a string 's'.\n    function unescape1(e) {\n      return ESCAPE[e];\n    }\n    function unescape(s) {\n      while ((m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))) {\n        s = s.replace(m[0], unescape1);\n      }\n      return s;\n    }\n\n    function shouldAdd(current, element) {\n      return !NEEDS_PARENT[element.localName] ||\n             NEEDS_PARENT[element.localName] === current.localName;\n    }\n\n    // Create an element for this tag.\n    function createElement(type, annotation) {\n      var tagName = TAG_NAME[type];\n      if (!tagName) {\n        return null;\n      }\n      var element = window.document.createElement(tagName);\n      element.localName = tagName;\n      var name = TAG_ANNOTATION[type];\n      if (name && annotation) {\n        element[name] = annotation.trim();\n      }\n      return element;\n    }\n\n    var rootDiv = window.document.createElement(\"div\"),\n        current = rootDiv,\n        t,\n        tagStack = [];\n\n    while ((t = nextToken()) !== null) {\n      if (t[0] === '<') {\n        if (t[1] === \"/\") {\n          // If the closing tag matches, move back up to the parent node.\n          if (tagStack.length &&\n              tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n            tagStack.pop();\n            current = current.parentNode;\n          }\n          // Otherwise just ignore the end tag.\n          continue;\n        }\n        var ts = parseTimeStamp(t.substr(1, t.length - 2));\n        var node;\n        if (ts) {\n          // Timestamps are lead nodes as well.\n          node = window.document.createProcessingInstruction(\"timestamp\", ts);\n          current.appendChild(node);\n          continue;\n        }\n        var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n        // If we can't parse the tag, skip to the next tag.\n        if (!m) {\n          continue;\n        }\n        // Try to construct an element, and ignore the tag if we couldn't.\n        node = createElement(m[1], m[3]);\n        if (!node) {\n          continue;\n        }\n        // Determine if the tag should be added based on the context of where it\n        // is placed in the cuetext.\n        if (!shouldAdd(current, node)) {\n          continue;\n        }\n        // Set the class list (as a list of classes, separated by space).\n        if (m[2]) {\n          node.className = m[2].substr(1).replace('.', ' ');\n        }\n        // Append the node to the current node, and enter the scope of the new\n        // node.\n        tagStack.push(m[1]);\n        current.appendChild(node);\n        current = node;\n        continue;\n      }\n\n      // Text nodes are leaf nodes.\n      current.appendChild(window.document.createTextNode(unescape(t)));\n    }\n\n    return rootDiv;\n  }\n\n  // This is a list of all the Unicode characters that have a strong\n  // right-to-left category. What this means is that these characters are\n  // written right-to-left for sure. It was generated by pulling all the strong\n  // right-to-left characters out of the Unicode data table. That table can\n  // found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\n  var strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6],\n   [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d],\n   [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6],\n   [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5],\n   [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815],\n   [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858],\n   [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f],\n   [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c],\n   [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1],\n   [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc],\n   [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808],\n   [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855],\n   [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f],\n   [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13],\n   [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58],\n   [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72],\n   [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f],\n   [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32],\n   [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42],\n   [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f],\n   [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59],\n   [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62],\n   [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77],\n   [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b],\n   [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\n  function isStrongRTLChar(charCode) {\n    for (var i = 0; i < strongRTLRanges.length; i++) {\n      var currentRange = strongRTLRanges[i];\n      if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function determineBidi(cueDiv) {\n    var nodeStack = [],\n        text = \"\",\n        charCode;\n\n    if (!cueDiv || !cueDiv.childNodes) {\n      return \"ltr\";\n    }\n\n    function pushNodes(nodeStack, node) {\n      for (var i = node.childNodes.length - 1; i >= 0; i--) {\n        nodeStack.push(node.childNodes[i]);\n      }\n    }\n\n    function nextTextNode(nodeStack) {\n      if (!nodeStack || !nodeStack.length) {\n        return null;\n      }\n\n      var node = nodeStack.pop(),\n          text = node.textContent || node.innerText;\n      if (text) {\n        // TODO: This should match all unicode type B characters (paragraph\n        // separator characters). See issue #115.\n        var m = text.match(/^.*(\\n|\\r)/);\n        if (m) {\n          nodeStack.length = 0;\n          return m[0];\n        }\n        return text;\n      }\n      if (node.tagName === \"ruby\") {\n        return nextTextNode(nodeStack);\n      }\n      if (node.childNodes) {\n        pushNodes(nodeStack, node);\n        return nextTextNode(nodeStack);\n      }\n    }\n\n    pushNodes(nodeStack, cueDiv);\n    while ((text = nextTextNode(nodeStack))) {\n      for (var i = 0; i < text.length; i++) {\n        charCode = text.charCodeAt(i);\n        if (isStrongRTLChar(charCode)) {\n          return \"rtl\";\n        }\n      }\n    }\n    return \"ltr\";\n  }\n\n  function computeLinePos(cue) {\n    if (typeof cue.line === \"number\" &&\n        (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {\n      return cue.line;\n    }\n    if (!cue.track || !cue.track.textTrackList ||\n        !cue.track.textTrackList.mediaElement) {\n      return -1;\n    }\n    var track = cue.track,\n        trackList = track.textTrackList,\n        count = 0;\n    for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n      if (trackList[i].mode === \"showing\") {\n        count++;\n      }\n    }\n    return ++count * -1;\n  }\n\n  function StyleBox() {\n  }\n\n  // Apply styles to a div. If there is no div passed then it defaults to the\n  // div on 'this'.\n  StyleBox.prototype.applyStyles = function(styles, div) {\n    div = div || this.div;\n    for (var prop in styles) {\n      if (styles.hasOwnProperty(prop)) {\n        div.style[prop] = styles[prop];\n      }\n    }\n  };\n\n  StyleBox.prototype.formatStyle = function(val, unit) {\n    return val === 0 ? 0 : val + unit;\n  };\n\n  // Constructs the computed display state of the cue (a div). Places the div\n  // into the overlay which should be a block level element (usually a div).\n  function CueStyleBox(window, cue, styleOptions) {\n    var isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n    var color = \"rgba(255, 255, 255, 1)\";\n    var backgroundColor = \"rgba(0, 0, 0, 0.8)\";\n    var textShadow = \"\";\n\n    if(typeof WebVTTSet !== \"undefined\") {\n      color = WebVTTSet.fontSet;\n      backgroundColor = WebVTTSet.backgroundSet;\n      textShadow = WebVTTSet.edgeSet;\n    }\n\n    if (isIE8) {\n      color = \"rgb(255, 255, 255)\";\n      backgroundColor = \"rgb(0, 0, 0)\";\n    }\n\n    StyleBox.call(this);\n    this.cue = cue;\n\n    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n    // have inline positioning and will function as the cue background box.\n    this.cueDiv = parseContent(window, cue.text);\n    var styles = {\n      color: color,\n      backgroundColor: backgroundColor,\n      textShadow: textShadow,\n      position: \"relative\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: \"inline\"\n    };\n\n    if (!isIE8) {\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n                                               : cue.vertical === \"lr\" ? \"vertical-lr\"\n                                                                       : \"vertical-rl\";\n      styles.unicodeBidi = \"plaintext\";\n    }\n    this.applyStyles(styles, this.cueDiv);\n\n    // Create an absolutely positioned div that will be used to position the cue\n    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n    // mirrors of them except \"middle\" which is \"center\" in CSS.\n    this.div = window.document.createElement(\"div\");\n    styles = {\n      textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n      font: styleOptions.font,\n      whiteSpace: \"pre-line\",\n      position: \"absolute\"\n    };\n\n    if (!isIE8) {\n      styles.direction = determineBidi(this.cueDiv);\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n                                               : cue.vertical === \"lr\" ? \"vertical-lr\"\n                                                                       : \"vertical-rl\".\n      stylesunicodeBidi =  \"plaintext\";\n    }\n\n    this.applyStyles(styles);\n\n    this.div.appendChild(this.cueDiv);\n\n    // Calculate the distance from the reference edge of the viewport to the text\n    // position of the cue box. The reference edge will be resolved later when\n    // the box orientation styles are applied.\n    var textPos = 0;\n    switch (cue.positionAlign) {\n    case \"start\":\n      textPos = cue.position;\n      break;\n    case \"middle\":\n      textPos = cue.position - (cue.size / 2);\n      break;\n    case \"end\":\n      textPos = cue.position - cue.size;\n      break;\n    }\n\n    // Horizontal box orientation; textPos is the distance from the left edge of the\n    // area to the left edge of the box and cue.size is the distance extending to\n    // the right from there.\n    if (cue.vertical === \"\") {\n      this.applyStyles({\n        left:  this.formatStyle(textPos, \"%\"),\n        width: this.formatStyle(cue.size, \"%\")\n      });\n    // Vertical box orientation; textPos is the distance from the top edge of the\n    // area to the top edge of the box and cue.size is the height extending\n    // downwards from there.\n    } else {\n      this.applyStyles({\n        top: this.formatStyle(textPos, \"%\"),\n        height: this.formatStyle(cue.size, \"%\")\n      });\n    }\n\n    this.move = function(box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, \"px\"),\n        bottom: this.formatStyle(box.bottom, \"px\"),\n        left: this.formatStyle(box.left, \"px\"),\n        right: this.formatStyle(box.right, \"px\"),\n        height: this.formatStyle(box.height, \"px\"),\n        width: this.formatStyle(box.width, \"px\")\n      });\n    };\n  }\n  CueStyleBox.prototype = _objCreate(StyleBox.prototype);\n  CueStyleBox.prototype.constructor = CueStyleBox;\n\n  // Represents the co-ordinates of an Element in a way that we can easily\n  // compute things with such as if it overlaps or intersects with another Element.\n  // Can initialize it with either a StyleBox or another BoxPosition.\n  function BoxPosition(obj) {\n    var isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n\n    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n    // was passed in and we need to copy the results of 'getBoundingClientRect'\n    // as the object returned is readonly. All co-ordinate values are in reference\n    // to the viewport origin (top left).\n    var lh, height, width, top;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n\n      var rects = (rects = obj.div.childNodes) && (rects = rects[0]) &&\n                  rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      // In certain cases the outter div will be slightly larger then the sum of\n      // the inner div's lines. This could be due to bold text, etc, on some platforms.\n      // In this case we should get the average line height and use that. This will\n      // result in the desired behaviour.\n      lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length)\n                 : 0;\n\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || (top + (obj.height || height));\n    this.width = obj.width || width;\n    this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n\n    if (isIE8 && !this.lineHeight) {\n      this.lineHeight = 13;\n    }\n  }\n\n  // Move the box along a particular axis. Optionally pass in an amount to move\n  // the box. If no amount is passed then the default is the line height of the\n  // box.\n  BoxPosition.prototype.move = function(axis, toMove) {\n    toMove = toMove !== undefined ? toMove : this.lineHeight;\n    switch (axis) {\n    case \"+x\":\n      this.left += toMove;\n      this.right += toMove;\n      break;\n    case \"-x\":\n      this.left -= toMove;\n      this.right -= toMove;\n      break;\n    case \"+y\":\n      this.top += toMove;\n      this.bottom += toMove;\n      break;\n    case \"-y\":\n      this.top -= toMove;\n      this.bottom -= toMove;\n      break;\n    }\n  };\n\n  // Check if this box overlaps another box, b2.\n  BoxPosition.prototype.overlaps = function(b2) {\n    return this.left < b2.right &&\n           this.right > b2.left &&\n           this.top < b2.bottom &&\n           this.bottom > b2.top;\n  };\n\n  // Check if this box overlaps any other boxes in boxes.\n  BoxPosition.prototype.overlapsAny = function(boxes) {\n    for (var i = 0; i < boxes.length; i++) {\n      if (this.overlaps(boxes[i])) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  // Check if this box is within another box.\n  BoxPosition.prototype.within = function(container) {\n    return this.top >= container.top &&\n           this.bottom <= container.bottom &&\n           this.left >= container.left &&\n           this.right <= container.right;\n  };\n\n  // Check if this box is entirely within the container or it is overlapping\n  // on the edge opposite of the axis direction passed. For example, if \"+x\" is\n  // passed and the box is overlapping on the left edge of the container, then\n  // return true.\n  BoxPosition.prototype.overlapsOppositeAxis = function(container, axis) {\n    switch (axis) {\n    case \"+x\":\n      return this.left < container.left;\n    case \"-x\":\n      return this.right > container.right;\n    case \"+y\":\n      return this.top < container.top;\n    case \"-y\":\n      return this.bottom > container.bottom;\n    }\n  };\n\n  // Find the percentage of the area that this box is overlapping with another\n  // box.\n  BoxPosition.prototype.intersectPercentage = function(b2) {\n    var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n        y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n        intersectArea = x * y;\n    return intersectArea / (this.height * this.width);\n  };\n\n  // Convert the positions from this box to CSS compatible positions using\n  // the reference container's positions. This has to be done because this\n  // box's positions are in reference to the viewport origin, whereas, CSS\n  // values are in referecne to their respective edges.\n  BoxPosition.prototype.toCSSCompatValues = function(reference) {\n    return {\n      top: this.top - reference.top,\n      bottom: reference.bottom - this.bottom,\n      left: this.left - reference.left,\n      right: reference.right - this.right,\n      height: this.height,\n      width: this.width\n    };\n  };\n\n  // Get an object that represents the box's position without anything extra.\n  // Can pass a StyleBox, HTMLElement, or another BoxPositon.\n  BoxPosition.getSimpleBoxPosition = function(obj) {\n    var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n    var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n    var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n    obj = obj.div ? obj.div.getBoundingClientRect() :\n                  obj.tagName ? obj.getBoundingClientRect() : obj;\n    var ret = {\n      left: obj.left,\n      right: obj.right,\n      top: obj.top || top,\n      height: obj.height || height,\n      bottom: obj.bottom || (top + (obj.height || height)),\n      width: obj.width || width\n    };\n    return ret;\n  };\n\n  // Move a StyleBox to its specified, or next best, position. The containerBox\n  // is the box that contains the StyleBox, such as a div. boxPositions are\n  // a list of other boxes that the styleBox can't overlap with.\n  function moveBoxToLinePosition(window, styleBox, containerBox, boxPositions) {\n\n    // Find the best position for a cue box, b, on the video. The axis parameter\n    // is a list of axis, the order of which, it will move the box along. For example:\n    // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n    // direction. If it doesn't find a good position for it there it will then move\n    // it along the x axis in the negative direction.\n    function findBestPosition(b, axis) {\n      var bestPosition,\n          specifiedPosition = new BoxPosition(b),\n          percentage = 1; // Highest possible so the first thing we get is better.\n\n      for (var i = 0; i < axis.length; i++) {\n        while (b.overlapsOppositeAxis(containerBox, axis[i]) ||\n               (b.within(containerBox) && b.overlapsAny(boxPositions))) {\n          b.move(axis[i]);\n        }\n        // We found a spot where we aren't overlapping anything. This is our\n        // best position.\n        if (b.within(containerBox)) {\n          return b;\n        }\n        var p = b.intersectPercentage(containerBox);\n        // If we're outside the container box less then we were on our last try\n        // then remember this position as the best position.\n        if (percentage > p) {\n          bestPosition = new BoxPosition(b);\n          percentage = p;\n        }\n        // Reset the box position to the specified position.\n        b = new BoxPosition(specifiedPosition);\n      }\n      return bestPosition || specifiedPosition;\n    }\n\n    var boxPosition = new BoxPosition(styleBox),\n        cue = styleBox.cue,\n        linePos = computeLinePos(cue),\n        axis = [];\n\n    // If we have a line number to align the cue to.\n    if (cue.snapToLines) {\n      var size;\n      switch (cue.vertical) {\n      case \"\":\n        axis = [ \"+y\", \"-y\" ];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [ \"+x\", \"-x\" ];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [ \"-x\", \"+x\" ];\n        size = \"width\";\n        break;\n      }\n\n      var step = boxPosition.lineHeight,\n          position = step * Math.round(linePos),\n          maxPosition = containerBox[size] + step,\n          initialAxis = axis[0];\n\n      // If the specified intial position is greater then the max position then\n      // clamp the box to the amount of steps it would take for the box to\n      // reach the max position.\n      if (Math.abs(position) > maxPosition) {\n        position = position < 0 ? -1 : 1;\n        position *= Math.ceil(maxPosition / step) * step;\n      }\n\n      // If computed line position returns negative then line numbers are\n      // relative to the bottom of the video instead of the top. Therefore, we\n      // need to increase our initial position by the length or width of the\n      // video, depending on the writing direction, and reverse our axis directions.\n      if (linePos < 0) {\n        position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n        axis = axis.reverse();\n      }\n\n      // Move the box to the specified position. This may not be its best\n      // position.\n      boxPosition.move(initialAxis, position);\n\n    } else {\n      // If we have a percentage line value for the cue.\n      var calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;\n\n      switch (cue.lineAlign) {\n      case \"middle\":\n        linePos -= (calculatedPercentage / 2);\n        break;\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n      }\n\n      // Apply initial line position to the cue box.\n      switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      }\n\n      axis = [ \"+y\", \"-x\", \"+x\", \"-y\" ];\n\n      // Get the box position again after we've applied the specified positioning\n      // to it.\n      boxPosition = new BoxPosition(styleBox);\n    }\n\n    var bestPosition = findBestPosition(boxPosition, axis);\n    styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n  }\n\n  function WebVTT() {\n    // Nothing\n  }\n\n  // Helper to allow strings to be decoded instead of the default binary utf8 data.\n  WebVTT.StringDecoder = function() {\n    return {\n      decode: function(data) {\n        if (!data) {\n          return \"\";\n        }\n        if (typeof data !== \"string\") {\n          throw new Error(\"Error - expected string data.\");\n        }\n        return decodeURIComponent(encodeURIComponent(data));\n      }\n    };\n  };\n\n  WebVTT.convertCueToDOMTree = function(window, cuetext) {\n    if (!window || !cuetext) {\n      return null;\n    }\n    return parseContent(window, cuetext);\n  };\n\n  var FONT_SIZE_PERCENT = 0.05;\n  var FONT_STYLE = \"sans-serif\";\n  var CUE_BACKGROUND_PADDING = \"1.5%\";\n\n  // Runs the processing model over the cues and regions passed to it.\n  // @param overlay A block level element (usually a div) that the computed cues\n  //                and regions will be placed into.\n  WebVTT.processCues = function(window, cues, overlay) {\n    if (!window || !cues || !overlay) {\n      return null;\n    }\n\n    // Remove all previous children.\n    while (overlay.firstChild) {\n      overlay.removeChild(overlay.firstChild);\n    }\n\n    var paddedOverlay = window.document.createElement(\"div\");\n    paddedOverlay.style.position = \"absolute\";\n    paddedOverlay.style.left = \"0\";\n    paddedOverlay.style.right = \"0\";\n    paddedOverlay.style.top = \"0\";\n    paddedOverlay.style.bottom = \"0\";\n    paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n    overlay.appendChild(paddedOverlay);\n\n    // Determine if we need to compute the display states of the cues. This could\n    // be the case if a cue's state has been changed since the last computation or\n    // if it has not been computed yet.\n    function shouldCompute(cues) {\n      for (var i = 0; i < cues.length; i++) {\n        if (cues[i].hasBeenReset || !cues[i].displayState) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    // We don't need to recompute the cues' display states. Just reuse them.\n    if (!shouldCompute(cues)) {\n      for (var i = 0; i < cues.length; i++) {\n        paddedOverlay.appendChild(cues[i].displayState);\n      }\n      return;\n    }\n\n    var boxPositions = [],\n        containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n        fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n    var styleOptions = {\n      font: (fontSize * fontScale) + \"px \" + FONT_STYLE\n    };\n\n    (function() {\n      var styleBox, cue;\n\n      for (var i = 0; i < cues.length; i++) {\n        cue = cues[i];\n\n        // Compute the intial position and styles of the cue div.\n        styleBox = new CueStyleBox(window, cue, styleOptions);\n        paddedOverlay.appendChild(styleBox.div);\n\n        // Move the cue div to it's correct line position.\n        moveBoxToLinePosition(window, styleBox, containerBox, boxPositions);\n\n        // Remember the computed div so that we don't have to recompute it later\n        // if we don't have too.\n        cue.displayState = styleBox.div;\n\n        boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n      }\n    })();\n  };\n\n  WebVTT.Parser = function(window, decoder) {\n    this.window = window;\n    this.state = \"INITIAL\";\n    this.buffer = \"\";\n    this.decoder = decoder || new TextDecoder(\"utf8\");\n    this.regionList = [];\n  };\n\n  WebVTT.Parser.prototype = {\n    // If the error is a ParsingError then report it to the consumer if\n    // possible. If it's not a ParsingError then throw it like normal.\n    reportOrThrowError: function(e) {\n      if (e instanceof ParsingError) {\n        this.onparsingerror && this.onparsingerror(e);\n      } else {\n        throw e;\n      }\n    },\n    parse: function (data) {\n      var self = this;\n\n      // If there is no data then we won't decode it, but will just try to parse\n      // whatever is in buffer already. This may occur in circumstances, for\n      // example when flush() is called.\n      if (data) {\n        // Try to decode the data that we received.\n        self.buffer += self.decoder.decode(data, {stream: true});\n      }\n\n      function collectNextLine() {\n        var buffer = self.buffer;\n        var pos = 0;\n        while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n          ++pos;\n        }\n        var line = buffer.substr(0, pos);\n        // Advance the buffer early in case we fail below.\n        if (buffer[pos] === '\\r') {\n          ++pos;\n        }\n        if (buffer[pos] === '\\n') {\n          ++pos;\n        }\n        self.buffer = buffer.substr(pos);\n        return line;\n      }\n\n      // 3.4 WebVTT region and WebVTT region settings syntax\n      function parseRegion(input) {\n        var settings = new Settings();\n\n        parseOptions(input, function (k, v) {\n          switch (k) {\n          case \"id\":\n            settings.set(k, v);\n            break;\n          case \"width\":\n            settings.percent(k, v);\n            break;\n          case \"lines\":\n            settings.integer(k, v);\n            break;\n          case \"regionanchor\":\n          case \"viewportanchor\":\n            var xy = v.split(',');\n            if (xy.length !== 2) {\n              break;\n            }\n            // We have to make sure both x and y parse, so use a temporary\n            // settings object here.\n            var anchor = new Settings();\n            anchor.percent(\"x\", xy[0]);\n            anchor.percent(\"y\", xy[1]);\n            if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n              break;\n            }\n            settings.set(k + \"X\", anchor.get(\"x\"));\n            settings.set(k + \"Y\", anchor.get(\"y\"));\n            break;\n          case \"scroll\":\n            settings.alt(k, v, [\"up\"]);\n            break;\n          }\n        }, /=/, /\\s/);\n\n        // Create the region, using default values for any values that were not\n        // specified.\n        if (settings.has(\"id\")) {\n          var region = new self.window.VTTRegion();\n          region.width = settings.get(\"width\", 100);\n          region.lines = settings.get(\"lines\", 3);\n          region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n          region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n          region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n          region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n          region.scroll = settings.get(\"scroll\", \"\");\n          // Register the region.\n          self.onregion && self.onregion(region);\n          // Remember the VTTRegion for later in case we parse any VTTCues that\n          // reference it.\n          self.regionList.push({\n            id: settings.get(\"id\"),\n            region: region\n          });\n        }\n      }\n\n      // 3.2 WebVTT metadata header syntax\n      function parseHeader(input) {\n        parseOptions(input, function (k, v) {\n          switch (k) {\n          case \"Region\":\n            // 3.3 WebVTT region metadata header syntax\n            parseRegion(v);\n            break;\n          }\n        }, /:/);\n      }\n\n      // 5.1 WebVTT file parsing.\n      try {\n        var line;\n        if (self.state === \"INITIAL\") {\n          // We can't start parsing until we have the first line.\n          if (!/\\r\\n|\\n/.test(self.buffer)) {\n            return this;\n          }\n\n          line = collectNextLine();\n\n          var m = line.match(/^WEBVTT([ \\t].*)?$/);\n          if (!m || !m[0]) {\n            throw new ParsingError(ParsingError.Errors.BadSignature);\n          }\n\n          self.state = \"HEADER\";\n        }\n\n        var alreadyCollectedLine = false;\n        while (self.buffer) {\n          // We can't parse a line until we have the full line.\n          if (!/\\r\\n|\\n/.test(self.buffer)) {\n            return this;\n          }\n\n          if (!alreadyCollectedLine) {\n            line = collectNextLine();\n          } else {\n            alreadyCollectedLine = false;\n          }\n\n          switch (self.state) {\n          case \"HEADER\":\n            // 13-18 - Allow a header (metadata) under the WEBVTT line.\n            if (/:/.test(line)) {\n              parseHeader(line);\n            } else if (!line) {\n              // An empty line terminates the header and starts the body (cues).\n              self.state = \"ID\";\n            }\n            continue;\n          case \"NOTE\":\n            // Ignore NOTE blocks.\n            if (!line) {\n              self.state = \"ID\";\n            }\n            continue;\n          case \"ID\":\n            // Check for the start of NOTE blocks.\n            if (/^NOTE($|[ \\t])/.test(line)) {\n              self.state = \"NOTE\";\n              break;\n            }\n            // 19-29 - Allow any number of line terminators, then initialize new cue values.\n            if (!line) {\n              continue;\n            }\n            self.cue = new self.window.VTTCue(0, 0, \"\");\n            self.state = \"CUE\";\n            // 30-39 - Check if self line contains an optional identifier or timing data.\n            if (line.indexOf(\"-->\") === -1) {\n              self.cue.id = line;\n              continue;\n            }\n            // Process line as start of a cue.\n            /*falls through*/\n          case \"CUE\":\n            // 40 - Collect cue timings and settings.\n            try {\n              parseCue(line, self.cue, self.regionList);\n            } catch (e) {\n              self.reportOrThrowError(e);\n              // In case of an error ignore rest of the cue.\n              self.cue = null;\n              self.state = \"BADCUE\";\n              continue;\n            }\n            self.state = \"CUETEXT\";\n            continue;\n          case \"CUETEXT\":\n            var hasSubstring = line.indexOf(\"-->\") !== -1;\n            // 34 - If we have an empty line then report the cue.\n            // 35 - If we have the special substring '-->' then report the cue,\n            // but do not collect the line as we need to process the current\n            // one as a new cue.\n            if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n              // We are done parsing self cue.\n              self.oncue && self.oncue(self.cue);\n              self.cue = null;\n              self.state = \"ID\";\n              continue;\n            }\n            if (self.cue.text) {\n              self.cue.text += \"\\n\";\n            }\n            self.cue.text += line;\n            continue;\n          case \"BADCUE\": // BADCUE\n            // 54-62 - Collect and discard the remaining cue.\n            if (!line) {\n              self.state = \"ID\";\n            }\n            continue;\n          }\n        }\n      } catch (e) {\n        self.reportOrThrowError(e);\n\n        // If we are currently parsing a cue, report what we have.\n        if (self.state === \"CUETEXT\" && self.cue && self.oncue) {\n          self.oncue(self.cue);\n        }\n        self.cue = null;\n        // Enter BADWEBVTT state if header was not parsed correctly otherwise\n        // another exception occurred so enter BADCUE state.\n        self.state = self.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n      }\n      return this;\n    },\n    flush: function () {\n      var self = this;\n      try {\n        // Finish decoding the stream.\n        self.buffer += self.decoder.decode();\n        // Synthesize the end of the current cue or region.\n        if (self.cue || self.state === \"HEADER\") {\n          self.buffer += \"\\n\\n\";\n          self.parse();\n        }\n        // If we've flushed, parsed, and we're still on the INITIAL state then\n        // that means we don't have enough of the stream to parse the first\n        // line.\n        if (self.state === \"INITIAL\") {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n      } catch(e) {\n        self.reportOrThrowError(e);\n      }\n      self.onflush && self.onflush();\n      return this;\n    }\n  };\n\n  global.WebVTT = WebVTT;\n\n}(this));\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// If we're in Node.js then require VTTCue so we can extend it, otherwise assume\n// VTTCue is on the global.\nif (typeof module !== \"undefined\" && module.exports) {\n  this.VTTCue = this.VTTCue || require(\"./vttcue\").VTTCue;\n}\n\n// Extend VTTCue with methods to convert to JSON, from JSON, and construct a\n// VTTCue from an options object. The primary purpose of this is for use in the\n// vtt.js test suite (for testing only properties that we care about). It's also\n// useful if you need to work with VTTCues in JSON format.\n(function(root) {\n\n  root.VTTCue.prototype.toJSON = function() {\n    var cue = {},\n        self = this;\n    // Filter out getCueAsHTML as it's a function and hasBeenReset and displayState as\n    // they're only used when running the processing model algorithm.\n    Object.keys(this).forEach(function(key) {\n      if (key !== \"getCueAsHTML\" && key !== \"hasBeenReset\" && key !== \"displayState\") {\n        cue[key] = self[key];\n      }\n    });\n    return cue;\n  };\n\n  root.VTTCue.create = function(options) {\n    if (!options.hasOwnProperty(\"startTime\") || !options.hasOwnProperty(\"endTime\") ||\n        !options.hasOwnProperty(\"text\")) {\n      throw new Error(\"You must at least have start time, end time, and text.\");\n    }\n    var cue = new root.VTTCue(options.startTime, options.endTime, options.text);\n    for (var key in options) {\n      if (cue.hasOwnProperty(key)) {\n        cue[key] = options[key];\n      }\n    }\n    return cue;\n  };\n\n  root.VTTCue.fromJSON = function(json) {\n    return this.create(JSON.parse(json));\n  };\n\n}(this));\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(root) {\n\n  var autoKeyword = \"auto\";\n  var directionSetting = {\n    \"\": true,\n    \"lr\": true,\n    \"rl\": true\n  };\n  var alignSetting = {\n    \"start\": true,\n    \"middle\": true,\n    \"end\": true,\n    \"left\": true,\n    \"right\": true\n  };\n\n  function findDirectionSetting(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    var dir = directionSetting[value.toLowerCase()];\n    return dir ? value.toLowerCase() : false;\n  }\n\n  function findAlignSetting(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    var align = alignSetting[value.toLowerCase()];\n    return align ? value.toLowerCase() : false;\n  }\n\n  function extend(obj) {\n    var i = 1;\n    for (; i < arguments.length; i++) {\n      var cobj = arguments[i];\n      for (var p in cobj) {\n        obj[p] = cobj[p];\n      }\n    }\n\n    return obj;\n  }\n\n  function VTTCue(startTime, endTime, text) {\n    var cue = this;\n    var isIE8 = (/MSIE\\s8\\.0/).test(navigator.userAgent);\n    var baseObj = {};\n\n    if (isIE8) {\n      cue = document.createElement('custom');\n    } else {\n      baseObj.enumerable = true;\n    }\n\n    /**\n     * Shim implementation specific properties. These properties are not in\n     * the spec.\n     */\n\n    // Lets us know when the VTTCue's data has changed in such a way that we need\n    // to recompute its display state. This lets us compute its display state\n    // lazily.\n    cue.hasBeenReset = false;\n\n    /**\n     * VTTCue and TextTrackCue properties\n     * http://dev.w3.org/html5/webvtt/#vttcue-interface\n     */\n\n    var _id = \"\";\n    var _pauseOnExit = false;\n    var _startTime = startTime;\n    var _endTime = endTime;\n    var _text = text;\n    var _region = null;\n    var _vertical = \"\";\n    var _snapToLines = true;\n    var _line = \"auto\";\n    var _lineAlign = \"start\";\n    var _position = 50;\n    var _positionAlign = \"middle\";\n    var _size = 50;\n    var _align = \"middle\";\n\n    Object.defineProperty(cue,\n      \"id\", extend({}, baseObj, {\n        get: function() {\n          return _id;\n        },\n        set: function(value) {\n          _id = \"\" + value;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"pauseOnExit\", extend({}, baseObj, {\n        get: function() {\n          return _pauseOnExit;\n        },\n        set: function(value) {\n          _pauseOnExit = !!value;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"startTime\", extend({}, baseObj, {\n        get: function() {\n          return _startTime;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\") {\n            throw new TypeError(\"Start time must be set to a number.\");\n          }\n          _startTime = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"endTime\", extend({}, baseObj, {\n        get: function() {\n          return _endTime;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\") {\n            throw new TypeError(\"End time must be set to a number.\");\n          }\n          _endTime = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"text\", extend({}, baseObj, {\n        get: function() {\n          return _text;\n        },\n        set: function(value) {\n          _text = \"\" + value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"region\", extend({}, baseObj, {\n        get: function() {\n          return _region;\n        },\n        set: function(value) {\n          _region = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"vertical\", extend({}, baseObj, {\n        get: function() {\n          return _vertical;\n        },\n        set: function(value) {\n          var setting = findDirectionSetting(value);\n          // Have to check for false because the setting an be an empty string.\n          if (setting === false) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _vertical = setting;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"snapToLines\", extend({}, baseObj, {\n        get: function() {\n          return _snapToLines;\n        },\n        set: function(value) {\n          _snapToLines = !!value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"line\", extend({}, baseObj, {\n        get: function() {\n          return _line;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\" && value !== autoKeyword) {\n            throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n          }\n          _line = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"lineAlign\", extend({}, baseObj, {\n        get: function() {\n          return _lineAlign;\n        },\n        set: function(value) {\n          var setting = findAlignSetting(value);\n          if (!setting) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _lineAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"position\", extend({}, baseObj, {\n        get: function() {\n          return _position;\n        },\n        set: function(value) {\n          if (value < 0 || value > 100) {\n            throw new Error(\"Position must be between 0 and 100.\");\n          }\n          _position = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"positionAlign\", extend({}, baseObj, {\n        get: function() {\n          return _positionAlign;\n        },\n        set: function(value) {\n          var setting = findAlignSetting(value);\n          if (!setting) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _positionAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"size\", extend({}, baseObj, {\n        get: function() {\n          return _size;\n        },\n        set: function(value) {\n          if (value < 0 || value > 100) {\n            throw new Error(\"Size must be between 0 and 100.\");\n          }\n          _size = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"align\", extend({}, baseObj, {\n        get: function() {\n          return _align;\n        },\n        set: function(value) {\n          var setting = findAlignSetting(value);\n          if (!setting) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _align = setting;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    /**\n     * Other <track> spec defined properties\n     */\n\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n    cue.displayState = undefined;\n\n    if (isIE8) {\n      return cue;\n    }\n  }\n\n  /**\n   * VTTCue methods\n   */\n\n  VTTCue.prototype.getCueAsHTML = function() {\n    // Assume WebVTT.convertCueToDOMTree is on the global.\n    return WebVTT.convertCueToDOMTree(window, this.text);\n  };\n\n  root.VTTCue = root.VTTCue || VTTCue;\n}(this));\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// If we're in Node.js then require VTTRegion so we can extend it, otherwise assume\n// VTTRegion is on the global.\nif (typeof module !== \"undefined\" && module.exports) {\n  this.VTTRegion = require(\"./vttregion\").VTTRegion;\n}\n\n// Extend VTTRegion with methods to convert to JSON, from JSON, and construct a\n// VTTRegion from an options object. The primary purpose of this is for use in the\n// vtt.js test suite. It's also useful if you need to work with VTTRegions in\n// JSON format.\n(function(root) {\n\n  root.VTTRegion.create = function(options) {\n    var region = new root.VTTRegion();\n    for (var key in options) {\n      if (region.hasOwnProperty(key)) {\n        region[key] = options[key];\n      }\n    }\n    return region;\n  };\n\n  root.VTTRegion.fromJSON = function(json) {\n    return this.create(JSON.parse(json));\n  };\n\n}(this));\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(root) {\n\n  var scrollSetting = {\n    \"\": true,\n    \"up\": true\n  };\n\n  function findScrollSetting(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    var scroll = scrollSetting[value.toLowerCase()];\n    return scroll ? value.toLowerCase() : false;\n  }\n\n  function isValidPercentValue(value) {\n    return typeof value === \"number\" && (value >= 0 && value <= 100);\n  }\n\n  // VTTRegion shim http://dev.w3.org/html5/webvtt/#vttregion-interface\n  function VTTRegion() {\n    var _width = 100;\n    var _lines = 3;\n    var _regionAnchorX = 0;\n    var _regionAnchorY = 100;\n    var _viewportAnchorX = 0;\n    var _viewportAnchorY = 100;\n    var _scroll = \"\";\n\n    Object.defineProperties(this, {\n      \"width\": {\n        enumerable: true,\n        get: function() {\n          return _width;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"Width must be between 0 and 100.\");\n          }\n          _width = value;\n        }\n      },\n      \"lines\": {\n        enumerable: true,\n        get: function() {\n          return _lines;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\") {\n            throw new TypeError(\"Lines must be set to a number.\");\n          }\n          _lines = value;\n        }\n      },\n      \"regionAnchorY\": {\n        enumerable: true,\n        get: function() {\n          return _regionAnchorY;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"RegionAnchorX must be between 0 and 100.\");\n          }\n          _regionAnchorY = value;\n        }\n      },\n      \"regionAnchorX\": {\n        enumerable: true,\n        get: function() {\n          return _regionAnchorX;\n        },\n        set: function(value) {\n          if(!isValidPercentValue(value)) {\n            throw new Error(\"RegionAnchorY must be between 0 and 100.\");\n          }\n          _regionAnchorX = value;\n        }\n      },\n      \"viewportAnchorY\": {\n        enumerable: true,\n        get: function() {\n          return _viewportAnchorY;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"ViewportAnchorY must be between 0 and 100.\");\n          }\n          _viewportAnchorY = value;\n        }\n      },\n      \"viewportAnchorX\": {\n        enumerable: true,\n        get: function() {\n          return _viewportAnchorX;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"ViewportAnchorX must be between 0 and 100.\");\n          }\n          _viewportAnchorX = value;\n        }\n      },\n      \"scroll\": {\n        enumerable: true,\n        get: function() {\n          return _scroll;\n        },\n        set: function(value) {\n          var setting = findScrollSetting(value);\n          // Have to check for false as an empty string is a legal value.\n          if (setting === false) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _scroll = setting;\n        }\n      }\n    });\n  }\n\n  root.VTTRegion = root.VTTRegion || VTTRegion;\n}(this));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","export var ImageErrorCode;\n(function (ImageErrorCode) {\n    ImageErrorCode[ImageErrorCode[\"captureFailed\"] = 1] = \"captureFailed\";\n    ImageErrorCode[ImageErrorCode[\"fileLinkLost\"] = 2] = \"fileLinkLost\";\n})(ImageErrorCode || (ImageErrorCode = {}));\nexport var AudioErrorCode;\n(function (AudioErrorCode) {\n    AudioErrorCode[AudioErrorCode[\"drmProtected\"] = 1] = \"drmProtected\";\n    AudioErrorCode[AudioErrorCode[\"fileLinkLost\"] = 2] = \"fileLinkLost\";\n})(AudioErrorCode || (AudioErrorCode = {}));\nexport var VideoDataUiOpenReason;\n(function (VideoDataUiOpenReason) {\n    VideoDataUiOpenReason[VideoDataUiOpenReason[\"miningCommand\"] = 1] = \"miningCommand\";\n    VideoDataUiOpenReason[VideoDataUiOpenReason[\"failedToAutoLoadPreferredTrack\"] = 2] = \"failedToAutoLoadPreferredTrack\";\n    VideoDataUiOpenReason[VideoDataUiOpenReason[\"userRequested\"] = 3] = \"userRequested\";\n})(VideoDataUiOpenReason || (VideoDataUiOpenReason = {}));\nexport var PostMineAction;\n(function (PostMineAction) {\n    PostMineAction[PostMineAction[\"none\"] = 0] = \"none\";\n    PostMineAction[PostMineAction[\"showAnkiDialog\"] = 1] = \"showAnkiDialog\";\n    PostMineAction[PostMineAction[\"updateLastCard\"] = 2] = \"updateLastCard\";\n    PostMineAction[PostMineAction[\"exportCard\"] = 3] = \"exportCard\";\n})(PostMineAction || (PostMineAction = {}));\nexport var PostMinePlayback;\n(function (PostMinePlayback) {\n    PostMinePlayback[PostMinePlayback[\"remember\"] = 0] = \"remember\";\n    PostMinePlayback[PostMinePlayback[\"play\"] = 1] = \"play\";\n    PostMinePlayback[PostMinePlayback[\"pause\"] = 2] = \"pause\";\n})(PostMinePlayback || (PostMinePlayback = {}));\nexport var AutoPausePreference;\n(function (AutoPausePreference) {\n    AutoPausePreference[AutoPausePreference[\"atStart\"] = 1] = \"atStart\";\n    AutoPausePreference[AutoPausePreference[\"atEnd\"] = 2] = \"atEnd\";\n})(AutoPausePreference || (AutoPausePreference = {}));\nexport var PlayMode;\n(function (PlayMode) {\n    PlayMode[PlayMode[\"normal\"] = 1] = \"normal\";\n    PlayMode[PlayMode[\"condensed\"] = 2] = \"condensed\";\n    PlayMode[PlayMode[\"autoPause\"] = 3] = \"autoPause\";\n    PlayMode[PlayMode[\"fastForward\"] = 4] = \"fastForward\";\n    PlayMode[PlayMode[\"repeat\"] = 5] = \"repeat\";\n})(PlayMode || (PlayMode = {}));\nexport var ControlType;\n(function (ControlType) {\n    ControlType[ControlType[\"timeDisplay\"] = 0] = \"timeDisplay\";\n    ControlType[ControlType[\"subtitleOffset\"] = 1] = \"subtitleOffset\";\n    ControlType[ControlType[\"playbackRate\"] = 2] = \"playbackRate\";\n})(ControlType || (ControlType = {}));\n","import sanitize from 'sanitize-filename';\nexport function humanReadableTime(timestamp, nearestTenth = false) {\n    const totalSeconds = Math.floor(timestamp / 1000);\n    let seconds;\n    if (nearestTenth) {\n        seconds = Math.round(((timestamp / 1000) % 60) * 10) / 10;\n    }\n    else {\n        seconds = totalSeconds % 60;\n    }\n    const minutes = Math.floor(totalSeconds / 60) % 60;\n    const hours = Math.floor(totalSeconds / 3600);\n    if (hours > 0) {\n        return hours + 'h' + String(minutes).padStart(2, '0') + 'm' + String(seconds).padStart(2, '0') + 's';\n    }\n    return minutes + 'm' + String(seconds).padStart(2, '0') + 's';\n}\nexport function surroundingSubtitles(subtitles, index, countRadius, timeRadius) {\n    let startIndex = index;\n    for (let i = index; i >= 0; --i) {\n        startIndex = i;\n        if (atBoundary(subtitles, startIndex, index, countRadius, timeRadius, Direction.backward)) {\n            break;\n        }\n    }\n    let endIndex = startIndex;\n    for (let i = index; i <= subtitles.length - 1; ++i) {\n        endIndex = i;\n        if (atBoundary(subtitles, endIndex, index, countRadius, timeRadius, Direction.forward)) {\n            break;\n        }\n    }\n    return subtitles.slice(startIndex, endIndex + 1);\n}\nfunction indexNearTimestamp(subtitles, timestamp, direction) {\n    if (direction === Direction.forward) {\n        for (let i = 0; i < subtitles.length; ++i) {\n            if (subtitles[i].start >= timestamp) {\n                return i;\n            }\n        }\n    }\n    else {\n        for (let i = subtitles.length - 1; i >= 0; --i) {\n            if (subtitles[i].start <= timestamp) {\n                return i;\n            }\n        }\n    }\n    return undefined;\n}\nexport function surroundingSubtitlesAroundInterval(subtitles, startTimestamp, endTimestamp, countRadius, timeRadius) {\n    if (subtitles.length === 0) {\n        return {};\n    }\n    let startBoundaryIndex = 0;\n    const indexAfterStartTimestamp = indexNearTimestamp(subtitles, startTimestamp, Direction.forward) ?? subtitles.length - 1;\n    for (let i = 0; i < subtitles.length; ++i) {\n        startBoundaryIndex = i;\n        if (withinBoundaryAroundInterval(subtitles, i, countRadius, timeRadius, startTimestamp, indexAfterStartTimestamp)) {\n            break;\n        }\n    }\n    let endBoundaryIndex = subtitles.length - 1;\n    const indexBeforeEndTimestamp = indexNearTimestamp(subtitles, endTimestamp, Direction.backward) ?? 0;\n    for (let i = subtitles.length - 1; i >= 0; --i) {\n        endBoundaryIndex = i;\n        if (withinBoundaryAroundInterval(subtitles, i, countRadius, timeRadius, endTimestamp, indexBeforeEndTimestamp)) {\n            break;\n        }\n    }\n    if (endBoundaryIndex <= startBoundaryIndex) {\n        return {};\n    }\n    return {\n        surroundingSubtitles: subtitles.slice(startBoundaryIndex, endBoundaryIndex + 1),\n        subtitle: subtitles[indexAfterStartTimestamp],\n    };\n}\nexport function mockSurroundingSubtitles(middleSubtitle, maxTimestamp, timeRadius) {\n    const subtitles = [middleSubtitle];\n    const offset = middleSubtitle.start - middleSubtitle.originalStart;\n    if (middleSubtitle.end < maxTimestamp) {\n        const afterTimestamp = Math.min(maxTimestamp, middleSubtitle.end + timeRadius);\n        subtitles.push({\n            text: '',\n            start: middleSubtitle.end,\n            end: afterTimestamp,\n            originalStart: middleSubtitle.end - offset,\n            originalEnd: afterTimestamp - offset,\n            track: middleSubtitle.track,\n        });\n    }\n    if (middleSubtitle.start > 0) {\n        const beforeTimestamp = Math.max(0, middleSubtitle.start - timeRadius);\n        subtitles.unshift({\n            text: '',\n            start: beforeTimestamp,\n            end: middleSubtitle.start,\n            originalStart: beforeTimestamp - offset,\n            originalEnd: middleSubtitle.start - offset,\n            track: middleSubtitle.track,\n        });\n    }\n    return subtitles;\n}\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"forward\"] = 0] = \"forward\";\n    Direction[Direction[\"backward\"] = 1] = \"backward\";\n})(Direction || (Direction = {}));\nfunction atBoundary(subtitles, index, initialIndex, countRadius, timeRadius, direction) {\n    let next;\n    if (direction == Direction.forward) {\n        next = index + 1 < subtitles.length ? subtitles[index + 1] : null;\n    }\n    else {\n        next = index - 1 >= 0 ? subtitles[index - 1] : null;\n    }\n    if (Math.abs(initialIndex - index) >= countRadius &&\n        (next === null || Math.abs(next.start - subtitles[initialIndex].start) >= timeRadius)) {\n        return true;\n    }\n    return false;\n}\nfunction withinBoundaryAroundInterval(subtitles, index, countRadius, timeRadius, timestamp, indexNearTimestamp) {\n    const current = subtitles[index];\n    if (Math.abs(indexNearTimestamp - index) <= countRadius || Math.abs(current.start - timestamp) <= timeRadius) {\n        return true;\n    }\n    return false;\n}\nexport function subtitleIntersectsTimeInterval(subtitle, interval) {\n    const length = Math.max(0, subtitle.end - subtitle.start);\n    if (length === 0) {\n        return false;\n    }\n    const overlapStart = Math.max(subtitle.start, interval[0]);\n    const overlapEnd = Math.min(subtitle.end, interval[1]);\n    return overlapEnd - overlapStart >= length / 2;\n}\nexport function joinSubtitles(subtitles) {\n    return subtitles\n        .filter((s) => s.text.trim() !== '')\n        .map((s) => s.text)\n        .join('\\n');\n}\nexport function extractText(subtitle, surroundingSubtitles, track) {\n    if (surroundingSubtitles.length === 0) {\n        return subtitle.text;\n    }\n    const interval = [subtitle.start, subtitle.end];\n    return joinSubtitles(surroundingSubtitles\n        .filter((s) => subtitleIntersectsTimeInterval(s, interval))\n        .filter((s) => track === undefined || s.track === track));\n}\nexport function download(blob, name) {\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    document.body.appendChild(a);\n    a.style.display = 'none';\n    a.href = url;\n    a.download = sanitize(name);\n    a.click();\n    URL.revokeObjectURL(url);\n    a.remove();\n}\nexport function computeStyles({ subtitleColor, subtitleSize, subtitleThickness, subtitleOutlineThickness, subtitleOutlineColor, subtitleShadowThickness, subtitleShadowColor, subtitleBackgroundOpacity, subtitleBackgroundColor, subtitleFontFamily, subtitleCustomStyles, }) {\n    const styles = {\n        color: subtitleColor,\n        fontSize: `${subtitleSize}px`,\n        fontWeight: String(subtitleThickness),\n    };\n    if (subtitleOutlineThickness > 0) {\n        const thickness = subtitleOutlineThickness;\n        const color = subtitleOutlineColor;\n        styles['WebkitTextStroke'] = `${color} ${thickness}px`;\n    }\n    if (subtitleShadowThickness > 0) {\n        styles['textShadow'] = `0 0 ${subtitleShadowThickness}px ${subtitleShadowColor}, 0 0 ${subtitleShadowThickness}px ${subtitleShadowColor}, 0 0 ${subtitleShadowThickness}px ${subtitleShadowColor}, 0 0 ${subtitleShadowThickness}px ${subtitleShadowColor}`;\n    }\n    if (subtitleBackgroundOpacity > 0) {\n        const opacity = subtitleBackgroundOpacity;\n        const color = subtitleBackgroundColor;\n        const { r, g, b } = hexToRgb(color);\n        styles['backgroundColor'] = `rgba(${r}, ${g}, ${b}, ${opacity})`;\n    }\n    if (subtitleFontFamily && subtitleFontFamily.length > 0) {\n        styles['fontFamily'] = `'${subtitleFontFamily}'`;\n    }\n    for (const customStyle of subtitleCustomStyles) {\n        let key;\n        if (customStyle.key.startsWith('webkit') ||\n            customStyle.key.startsWith('moz') ||\n            customStyle.key.startsWith('ms') ||\n            /^o[A-Z].*/.test(customStyle.key)) {\n            key = customStyle.key.charAt(0).toUpperCase() + customStyle.key.slice(1);\n        }\n        else {\n            key = customStyle.key;\n        }\n        if (!isNumeric(key)) {\n            // A bug has allowed style keys that look like '0', '1',... to make it into some users' settings\n            // Using such a style key with react crashes the app, so filter them out here\n            styles[key] = customStyle.value;\n        }\n    }\n    return styles;\n}\nexport function isNumeric(str) {\n    return !isNaN(Number(str));\n}\n// https://stackoverflow.com/questions/63116039/camelcase-to-kebab-case\nfunction kebabize(str) {\n    const kebabized = str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, ($, ofs) => (ofs ? '-' : '') + $.toLowerCase());\n    if (kebabized.startsWith('webkit-') ||\n        kebabized.startsWith('moz-') ||\n        kebabized.startsWith('ms-') ||\n        kebabized.startsWith('o-')) {\n        return `-${kebabized}`;\n    }\n    return kebabized;\n}\nexport function computeStyleString(styleSettings) {\n    const stylesMap = computeStyles(styleSettings);\n    const styleList = [];\n    for (const [key, value] of Object.entries(stylesMap)) {\n        styleList.push(`${kebabize(key)}: ${value} !important`);\n    }\n    return styleList.join(';');\n}\n// https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\nexport function hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (!result) {\n        return { r: 255, g: 255, b: 255 };\n    }\n    return {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n    };\n}\nexport function sourceString(subtitleFileName, timestamp) {\n    return timestamp === 0 ? subtitleFileName : `${subtitleFileName} (${humanReadableTime(timestamp)})`;\n}\nexport function seekWithNudge(media, timestampSeconds) {\n    media.currentTime = timestampSeconds;\n    if (media.currentTime < timestampSeconds) {\n        // Seeking is imprecise and may not land on the desired timestamp\n        // Favor seeking slightly ahead to avoid getting stuck when seeking between subtitles\n        media.currentTime = Math.min(media.duration, media.currentTime + 0.01);\n    }\n    return media.currentTime;\n}\n","export const resizeCanvas = (canvas, ctx, maxWidth, maxHeight) => {\n    return new Promise((resolve, reject) => {\n        const widthRatio = maxWidth <= 0 ? 1 : maxWidth / canvas.width;\n        const heightRatio = maxHeight <= 0 ? 1 : maxHeight / canvas.height;\n        const ratio = Math.min(1, Math.min(widthRatio, heightRatio));\n        if (ratio < 1) {\n            const newWidth = canvas.width * ratio;\n            const newHeight = canvas.height * ratio;\n            createImageBitmap(canvas, { resizeWidth: newWidth, resizeHeight: newHeight, resizeQuality: 'high' })\n                .then((sprite) => {\n                canvas.width = newWidth;\n                canvas.height = newHeight;\n                ctx.drawImage(sprite, 0, 0);\n                resolve(canvas);\n            })\n                .catch((e) => reject(e));\n        }\n        else {\n            resolve(canvas);\n        }\n    });\n};\nexport const cropAndResize = async (maxWidth, maxHeight, rect, imageDataUrl) => {\n    return new Promise((resolve, reject) => {\n        const image = new Image();\n        image.onload = async () => {\n            const canvas = document.createElement('canvas');\n            const r = window.devicePixelRatio;\n            const width = rect.width * r;\n            const height = rect.height * r;\n            canvas.width = width;\n            canvas.height = height;\n            const ctx = canvas.getContext('2d');\n            ctx.drawImage(image, rect.left * r, rect.top * r, width, height, 0, 0, width, height);\n            if (maxWidth > 0 || maxHeight > 0) {\n                try {\n                    await resizeCanvas(canvas, ctx, maxWidth, maxHeight);\n                    resolve(canvas.toDataURL('image/jpeg'));\n                }\n                catch (e) {\n                    console.error('Failed to crop and resize image: ' + e);\n                    reject(e);\n                }\n            }\n            else {\n                resolve(canvas.toDataURL('image/jpeg'));\n            }\n        };\n        image.src = imageDataUrl;\n    });\n};\n","export var StartRecordingErrorCode;\n(function (StartRecordingErrorCode) {\n    StartRecordingErrorCode[StartRecordingErrorCode[\"noActiveTabPermission\"] = 1] = \"noActiveTabPermission\";\n    StartRecordingErrorCode[StartRecordingErrorCode[\"drmProtected\"] = 2] = \"drmProtected\";\n    StartRecordingErrorCode[StartRecordingErrorCode[\"other\"] = 3] = \"other\";\n})(StartRecordingErrorCode || (StartRecordingErrorCode = {}));\nexport var StopRecordingErrorCode;\n(function (StopRecordingErrorCode) {\n    StopRecordingErrorCode[StopRecordingErrorCode[\"timedAudioRecordingInProgress\"] = 1] = \"timedAudioRecordingInProgress\";\n    StopRecordingErrorCode[StopRecordingErrorCode[\"other\"] = 2] = \"other\";\n})(StopRecordingErrorCode || (StopRecordingErrorCode = {}));\n","export default class AutoPauseContext {\n    willStopShowing(subtitle) {\n        if (subtitle.end === this.lastWillStopShowing?.end) {\n            return;\n        }\n        this.onWillStopShowing?.(subtitle);\n        this.lastWillStopShowing = subtitle;\n    }\n    startedShowing(subtitle) {\n        if (subtitle.start === this.lastStartedShowing?.start) {\n            return;\n        }\n        this.onStartedShowing?.();\n        this.lastStartedShowing = subtitle;\n    }\n    clear() {\n        this.lastStartedShowing = undefined;\n        this.lastWillStopShowing = undefined;\n    }\n}\n","export default class OffscreenDomCache {\n    constructor() {\n        this._cachedContentElements = {};\n        this._empty = true;\n    }\n    get empty() {\n        return this._empty;\n    }\n    clear() {\n        this.offscreenElement?.remove();\n        this.offscreenElement = undefined;\n        this._cachedContentElements = {};\n        this._empty = true;\n    }\n    add(key, html) {\n        const cached = document.createElement('div');\n        cached.innerHTML = `${html}\\n`;\n        this._cachedContentElements[key] = cached;\n        this._offscreenElement().appendChild(cached);\n        this._empty = false;\n    }\n    return(element) {\n        this._offscreenElement().appendChild(element);\n    }\n    get(key, html) {\n        let cached = this._cachedContentElements[key];\n        if (!cached) {\n            if (html === undefined) {\n                throw new Error(`Cached html not found for key ${key}`);\n            }\n            cached = document.createElement('div');\n            cached.innerHTML = html();\n            this._cachedContentElements[key] = cached;\n            this._offscreenElement().appendChild(cached);\n        }\n        return cached;\n    }\n    _offscreenElement() {\n        if (this.offscreenElement) {\n            return this.offscreenElement;\n        }\n        const element = document.createElement('div');\n        element.className = 'asbplayer-offscreen';\n        document.body.append(element);\n        this.offscreenElement = element;\n        return element;\n    }\n}\n","export default class Mp3Encoder {\n    static async encode(blob, workerFactory) {\n        return new Promise(async (resolve, reject) => {\n            var reader = new FileReader();\n            reader.onload = async (e) => {\n                try {\n                    const audioContext = new AudioContext();\n                    if (e.target === null) {\n                        reject(new Error('Could not obtain buffer to encode'));\n                        return;\n                    }\n                    const audioBuffer = await audioContext.decodeAudioData(e.target.result);\n                    const channels = [];\n                    for (let i = 0; i < audioBuffer.numberOfChannels; ++i) {\n                        channels.push(audioBuffer.getChannelData(i));\n                    }\n                    const workerValue = workerFactory();\n                    const worker = workerValue instanceof Worker ? workerValue : await workerValue;\n                    worker.postMessage({\n                        command: 'encode',\n                        audioBuffer: {\n                            channels: channels,\n                            numberOfChannels: audioBuffer.numberOfChannels,\n                            length: audioBuffer.length,\n                            sampleRate: audioBuffer.sampleRate,\n                        },\n                    });\n                    worker.onmessage = (e) => {\n                        resolve(new Blob(e.data.buffer, { type: 'audio/mp3' }));\n                        worker.terminate();\n                    };\n                    worker.onerror = (e) => {\n                        const error = e?.error ?? new Error('MP3 encoding failed: ' + e?.message);\n                        reject(error);\n                        worker.terminate();\n                    };\n                }\n                catch (e) {\n                    reject(e);\n                }\n            };\n            reader.readAsArrayBuffer(blob);\n        });\n    }\n}\n","/**! \n * hotkeys-js v3.10.0 \n * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies. \n * \n * Copyright (c) 2022 kenny wong <wowohoo@qq.com> \n * http://jaywcjlove.github.io/hotkeys \n * Licensed under the MIT license \n */\n\nvar isff = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase().indexOf('firefox') > 0 : false; // 绑定事件\n\nfunction addEvent(object, event, method, useCapture) {\n  if (object.addEventListener) {\n    object.addEventListener(event, method, useCapture);\n  } else if (object.attachEvent) {\n    object.attachEvent(\"on\".concat(event), function () {\n      method(window.event);\n    });\n  }\n} // 修饰键转换成对应的键码\n\n\nfunction getMods(modifier, key) {\n  var mods = key.slice(0, key.length - 1);\n\n  for (var i = 0; i < mods.length; i++) {\n    mods[i] = modifier[mods[i].toLowerCase()];\n  }\n\n  return mods;\n} // 处理传的key字符串转换成数组\n\n\nfunction getKeys(key) {\n  if (typeof key !== 'string') key = '';\n  key = key.replace(/\\s/g, ''); // 匹配任何空白字符,包括空格、制表符、换页符等等\n\n  var keys = key.split(','); // 同时设置多个快捷键，以','分割\n\n  var index = keys.lastIndexOf(''); // 快捷键可能包含','，需特殊处理\n\n  for (; index >= 0;) {\n    keys[index - 1] += ',';\n    keys.splice(index, 1);\n    index = keys.lastIndexOf('');\n  }\n\n  return keys;\n} // 比较修饰键的数组\n\n\nfunction compareArray(a1, a2) {\n  var arr1 = a1.length >= a2.length ? a1 : a2;\n  var arr2 = a1.length >= a2.length ? a2 : a1;\n  var isIndex = true;\n\n  for (var i = 0; i < arr1.length; i++) {\n    if (arr2.indexOf(arr1[i]) === -1) isIndex = false;\n  }\n\n  return isIndex;\n}\n\nvar _keyMap = {\n  backspace: 8,\n  '⌫': 8,\n  tab: 9,\n  clear: 12,\n  enter: 13,\n  '↩': 13,\n  return: 13,\n  esc: 27,\n  escape: 27,\n  space: 32,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  del: 46,\n  delete: 46,\n  ins: 45,\n  insert: 45,\n  home: 36,\n  end: 35,\n  pageup: 33,\n  pagedown: 34,\n  capslock: 20,\n  num_0: 96,\n  num_1: 97,\n  num_2: 98,\n  num_3: 99,\n  num_4: 100,\n  num_5: 101,\n  num_6: 102,\n  num_7: 103,\n  num_8: 104,\n  num_9: 105,\n  num_multiply: 106,\n  num_add: 107,\n  num_enter: 108,\n  num_subtract: 109,\n  num_decimal: 110,\n  num_divide: 111,\n  '⇪': 20,\n  ',': 188,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '-': isff ? 173 : 189,\n  '=': isff ? 61 : 187,\n  ';': isff ? 59 : 186,\n  '\\'': 222,\n  '[': 219,\n  ']': 221,\n  '\\\\': 220\n}; // Modifier Keys\n\nvar _modifier = {\n  // shiftKey\n  '⇧': 16,\n  shift: 16,\n  // altKey\n  '⌥': 18,\n  alt: 18,\n  option: 18,\n  // ctrlKey\n  '⌃': 17,\n  ctrl: 17,\n  control: 17,\n  // metaKey\n  '⌘': 91,\n  cmd: 91,\n  command: 91\n};\nvar modifierMap = {\n  16: 'shiftKey',\n  18: 'altKey',\n  17: 'ctrlKey',\n  91: 'metaKey',\n  shiftKey: 16,\n  ctrlKey: 17,\n  altKey: 18,\n  metaKey: 91\n};\nvar _mods = {\n  16: false,\n  18: false,\n  17: false,\n  91: false\n};\nvar _handlers = {}; // F1~F12 special key\n\nfor (var k = 1; k < 20; k++) {\n  _keyMap[\"f\".concat(k)] = 111 + k;\n}\n\nvar _downKeys = []; // 记录摁下的绑定键\n\nvar winListendFocus = false; // window是否已经监听了focus事件\n\nvar _scope = 'all'; // 默认热键范围\n\nvar elementHasBindEvent = []; // 已绑定事件的节点记录\n// 返回键码\n\nvar code = function code(x) {\n  return _keyMap[x.toLowerCase()] || _modifier[x.toLowerCase()] || x.toUpperCase().charCodeAt(0);\n};\n\nvar getKey = function getKey(x) {\n  return Object.keys(_keyMap).find(function (k) {\n    return _keyMap[k] === x;\n  });\n};\n\nvar getModifier = function getModifier(x) {\n  return Object.keys(_modifier).find(function (k) {\n    return _modifier[k] === x;\n  });\n}; // 设置获取当前范围（默认为'所有'）\n\n\nfunction setScope(scope) {\n  _scope = scope || 'all';\n} // 获取当前范围\n\n\nfunction getScope() {\n  return _scope || 'all';\n} // 获取摁下绑定键的键值\n\n\nfunction getPressedKeyCodes() {\n  return _downKeys.slice(0);\n}\n\nfunction getPressedKeyString() {\n  return _downKeys.map(function (c) {\n    return getKey(c) || getModifier(c) || String.fromCharCode(c);\n  });\n} // 表单控件控件判断 返回 Boolean\n// hotkey is effective only when filter return true\n\n\nfunction filter(event) {\n  var target = event.target || event.srcElement;\n  var tagName = target.tagName;\n  var flag = true; // ignore: isContentEditable === 'true', <input> and <textarea> when readOnly state is false, <select>\n\n  if (target.isContentEditable || (tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT') && !target.readOnly) {\n    flag = false;\n  }\n\n  return flag;\n} // 判断摁下的键是否为某个键，返回true或者false\n\n\nfunction isPressed(keyCode) {\n  if (typeof keyCode === 'string') {\n    keyCode = code(keyCode); // 转换成键码\n  }\n\n  return _downKeys.indexOf(keyCode) !== -1;\n} // 循环删除handlers中的所有 scope(范围)\n\n\nfunction deleteScope(scope, newScope) {\n  var handlers;\n  var i; // 没有指定scope，获取scope\n\n  if (!scope) scope = getScope();\n\n  for (var key in _handlers) {\n    if (Object.prototype.hasOwnProperty.call(_handlers, key)) {\n      handlers = _handlers[key];\n\n      for (i = 0; i < handlers.length;) {\n        if (handlers[i].scope === scope) handlers.splice(i, 1);else i++;\n      }\n    }\n  } // 如果scope被删除，将scope重置为all\n\n\n  if (getScope() === scope) setScope(newScope || 'all');\n} // 清除修饰键\n\n\nfunction clearModifier(event) {\n  var key = event.keyCode || event.which || event.charCode;\n\n  var i = _downKeys.indexOf(key); // 从列表中清除按压过的键\n\n\n  if (i >= 0) {\n    _downKeys.splice(i, 1);\n  } // 特殊处理 cmmand 键，在 cmmand 组合快捷键 keyup 只执行一次的问题\n\n\n  if (event.key && event.key.toLowerCase() === 'meta') {\n    _downKeys.splice(0, _downKeys.length);\n  } // 修饰键 shiftKey altKey ctrlKey (command||metaKey) 清除\n\n\n  if (key === 93 || key === 224) key = 91;\n\n  if (key in _mods) {\n    _mods[key] = false; // 将修饰键重置为false\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = false;\n    }\n  }\n}\n\nfunction unbind(keysInfo) {\n  // unbind(), unbind all keys\n  if (typeof keysInfo === 'undefined') {\n    Object.keys(_handlers).forEach(function (key) {\n      return delete _handlers[key];\n    });\n  } else if (Array.isArray(keysInfo)) {\n    // support like : unbind([{key: 'ctrl+a', scope: 's1'}, {key: 'ctrl-a', scope: 's2', splitKey: '-'}])\n    keysInfo.forEach(function (info) {\n      if (info.key) eachUnbind(info);\n    });\n  } else if (typeof keysInfo === 'object') {\n    // support like unbind({key: 'ctrl+a, ctrl+b', scope:'abc'})\n    if (keysInfo.key) eachUnbind(keysInfo);\n  } else if (typeof keysInfo === 'string') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // support old method\n    // eslint-disable-line\n    var scope = args[0],\n        method = args[1];\n\n    if (typeof scope === 'function') {\n      method = scope;\n      scope = '';\n    }\n\n    eachUnbind({\n      key: keysInfo,\n      scope: scope,\n      method: method,\n      splitKey: '+'\n    });\n  }\n} // 解除绑定某个范围的快捷键\n\n\nvar eachUnbind = function eachUnbind(_ref) {\n  var key = _ref.key,\n      scope = _ref.scope,\n      method = _ref.method,\n      _ref$splitKey = _ref.splitKey,\n      splitKey = _ref$splitKey === void 0 ? '+' : _ref$splitKey;\n  var multipleKeys = getKeys(key);\n  multipleKeys.forEach(function (originKey) {\n    var unbindKeys = originKey.split(splitKey);\n    var len = unbindKeys.length;\n    var lastKey = unbindKeys[len - 1];\n    var keyCode = lastKey === '*' ? '*' : code(lastKey);\n    if (!_handlers[keyCode]) return; // 判断是否传入范围，没有就获取范围\n\n    if (!scope) scope = getScope();\n    var mods = len > 1 ? getMods(_modifier, unbindKeys) : [];\n    _handlers[keyCode] = _handlers[keyCode].filter(function (record) {\n      // 通过函数判断，是否解除绑定，函数相等直接返回\n      var isMatchingMethod = method ? record.method === method : true;\n      return !(isMatchingMethod && record.scope === scope && compareArray(record.mods, mods));\n    });\n  });\n}; // 对监听对应快捷键的回调函数进行处理\n\n\nfunction eventHandler(event, handler, scope, element) {\n  if (handler.element !== element) {\n    return;\n  }\n\n  var modifiersMatch; // 看它是否在当前范围\n\n  if (handler.scope === scope || handler.scope === 'all') {\n    // 检查是否匹配修饰符（如果有返回true）\n    modifiersMatch = handler.mods.length > 0;\n\n    for (var y in _mods) {\n      if (Object.prototype.hasOwnProperty.call(_mods, y)) {\n        if (!_mods[y] && handler.mods.indexOf(+y) > -1 || _mods[y] && handler.mods.indexOf(+y) === -1) {\n          modifiersMatch = false;\n        }\n      }\n    } // 调用处理程序，如果是修饰键不做处理\n\n\n    if (handler.mods.length === 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91] || modifiersMatch || handler.shortcut === '*') {\n      if (handler.method(event, handler) === false) {\n        if (event.preventDefault) event.preventDefault();else event.returnValue = false;\n        if (event.stopPropagation) event.stopPropagation();\n        if (event.cancelBubble) event.cancelBubble = true;\n      }\n    }\n  }\n} // 处理keydown事件\n\n\nfunction dispatch(event, element) {\n  var asterisk = _handlers['*'];\n  var key = event.keyCode || event.which || event.charCode; // 表单控件过滤 默认表单控件不触发快捷键\n\n  if (!hotkeys.filter.call(this, event)) return; // Gecko(Firefox)的command键值224，在Webkit(Chrome)中保持一致\n  // Webkit左右 command 键值不一样\n\n  if (key === 93 || key === 224) key = 91;\n  /**\n   * Collect bound keys\n   * If an Input Method Editor is processing key input and the event is keydown, return 229.\n   * https://stackoverflow.com/questions/25043934/is-it-ok-to-ignore-keydown-events-with-keycode-229\n   * http://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html\n   */\n\n  if (_downKeys.indexOf(key) === -1 && key !== 229) _downKeys.push(key);\n  /**\n   * Jest test cases are required.\n   * ===============================\n   */\n\n  ['ctrlKey', 'altKey', 'shiftKey', 'metaKey'].forEach(function (keyName) {\n    var keyNum = modifierMap[keyName];\n\n    if (event[keyName] && _downKeys.indexOf(keyNum) === -1) {\n      _downKeys.push(keyNum);\n    } else if (!event[keyName] && _downKeys.indexOf(keyNum) > -1) {\n      _downKeys.splice(_downKeys.indexOf(keyNum), 1);\n    } else if (keyName === 'metaKey' && event[keyName] && _downKeys.length === 3) {\n      /**\n       * Fix if Command is pressed:\n       * ===============================\n       */\n      if (!(event.ctrlKey || event.shiftKey || event.altKey)) {\n        _downKeys = _downKeys.slice(_downKeys.indexOf(keyNum));\n      }\n    }\n  });\n  /**\n   * -------------------------------\n   */\n\n  if (key in _mods) {\n    _mods[key] = true; // 将特殊字符的key注册到 hotkeys 上\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = true;\n    }\n\n    if (!asterisk) return;\n  } // 将 modifierMap 里面的修饰键绑定到 event 中\n\n\n  for (var e in _mods) {\n    if (Object.prototype.hasOwnProperty.call(_mods, e)) {\n      _mods[e] = event[modifierMap[e]];\n    }\n  }\n  /**\n   * https://github.com/jaywcjlove/hotkeys/pull/129\n   * This solves the issue in Firefox on Windows where hotkeys corresponding to special characters would not trigger.\n   * An example of this is ctrl+alt+m on a Swedish keyboard which is used to type μ.\n   * Browser support: https://caniuse.com/#feat=keyboardevent-getmodifierstate\n   */\n\n\n  if (event.getModifierState && !(event.altKey && !event.ctrlKey) && event.getModifierState('AltGraph')) {\n    if (_downKeys.indexOf(17) === -1) {\n      _downKeys.push(17);\n    }\n\n    if (_downKeys.indexOf(18) === -1) {\n      _downKeys.push(18);\n    }\n\n    _mods[17] = true;\n    _mods[18] = true;\n  } // 获取范围 默认为 `all`\n\n\n  var scope = getScope(); // 对任何快捷键都需要做的处理\n\n  if (asterisk) {\n    for (var i = 0; i < asterisk.length; i++) {\n      if (asterisk[i].scope === scope && (event.type === 'keydown' && asterisk[i].keydown || event.type === 'keyup' && asterisk[i].keyup)) {\n        eventHandler(event, asterisk[i], scope, element);\n      }\n    }\n  } // key 不在 _handlers 中返回\n\n\n  if (!(key in _handlers)) return;\n\n  for (var _i = 0; _i < _handlers[key].length; _i++) {\n    if (event.type === 'keydown' && _handlers[key][_i].keydown || event.type === 'keyup' && _handlers[key][_i].keyup) {\n      if (_handlers[key][_i].key) {\n        var record = _handlers[key][_i];\n        var splitKey = record.splitKey;\n        var keyShortcut = record.key.split(splitKey);\n        var _downKeysCurrent = []; // 记录当前按键键值\n\n        for (var a = 0; a < keyShortcut.length; a++) {\n          _downKeysCurrent.push(code(keyShortcut[a]));\n        }\n\n        if (_downKeysCurrent.sort().join('') === _downKeys.sort().join('')) {\n          // 找到处理内容\n          eventHandler(event, record, scope, element);\n        }\n      }\n    }\n  }\n} // 判断 element 是否已经绑定事件\n\n\nfunction isElementBind(element) {\n  return elementHasBindEvent.indexOf(element) > -1;\n}\n\nfunction hotkeys(key, option, method) {\n  _downKeys = [];\n  var keys = getKeys(key); // 需要处理的快捷键列表\n\n  var mods = [];\n  var scope = 'all'; // scope默认为all，所有范围都有效\n\n  var element = document; // 快捷键事件绑定节点\n\n  var i = 0;\n  var keyup = false;\n  var keydown = true;\n  var splitKey = '+';\n  var capture = false; // 对为设定范围的判断\n\n  if (method === undefined && typeof option === 'function') {\n    method = option;\n  }\n\n  if (Object.prototype.toString.call(option) === '[object Object]') {\n    if (option.scope) scope = option.scope; // eslint-disable-line\n\n    if (option.element) element = option.element; // eslint-disable-line\n\n    if (option.keyup) keyup = option.keyup; // eslint-disable-line\n\n    if (option.keydown !== undefined) keydown = option.keydown; // eslint-disable-line\n\n    if (option.capture !== undefined) capture = option.capture; // eslint-disable-line\n\n    if (typeof option.splitKey === 'string') splitKey = option.splitKey; // eslint-disable-line\n  }\n\n  if (typeof option === 'string') scope = option; // 对于每个快捷键进行处理\n\n  for (; i < keys.length; i++) {\n    key = keys[i].split(splitKey); // 按键列表\n\n    mods = []; // 如果是组合快捷键取得组合快捷键\n\n    if (key.length > 1) mods = getMods(_modifier, key); // 将非修饰键转化为键码\n\n    key = key[key.length - 1];\n    key = key === '*' ? '*' : code(key); // *表示匹配所有快捷键\n    // 判断key是否在_handlers中，不在就赋一个空数组\n\n    if (!(key in _handlers)) _handlers[key] = [];\n\n    _handlers[key].push({\n      keyup: keyup,\n      keydown: keydown,\n      scope: scope,\n      mods: mods,\n      shortcut: keys[i],\n      method: method,\n      key: keys[i],\n      splitKey: splitKey,\n      element: element\n    });\n  } // 在全局document上设置快捷键\n\n\n  if (typeof element !== 'undefined' && !isElementBind(element) && window) {\n    elementHasBindEvent.push(element);\n    addEvent(element, 'keydown', function (e) {\n      dispatch(e, element);\n    }, capture);\n\n    if (!winListendFocus) {\n      winListendFocus = true;\n      addEvent(window, 'focus', function () {\n        _downKeys = [];\n      }, capture);\n    }\n\n    addEvent(element, 'keyup', function (e) {\n      dispatch(e, element);\n      clearModifier(e);\n    }, capture);\n  }\n}\n\nfunction trigger(shortcut) {\n  var scope = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'all';\n  Object.keys(_handlers).forEach(function (key) {\n    var data = _handlers[key].find(function (item) {\n      return item.scope === scope && item.shortcut === shortcut;\n    });\n\n    if (data && data.method) {\n      data.method();\n    }\n  });\n}\n\nvar _api = {\n  getPressedKeyString: getPressedKeyString,\n  setScope: setScope,\n  getScope: getScope,\n  deleteScope: deleteScope,\n  getPressedKeyCodes: getPressedKeyCodes,\n  isPressed: isPressed,\n  filter: filter,\n  trigger: trigger,\n  unbind: unbind,\n  keyMap: _keyMap,\n  modifier: _modifier,\n  modifierMap: modifierMap\n};\n\nfor (var a in _api) {\n  if (Object.prototype.hasOwnProperty.call(_api, a)) {\n    hotkeys[a] = _api[a];\n  }\n}\n\nif (typeof window !== 'undefined') {\n  var _hotkeys = window.hotkeys;\n\n  hotkeys.noConflict = function (deep) {\n    if (deep && window.hotkeys === hotkeys) {\n      window.hotkeys = _hotkeys;\n    }\n\n    return hotkeys;\n  };\n\n  window.hotkeys = hotkeys;\n}\n\nexport { hotkeys as default };\n","export var PauseOnHoverMode;\n(function (PauseOnHoverMode) {\n    PauseOnHoverMode[PauseOnHoverMode[\"disabled\"] = 0] = \"disabled\";\n    PauseOnHoverMode[PauseOnHoverMode[\"inAndOut\"] = 1] = \"inAndOut\";\n    PauseOnHoverMode[PauseOnHoverMode[\"inNotOut\"] = 2] = \"inNotOut\";\n})(PauseOnHoverMode || (PauseOnHoverMode = {}));\nconst ankiSettingsKeysObject = {\n    ankiConnectUrl: true,\n    deck: true,\n    noteType: true,\n    sentenceField: true,\n    definitionField: true,\n    audioField: true,\n    imageField: true,\n    wordField: true,\n    sourceField: true,\n    urlField: true,\n    track1Field: true,\n    track2Field: true,\n    track3Field: true,\n    customAnkiFields: true,\n    tags: true,\n    recordWithAudioPlayback: true,\n    preferMp3: true,\n    audioPaddingStart: true,\n    audioPaddingEnd: true,\n    maxImageWidth: true,\n    maxImageHeight: true,\n    surroundingSubtitlesCountRadius: true,\n    surroundingSubtitlesTimeRadius: true,\n    ankiFieldSettings: true,\n    customAnkiFieldSettings: true,\n};\nexport const ankiSettingsKeys = Object.keys(ankiSettingsKeysObject);\nconst textSubtitleSettingsKeysObject = {\n    subtitleColor: true,\n    subtitleSize: true,\n    subtitleThickness: true,\n    subtitleOutlineThickness: true,\n    subtitleOutlineColor: true,\n    subtitleShadowThickness: true,\n    subtitleShadowColor: true,\n    subtitleBackgroundOpacity: true,\n    subtitleBackgroundColor: true,\n    subtitleFontFamily: true,\n    subtitleCustomStyles: true,\n    subtitleBlur: true,\n    subtitleAlignment: true,\n};\nexport const textSubtitleSettingsKeys = Object.keys(textSubtitleSettingsKeysObject);\nconst subtitleSettingsKeysObject = {\n    subtitleColor: true,\n    subtitleSize: true,\n    subtitleThickness: true,\n    subtitleOutlineThickness: true,\n    subtitleOutlineColor: true,\n    subtitleShadowThickness: true,\n    subtitleShadowColor: true,\n    subtitleBackgroundOpacity: true,\n    subtitleBackgroundColor: true,\n    subtitleFontFamily: true,\n    subtitleCustomStyles: true,\n    subtitleBlur: true,\n    imageBasedSubtitleScaleFactor: true,\n    subtitlePositionOffset: true,\n    topSubtitlePositionOffset: true,\n    subtitleAlignment: true,\n    subtitleTracksV2: true,\n    subtitlesWidth: true,\n};\nexport const subtitleSettingsKeys = Object.keys(subtitleSettingsKeysObject);\nexport const extractAnkiSettings = (settings) => {\n    return Object.fromEntries(ankiSettingsKeys.map((k) => [k, settings[k]]));\n};\nexport var SubtitleListPreference;\n(function (SubtitleListPreference) {\n    SubtitleListPreference[\"noSubtitleList\"] = \"noSubtitleList\";\n    SubtitleListPreference[\"app\"] = \"app\";\n})(SubtitleListPreference || (SubtitleListPreference = {}));\nconst keyBindNameMap = {\n    'copy-subtitle': 'copySubtitle',\n    'copy-subtitle-with-dialog': 'ankiExport',\n    'update-last-card': 'updateLastCard',\n    'take-screenshot': 'takeScreenshot',\n    'toggle-recording': 'toggleRecording',\n    'toggle-video-select': 'selectSubtitleTrack',\n};\nexport function chromeCommandBindsToKeyBinds(chromeCommands) {\n    const keyBinds = {};\n    for (const commandName of Object.keys(chromeCommands)) {\n        keyBinds[keyBindNameMap[commandName]] = chromeCommands[commandName];\n    }\n    return keyBinds;\n}\n","import hotkeys from 'hotkeys-js';\nexport function adjacentSubtitle(forward, time, subtitles) {\n    const now = time;\n    let adjacentSubtitleIndex = -1;\n    let minDiff = Number.MAX_SAFE_INTEGER;\n    for (let i = 0; i < subtitles.length; ++i) {\n        const s = subtitles[i];\n        const diff = forward ? s.start - now : now - s.start;\n        if (minDiff <= diff) {\n            continue;\n        }\n        if (forward && now < s.start) {\n            minDiff = diff;\n            adjacentSubtitleIndex = i;\n        }\n        else if (!forward && now > s.start) {\n            minDiff = diff;\n            adjacentSubtitleIndex = now < s.end ? Math.max(0, i - 1) : i;\n        }\n    }\n    if (adjacentSubtitleIndex !== -1) {\n        return subtitles[adjacentSubtitleIndex];\n    }\n    return null;\n}\nexport class DefaultKeyBinder {\n    constructor(keyBindSet) {\n        this.keyBindSet = keyBindSet;\n    }\n    bindCopy(onCopy, disabledGetter, subtitleGetter, capture = false) {\n        const shortcut = this.keyBindSet.copySubtitle.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = this.copyHandler(onCopy, disabledGetter, subtitleGetter);\n        return this._bind(shortcut, capture, handler);\n    }\n    copyHandler(onCopy, disabledGetter, subtitleGetter) {\n        return (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            const subtitle = subtitleGetter();\n            if (!subtitle) {\n                return false;\n            }\n            onCopy(event, subtitle);\n            return true;\n        };\n    }\n    bindAnkiExport(onAnkiExport, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.ankiExport.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = this.ankiExportHandler(onAnkiExport, disabledGetter);\n        return this._bind(shortcut, capture, handler);\n    }\n    ankiExportHandler(onAnkiExport, disabledGetter) {\n        return (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onAnkiExport(event);\n            return true;\n        };\n    }\n    bindUpdateLastCard(onUpdateLastCard, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.updateLastCard.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = this.updateLastCardHandler(onUpdateLastCard, disabledGetter);\n        return this._bind(shortcut, capture, handler);\n    }\n    updateLastCardHandler(onUpdateLastCard, disabledGetter) {\n        return (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onUpdateLastCard(event);\n            return true;\n        };\n    }\n    bindTakeScreenshot(onTakeScreenshot, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.takeScreenshot.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = this.takeScreenshotHandler(onTakeScreenshot, disabledGetter);\n        return this._bind(shortcut, capture, handler);\n    }\n    takeScreenshotHandler(onTakeScreenshot, disabledGetter) {\n        return (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onTakeScreenshot(event);\n            return true;\n        };\n    }\n    bindToggleRecording(onToggleRecording, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.toggleRecording.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = this.takeScreenshotHandler(onToggleRecording, disabledGetter);\n        return this._bind(shortcut, capture, handler);\n    }\n    toggleRecordingHandler(onToggleRecording, disabledGetter) {\n        return (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onToggleRecording(event);\n            return true;\n        };\n    }\n    bindSeekToSubtitle(onSeekToSubtitle, disabledGetter, timeGetter, subtitlesGetter, capture = false) {\n        const delegate = (event, forward) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            const subtitles = subtitlesGetter();\n            if (!subtitles || subtitles.length === 0) {\n                return false;\n            }\n            const subtitle = adjacentSubtitle(forward, timeGetter(), subtitles);\n            if (subtitle !== null && subtitle.start >= 0 && subtitle.end >= 0) {\n                onSeekToSubtitle(event, subtitle);\n                return true;\n            }\n            return false;\n        };\n        const previousShortcut = this.keyBindSet.seekToPreviousSubtitle.keys;\n        const nextShortcut = this.keyBindSet.seekToNextSubtitle.keys;\n        const previousHandler = (event) => delegate(event, false);\n        const nextHandler = (event) => delegate(event, true);\n        let unbindPrevious;\n        let unbindNext;\n        if (previousShortcut) {\n            unbindPrevious = this._bind(previousShortcut, capture, previousHandler);\n        }\n        if (nextShortcut) {\n            unbindNext = this._bind(nextShortcut, capture, nextHandler);\n        }\n        return () => {\n            unbindPrevious?.();\n            unbindNext?.();\n        };\n    }\n    bindSeekToBeginningOfCurrentSubtitle(onSeekToBeginningOfCurrentSubtitle, disabledGetter, timeGetter, subtitlesGetter, capture = false) {\n        const shortcut = this.keyBindSet.seekToBeginningOfCurrentSubtitle.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            const subtitles = subtitlesGetter();\n            if (!subtitles || subtitles.length === 0) {\n                return false;\n            }\n            const subtitle = this._currentOrPreviousSubtitle(timeGetter(), subtitles);\n            if (subtitle !== undefined && subtitle.start >= 0 && subtitle.end >= 0) {\n                onSeekToBeginningOfCurrentSubtitle(event, subtitle);\n                return true;\n            }\n            return false;\n        };\n        return this._bind(shortcut, capture, handler);\n    }\n    _currentOrPreviousSubtitle(time, subtitles) {\n        const now = time;\n        let currentSubtitle;\n        let previousSubtitle;\n        let minDiff = Number.MAX_SAFE_INTEGER;\n        for (let i = 0; i < subtitles.length; ++i) {\n            const s = subtitles[i];\n            if (s.start < 0 || s.end < 0) {\n                continue;\n            }\n            const diff = now - s.start;\n            if (now >= s.start && now < s.end) {\n                if (diff < minDiff) {\n                    currentSubtitle = s;\n                    minDiff = diff;\n                }\n            }\n            else if (now > s.end) {\n                previousSubtitle = s;\n            }\n        }\n        return currentSubtitle ? currentSubtitle : previousSubtitle;\n    }\n    bindSeekBackwardOrForward(onSeekBackwardOrForward, disabledGetter, capture = false) {\n        const delegate = (event, forward) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onSeekBackwardOrForward(event, forward);\n            return true;\n        };\n        const backShortcut = this.keyBindSet.seekBackward.keys;\n        const nextShortcut = this.keyBindSet.seekForward.keys;\n        const backHandler = (event) => delegate(event, false);\n        const nextHandler = (event) => delegate(event, true);\n        let unbindBack;\n        let unbindNext;\n        if (backShortcut) {\n            unbindBack = this._bind(backShortcut, capture, backHandler);\n        }\n        if (nextShortcut) {\n            unbindNext = this._bind(nextShortcut, capture, nextHandler);\n        }\n        return () => {\n            unbindBack?.();\n            unbindNext?.();\n        };\n    }\n    bindOffsetToSubtitle(onOffsetChange, disabledGetter, timeGetter, subtitlesGetter, capture = false) {\n        const delegate = (event, forward) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            const subtitles = subtitlesGetter();\n            if (!subtitles || subtitles.length === 0) {\n                return false;\n            }\n            const time = timeGetter();\n            const subtitle = adjacentSubtitle(forward, time, subtitles);\n            if (subtitle !== null) {\n                const subtitleStart = subtitle.originalStart;\n                const newOffset = time - subtitleStart;\n                onOffsetChange(event, newOffset);\n                return true;\n            }\n            return false;\n        };\n        const previousShortcut = this.keyBindSet.adjustOffsetToPreviousSubtitle.keys;\n        const nextShortcut = this.keyBindSet.adjustOffsetToNextSubtitle.keys;\n        const previousHandler = (event) => delegate(event, false);\n        const nextHandler = (event) => delegate(event, true);\n        let unbindPrevious;\n        let unbindNext;\n        if (previousShortcut) {\n            unbindPrevious = this._bind(previousShortcut, capture, previousHandler);\n        }\n        if (nextShortcut) {\n            unbindNext = this._bind(nextShortcut, capture, nextHandler);\n        }\n        return () => {\n            unbindPrevious?.();\n            unbindNext?.();\n        };\n    }\n    bindAdjustOffset(onOffsetChange, disabledGetter, subtitlesGetter, capture = false) {\n        const delegate = (event, increase) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            const subtitles = subtitlesGetter();\n            if (!subtitles || subtitles.length === 0) {\n                return false;\n            }\n            const currentOffset = subtitles[0].start - subtitles[0].originalStart;\n            const newOffset = currentOffset + (increase ? 100 : -100);\n            onOffsetChange(event, newOffset);\n            return true;\n        };\n        const decreaseShortcut = this.keyBindSet.decreaseOffset.keys;\n        const increaseShortcut = this.keyBindSet.increaseOffset.keys;\n        const decreaseHandler = (event) => delegate(event, false);\n        const increaseHandler = (event) => delegate(event, true);\n        const unbindDecrease = decreaseShortcut ? this._bind(decreaseShortcut, capture, decreaseHandler) : () => { };\n        const unbindIncrease = increaseShortcut ? this._bind(increaseShortcut, capture, increaseHandler) : () => { };\n        return () => {\n            unbindDecrease();\n            unbindIncrease();\n        };\n    }\n    bindResetOffet(onResetOffset, disabledGetter, capture) {\n        const shortcut = this.keyBindSet.resetOffset.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onResetOffset(event);\n            return true;\n        };\n        return this._bind(shortcut, capture ?? false, handler);\n    }\n    bindAdjustPlaybackRate(onAdjustPlaybackRate, disabledGetter, capture = false) {\n        const delegate = (event, increase) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onAdjustPlaybackRate(event, increase);\n            return true;\n        };\n        const increaseShortcut = this.keyBindSet.increasePlaybackRate.keys;\n        const decreaseShortcut = this.keyBindSet.decreasePlaybackRate.keys;\n        const decreaseHandler = (event) => delegate(event, false);\n        const increaseHandler = (event) => delegate(event, true);\n        let unbindDecrease;\n        let unbindIncrease;\n        if (decreaseShortcut) {\n            unbindDecrease = this._bind(decreaseShortcut, capture, decreaseHandler);\n        }\n        if (increaseShortcut) {\n            unbindIncrease = this._bind(increaseShortcut, capture, increaseHandler);\n        }\n        return () => {\n            unbindDecrease?.();\n            unbindIncrease?.();\n        };\n    }\n    bindToggleSubtitles(onToggleSubtitles, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.toggleSubtitles.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onToggleSubtitles(event);\n            return true;\n        };\n        return this._bind(shortcut, capture, handler);\n    }\n    bindToggleSubtitleTrackInVideo(onToggleSubtitleTrack, disabledGetter, capture = false) {\n        const shortcuts = [\n            this.keyBindSet.toggleVideoSubtitleTrack1.keys,\n            this.keyBindSet.toggleVideoSubtitleTrack2.keys,\n            this.keyBindSet.toggleVideoSubtitleTrack3.keys,\n        ].filter((s) => s);\n        if (shortcuts.length === 0) {\n            return () => { };\n        }\n        const delegate = (event, track) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onToggleSubtitleTrack(event, track);\n            return true;\n        };\n        let unbindHandlers = [];\n        for (let i = 0; i < shortcuts.length; ++i) {\n            const handler = (event) => delegate(event, i);\n            const unbindHandler = shortcuts[i] ? this._bind(shortcuts[i], capture, handler) : () => { };\n            unbindHandlers.push(unbindHandler);\n        }\n        return () => {\n            for (let i = 0; i < shortcuts.length; ++i) {\n                const unbindHandler = unbindHandlers[i];\n                unbindHandler();\n            }\n        };\n    }\n    bindToggleSubtitleTrackInList(onToggleSubtitleTrackInList, disabledGetter, capture = false) {\n        const shortcuts = [\n            this.keyBindSet.toggleAsbplayerSubtitleTrack1.keys,\n            this.keyBindSet.toggleAsbplayerSubtitleTrack2.keys,\n            this.keyBindSet.toggleAsbplayerSubtitleTrack3.keys,\n        ].filter((s) => s);\n        if (shortcuts.length === 0) {\n            return () => { };\n        }\n        const delegate = (event, track) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onToggleSubtitleTrackInList(event, track);\n            return true;\n        };\n        let unbindHandlers = [];\n        for (let i = 0; i < 9; ++i) {\n            const handler = (event) => delegate(event, i);\n            const unbindHandler = shortcuts[i] ? this._bind(shortcuts[i], capture, handler) : () => { };\n            unbindHandlers.push(unbindHandler);\n        }\n        return () => {\n            for (let i = 0; i < 9; ++i) {\n                const unbindHandler = unbindHandlers[i];\n                unbindHandler();\n            }\n        };\n    }\n    bindUnblurTrack(onUnblurTrack, disabledGetter, capture = false) {\n        const shortcuts = [\n            this.keyBindSet.unblurAsbplayerTrack1.keys,\n            this.keyBindSet.unblurAsbplayerTrack2.keys,\n            this.keyBindSet.unblurAsbplayerTrack3.keys,\n        ].filter((s) => s);\n        if (shortcuts.length === 0) {\n            return () => { };\n        }\n        const delegate = (event, track) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onUnblurTrack(event, track);\n            return true;\n        };\n        let unbindHandlers = [];\n        for (let i = 0; i < shortcuts.length; ++i) {\n            const handler = (event) => delegate(event, i);\n            const unbindHandler = shortcuts[i] ? this._bind(shortcuts[i], capture, handler) : () => { };\n            unbindHandlers.push(unbindHandler);\n        }\n        return () => {\n            for (let i = 0; i < shortcuts.length; ++i) {\n                const unbindHandler = unbindHandlers[i];\n                unbindHandler();\n            }\n        };\n    }\n    bindPlay(onPlay, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.togglePlay.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onPlay(event);\n            return true;\n        };\n        return this._bind(shortcut, capture, handler);\n    }\n    bindAutoPause(onAutoPause, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.toggleAutoPause.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onAutoPause(event);\n            return true;\n        };\n        return this._bind(shortcut, capture, handler);\n    }\n    bindCondensedPlayback(onCondensedPlayback, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.toggleCondensedPlayback.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onCondensedPlayback(event);\n            return true;\n        };\n        return this._bind(shortcut, capture, handler);\n    }\n    bindFastForwardPlayback(onFastForwardPlayback, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.toggleFastForwardPlayback.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onFastForwardPlayback(event);\n            return true;\n        };\n        return this._bind(shortcut, capture, handler);\n    }\n    bindToggleSidePanel(onToggleSidePanel, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.toggleSidePanel.keys;\n        if (!shortcut) {\n            return () => { };\n        }\n        const handler = (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onToggleSidePanel(event);\n            return true;\n        };\n        return this._bind(shortcut, capture, handler);\n    }\n    bindToggleRepeat(onToggleRepeat, disabledGetter, capture = false) {\n        const shortcut = this.keyBindSet.toggleRepeat.keys;\n        const handler = (event) => {\n            if (disabledGetter()) {\n                return false;\n            }\n            onToggleRepeat(event);\n            return true;\n        };\n        return this._bind(shortcut, capture, handler);\n    }\n    _bind(shortcut, capture, handler) {\n        let handled = undefined;\n        const wrappedHandler = (event) => {\n            if (event.type === 'keydown') {\n                handled = handler(event);\n            }\n            else if (event.type === 'keyup') {\n                if (handled) {\n                    event.preventDefault();\n                    event.stopImmediatePropagation();\n                }\n                handled = undefined;\n            }\n        };\n        hotkeys(shortcut, { capture, keydown: true, keyup: true }, wrappedHandler);\n        return () => hotkeys.unbind(shortcut, wrappedHandler);\n    }\n}\n","import { SubtitleListPreference, textSubtitleSettingsKeys, } from '.';\nimport { AutoPausePreference, PostMineAction, PostMinePlayback } from '..';\n// @ts-ignore\nconst isMacOs = (navigator.userAgentData?.platform ?? navigator.platform)?.toUpperCase()?.indexOf('MAC') > -1;\nconst defaultSubtitleTextSettings = {\n    subtitleSize: 36,\n    subtitleColor: '#ffffff',\n    subtitleThickness: 700,\n    subtitleOutlineThickness: 0,\n    subtitleOutlineColor: '#000000',\n    subtitleShadowThickness: 3,\n    subtitleShadowColor: '#000000',\n    subtitleBackgroundColor: '#000000',\n    subtitleBackgroundOpacity: 0,\n    subtitleFontFamily: '',\n    subtitlePreview: 'アあ安Aa',\n    subtitleCustomStyles: [],\n    subtitleBlur: false,\n};\nexport const defaultSettings = {\n    ankiConnectUrl: 'http://127.0.0.1:8765',\n    deck: '',\n    noteType: '',\n    sentenceField: '',\n    definitionField: '',\n    audioField: '',\n    imageField: '',\n    wordField: '',\n    sourceField: '',\n    urlField: '',\n    track1Field: '',\n    track2Field: '',\n    track3Field: '',\n    ankiFieldSettings: {\n        sentence: { order: 1, display: true },\n        definition: { order: 2, display: true },\n        word: { order: 3, display: true },\n        audio: { order: 4, display: true },\n        image: { order: 5, display: true },\n        source: { order: 6, display: true },\n        url: { order: 7, display: true },\n        track1: { order: 8, display: false },\n        track2: { order: 9, display: false },\n        track3: { order: 10, display: false },\n    },\n    customAnkiFieldSettings: {},\n    ...defaultSubtitleTextSettings,\n    subtitlePositionOffset: 75,\n    topSubtitlePositionOffset: 75,\n    subtitleAlignment: 'bottom',\n    subtitleTracksV2: [],\n    subtitlesWidth: -1,\n    audioPaddingStart: 0,\n    audioPaddingEnd: 500,\n    maxImageWidth: 0,\n    maxImageHeight: 0,\n    surroundingSubtitlesCountRadius: 2,\n    surroundingSubtitlesTimeRadius: 10000,\n    autoPausePreference: AutoPausePreference.atEnd,\n    speedChangeStep: 0.1,\n    fastForwardModePlaybackRate: 2.7,\n    keyBindSet: {\n        togglePlay: { keys: 'space' },\n        toggleAutoPause: { keys: isMacOs ? '⇧+P' : 'shift+P' },\n        toggleCondensedPlayback: { keys: isMacOs ? '⇧+O' : 'shift+O' },\n        toggleFastForwardPlayback: { keys: isMacOs ? '⇧+F' : 'shift+F' },\n        toggleSubtitles: { keys: 'down' },\n        toggleVideoSubtitleTrack1: { keys: '1' },\n        toggleVideoSubtitleTrack2: { keys: '2' },\n        toggleVideoSubtitleTrack3: { keys: '3' },\n        toggleAsbplayerSubtitleTrack1: { keys: 'W+1' },\n        toggleAsbplayerSubtitleTrack2: { keys: 'W+2' },\n        toggleAsbplayerSubtitleTrack3: { keys: 'W+3' },\n        unblurAsbplayerTrack1: { keys: 'B+1' },\n        unblurAsbplayerTrack2: { keys: 'B+2' },\n        unblurAsbplayerTrack3: { keys: 'B+3' },\n        seekBackward: { keys: 'A' },\n        seekForward: { keys: 'D' },\n        seekToPreviousSubtitle: { keys: 'left' },\n        seekToNextSubtitle: { keys: 'right' },\n        seekToBeginningOfCurrentSubtitle: { keys: 'up' },\n        adjustOffsetToPreviousSubtitle: { keys: isMacOs ? '⇧+left' : 'ctrl+left' },\n        adjustOffsetToNextSubtitle: { keys: isMacOs ? '⇧+right' : 'ctrl+right' },\n        decreaseOffset: { keys: isMacOs ? '⇧+⌃+right' : 'ctrl+shift+right' },\n        increaseOffset: { keys: isMacOs ? '⇧+⌃+left' : 'ctrl+shift+left' },\n        resetOffset: { keys: isMacOs ? '⇧+⌃+down' : 'ctrl+shift+down' },\n        copySubtitle: { keys: isMacOs ? '⇧+⌃+Z' : 'ctrl+shift+Z' },\n        ankiExport: { keys: isMacOs ? '⇧+⌃+X' : 'ctrl+shift+X' },\n        updateLastCard: { keys: isMacOs ? '⇧+⌃+U' : 'ctrl+shift+U' },\n        takeScreenshot: { keys: isMacOs ? '⇧+⌃+V' : 'ctrl+shift+V' },\n        toggleRecording: { keys: isMacOs ? '⇧+⌃+R' : 'ctrl+shift+R' },\n        decreasePlaybackRate: { keys: isMacOs ? '⇧+⌃+[' : 'ctrl+shift+[' },\n        increasePlaybackRate: { keys: isMacOs ? '⇧+⌃+]' : 'ctrl+shift+]' },\n        toggleSidePanel: { keys: '`' },\n        toggleRepeat: { keys: isMacOs ? '⇧+R' : 'shift+R' },\n    },\n    recordWithAudioPlayback: true,\n    preferMp3: true,\n    tabName: 'asbplayer',\n    miningHistoryStorageLimit: 25,\n    preCacheSubtitleDom: true,\n    clickToMineDefaultAction: PostMineAction.showAnkiDialog,\n    postMiningPlaybackState: PostMinePlayback.remember,\n    themeType: 'dark',\n    copyToClipboardOnMine: false,\n    rememberSubtitleOffset: true,\n    lastSubtitleOffset: 0,\n    autoCopyCurrentSubtitle: false,\n    alwaysPlayOnSubtitleRepeat: true,\n    subtitleRegexFilter: '',\n    subtitleRegexFilterTextReplacement: '',\n    language: 'en',\n    customAnkiFields: {},\n    tags: [],\n    imageBasedSubtitleScaleFactor: 1,\n    streamingAppUrl: 'https://killergerbah.github.io/asbplayer',\n    streamingDisplaySubtitles: true,\n    streamingRecordMedia: true,\n    streamingTakeScreenshot: true,\n    streamingCleanScreenshot: true,\n    streamingCropScreenshot: true,\n    streamingSubsDragAndDrop: true,\n    streamingAutoSync: false,\n    streamingLastLanguagesSynced: {},\n    streamingCondensedPlaybackMinimumSkipIntervalMs: 1000,\n    streamingScreenshotDelay: 1000,\n    streamingSubtitleListPreference: SubtitleListPreference.noSubtitleList,\n    streamingEnableOverlay: true,\n    webSocketClientEnabled: false,\n    webSocketServerUrl: 'ws://127.0.0.1:8766/ws',\n    pauseOnHoverMode: 0,\n    lastSelectedAnkiExportMode: 'default',\n};\nconst ankiFieldEntries = (fieldsMap, custom) => {\n    return Object.entries(fieldsMap).map(([key, value]) => ({\n        key,\n        field: value,\n        custom,\n    }));\n};\nconst sortedAnkiFields = (models) => {\n    return models.sort((a, b) => {\n        const left = a.field;\n        const right = b.field;\n        if (left.order < right.order) {\n            return -1;\n        }\n        if (left.order > right.order) {\n            return 1;\n        }\n        return 0;\n    });\n};\nexport const sortedAnkiFieldModels = (settings) => {\n    let last = Math.max(...Object.values({ ...settings.ankiFieldSettings, ...settings.customAnkiFieldSettings }).map((f) => f.order));\n    return sortedAnkiFields([\n        ...ankiFieldEntries(settings.ankiFieldSettings, false),\n        ...ankiFieldEntries(Object.fromEntries(Object.keys(settings.customAnkiFields).map((name) => [\n            name,\n            settings.customAnkiFieldSettings[name] ?? { order: ++last, display: true },\n        ])), true),\n    ]);\n};\nexport const allTextSubtitleSettings = (subtitleSettings) => {\n    const textSettings = [];\n    for (let i = 0; i <= subtitleSettings.subtitleTracksV2.length; ++i) {\n        textSettings.push(textSubtitleSettingsForTrack(subtitleSettings, i));\n    }\n    return textSettings;\n};\nexport const textSubtitleSettingsForTrack = (subtitleSettings, track) => {\n    if (track === undefined) {\n        const valuesAllSame = (k) => {\n            const val = subtitleSettings[k];\n            for (const track of subtitleSettings.subtitleTracksV2) {\n                if (!deepEquals(track[k], val)) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        let mergedSettings = {};\n        for (const key of textSubtitleSettingsKeys) {\n            if (valuesAllSame(key)) {\n                mergedSettings[key] = subtitleSettings[key];\n            }\n            else {\n                mergedSettings[key] = undefined;\n            }\n        }\n        return mergedSettings;\n    }\n    if (track === 0 || track > subtitleSettings.subtitleTracksV2.length) {\n        return Object.fromEntries(textSubtitleSettingsKeys.map((k) => [k, subtitleSettings[k]]));\n    }\n    return subtitleSettings.subtitleTracksV2[track - 1];\n};\nexport const changeForTextSubtitleSetting = (updates, subtitleSettings, track) => {\n    if (track === undefined) {\n        // Change settings for all tracks\n        const newSubtitleTracks = [];\n        for (let i = 0; i < subtitleSettings.subtitleTracksV2.length; ++i) {\n            newSubtitleTracks.push({ ...subtitleSettings.subtitleTracksV2[i], ...updates });\n        }\n        return {\n            ...updates,\n            subtitleTracksV2: newSubtitleTracks,\n        };\n    }\n    if (track === 0) {\n        // Change setting for track 0 (top-level settings object)\n        return { ...updates };\n    }\n    // Change setting for track >= 1 (nested subtitleTracks setting)\n    const newSubtitleTracks = [...subtitleSettings.subtitleTracksV2];\n    const firstTrack = textSubtitleSettingsForTrack(subtitleSettings, 0);\n    while (newSubtitleTracks.length < track) {\n        newSubtitleTracks.push(firstTrack);\n    }\n    newSubtitleTracks[track - 1] = {\n        ...newSubtitleTracks[track - 1],\n        ...updates,\n    };\n    let removeFromEnd = 0;\n    for (let i = newSubtitleTracks.length - 1; i >= 0; --i) {\n        if (!deepEquals(firstTrack, newSubtitleTracks[i])) {\n            break;\n        }\n        ++removeFromEnd;\n    }\n    if (removeFromEnd > 0) {\n        newSubtitleTracks.splice(newSubtitleTracks.length - removeFromEnd);\n    }\n    return { subtitleTracksV2: newSubtitleTracks };\n};\nexport const textSubtitleSettingsAreDirty = (settings, track) => {\n    return (track !== 0 &&\n        !deepEquals(textSubtitleSettingsForTrack(settings, 0), textSubtitleSettingsForTrack(settings, track)));\n};\nexport const settingsDeserializers = Object.fromEntries(Object.entries(defaultSettings).map(([key, value]) => {\n    if (typeof value === 'string') {\n        return [key, (s) => s];\n    }\n    if (typeof value === 'boolean') {\n        return [key, (s) => s === 'true'];\n    }\n    if (typeof value === 'number') {\n        return [key, (s) => Number(s)];\n    }\n    if (typeof value === 'object') {\n        return [key, (s) => JSON.parse(s)];\n    }\n    throw new Error('Could not determine deserializer for setting');\n}));\nconst deepEquals = (a, b) => {\n    if (typeof a !== typeof b) {\n        return false;\n    }\n    if (typeof a !== 'object') {\n        return a === b;\n    }\n    const aKeys = Object.keys(a);\n    const bKeys = Object.keys(b);\n    if (a.length !== b.length) {\n        return false;\n    }\n    for (const k of aKeys) {\n        if (!deepEquals(a[k], b[k])) {\n            return false;\n        }\n    }\n    for (const k of bKeys) {\n        if (!deepEquals(a[k], b[k])) {\n            return false;\n        }\n    }\n    return true;\n};\nconst complexValuedKeys = Object.fromEntries(Object.keys(defaultSettings)\n    .filter((k) => typeof defaultSettings[k] === 'object')\n    .map((k) => [k, true]));\nexport class SettingsProvider {\n    constructor(storage) {\n        this._complexValues = {};\n        this._storage = storage;\n    }\n    async getAll() {\n        return this.get(Object.keys(defaultSettings));\n    }\n    async getSingle(key) {\n        const vals = (await this.get([key]));\n        const val = vals[key];\n        return val;\n    }\n    async get(keys) {\n        let parameters = {};\n        for (const key of keys) {\n            parameters[key] = defaultSettings[key];\n        }\n        const data = await this._storage.get(parameters);\n        const result = {};\n        for (const key in parameters) {\n            const value = data[key] ?? defaultSettings[key];\n            if (complexValuedKeys[key]) {\n                const lastValue = this._complexValues[key];\n                if (lastValue !== undefined && deepEquals(lastValue, value)) {\n                    result[key] = lastValue;\n                }\n                else {\n                    this._complexValues[key] = value;\n                    result[key] = value;\n                }\n            }\n            else {\n                result[key] = value;\n            }\n        }\n        return this._ensureConsistencyOnRead(result);\n    }\n    _ensureConsistencyOnRead(settings) {\n        let keyBindSetModified = false;\n        let newKeyBindSet = {};\n        let ankiFieldSettingsModified = false;\n        let newAnkiFieldSettings = {};\n        if (settings.keyBindSet !== undefined) {\n            const keyBindSet = settings.keyBindSet;\n            for (const key of Object.keys(defaultSettings.keyBindSet)) {\n                const keyBindName = key;\n                if (keyBindSet[keyBindName] === undefined) {\n                    newKeyBindSet[keyBindName] = defaultSettings.keyBindSet[keyBindName];\n                    keyBindSetModified = true;\n                }\n                else {\n                    newKeyBindSet[keyBindName] = keyBindSet[keyBindName];\n                }\n            }\n        }\n        if (settings.ankiFieldSettings !== undefined) {\n            const ankiFieldSettings = settings.ankiFieldSettings;\n            for (const key of Object.keys(defaultSettings.ankiFieldSettings)) {\n                const fieldName = key;\n                if (ankiFieldSettings[fieldName] === undefined) {\n                    newAnkiFieldSettings[fieldName] = defaultSettings.ankiFieldSettings[fieldName];\n                    ankiFieldSettingsModified = true;\n                }\n                else {\n                    newAnkiFieldSettings[fieldName] = ankiFieldSettings[fieldName];\n                }\n            }\n        }\n        if (!ankiFieldSettingsModified && !keyBindSetModified) {\n            return settings;\n        }\n        return { ...settings, ...{ ankiFieldSettings: newAnkiFieldSettings }, ...{ keyBindSet: newKeyBindSet } };\n    }\n    async set(settings) {\n        await this._storage.set(await this._ensureConsistencyOnWrite(settings));\n    }\n    async _ensureConsistencyOnWrite(settings) {\n        if (settings.customAnkiFields === undefined) {\n            return settings;\n        }\n        const customAnkiFieldSettings = settings.customAnkiFieldSettings ??\n            (await this._storage.get({\n                customAnkiFieldSettings: defaultSettings.customAnkiFieldSettings,\n            })).customAnkiFieldSettings;\n        let modifyCustomAnkiFieldSettings = false;\n        for (const key of Object.keys(customAnkiFieldSettings)) {\n            if (!(key in settings.customAnkiFields)) {\n                delete customAnkiFieldSettings[key];\n                modifyCustomAnkiFieldSettings = true;\n            }\n        }\n        if (modifyCustomAnkiFieldSettings) {\n            return { ...settings, customAnkiFieldSettings };\n        }\n        return settings;\n    }\n    async activeProfile() {\n        return await this._storage.activeProfile();\n    }\n    async setActiveProfile(name) {\n        await this._storage.setActiveProfile(name);\n    }\n    async profiles() {\n        return await this._storage.profiles();\n    }\n    async addProfile(name) {\n        await this._storage.addProfile(name);\n    }\n    async removeProfile(name) {\n        await this._storage.removeProfile(name);\n    }\n}\nconst keyPrefix = (profile) => {\n    return `_prof_${profile}_`;\n};\nexport const prefixKey = (key, profile) => {\n    return `${keyPrefix(profile)}${key}`;\n};\nexport const unprefixKey = (key, profile) => {\n    return key.substring(profile.length + 7);\n};\nexport const prefixedSettings = (settings, profile) => {\n    const prefixed = {};\n    for (const key of Object.keys(settings)) {\n        prefixed[prefixKey(key, profile)] = settings[key];\n    }\n    return prefixed;\n};\nexport const unprefixedSettings = (settings, profile) => {\n    const unprefixed = {};\n    for (const key of Object.keys(settings)) {\n        const unprefixedKey = unprefixKey(key, profile);\n        unprefixed[unprefixedKey] = settings[key];\n    }\n    return unprefixed;\n};\n","import { Validator } from 'jsonschema';\nconst keyBindSchema = {\n    id: '/KeyBind',\n    type: 'object',\n    properties: {\n        keys: {\n            type: 'string',\n        },\n    },\n    required: ['keys'],\n};\nconst ankiFieldSchema = {\n    id: '/AnkiField',\n    type: 'object',\n    properties: {\n        order: {\n            type: 'number',\n        },\n        display: {\n            type: 'boolean',\n        },\n    },\n    required: ['order', 'display'],\n};\nconst textSubtitleSettingsSchema = {\n    id: '/TextSubtitleSettings',\n    type: 'object',\n    properties: {\n        subtitleColor: {\n            type: 'string',\n        },\n        subtitleSize: {\n            type: 'number',\n        },\n        subtitleThickness: {\n            type: 'number',\n        },\n        subtitleOutlineThickness: {\n            type: 'number',\n        },\n        subtitleShadowColor: {\n            type: 'string',\n        },\n        subtitleBackgroundOpacity: {\n            type: 'number',\n        },\n        subtitleBackgroundColor: {\n            type: 'string',\n        },\n        subtitleFontFamily: {\n            type: 'string',\n        },\n        subtitleCustomStyles: {\n            type: 'array',\n            items: {\n                type: 'object',\n                properties: {\n                    key: {\n                        type: 'string',\n                    },\n                    value: {\n                        type: 'string',\n                    },\n                },\n            },\n        },\n        subtitleBlur: {\n            type: 'boolean',\n        },\n    },\n    required: [\n        'subtitleColor',\n        'subtitleSize',\n        'subtitleThickness',\n        'subtitleOutlineThickness',\n        'subtitleShadowColor',\n        'subtitleBackgroundOpacity',\n        'subtitleBackgroundColor',\n        'subtitleFontFamily',\n        'subtitleCustomStyles',\n        'subtitleBlur',\n    ],\n};\nconst settingsSchema = {\n    id: '/Settings',\n    type: 'object',\n    properties: {\n        ankiConnectUrl: {\n            type: 'string',\n        },\n        deck: {\n            type: 'string',\n        },\n        noteType: {\n            type: 'string',\n        },\n        sentenceField: {\n            type: 'string',\n        },\n        definitionField: {\n            type: 'string',\n        },\n        audioField: {\n            type: 'string',\n        },\n        imageField: {\n            type: 'string',\n        },\n        wordField: {\n            type: 'string',\n        },\n        sourceField: {\n            type: 'string',\n        },\n        urlField: {\n            type: 'string',\n        },\n        track1Field: {\n            type: 'string',\n        },\n        track2Field: {\n            type: 'string',\n        },\n        track3Field: {\n            type: 'string',\n        },\n        ankiFieldSettings: {\n            type: 'object',\n            properties: {\n                sentence: { $ref: '/AnkiField' },\n                definition: { $ref: '/AnkiField' },\n                audio: { $ref: '/AnkiField' },\n                image: { $ref: '/AnkiField' },\n                word: { $ref: '/AnkiField' },\n                source: { $ref: '/AnkiField' },\n                url: { $ref: '/AnkiField' },\n                track1: { $ref: '/AnkiField' },\n                track2: { $ref: '/AnkiField' },\n                track3: { $ref: '/AnkiField' },\n            },\n        },\n        customAnkiFieldSettings: {\n            type: 'object',\n            additionalProperties: {\n                type: '/AnkiField',\n            },\n        },\n        subtitleSize: {\n            type: 'number',\n        },\n        subtitleColor: {\n            type: 'string',\n        },\n        subtitleThickness: {\n            type: 'number',\n        },\n        subtitleOutlineThickness: {\n            type: 'number',\n        },\n        subtitleShadowThickness: {\n            type: 'number',\n        },\n        subtitleShadowColor: {\n            type: 'string',\n        },\n        subtitleOutlineColor: {\n            type: 'string',\n        },\n        subtitleBackgroundColor: {\n            type: 'string',\n        },\n        subtitleBackgroundOpacity: {\n            type: 'number',\n        },\n        subtitleFontFamily: {\n            type: 'string',\n        },\n        subtitleBlur: {\n            type: 'boolean',\n        },\n        subtitlePreview: {\n            type: 'string',\n        },\n        subtitlePositionOffset: {\n            type: 'number',\n        },\n        topSubtitlePositionOffset: {\n            type: 'number',\n        },\n        subtitleAlignment: {\n            type: 'string',\n        },\n        subtitleTracksV2: {\n            type: 'array',\n            items: {\n                $ref: '/TextSubtitleSettings',\n            },\n        },\n        audioPaddingStart: {\n            type: 'number',\n        },\n        audioPaddingEnd: {\n            type: 'number',\n        },\n        maxImageWidth: {\n            type: 'number',\n        },\n        maxImageHeight: {\n            type: 'number',\n        },\n        surroundingSubtitlesCountRadius: {\n            type: 'number',\n        },\n        surroundingSubtitlesTimeRadius: {\n            type: 'number',\n        },\n        autoPausePreference: {\n            type: 'number',\n        },\n        speedChangeStep: {\n            type: 'number',\n        },\n        fastForwardModePlaybackRate: {\n            type: 'number',\n        },\n        keyBindSet: {\n            type: 'object',\n            properties: {\n                togglePlay: { $ref: '/KeyBind' },\n                toggleAutoPause: { $ref: '/KeyBind' },\n                toggleCondensedPlayback: { $ref: '/KeyBind' },\n                toggleFastForwardPlayback: { $ref: '/KeyBind' },\n                toggleSubtitles: { $ref: '/KeyBind' },\n                toggleVideoSubtitleTrack1: { $ref: '/KeyBind' },\n                toggleVideoSubtitleTrack2: { $ref: '/KeyBind' },\n                toggleVideoSubtitleTrack3: { $ref: '/KeyBind' },\n                toggleAsbplayerSubtitleTrack1: { $ref: '/KeyBind' },\n                toggleAsbplayerSubtitleTrack2: { $ref: '/KeyBind' },\n                toggleAsbplayerSubtitleTrack3: { $ref: '/KeyBind' },\n                unblurAsbplayerTrack1: { $ref: '/KeyBind' },\n                unblurAsbplayerTrack2: { $ref: '/KeyBind' },\n                unblurAsbplayerTrack3: { $ref: '/KeyBind' },\n                seekBackward: { $ref: '/KeyBind' },\n                seekForward: { $ref: '/KeyBind' },\n                seekToPreviousSubtitle: { $ref: '/KeyBind' },\n                seekToNextSubtitle: { $ref: '/KeyBind' },\n                seekToBeginningOfCurrentSubtitle: { $ref: '/KeyBind' },\n                adjustOffsetToPreviousSubtitle: { $ref: '/KeyBind' },\n                adjustOffsetToNextSubtitle: { $ref: '/KeyBind' },\n                decreaseOffset: { $ref: '/KeyBind' },\n                increaseOffset: { $ref: '/KeyBind' },\n                resetOffset: { $ref: '/KeyBind' },\n                copySubtitle: { $ref: '/KeyBind' },\n                ankiExport: { $ref: '/KeyBind' },\n                updateLastCard: { $ref: '/KeyBind' },\n                takeScreenshot: { $ref: '/KeyBind' },\n                toggleRecording: { $ref: '/KeyBind' },\n                decreasePlaybackRate: { $ref: '/KeyBind' },\n                increasePlaybackRate: { $ref: '/KeyBind' },\n                toggleSidePanel: { $ref: '/KeyBind' },\n                toggleRepeat: { $ref: '/KeyBind' },\n            },\n        },\n        recordWithAudioPlayback: {\n            type: 'boolean',\n        },\n        preferMp3: {\n            type: 'boolean',\n        },\n        tabName: {\n            type: 'string',\n        },\n        miningHistoryStorageLimit: {\n            type: 'number',\n        },\n        preCacheSubtitleDom: {\n            type: 'boolean',\n        },\n        clickToMineDefaultAction: {\n            type: 'number',\n        },\n        postMiningPlaybackState: {\n            type: 'number',\n        },\n        themeType: {\n            type: 'string',\n        },\n        copyToClipboardOnMine: {\n            type: 'boolean',\n        },\n        rememberSubtitleOffset: {\n            type: 'boolean',\n        },\n        lastSubtitleOffset: {\n            type: 'number',\n        },\n        autoCopyCurrentSubtitle: {\n            type: 'boolean',\n        },\n        alwaysPlayOnSubtitleRepeat: {\n            type: 'boolean',\n        },\n        subtitleRegexFilter: {\n            type: 'string',\n        },\n        subtitleRegexFilterTextReplacement: {\n            type: 'string',\n        },\n        language: {\n            type: 'string',\n        },\n        customAnkiFields: {\n            type: 'object',\n            additionalProperties: {\n                type: 'string',\n            },\n        },\n        tags: {\n            type: 'array',\n            items: {\n                type: 'string',\n            },\n        },\n        imageBasedSubtitleScaleFactor: {\n            type: 'number',\n        },\n        subtitleCustomStyles: {\n            type: 'array',\n            items: {\n                type: 'object',\n                properties: {\n                    key: {\n                        type: 'string',\n                    },\n                    value: {\n                        type: 'string',\n                    },\n                },\n            },\n        },\n        subtitlesWidth: {\n            type: 'number',\n        },\n        streamingAppUrl: {\n            type: 'string',\n        },\n        streamingDisplaySubtitles: {\n            type: 'boolean',\n        },\n        streamingRecordMedia: {\n            type: 'boolean',\n        },\n        streamingTakeScreenshot: {\n            type: 'boolean',\n        },\n        streamingCleanScreenshot: {\n            type: 'boolean',\n        },\n        streamingCropScreenshot: {\n            type: 'boolean',\n        },\n        streamingSubsDragAndDrop: {\n            type: 'boolean',\n        },\n        streamingAutoSync: {\n            type: 'boolean',\n        },\n        streamingLastLanguagesSynced: {\n            type: 'object',\n            additionalProperties: {\n                type: 'array',\n                items: {\n                    type: 'string',\n                },\n            },\n        },\n        streamingCondensedPlaybackMinimumSkipIntervalMs: {\n            type: 'number',\n        },\n        streamingScreenshotDelay: {\n            type: 'number',\n        },\n        streamingSubtitleListPreference: {\n            type: 'string',\n        },\n        streamingEnableOverlay: {\n            type: 'boolean',\n        },\n        webSocketClientEnabled: {\n            type: 'boolean',\n        },\n        webSocketServerUrl: {\n            type: 'string',\n        },\n        pauseOnHoverMode: {\n            type: 'number',\n        },\n        lastSelectedAnkiExportMode: {\n            type: 'string',\n        },\n        _schema: {\n            type: 'number',\n        },\n    },\n};\nexport const validateSettings = (settings) => {\n    const validator = new Validator();\n    validator.addSchema(keyBindSchema);\n    validator.addSchema(ankiFieldSchema);\n    validator.addSchema(textSubtitleSettingsSchema);\n    const result = validator.validate(settings, settingsSchema);\n    validateAllKnownKeys(settings, []);\n    if (!result.valid) {\n        throw new Error('Settings validation failed: ' + JSON.stringify(result.errors));\n    }\n};\nconst validateAllKnownKeys = (object, path) => {\n    for (const key of Object.keys(object)) {\n        const schema = schemaAtPath(settingsSchema, path);\n        // Empty string is sentinel value for 'additional properties' which can have any key\n        if (schema === undefined || (schema !== '' && !(key in schema))) {\n            throw new Error(`Unknown key '${[...path, key].join('.')}'`);\n        }\n        const value = object[key];\n        if (typeof value === 'object' && !Array.isArray(value)) {\n            validateAllKnownKeys(value, [...path, key]);\n        }\n    }\n};\nconst schemaAtPath = (schema, path) => {\n    let value = schema['properties'];\n    for (const key of path) {\n        if (typeof value[key] === 'object' && 'additionalProperties' in value[key]) {\n            return '';\n        }\n        value = value[key]?.['properties'] ?? schemaForRef(value[key]?.['$ref'])?.['properties'];\n        if (value === undefined) {\n            return undefined;\n        }\n    }\n    return value;\n};\nconst schemaForRef = (ref) => {\n    if (ref === '/KeyBind') {\n        return keyBindSchema;\n    }\n    if (ref === '/AnkiField') {\n        return ankiFieldSchema;\n    }\n    if (ref === '/TextSubtitleSettings') {\n        return textSubtitleSettingsSchema;\n    }\n    return undefined;\n};\n","export * from './settings';\nexport * from './settings-provider';\nexport * from './settings-import-export';\nexport const supportedLanguages = ['en', 'es', 'de', 'ja', 'pl', 'pt_BR', 'zh_CN', 'ru'];\n","export function parseEffect(text) {\n  const param = text\n    .toLowerCase()\n    .trim()\n    .split(/\\s*;\\s*/);\n  if (param[0] === 'banner') {\n    return {\n      name: param[0],\n      delay: param[1] * 1 || 0,\n      leftToRight: param[2] * 1 || 0,\n      fadeAwayWidth: param[3] * 1 || 0,\n    };\n  }\n  if (/^scroll\\s/.test(param[0])) {\n    return {\n      name: param[0],\n      y1: Math.min(param[1] * 1, param[2] * 1),\n      y2: Math.max(param[1] * 1, param[2] * 1),\n      delay: param[3] * 1 || 0,\n      fadeAwayHeight: param[4] * 1 || 0,\n    };\n  }\n  return null;\n}\n","export function parseDrawing(text) {\n  if (!text) return [];\n  return text\n    .toLowerCase()\n    // numbers\n    .replace(/([+-]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?)/g, ' $1 ')\n    // commands\n    .replace(/([mnlbspc])/g, ' $1 ')\n    .trim()\n    .replace(/\\s+/g, ' ')\n    .split(/\\s(?=[mnlbspc])/)\n    .map((cmd) => (\n      cmd.split(' ')\n        .filter((x, i) => !(i && Number.isNaN(x * 1)))\n    ));\n}\n","import { parseDrawing } from './drawing.js';\n\nconst numTags = [\n  'b', 'i', 'u', 's', 'fsp',\n  'k', 'K', 'kf', 'ko', 'kt',\n  'fe', 'q', 'p', 'pbo', 'a', 'an',\n  'fscx', 'fscy', 'fax', 'fay', 'frx', 'fry', 'frz', 'fr',\n  'be', 'blur', 'bord', 'xbord', 'ybord', 'shad', 'xshad', 'yshad',\n];\n\nconst numRegexs = numTags.map((nt) => ({ name: nt, regex: new RegExp(`^${nt}-?\\\\d`) }));\n\nexport function parseTag(text) {\n  const tag = {};\n  for (let i = 0; i < numRegexs.length; i++) {\n    const { name, regex } = numRegexs[i];\n    if (regex.test(text)) {\n      tag[name] = text.slice(name.length) * 1;\n      return tag;\n    }\n  }\n  if (/^fn/.test(text)) {\n    tag.fn = text.slice(2);\n  } else if (/^r/.test(text)) {\n    tag.r = text.slice(1);\n  } else if (/^fs[\\d+-]/.test(text)) {\n    tag.fs = text.slice(2);\n  } else if (/^\\d?c&?H?[0-9a-f]+|^\\d?c$/i.test(text)) {\n    const [, num, color] = text.match(/^(\\d?)c&?H?(\\w*)/);\n    tag[`c${num || 1}`] = color && `000000${color}`.slice(-6);\n  } else if (/^\\da&?H?[0-9a-f]+/i.test(text)) {\n    const [, num, alpha] = text.match(/^(\\d)a&?H?(\\w\\w)/);\n    tag[`a${num}`] = alpha;\n  } else if (/^alpha&?H?[0-9a-f]+/i.test(text)) {\n    [, tag.alpha] = text.match(/^alpha&?H?([0-9a-f]+)/i);\n    tag.alpha = `00${tag.alpha}`.slice(-2);\n  } else if (/^(?:pos|org|move|fad|fade)\\(/.test(text)) {\n    const [, key, value] = text.match(/^(\\w+)\\((.*?)\\)?$/);\n    tag[key] = value\n      .trim()\n      .split(/\\s*,\\s*/)\n      .map(Number);\n  } else if (/^i?clip/.test(text)) {\n    const p = text\n      .match(/^i?clip\\((.*?)\\)?$/)[1]\n      .trim()\n      .split(/\\s*,\\s*/);\n    tag.clip = {\n      inverse: /iclip/.test(text),\n      scale: 1,\n      drawing: null,\n      dots: null,\n    };\n    if (p.length === 1) {\n      tag.clip.drawing = parseDrawing(p[0]);\n    }\n    if (p.length === 2) {\n      tag.clip.scale = p[0] * 1;\n      tag.clip.drawing = parseDrawing(p[1]);\n    }\n    if (p.length === 4) {\n      tag.clip.dots = p.map(Number);\n    }\n  } else if (/^t\\(/.test(text)) {\n    const p = text\n      .match(/^t\\((.*?)\\)?$/)[1]\n      .trim()\n      .replace(/\\\\.*/, (x) => x.replace(/,/g, '\\n'))\n      .split(/\\s*,\\s*/);\n    if (!p[0]) return tag;\n    tag.t = {\n      t1: 0,\n      t2: 0,\n      accel: 1,\n      tags: p[p.length - 1]\n        .replace(/\\n/g, ',')\n        .split('\\\\')\n        .slice(1)\n        .map(parseTag),\n    };\n    if (p.length === 2) {\n      tag.t.accel = p[0] * 1;\n    }\n    if (p.length === 3) {\n      tag.t.t1 = p[0] * 1;\n      tag.t.t2 = p[1] * 1;\n    }\n    if (p.length === 4) {\n      tag.t.t1 = p[0] * 1;\n      tag.t.t2 = p[1] * 1;\n      tag.t.accel = p[2] * 1;\n    }\n  }\n\n  return tag;\n}\n","import { parseTag } from './tag.js';\n\nexport function parseTags(text) {\n  const tags = [];\n  let depth = 0;\n  let str = '';\n  for (let i = 0; i < text.length; i++) {\n    const x = text[i];\n    if (x === '(') depth++;\n    if (x === ')') depth--;\n    if (depth < 0) depth = 0;\n    if (!depth && x === '\\\\') {\n      if (str) {\n        tags.push(str);\n      }\n      str = '';\n    } else {\n      str += x;\n    }\n  }\n  tags.push(str);\n  return tags.map(parseTag);\n}\n","import { parseDrawing } from './drawing.js';\nimport { parseTags } from './tags.js';\n\nexport function parseText(text) {\n  const pairs = text.split(/{([^{}]*?)}/);\n  const parsed = [];\n  if (pairs[0].length) {\n    parsed.push({ tags: [], text: pairs[0], drawing: [] });\n  }\n  for (let i = 1; i < pairs.length; i += 2) {\n    const tags = parseTags(pairs[i]);\n    const isDrawing = tags.reduce((v, tag) => (tag.p === undefined ? v : !!tag.p), false);\n    parsed.push({\n      tags,\n      text: isDrawing ? '' : pairs[i + 1],\n      drawing: isDrawing ? parseDrawing(pairs[i + 1]) : [],\n    });\n  }\n  return {\n    raw: text,\n    combined: parsed.map((frag) => frag.text).join(''),\n    parsed,\n  };\n}\n","export function parseTime(time) {\n  const t = time.split(':');\n  return t[0] * 3600 + t[1] * 60 + t[2] * 1;\n}\n","import { parseEffect } from './effect.js';\nimport { parseText } from './text.js';\nimport { parseTime } from './time.js';\n\nexport function parseDialogue(text, format) {\n  let fields = text.split(',');\n  if (fields.length > format.length) {\n    const textField = fields.slice(format.length - 1).join();\n    fields = fields.slice(0, format.length - 1);\n    fields.push(textField);\n  }\n\n  const dia = {};\n  for (let i = 0; i < fields.length; i++) {\n    const fmt = format[i];\n    const fld = fields[i].trim();\n    switch (fmt) {\n      case 'Layer':\n      case 'MarginL':\n      case 'MarginR':\n      case 'MarginV':\n        dia[fmt] = fld * 1;\n        break;\n      case 'Start':\n      case 'End':\n        dia[fmt] = parseTime(fld);\n        break;\n      case 'Effect':\n        dia[fmt] = parseEffect(fld);\n        break;\n      case 'Text':\n        dia[fmt] = parseText(fld);\n        break;\n      default:\n        dia[fmt] = fld;\n    }\n  }\n\n  return dia;\n}\n","export function parseFormat(text) {\n  return text.match(/Format\\s*:\\s*(.*)/i)[1].split(/\\s*,\\s*/);\n}\n","export const assign = Object.assign || (\n  /* istanbul ignore next */\n  function assign(target, ...sources) {\n    for (let i = 0; i < sources.length; i++) {\n      if (!sources[i]) continue;\n      const keys = Object.keys(sources[i]);\n      for (let j = 0; j < keys.length; j++) {\n        // eslint-disable-next-line no-param-reassign\n        target[keys[j]] = sources[i][keys[j]];\n      }\n    }\n    return target;\n  }\n);\n\nexport const stylesFormat = ['Name', 'Fontname', 'Fontsize', 'PrimaryColour', 'SecondaryColour', 'OutlineColour', 'BackColour', 'Bold', 'Italic', 'Underline', 'StrikeOut', 'ScaleX', 'ScaleY', 'Spacing', 'Angle', 'BorderStyle', 'Outline', 'Shadow', 'Alignment', 'MarginL', 'MarginR', 'MarginV', 'Encoding'];\nexport const eventsFormat = ['Layer', 'Start', 'End', 'Style', 'Name', 'MarginL', 'MarginR', 'MarginV', 'Effect', 'Text'];\n","import { assign } from '../utils.js';\n\nexport function parseStyle(text, format) {\n  const values = text.match(/Style\\s*:\\s*(.*)/i)[1].split(/\\s*,\\s*/);\n  return assign({}, ...format.map((fmt, idx) => ({ [fmt]: values[idx] })));\n}\n","import { assign } from '../utils.js';\n\nfunction createCommand(arr) {\n  const cmd = {\n    type: null,\n    prev: null,\n    next: null,\n    points: [],\n  };\n  if (/[mnlbs]/.test(arr[0])) {\n    cmd.type = arr[0]\n      .toUpperCase()\n      .replace('N', 'L')\n      .replace('B', 'C');\n  }\n  for (let len = arr.length - !(arr.length & 1), i = 1; i < len; i += 2) {\n    cmd.points.push({ x: arr[i] * 1, y: arr[i + 1] * 1 });\n  }\n  return cmd;\n}\n\nfunction isValid(cmd) {\n  if (!cmd.points.length || !cmd.type) {\n    return false;\n  }\n  if (/C|S/.test(cmd.type) && cmd.points.length < 3) {\n    return false;\n  }\n  return true;\n}\n\nfunction getViewBox(commands) {\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  [].concat(...commands.map(({ points }) => points)).forEach(({ x, y }) => {\n    minX = Math.min(minX, x);\n    minY = Math.min(minY, y);\n    maxX = Math.max(maxX, x);\n    maxY = Math.max(maxY, y);\n  });\n  return {\n    minX,\n    minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\n/**\n * Convert S command to B command\n * Reference from https://github.com/d3/d3/blob/v3.5.17/src/svg/line.js#L259\n * @param  {Array}  points points\n * @param  {String} prev   type of previous command\n * @param  {String} next   type of next command\n * @return {Array}         converted commands\n */\nexport function s2b(points, prev, next) {\n  const results = [];\n  const bb1 = [0, 2 / 3, 1 / 3, 0];\n  const bb2 = [0, 1 / 3, 2 / 3, 0];\n  const bb3 = [0, 1 / 6, 2 / 3, 1 / 6];\n  const dot4 = (a, b) => (a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3]);\n  let px = [points[points.length - 1].x, points[0].x, points[1].x, points[2].x];\n  let py = [points[points.length - 1].y, points[0].y, points[1].y, points[2].y];\n  results.push({\n    type: prev === 'M' ? 'M' : 'L',\n    points: [{ x: dot4(bb3, px), y: dot4(bb3, py) }],\n  });\n  for (let i = 3; i < points.length; i++) {\n    px = [points[i - 3].x, points[i - 2].x, points[i - 1].x, points[i].x];\n    py = [points[i - 3].y, points[i - 2].y, points[i - 1].y, points[i].y];\n    results.push({\n      type: 'C',\n      points: [\n        { x: dot4(bb1, px), y: dot4(bb1, py) },\n        { x: dot4(bb2, px), y: dot4(bb2, py) },\n        { x: dot4(bb3, px), y: dot4(bb3, py) },\n      ],\n    });\n  }\n  if (next === 'L' || next === 'C') {\n    const last = points[points.length - 1];\n    results.push({ type: 'L', points: [{ x: last.x, y: last.y }] });\n  }\n  return results;\n}\n\nexport function toSVGPath(instructions) {\n  return instructions.map(({ type, points }) => (\n    type + points.map(({ x, y }) => `${x},${y}`).join(',')\n  )).join('');\n}\n\nexport function compileDrawing(rawCommands) {\n  const commands = [];\n  let i = 0;\n  while (i < rawCommands.length) {\n    const arr = rawCommands[i];\n    const cmd = createCommand(arr);\n    if (isValid(cmd)) {\n      if (cmd.type === 'S') {\n        const { x, y } = (commands[i - 1] || { points: [{ x: 0, y: 0 }] }).points.slice(-1)[0];\n        cmd.points.unshift({ x, y });\n      }\n      if (i) {\n        cmd.prev = commands[i - 1].type;\n        commands[i - 1].next = cmd.type;\n      }\n      commands.push(cmd);\n      i++;\n    } else {\n      if (i && commands[i - 1].type === 'S') {\n        const additionPoints = {\n          p: cmd.points,\n          c: commands[i - 1].points.slice(0, 3),\n        };\n        commands[i - 1].points = commands[i - 1].points.concat(\n          (additionPoints[arr[0]] || []).map(({ x, y }) => ({ x, y })),\n        );\n      }\n      rawCommands.splice(i, 1);\n    }\n  }\n  const instructions = [].concat(\n    ...commands.map(({ type, points, prev, next }) => (\n      type === 'S'\n        ? s2b(points, prev, next)\n        : { type, points }\n    )),\n  );\n\n  return assign({ instructions, d: toSVGPath(instructions) }, getViewBox(commands));\n}\n","import { compileDrawing } from './drawing.js';\nimport { assign } from '../utils.js';\n\nconst tTags = [\n  'fs', 'clip',\n  'c1', 'c2', 'c3', 'c4', 'a1', 'a2', 'a3', 'a4', 'alpha',\n  'fscx', 'fscy', 'fax', 'fay', 'frx', 'fry', 'frz', 'fr',\n  'be', 'blur', 'bord', 'xbord', 'ybord', 'shad', 'xshad', 'yshad',\n];\n\nexport function compileTag(tag, key, presets = {}) {\n  let value = tag[key];\n  if (value === undefined) {\n    return null;\n  }\n  if (key === 'pos' || key === 'org') {\n    return value.length === 2 ? { [key]: { x: value[0], y: value[1] } } : null;\n  }\n  if (key === 'move') {\n    const [x1, y1, x2, y2, t1 = 0, t2 = 0] = value;\n    return value.length === 4 || value.length === 6\n      ? { move: { x1, y1, x2, y2, t1, t2 } }\n      : null;\n  }\n  if (key === 'fad' || key === 'fade') {\n    if (value.length === 2) {\n      const [t1, t2] = value;\n      return { fade: { type: 'fad', t1, t2 } };\n    }\n    if (value.length === 7) {\n      const [a1, a2, a3, t1, t2, t3, t4] = value;\n      return { fade: { type: 'fade', a1, a2, a3, t1, t2, t3, t4 } };\n    }\n    return null;\n  }\n  if (key === 'clip') {\n    const { inverse, scale, drawing, dots } = value;\n    if (drawing) {\n      return { clip: { inverse, scale, drawing: compileDrawing(drawing), dots } };\n    }\n    if (dots) {\n      const [x1, y1, x2, y2] = dots;\n      return { clip: { inverse, scale, drawing, dots: { x1, y1, x2, y2 } } };\n    }\n    return null;\n  }\n  if (/^[xy]?(bord|shad)$/.test(key)) {\n    value = Math.max(value, 0);\n  }\n  if (key === 'bord') {\n    return { xbord: value, ybord: value };\n  }\n  if (key === 'shad') {\n    return { xshad: value, yshad: value };\n  }\n  if (/^c\\d$/.test(key)) {\n    return { [key]: value || presets[key] };\n  }\n  if (key === 'alpha') {\n    return { a1: value, a2: value, a3: value, a4: value };\n  }\n  if (key === 'fr') {\n    return { frz: value };\n  }\n  if (key === 'fs') {\n    return {\n      fs: /^\\+|-/.test(value)\n        ? (value * 1 > -10 ? (1 + value / 10) : 1) * presets.fs\n        : value * 1,\n    };\n  }\n  if (key === 'K') {\n    return { kf: value };\n  }\n  if (key === 't') {\n    const { t1, accel, tags } = value;\n    const t2 = value.t2 || (presets.end - presets.start) * 1e3;\n    const compiledTag = {};\n    tags.forEach((t) => {\n      const k = Object.keys(t)[0];\n      if (~tTags.indexOf(k) && !(k === 'clip' && !t[k].dots)) {\n        assign(compiledTag, compileTag(t, k, presets));\n      }\n    });\n    return { t: { t1, t2, accel, tag: compiledTag } };\n  }\n  return { [key]: value };\n}\n","import { compileDrawing } from './drawing.js';\nimport { compileTag } from './tag.js';\nimport { assign } from '../utils.js';\n\nconst a2an = [\n  null, 1, 2, 3,\n  null, 7, 8, 9,\n  null, 4, 5, 6,\n];\n\nconst globalTags = ['r', 'a', 'an', 'pos', 'org', 'move', 'fade', 'fad', 'clip'];\n\nfunction inheritTag(pTag) {\n  return JSON.parse(JSON.stringify(assign({}, pTag, {\n    k: undefined,\n    kf: undefined,\n    ko: undefined,\n    kt: undefined,\n  })));\n}\n\nexport function compileText({ styles, style, parsed, start, end }) {\n  let alignment;\n  let pos;\n  let org;\n  let move;\n  let fade;\n  let clip;\n  const slices = [];\n  let slice = { style, fragments: [] };\n  let prevTag = {};\n  for (let i = 0; i < parsed.length; i++) {\n    const { tags, text, drawing } = parsed[i];\n    let reset;\n    for (let j = 0; j < tags.length; j++) {\n      const tag = tags[j];\n      reset = tag.r === undefined ? reset : tag.r;\n    }\n    const fragment = {\n      tag: reset === undefined ? inheritTag(prevTag) : {},\n      text,\n      drawing: drawing.length ? compileDrawing(drawing) : null,\n    };\n    for (let j = 0; j < tags.length; j++) {\n      const tag = tags[j];\n      alignment = alignment || a2an[tag.a || 0] || tag.an;\n      pos = pos || compileTag(tag, 'pos');\n      org = org || compileTag(tag, 'org');\n      move = move || compileTag(tag, 'move');\n      fade = fade || compileTag(tag, 'fade') || compileTag(tag, 'fad');\n      clip = compileTag(tag, 'clip') || clip;\n      const key = Object.keys(tag)[0];\n      if (key && !~globalTags.indexOf(key)) {\n        const sliceTag = styles[style].tag;\n        const { c1, c2, c3, c4 } = sliceTag;\n        const fs = prevTag.fs || sliceTag.fs;\n        const compiledTag = compileTag(tag, key, { start, end, c1, c2, c3, c4, fs });\n        if (key === 't') {\n          fragment.tag.t = fragment.tag.t || [];\n          fragment.tag.t.push(compiledTag.t);\n        } else {\n          assign(fragment.tag, compiledTag);\n        }\n      }\n    }\n    prevTag = fragment.tag;\n    if (reset !== undefined) {\n      slices.push(slice);\n      slice = { style: styles[reset] ? reset : style, fragments: [] };\n    }\n    if (fragment.text || fragment.drawing) {\n      const prev = slice.fragments[slice.fragments.length - 1] || {};\n      if (prev.text && fragment.text && !Object.keys(fragment.tag).length) {\n        // merge fragment to previous if its tag is empty\n        prev.text += fragment.text;\n      } else {\n        slice.fragments.push(fragment);\n      }\n    }\n  }\n  slices.push(slice);\n\n  return assign({ alignment, slices }, pos, org, move, fade, clip);\n}\n","import { compileText } from './text.js';\nimport { assign } from '../utils.js';\n\nexport function compileDialogues({ styles, dialogues }) {\n  let minLayer = Infinity;\n  const results = [];\n  for (let i = 0; i < dialogues.length; i++) {\n    const dia = dialogues[i];\n    if (dia.Start >= dia.End) {\n      continue;\n    }\n    if (!styles[dia.Style]) {\n      dia.Style = 'Default';\n    }\n    const stl = styles[dia.Style].style;\n    const compiledText = compileText({\n      styles,\n      style: dia.Style,\n      parsed: dia.Text.parsed,\n      start: dia.Start,\n      end: dia.End,\n    });\n    const alignment = compiledText.alignment || stl.Alignment;\n    minLayer = Math.min(minLayer, dia.Layer);\n    results.push(assign({\n      layer: dia.Layer,\n      start: dia.Start,\n      end: dia.End,\n      style: dia.Style,\n      name: dia.Name,\n      // reset style by `\\r` will not effect margin and alignment\n      margin: {\n        left: dia.MarginL || stl.MarginL,\n        right: dia.MarginR || stl.MarginR,\n        vertical: dia.MarginV || stl.MarginV,\n      },\n      effect: dia.Effect,\n    }, compiledText, { alignment }));\n  }\n  for (let i = 0; i < results.length; i++) {\n    results[i].layer -= minLayer;\n  }\n  return results.sort((a, b) => a.start - b.start || a.end - b.end);\n}\n","import { assign } from '../utils.js';\n\n// same as Aegisub\n// https://github.com/Aegisub/Aegisub/blob/master/src/ass_style.h\nconst DEFAULT_STYLE = {\n  Name: 'Default',\n  Fontname: 'Arial',\n  Fontsize: '20',\n  PrimaryColour: '&H00FFFFFF&',\n  SecondaryColour: '&H000000FF&',\n  OutlineColour: '&H00000000&',\n  BackColour: '&H00000000&',\n  Bold: '0',\n  Italic: '0',\n  Underline: '0',\n  StrikeOut: '0',\n  ScaleX: '100',\n  ScaleY: '100',\n  Spacing: '0',\n  Angle: '0',\n  BorderStyle: '1',\n  Outline: '2',\n  Shadow: '2',\n  Alignment: '2',\n  MarginL: '10',\n  MarginR: '10',\n  MarginV: '10',\n  Encoding: '1',\n};\n\n/**\n * @param {String} color\n * @returns {Array} [AA, BBGGRR]\n */\nexport function parseStyleColor(color) {\n  if (/^(&|H|&H)[0-9a-f]{6,}/i.test(color)) {\n    const [, a, c] = color.match(/&?H?([0-9a-f]{2})?([0-9a-f]{6})/i);\n    return [a || '00', c];\n  }\n  const num = parseInt(color, 10);\n  if (!Number.isNaN(num)) {\n    const min = -2147483648;\n    const max = 2147483647;\n    if (num < min) {\n      return ['00', '000000'];\n    }\n    const aabbggrr = (min <= num && num <= max)\n      ? `00000000${(num < 0 ? num + 4294967296 : num).toString(16)}`.slice(-8)\n      : String(num).slice(0, 8);\n    return [aabbggrr.slice(0, 2), aabbggrr.slice(2)];\n  }\n  return ['00', '000000'];\n}\n\nexport function compileStyles({ info, style, defaultStyle }) {\n  const result = {};\n  const styles = [assign({}, DEFAULT_STYLE, defaultStyle, { Name: 'Default' })].concat(style);\n  for (let i = 0; i < styles.length; i++) {\n    const s = styles[i];\n    // this behavior is same as Aegisub by black-box testing\n    if (/^(\\*+)Default$/.test(s.Name)) {\n      s.Name = 'Default';\n    }\n    Object.keys(s).forEach((key) => {\n      if (key !== 'Name' && key !== 'Fontname' && !/Colour/.test(key)) {\n        s[key] *= 1;\n      }\n    });\n    const [a1, c1] = parseStyleColor(s.PrimaryColour);\n    const [a2, c2] = parseStyleColor(s.SecondaryColour);\n    const [a3, c3] = parseStyleColor(s.OutlineColour);\n    const [a4, c4] = parseStyleColor(s.BackColour);\n    const tag = {\n      fn: s.Fontname,\n      fs: s.Fontsize,\n      c1,\n      a1,\n      c2,\n      a2,\n      c3,\n      a3,\n      c4,\n      a4,\n      b: Math.abs(s.Bold),\n      i: Math.abs(s.Italic),\n      u: Math.abs(s.Underline),\n      s: Math.abs(s.StrikeOut),\n      fscx: s.ScaleX,\n      fscy: s.ScaleY,\n      fsp: s.Spacing,\n      frz: s.Angle,\n      xbord: s.Outline,\n      ybord: s.Outline,\n      xshad: s.Shadow,\n      yshad: s.Shadow,\n      fe: s.Encoding,\n      q: /^[0-3]$/.test(info.WrapStyle) ? info.WrapStyle * 1 : 2,\n    };\n    result[s.Name] = { style: s, tag };\n  }\n  return result;\n}\n","class Parser {\r\n    endOfLine = '\\r\\n';\r\n    numericTimestamps = false;\r\n    constructor(options) {\r\n        if (options == null)\r\n            return;\r\n        this.endOfLine = options.endOfLine ?? '\\r\\n';\r\n        this.numericTimestamps = options.numericTimestamps ?? false;\r\n    }\r\n    timestampToSeconds(srtTimestamp) {\r\n        const [rest, millisecondsString] = srtTimestamp.split(',');\r\n        const milliseconds = parseInt(millisecondsString);\r\n        const [hours, minutes, seconds] = rest.split(':').map(x => parseInt(x));\r\n        const result = milliseconds * 0.001 + seconds + 60 * minutes + 3600 * hours;\r\n        // Fix issues with floats: timestamp '00:01:20,460' result is 80.46000000000001\r\n        return Math.round(result * 1000) / 1000;\r\n    }\r\n    ;\r\n    // Based on https://github.com/gsantiago/subtitle.js/blob/bbf539771705ede2694ec424fc87c68f519bc9ff/src/formatTimestamp.ts\r\n    secondsToTimestamp(timestamp) {\r\n        const date = new Date(0, 0, 0, 0, 0, 0, timestamp);\r\n        const hours = date.getHours();\r\n        const minutes = date.getMinutes();\r\n        const seconds = date.getSeconds();\r\n        const ms = Math.floor(timestamp - (hours * 3600000 + minutes * 60000 + seconds * 1000));\r\n        function padLeft(value, length = 2) {\r\n            return value.toString().padStart(length, '0');\r\n        }\r\n        return `${padLeft(hours)}:${padLeft(minutes)}:${padLeft(seconds)},${padLeft(ms, 3)}`;\r\n    }\r\n    ;\r\n    correctFormat(time) {\r\n        // Fix the format if the format is wrong\r\n        // 00:00:28.9670 become 00:00:28,967\r\n        // 00:00:28.967  become 00:00:28,967\r\n        // 00:00:28.96   become 00:00:28,960\r\n        // 00:00:28.9    become 00:00:28,900\r\n        // 00:00:28,96   become 00:00:28,960\r\n        // 00:00:28,9    become 00:00:28,900\r\n        // 00:00:28,0    become 00:00:28,000\r\n        // 00:00:28,01   become 00:00:28,010\r\n        // 0:00:10,500   become 00:00:10,500\r\n        const str = time.replace('.', ',');\r\n        // Handle millisecond\r\n        const [front, ms] = str.split(',');\r\n        const millisecond = this.fixedStrDigit(3, ms);\r\n        // Handle hour\r\n        const [frontHour, frontMinute, frontSecond] = front.split(':');\r\n        const hour = this.fixedStrDigit(2, frontHour, false);\r\n        const minute = this.fixedStrDigit(2, frontMinute, false);\r\n        const second = this.fixedStrDigit(2, frontSecond, false);\r\n        return `${hour}:${minute}:${second},${millisecond}`;\r\n    }\r\n    /*\r\n      Make sure string is 'digitCount' long\r\n      If str is shorter than digitCount, pad with 0\r\n      If str is longer than digitCount, slice from the beginning\r\n      Examples:\r\n  \r\n      Input: fixedStrDigit(3, '100')\r\n      Output: 100\r\n      Explain: unchanged, because \"100\" is 3 digit\r\n  \r\n      Input: fixedStrDigit(3, '50')\r\n      Output: 500\r\n      Explain: pad end with 0\r\n  \r\n      Input: fixedStrDigit(3, '50', false)\r\n      Output: 050\r\n      Explain: pad start with 0\r\n  \r\n      Input: fixedStrDigit(3, '7771')\r\n      Output: 777\r\n      Explain: slice from beginning\r\n    */\r\n    fixedStrDigit(digitCount, str, padEnd = true) {\r\n        if (str.length === digitCount) {\r\n            return str;\r\n        }\r\n        if (str.length > digitCount) {\r\n            return str.slice(0, digitCount);\r\n        }\r\n        if (padEnd) {\r\n            return str.padEnd(digitCount, '0');\r\n        }\r\n        return str.padStart(digitCount, '0');\r\n    }\r\n    tryComma(data) {\r\n        data = data.replace(/\\r/g, '');\r\n        const regex = /(\\d+)\\n(\\d{1,2}:\\d{2}:\\d{2},\\d{1,3}) --> (\\d{1,2}:\\d{2}:\\d{2},\\d{1,3})/g;\r\n        const dataArray = data.split(regex);\r\n        dataArray.shift(); // remove first '' in array\r\n        return dataArray;\r\n    }\r\n    tryDot(data) {\r\n        data = data.replace(/\\r/g, '');\r\n        const regex = /(\\d+)\\n(\\d{1,2}:\\d{2}:\\d{2}\\.\\d{1,3}) --> (\\d{1,2}:\\d{2}:\\d{2}\\.\\d{1,3})/g;\r\n        const dataArray = data.split(regex);\r\n        dataArray.shift(); // remove first '' in array\r\n        return dataArray;\r\n    }\r\n    fromSrt(data) {\r\n        const originalData = data;\r\n        let dataArray = this.tryComma(originalData);\r\n        if (dataArray.length === 0) {\r\n            dataArray = this.tryDot(originalData);\r\n        }\r\n        const items = [];\r\n        for (let i = 0; i < dataArray.length; i += 4) {\r\n            let startTime = this.correctFormat(dataArray[i + 1].trim());\r\n            let endTime = this.correctFormat(dataArray[i + 2].trim());\r\n            if (this.numericTimestamps) {\r\n                startTime = this.timestampToSeconds(startTime);\r\n                endTime = this.timestampToSeconds(endTime);\r\n            }\r\n            const line = {\r\n                id: dataArray[i].trim(),\r\n                startTime,\r\n                endTime,\r\n                text: dataArray[i + 3].trim()\r\n            };\r\n            items.push(line);\r\n        }\r\n        return items;\r\n    }\r\n    toSrt(data) {\r\n        const endOfLine = this.endOfLine;\r\n        let res = '';\r\n        for (let i = 0; i < data.length; i++) {\r\n            const s = data[i];\r\n            let startTime = s.startTime;\r\n            let endTime = s.endTime;\r\n            if (typeof startTime === 'number') {\r\n                startTime = this.secondsToTimestamp(startTime);\r\n            }\r\n            if (typeof endTime === 'number') {\r\n                endTime = this.secondsToTimestamp(endTime);\r\n            }\r\n            res += s.id + endOfLine +\r\n                startTime + ' --> ' + endTime + endOfLine +\r\n                s.text.replace('\\n', endOfLine) + endOfLine + endOfLine;\r\n        }\r\n        return res;\r\n    }\r\n}\r\nexport default Parser;\r\n","import { compile as parseAss } from 'ass-compiler';\nimport SrtParser from '@qgustavor/srt-parser';\nimport { WebVTT } from 'vtt.js';\nimport { XMLParser } from 'fast-xml-parser';\nconst vttClassRegex = /<(\\/)?c(\\.[^>]*)?>/g;\nconst assNewLineRegex = RegExp(/\\\\[nN]/, 'ig');\nconst helperElement = document.createElement('div');\nconst sortVttCue = (a, b) => {\n    if (typeof a.line === 'number' && typeof b.line === 'number') {\n        if (a.line < b.line) {\n            return -1;\n        }\n        if (a.line > b.line) {\n            return 1;\n        }\n        if (typeof a.position === 'number' && typeof b.position === 'number') {\n            if (a.position < b.position) {\n                return -1;\n            }\n            if (a.position > b.position) {\n                return 1;\n            }\n            return 0;\n        }\n    }\n    return 0;\n};\nconst sortVttCues = (list) => {\n    if (list.length <= 1) {\n        return list;\n    }\n    return list.sort(sortVttCue);\n};\nexport default class SubtitleReader {\n    constructor({ regexFilter, regexFilterTextReplacement, pgsWorkerFactory, }) {\n        let regex;\n        try {\n            regex = regexFilter.trim() === '' ? undefined : new RegExp(regexFilter, 'gv');\n        }\n        catch (e) {\n            regex = undefined;\n        }\n        if (regex === undefined) {\n            this._textFilter = undefined;\n        }\n        else {\n            this._textFilter = { regex, replacement: regexFilterTextReplacement };\n        }\n        this._pgsWorkerFactory = pgsWorkerFactory;\n    }\n    async subtitles(files, flatten) {\n        const allNodes = (await Promise.all(files.map((f, i) => this._subtitles(f, flatten === true ? 0 : i))))\n            .flatMap((nodes) => nodes)\n            .filter((node) => node.textImage !== undefined || node.text !== '')\n            .sort((n1, n2) => n1.start - n2.start);\n        if (flatten) {\n            return this._deduplicate(allNodes);\n        }\n        return allNodes;\n    }\n    _deduplicate(nodes) {\n        const deduplicated = [];\n        for (const node of nodes) {\n            if (deduplicated.length == 0 || !this._isSame(node, deduplicated[deduplicated.length - 1])) {\n                deduplicated.push(node);\n            }\n        }\n        return deduplicated;\n    }\n    _isSame(a, b) {\n        if (a.textImage || b.textImage) {\n            return false;\n        }\n        return a.start === b.start && a.end === b.end && a.text === b.text;\n    }\n    async _subtitles(file, track) {\n        if (file.name.endsWith('.srt') || file.name.endsWith('.subrip')) {\n            const parser = new SrtParser({ numericTimestamps: true });\n            const nodes = parser.fromSrt(await file.text());\n            return nodes.map((node) => {\n                return {\n                    start: Math.floor(node.startTime * 1000),\n                    end: Math.floor(node.endTime * 1000),\n                    text: this._filterText(node.text, true),\n                    track: track,\n                };\n            });\n        }\n        if (file.name.endsWith('.vtt') || file.name.endsWith('.nfvtt')) {\n            return new Promise(async (resolve, reject) => {\n                const isFromNetflix = file.name.endsWith('.nfvtt');\n                const parser = new WebVTT.Parser(window, WebVTT.StringDecoder());\n                const allBuffers = [];\n                let lastTimestamp = undefined;\n                let buffer = [];\n                parser.oncue = (c) => {\n                    c.text = this._filterText(c.text.replaceAll(vttClassRegex, ''), true);\n                    if (isFromNetflix) {\n                        const lines = c.text.split('\\n');\n                        const newLines = [];\n                        for (const line of lines) {\n                            newLines.push(this._fixRTL(line));\n                        }\n                        c.text = newLines.join('\\n');\n                    }\n                    const startTime = Math.floor(c.startTime * 1000);\n                    if (lastTimestamp === undefined || lastTimestamp === startTime) {\n                        buffer.push(c);\n                    }\n                    else {\n                        buffer = sortVttCues(buffer);\n                        allBuffers.push(buffer);\n                        buffer = [c];\n                    }\n                    lastTimestamp = startTime;\n                };\n                parser.onflush = () => {\n                    buffer = sortVttCues(buffer);\n                    allBuffers.push(buffer);\n                    const nodes = [];\n                    for (const buffer of allBuffers) {\n                        for (const c of buffer) {\n                            nodes.push({\n                                start: Math.floor(c.startTime * 1000),\n                                end: Math.floor(c.endTime * 1000),\n                                text: c.text,\n                                track: track,\n                            });\n                        }\n                    }\n                    resolve(nodes);\n                };\n                parser.parse(await file.text());\n                parser.flush();\n            });\n        }\n        if (file.name.endsWith('.ass')) {\n            const nodes = parseAss(await file.text(), {});\n            return nodes.dialogues.map((dialogue) => {\n                return {\n                    start: Math.round(dialogue.start * 1000),\n                    end: Math.round(dialogue.end * 1000),\n                    text: this._filterText(dialogue.slices.flatMap((slice) => slice.fragments.map((fragment) => fragment.text)).join(''), false).replace(assNewLineRegex, '\\n'),\n                    track: track,\n                };\n            });\n        }\n        if (file.name.endsWith('.ytxml')) {\n            const text = await file.text();\n            const xml = this._xmlParser().parse(text);\n            if (Object.keys(xml).length === 0) {\n                return [];\n            }\n            const textNodes = xml['transcript']['text'];\n            const subtitles = [];\n            let overlappingCount = 0;\n            let lastSubtitle;\n            for (let index = 0, length = textNodes.length; index < length; index++) {\n                const elm = textNodes[index];\n                if (!('#text' in elm) || !('@_dur' in elm) || !('@_start' in elm)) {\n                    continue;\n                }\n                const start = parseFloat(elm['@_start']);\n                const subtitle = {\n                    start: Math.floor(start * 1000),\n                    end: Math.floor((start + parseFloat(elm['@_dur'])) * 1000),\n                    text: this._filterText(this._decodeHTML(String(elm['#text'])), true),\n                    track,\n                };\n                if (lastSubtitle !== undefined && lastSubtitle.end > subtitle.start) {\n                    ++overlappingCount;\n                }\n                subtitles.push(subtitle);\n                lastSubtitle = subtitle;\n            }\n            const probablyAutoGenerated = subtitles.length > 0 && overlappingCount / subtitles.length > 0.5;\n            if (probablyAutoGenerated) {\n                return subtitles.map((subtitle, index) => {\n                    // Remove overlaps if possible since auto-generated YT subs almost always overlap significantly with the previous one\n                    if (index < subtitles.length - 1) {\n                        return {\n                            ...subtitle,\n                            end: Math.max(subtitle.start, Math.min(subtitles[index + 1].start - 1, subtitle.end)),\n                        };\n                    }\n                    return subtitle;\n                });\n            }\n            return subtitles;\n        }\n        if (file.name.endsWith('.sup')) {\n            return await this._parsePgs(file, track);\n        }\n        if (file.name.endsWith('.dfxp') || file.name.endsWith('ttml2')) {\n            const text = await file.text();\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(text, 'application/xml');\n            const nodes = this._xmlNodePath(doc.documentElement, ['body', 'div']);\n            const subtitles = [];\n            for (let index = 0, length = nodes.length; index < length; index++) {\n                const elm = nodes[index];\n                const beginAttribute = elm.getAttribute('begin');\n                const endAttribute = elm.getAttribute('end');\n                if (beginAttribute === null || endAttribute === null) {\n                    continue;\n                }\n                const text = this._decodeHTML(elm.innerHTML.replaceAll(/<br(\\s[^\\s]+)?(\\/)?>/g, '\\n'));\n                subtitles.push({\n                    text: this._filterText(text, false),\n                    start: this._parseTtmlTimestamp(beginAttribute),\n                    end: this._parseTtmlTimestamp(endAttribute),\n                    track,\n                });\n            }\n            return subtitles;\n        }\n        if (file.name.endsWith('.bbjson')) {\n            const body = JSON.parse(await file.text()).body;\n            return body.map((s) => ({\n                text: s.content,\n                start: s.from * 1000,\n                end: s.to * 1000,\n                track,\n            }));\n        }\n        throw new Error('Unsupported subtitle file format');\n    }\n    _parsePgs(file, track) {\n        const subtitles = [];\n        return new Promise(async (resolve, reject) => {\n            const worker = await this._pgsWorkerFactory();\n            worker.onmessage = async (e) => {\n                switch (e.data.command) {\n                    case 'subtitle':\n                        const subtitle = { ...e.data.subtitle, track };\n                        const imageBlob = e.data.imageBlob;\n                        subtitle.textImage.dataUrl = await this._blobToDataUrl(imageBlob);\n                        subtitles.push(subtitle);\n                        break;\n                    case 'finished':\n                        worker.terminate();\n                        resolve(subtitles);\n                        break;\n                    case 'error':\n                        worker.terminate();\n                        reject(e.data.error);\n                        break;\n                }\n            };\n            worker.onerror = (e) => {\n                const error = e?.error ?? new Error('PGS decoding failed: ' + e?.message);\n                reject(error);\n                worker.terminate();\n            };\n            const canvas = document.createElement('canvas');\n            // transferControlToOffscreen is not in lib.dom.d.ts\n            // @ts-ignore\n            const offscreenCanvas = canvas.transferControlToOffscreen();\n            // Node ReadableStream clashes with web ReadableStream\n            const fileStream = (await file.stream());\n            worker.postMessage({ fileStream, canvas: offscreenCanvas }, [fileStream, offscreenCanvas]);\n        });\n    }\n    _blobToDataUrl(blob) {\n        return new Promise((resolve, reject) => {\n            var reader = new FileReader();\n            reader.readAsDataURL(blob);\n            reader.onloadend = () => {\n                resolve(reader.result);\n            };\n        });\n    }\n    _parseTtmlTimestamp(timestamp) {\n        const parts = timestamp.split(':');\n        const milliseconds = Math.floor(parseFloat(parts[parts.length - 1]) * 1000);\n        const minutes = parts.length < 2 ? 0 : Number(parts[parts.length - 2]);\n        const hours = parts.length < 3 ? 0 : Number(parts[parts.length - 3]);\n        return milliseconds + minutes * 60000 + hours * 3600000;\n    }\n    _xmlNodePath(parent, path) {\n        if (path.length === 0) {\n            const children = [];\n            for (let i = 0; i < parent.children.length; ++i) {\n                const node = parent.children[i];\n                children.push(node);\n            }\n            return children;\n        }\n        for (let i = 0; i < parent.children.length; ++i) {\n            const node = parent.children[i];\n            const tag = this._dropTagNamespace(node.tagName);\n            if (tag === path[0]) {\n                return this._xmlNodePath(node, path.slice(1));\n            }\n        }\n        throw new Error('Failied to parse XML path');\n    }\n    _dropTagNamespace(tag) {\n        const colonIndex = tag.lastIndexOf(':');\n        if (colonIndex !== -1) {\n            return tag.substring(colonIndex + 1);\n        }\n        return tag;\n    }\n    _fixRTL(line) {\n        const index1 = line.indexOf('&lrm;');\n        const index2 = line.indexOf('&rlm;');\n        let newLine = '';\n        if (index1 > -1) {\n            newLine = line.substring(0, index1) + '\\u202a' + line.substring(index1 + 5) + '\\u202c';\n            return this._fixRTL(newLine);\n        }\n        else if (index2 > -1) {\n            newLine = line.substring(0, index2) + '\\u202b' + line.substring(index2 + 5) + '\\u202c';\n            return this._fixRTL(newLine);\n        }\n        return line;\n    }\n    _decodeHTML(text) {\n        helperElement.innerHTML = text;\n        const rubyTextElements = [...helperElement.getElementsByTagName('rt')];\n        for (const rubyTextElement of rubyTextElements) {\n            rubyTextElement.remove();\n        }\n        return helperElement.textContent ?? helperElement.innerText;\n    }\n    _xmlParser() {\n        if (this.xmlParser === undefined) {\n            this.xmlParser = new XMLParser({\n                ignoreAttributes: false,\n            });\n        }\n        return this.xmlParser;\n    }\n    _filterText(text, removeXml) {\n        text =\n            this._textFilter === undefined\n                ? text\n                : text.replace(this._textFilter.regex, this._textFilter.replacement).trim();\n        if (removeXml) {\n            text = this._decodeHTML(text);\n        }\n        return text;\n    }\n    subtitlesToSrt(subtitles) {\n        const parser = new SrtParser({ numericTimestamps: true });\n        const nodes = subtitles.map((subtitleNode, i) => {\n            return {\n                id: String(i),\n                startTime: subtitleNode.start,\n                endTime: subtitleNode.end,\n                text: subtitleNode.text,\n            };\n        });\n        return parser.toSrt(nodes);\n    }\n    async filesToSrt(files) {\n        return this.subtitlesToSrt(await this.subtitles(files));\n    }\n}\n","import { parse } from '../parser/index.js';\nimport { compileDialogues } from './dialogues.js';\nimport { compileStyles } from './styles.js';\n\nexport function compile(text, options = {}) {\n  const tree = parse(text);\n  const styles = compileStyles({\n    info: tree.info,\n    style: tree.styles.style,\n    defaultStyle: options.defaultStyle || {},\n  });\n  return {\n    info: tree.info,\n    width: tree.info.PlayResX * 1 || null,\n    height: tree.info.PlayResY * 1 || null,\n    collisions: tree.info.Collisions || 'Normal',\n    styles,\n    dialogues: compileDialogues({\n      styles,\n      dialogues: tree.events.dialogue,\n    }),\n  };\n}\n","import { parseDialogue } from './dialogue.js';\nimport { parseFormat } from './format.js';\nimport { parseStyle } from './style.js';\n\nexport function parse(text) {\n  const tree = {\n    info: {},\n    styles: { format: [], style: [] },\n    events: { format: [], comment: [], dialogue: [] },\n  };\n  const lines = text.split(/\\r?\\n/);\n  let state = 0;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    if (/^;/.test(line)) continue;\n\n    if (/^\\[Script Info\\]/i.test(line)) state = 1;\n    else if (/^\\[V4\\+? Styles\\]/i.test(line)) state = 2;\n    else if (/^\\[Events\\]/i.test(line)) state = 3;\n    else if (/^\\[.*\\]/.test(line)) state = 0;\n\n    if (state === 0) continue;\n    if (state === 1) {\n      if (/:/.test(line)) {\n        const [, key, value] = line.match(/(.*?)\\s*:\\s*(.*)/);\n        tree.info[key] = value;\n      }\n    }\n    if (state === 2) {\n      if (/^Format\\s*:/i.test(line)) {\n        tree.styles.format = parseFormat(line);\n      }\n      if (/^Style\\s*:/i.test(line)) {\n        tree.styles.style.push(parseStyle(line, tree.styles.format));\n      }\n    }\n    if (state === 3) {\n      if (/^Format\\s*:/i.test(line)) {\n        tree.events.format = parseFormat(line);\n      }\n      if (/^(?:Comment|Dialogue)\\s*:/i.test(line)) {\n        const [, key, value] = line.match(/^(\\w+?)\\s*:\\s*(.*)/i);\n        tree.events[key.toLowerCase()].push(parseDialogue(value, tree.events.format));\n      }\n    }\n  }\n\n  return tree;\n}\n","import { unprefixedSettings, prefixedSettings, defaultSettings, } from '@project/common/settings';\nconst activeProfileKey = 'activeSettingsProfile';\nconst profilesKey = 'settingsProfiles';\nexport class ExtensionSettingsStorage {\n    constructor(storage) {\n        this._storage = storage ?? chrome.storage.local;\n    }\n    async get(keysAndDefaults) {\n        const activeProfile = await this.activeProfile();\n        if (activeProfile === undefined) {\n            return await this._storage.get(keysAndDefaults);\n        }\n        return unprefixedSettings(await this._storage.get(prefixedSettings(keysAndDefaults, activeProfile.name)), activeProfile.name);\n    }\n    async set(settings) {\n        const activeProfile = await this.activeProfile();\n        if (activeProfile === undefined) {\n            await this._storage.set(settings);\n        }\n        else {\n            await this._storage.set(prefixedSettings(settings, activeProfile.name));\n        }\n    }\n    async activeProfile() {\n        const name = (await this._storage.get(activeProfileKey))[activeProfileKey];\n        if (name === undefined) {\n            return undefined;\n        }\n        const profiles = await this.profiles();\n        return profiles.find((p) => p.name === name);\n    }\n    async setActiveProfile(name) {\n        if (name === undefined) {\n            await this._storage.remove(activeProfileKey);\n        }\n        else {\n            const profiles = await this.profiles();\n            const profileExists = profiles.find((p) => p.name === name) !== undefined;\n            if (!profileExists) {\n                throw new Error(`Cannot set active profile to non-existant profile ${name}`);\n            }\n            await this._storage.set({ [activeProfileKey]: name });\n        }\n    }\n    async profiles() {\n        return (await this._storage.get({ [profilesKey]: [] }))[profilesKey] ?? [];\n    }\n    async addProfile(name) {\n        const profiles = await this.profiles();\n        const existing = profiles.find((p) => p.name === name);\n        if (existing === undefined) {\n            profiles.push({ name });\n        }\n        await this._storage.set({ [profilesKey]: profiles });\n        const initialValues = await this._storage.get(Object.keys(defaultSettings));\n        await this._storage.set(prefixedSettings(initialValues, name));\n    }\n    async removeProfile(name) {\n        const profiles = await this.profiles();\n        const activeProfile = await this.activeProfile();\n        if (name === activeProfile?.name) {\n            throw new Error('Cannot remove active profile');\n        }\n        const newProfiles = profiles.filter((p) => p.name !== name);\n        const prefixedKeys = Object.keys(prefixedSettings(defaultSettings, name));\n        await this._storage.remove(prefixedKeys);\n        await this._storage.set({ [profilesKey]: newProfiles });\n    }\n    async clear() {\n        await this._storage.clear();\n    }\n}\n","import { SettingsProvider } from '@project/common/settings';\nimport { ExtensionSettingsStorage } from './extension-settings-storage';\nimport { isFirefoxBuild } from './build-flags';\nconst settings = new SettingsProvider(new ExtensionSettingsStorage());\n// As of this writing, session storage is not accessible to content scripts on Firefox so we use local storage instead.\n// Since unlike session storage, local storage is not automatically cleared, we clear it manually once a day.\nconst storage = isFirefoxBuild ? chrome.storage.local : chrome.storage.session;\nconst firefoxTtl = 3600 * 24 * 1000; // 1 day\nexport const fetchExtensionConfig = async (noCache = false) => {\n    if (!noCache) {\n        const cachedConfig = (await storage.get(['config'])).config;\n        if (cachedConfig === '-') {\n            return undefined;\n        }\n        if (cachedConfig !== undefined) {\n            if (typeof cachedConfig.ttl !== 'number' || Date.now() < cachedConfig.ttl) {\n                return cachedConfig;\n            }\n        }\n    }\n    try {\n        const asbplayerUrl = await settings.getSingle('streamingAppUrl');\n        const extensionJsonUrl = `${asbplayerUrl}/extension.json`;\n        const extensionJson = await (await fetch(extensionJsonUrl)).json();\n        if (validJson(extensionJson)) {\n            if (isFirefoxBuild) {\n                extensionJson.ttl = Date.now() + firefoxTtl;\n            }\n            await storage.set({ config: extensionJson });\n            return extensionJson;\n        }\n    }\n    catch (e) {\n        console.error(e);\n    }\n    return undefined;\n};\nconst validJson = (json) => {\n    return json !== undefined && validLatest(json.latest) && validLanguages(json.languages);\n};\nconst validLatest = (json) => {\n    return typeof json.version === 'string' && typeof json.url === 'string';\n};\nconst validLanguages = (json) => {\n    if (json === undefined || typeof json !== 'object' || !Array.isArray(json)) {\n        return false;\n    }\n    for (const item of json) {\n        if (typeof item.code !== 'string' || typeof item.url !== 'string' || typeof item.version !== 'number') {\n            return false;\n        }\n    }\n    return true;\n};\n","// @ts-ignore\nexport const isFirefoxBuild = FIREFOX === true;\n","import { fetchExtensionConfig } from './extension-config';\nimport { SettingsProvider, supportedLanguages as defaultSupportedLanguages } from '@project/common/settings';\nimport { ExtensionSettingsStorage } from './extension-settings-storage';\nconst stringsKeyForLang = (lang) => `locStrings-${lang}`;\nconst versionKeyForLang = (lang) => `locVersion-${lang}`;\nconst settings = new SettingsProvider(new ExtensionSettingsStorage());\nexport const fetchLocalization = async (lang) => {\n    return ((await cachedStringsForLang(lang)) ??\n        (await bundledStringsForLang(lang)) ??\n        (await bundledStringsForLang('en')));\n};\nexport const fetchSupportedLanguages = async () => {\n    const config = await fetchExtensionConfig();\n    if (config === undefined) {\n        return defaultSupportedLanguages;\n    }\n    return config.languages.map((c) => c.code);\n};\nexport const primeLocalization = async (lang) => {\n    try {\n        let config = await fetchExtensionConfig();\n        if (config === undefined) {\n            return;\n        }\n        const langConfig = config.languages.find((c) => c.code === lang) ??\n            (await fetchExtensionConfig(true))?.languages.find((c) => c.code === lang);\n        if (langConfig === undefined) {\n            return;\n        }\n        const versionKey = versionKeyForLang(lang);\n        const version = (await chrome.storage.local.get(versionKey))[versionKey];\n        if (version === undefined || version < langConfig.version) {\n            await fetchAndCache(langConfig);\n        }\n    }\n    catch (e) {\n        console.error(e);\n    }\n};\nconst fetchAndCache = async ({ code, url, version }) => {\n    const asbplayerUrl = await settings.getSingle('streamingAppUrl');\n    const effectiveUrl = url.startsWith('http://') || url.startsWith('https://') ? url : `${asbplayerUrl}/${url}`;\n    try {\n        const strings = await (await fetch(effectiveUrl)).json();\n        if (typeof strings === 'object') {\n            const versionKey = versionKeyForLang(code);\n            const stringsKey = stringsKeyForLang(code);\n            await chrome.storage.local.set({ [stringsKey]: strings, [versionKey]: version });\n        }\n    }\n    catch (e) {\n        console.error(e);\n    }\n};\nconst bundledStringsForLang = async (lang) => {\n    for (const defaultLang of defaultSupportedLanguages) {\n        if (lang === defaultLang) {\n            return {\n                lang,\n                strings: await (await fetch(chrome.runtime.getURL(`asbplayer-locales/${lang}.json`))).json(),\n            };\n        }\n    }\n    return undefined;\n};\nconst cachedStringsForLang = async (lang) => {\n    const stringsKey = stringsKeyForLang(lang);\n    const strings = (await chrome.storage.local.get(stringsKey))[stringsKey];\n    if (strings === undefined) {\n        return undefined;\n    }\n    return { lang, strings };\n};\n","export default class FrameBridgeClient {\n    constructor(frame, fetchOptions) {\n        this.frame = frame;\n        this.fetchOptions = fetchOptions;\n        this.bindPromise = undefined;\n    }\n    async bind() {\n        this.bindPromise = this.bindPromise || this._bindClient();\n        return this.bindPromise;\n    }\n    updateState(state) {\n        if (!this.frameId) {\n            throw new Error('Attempted to update state when frame is not ready');\n        }\n        this.frame.contentWindow?.postMessage({\n            sender: 'asbplayer-video',\n            message: {\n                command: 'sendClientMessage',\n                message: {\n                    command: 'updateState',\n                    state: state,\n                },\n                frameId: this.frameId,\n            },\n        }, '*');\n    }\n    sendMessage(message) {\n        if (!this.frameId) {\n            throw new Error('Attempted to send message when frame is not ready');\n        }\n        this.frame.contentWindow?.postMessage({\n            sender: 'asbplayer-video',\n            message: {\n                command: 'sendClientMessage',\n                message: message,\n                frameId: this.frameId,\n            },\n        }, '*');\n    }\n    onMessage(listener) {\n        this.serverMessageListener = listener;\n    }\n    unbind() {\n        if (this.windowMessageListener) {\n            window.removeEventListener('message', this.windowMessageListener);\n            this.windowMessageListener = undefined;\n        }\n        this.serverMessageListener = undefined;\n    }\n    _bindClient() {\n        return new Promise((resolve, reject) => {\n            let ready = false;\n            this.windowMessageListener = (event) => {\n                if (event.source !== this.frame.contentWindow || event.data.sender !== 'asbplayer-frame') {\n                    return;\n                }\n                const message = event.data.message;\n                switch (message.command) {\n                    case 'ready':\n                        this.frameId = event.data.message.frameId;\n                        ready = true;\n                        resolve();\n                        break;\n                    case 'onServerMessage':\n                        if (message.message.command === 'http-post') {\n                            this._resolveHttpPost(message.message);\n                        }\n                        else {\n                            if (this.serverMessageListener) {\n                                const result = this.serverMessageListener(message.message);\n                                if (result instanceof Promise) {\n                                    result.catch(console.error);\n                                }\n                            }\n                        }\n                        break;\n                }\n            };\n            setTimeout(() => {\n                if (!ready) {\n                    reject(new Error('Timed out waiting for frame to be ready'));\n                    if (this.windowMessageListener) {\n                        window.removeEventListener('message', this.windowMessageListener);\n                        this.windowMessageListener = undefined;\n                    }\n                }\n            }, 10000);\n            window.addEventListener('message', this.windowMessageListener);\n        });\n    }\n    _resolveHttpPost(message) {\n        if (this.fetchOptions === undefined) {\n            return;\n        }\n        if (this.fetchOptions.allowedFetchUrl === undefined || message.url !== this.fetchOptions.allowedFetchUrl) {\n            return;\n        }\n        let httpPostCommand;\n        const httpPostMessage = {\n            command: 'http-post',\n            url: message.url,\n            body: message.body,\n            messageId: message.messageId,\n        };\n        if (this.fetchOptions.videoSrc === undefined) {\n            httpPostCommand = {\n                sender: 'asbplayer-video-tab',\n                message: httpPostMessage,\n            };\n        }\n        else {\n            httpPostCommand = {\n                sender: 'asbplayer-video',\n                message: httpPostMessage,\n                src: this.fetchOptions.videoSrc,\n            };\n        }\n        chrome.runtime.sendMessage(httpPostCommand, (postResponse) => {\n            const response = postResponse\n                ? { ...postResponse, messageId: message.messageId }\n                : { error: chrome.runtime.lastError?.message, messageId: message.messageId };\n            this.frame.contentWindow?.postMessage({\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'sendClientMessage',\n                    message: response,\n                    frameId: this.frameId,\n                },\n            }, '*');\n        });\n    }\n}\n","import { isFirefoxBuild } from './build-flags';\nimport FrameBridgeClient from './frame-bridge-client';\nconst frameColorScheme = () => {\n    // Prevent iframe from showing up with solid background by selecting suitable color scheme according to document's color scheme\n    // https://fvsch.com/transparent-iframes\n    const documentColorSchemeMetaTag = document.querySelector('meta[name=\"color-scheme\"]');\n    if (documentColorSchemeMetaTag === null) {\n        return 'normal';\n    }\n    const documentColorScheme = documentColorSchemeMetaTag.content;\n    const light = documentColorScheme.includes('light');\n    const dark = documentColorScheme.includes('dark');\n    if (light && dark) {\n        return 'none';\n    }\n    if (light) {\n        return 'light';\n    }\n    if (dark) {\n        return 'dark';\n    }\n    return 'normal';\n};\nexport default class UiFrame {\n    constructor(html) {\n        this._language = 'en';\n        this._dirty = true;\n        this._bound = false;\n        this._html = html;\n    }\n    set fetchOptions(fetchOptions) {\n        this._dirty =\n            this._dirty ||\n                this._fetchOptions?.allowedFetchUrl !== fetchOptions.allowedFetchUrl ||\n                this._fetchOptions?.videoSrc !== fetchOptions.videoSrc;\n        this._fetchOptions = fetchOptions;\n    }\n    set language(language) {\n        this._dirty = this._dirty || this._language !== language;\n        this._language = language;\n    }\n    get hidden() {\n        return this._frame === undefined || this._frame.classList.contains('asbplayer-hide');\n    }\n    get bound() {\n        return this._bound;\n    }\n    get frame() {\n        return this._frame;\n    }\n    get clientIfLoaded() {\n        return this._client;\n    }\n    async bind() {\n        return await this._init();\n    }\n    async client() {\n        await this._init();\n        return this._client;\n    }\n    async _init() {\n        if (!this._dirty) {\n            return false;\n        }\n        this._dirty = false;\n        this._bound = true;\n        this._client?.unbind();\n        this._frame?.remove();\n        this._frame = document.createElement('iframe');\n        this._frame.className = 'asbplayer-ui-frame';\n        this._frame.style.colorScheme = frameColorScheme();\n        this._frame.setAttribute('allowtransparency', 'true');\n        this._client = new FrameBridgeClient(this._frame, this._fetchOptions);\n        document.body.appendChild(this._frame);\n        if (isFirefoxBuild) {\n            // Firefox does not allow document.write() into the about:blank iframe.\n            // CSP headers are modified using the webRequest API to allow extension scripts to\n            // be loaded.\n            this._frame.srcdoc = await this._html(this._language);\n        }\n        else {\n            // On Chromium, use document.write() since it allows the loading of extension scripts\n            // into the iframe without additional work.\n            const doc = this._frame.contentDocument;\n            doc.open();\n            doc.write(await this._html(this._language));\n            doc.close();\n        }\n        await this._client.bind();\n        return true;\n    }\n    show() {\n        this._frame?.classList.remove('asbplayer-hide');\n    }\n    hide() {\n        this._frame?.classList.add('asbplayer-hide');\n        this._frame?.blur();\n    }\n    unbind() {\n        this._dirty = true;\n        this._client?.unbind();\n        this._frame?.remove();\n    }\n}\n","export function bufferToBase64(buffer) {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    const length = bytes.byteLength;\n    for (let i = 0; i < length; ++i) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n}\nexport async function fileUrlToBase64(fileUrl) {\n    return bufferToBase64(await (await fetch(fileUrl)).arrayBuffer());\n}\nexport const blobToBase64 = (blob) => {\n    return new Promise(async (resolve, reject) => {\n        try {\n            var reader = new FileReader();\n            reader.readAsDataURL(blob);\n            reader.onloadend = () => {\n                const result = reader.result;\n                const base64 = result.substring(result.indexOf(',') + 1);\n                resolve(base64);\n            };\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n};\nexport const base64ToBlob = (base64, mimeType) => {\n    const decoded = atob(base64);\n    const buffer = new Uint8Array(decoded.length);\n    for (let i = 0; i < buffer.length; ++i) {\n        buffer[i] = decoded.charCodeAt(i);\n    }\n    return new Blob([buffer.buffer], { type: mimeType });\n};\n","export const mp3WorkerFactory = async () => {\n    const code = await (await fetch(chrome.runtime.getURL('./mp3-encoder-worker.js'))).text();\n    const blob = new Blob([code], { type: 'application/javascript' });\n    return new Worker(URL.createObjectURL(blob));\n};\n","// The app and extension currently share settings via extension storage.\n// However, each setting can have different values per profile.\n// \"Global state\" exists for other kinds of key/value pairs that should\n// not be affected by settings profiles. For example: FTUE state.\nexport const initialGlobalState = {\n    ftueHasSeenAnkiDialogQuickSelect: false,\n};\n","import { initialGlobalState } from '@project/common/global-state';\nexport class ExtensionGlobalStateProvider {\n    constructor(storage) {\n        this._storage = storage ?? chrome.storage.local;\n    }\n    async getAll() {\n        return (await this._storage.get(initialGlobalState));\n    }\n    async get(keys) {\n        const partialInitialGlobalState = {};\n        for (const key of keys) {\n            partialInitialGlobalState[key] = initialGlobalState[key];\n        }\n        return (await this._storage.get(partialInitialGlobalState));\n    }\n    async set(state) {\n        await this._storage.set(state);\n    }\n}\n","import { PostMinePlayback, } from '@project/common';\nimport { sourceString } from '@project/common/util';\nimport { fetchLocalization } from '../services/localization-fetcher';\nimport UiFrame from '../services/ui-frame';\nimport Mp3Encoder from '@project/common/audio-clip/mp3-encoder';\nimport { base64ToBlob, blobToBase64 } from '@project/common/base64';\nimport { mp3WorkerFactory } from '../services/mp3-worker-factory';\nimport { ExtensionGlobalStateProvider } from '../services/extension-global-state-provider';\n// We need to write the HTML into the iframe manually so that the iframe keeps it's about:blank URL.\n// Otherwise, Chrome won't insert content scripts into the iframe (e.g. Yomichan won't work).\nasync function html(language) {\n    return `<!DOCTYPE html>\n                <html lang=\"en\">\n                <head>\n                    <meta charset=\"utf-8\" />\n                    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n                    <title>asbplayer - Anki</title>\n                    <style>\n                        @import url(${chrome.runtime.getURL('./assets/fonts.css')});\n                    </style>\n                </head>\n                <body>\n                    <div id=\"root\" style=\"width:100%;height:100vh;\"></div>\n                    <script type=\"application/json\" id=\"loc\">${JSON.stringify(await fetchLocalization(language))}</script>\n                    <script src=\"${chrome.runtime.getURL('./anki-ui.js')}\"></script>\n                </body>\n            </html>`;\n}\nconst globalStateProvider = new ExtensionGlobalStateProvider();\nexport default class AnkiUiController {\n    constructor() {\n        this.frame = new UiFrame(html);\n    }\n    get settings() {\n        return this._settings;\n    }\n    updateSettings(settings, settingsProvider) {\n        this._settings = settings;\n        if (this.frame?.bound) {\n            this.frame.client().then(async (client) => {\n                const profilesPromise = settingsProvider.profiles();\n                const activeProfilePromise = settingsProvider.activeProfile();\n                const message = {\n                    command: 'settings',\n                    settings,\n                    profiles: await profilesPromise,\n                    activeProfile: (await activeProfilePromise)?.name,\n                };\n                client.sendMessage(message);\n            });\n        }\n    }\n    get showing() {\n        return !this.frame.hidden;\n    }\n    async show(context, { subtitle, surroundingSubtitles, image, audio, text, definition, word, customFieldValues }) {\n        if (!this._settings) {\n            throw new Error('Unable to show Anki UI because settings are missing.');\n        }\n        this._prepareShow(context);\n        const client = await this._client(context);\n        const url = context.url(subtitle.start, subtitle.end);\n        const state = {\n            type: 'initial',\n            open: true,\n            canRerecord: true,\n            settings: this._settings,\n            source: sourceString(context.subtitleFileName(), subtitle.start),\n            url: url,\n            subtitle: subtitle,\n            surroundingSubtitles: surroundingSubtitles,\n            image: image,\n            audio: audio,\n            dialogRequestedTimestamp: context.video.currentTime * 1000,\n            text,\n            word,\n            definition,\n            customFieldValues,\n            ...(await this._additionalUiState(context)),\n        };\n        client.updateState(state);\n    }\n    async showAfterRerecord(context, uiState) {\n        if (!this._settings) {\n            throw new Error('Unable to show Anki UI after rerecording because anki settings are undefined');\n        }\n        this._prepareShow(context);\n        const client = await this._client(context);\n        const state = {\n            ...uiState,\n            type: 'resume',\n            open: true,\n            canRerecord: true,\n            settings: this._settings,\n            dialogRequestedTimestamp: context.video.currentTime * 1000,\n            ...(await this._additionalUiState(context)),\n        };\n        client.updateState(state);\n    }\n    async showAfterRetakingScreenshot(context, uiState) {\n        if (!this._settings) {\n            throw new Error('Unable to show Anki UI after retaking screenshot because anki settings are undefined');\n        }\n        this._prepareShow(context);\n        const client = await this._client(context);\n        const state = {\n            ...uiState,\n            type: 'resume',\n            open: true,\n            canRerecord: true,\n            settings: this._settings,\n            ...(await this._additionalUiState(context)),\n        };\n        client.updateState(state);\n    }\n    async requestRewind(context) {\n        const client = await this._client(context);\n        client.sendMessage({ command: 'rewind' });\n    }\n    _prepareShow(context) {\n        context.pause();\n        if (document.activeElement) {\n            this.activeElement = document.activeElement;\n        }\n        if (document.fullscreenElement) {\n            this.fullscreenElement = document.fullscreenElement;\n            document.exitFullscreen();\n        }\n        context.keyBindings.unbind();\n        context.subtitleController.forceHideSubtitles = true;\n        context.mobileVideoOverlayController.forceHide = true;\n    }\n    async _client(context) {\n        this.frame.fetchOptions = {\n            videoSrc: context.video.src,\n            allowedFetchUrl: this._settings.ankiConnectUrl,\n        };\n        this.frame.language = await context.settings.getSingle('language');\n        const isNewClient = await this.frame.bind();\n        const client = await this.frame.client();\n        if (isNewClient) {\n            this.focusInListener = (event) => {\n                if (this.frame === undefined || this.frame.hidden) {\n                    return;\n                }\n                // Refocus Anki UI to workaround sites like Netflix that automatically\n                // take focus away when hiding video controls\n                client.sendMessage({ command: 'focus' });\n            };\n            window.addEventListener('focusin', this.focusInListener);\n            client.onMessage(async (message) => {\n                switch (message.command) {\n                    case 'openSettings':\n                        const openSettingsCommand = {\n                            sender: 'asbplayer-video',\n                            message: {\n                                command: 'open-asbplayer-settings',\n                            },\n                            src: context.video.src,\n                        };\n                        chrome.runtime.sendMessage(openSettingsCommand);\n                        return;\n                    case 'copy-to-clipboard':\n                        const copyToClipboardMessage = message;\n                        const copyToClipboardCommand = {\n                            sender: 'asbplayer-video',\n                            message: {\n                                command: 'copy-to-clipboard',\n                                dataUrl: copyToClipboardMessage.dataUrl,\n                            },\n                            src: context.video.src,\n                        };\n                        chrome.runtime.sendMessage(copyToClipboardCommand);\n                        return;\n                    case 'encode-mp3':\n                        const { base64, messageId, extension } = message;\n                        const encodedBlob = await Mp3Encoder.encode(await base64ToBlob(base64, `audio/${extension}`), mp3WorkerFactory);\n                        client.sendMessage({\n                            messageId,\n                            base64: await blobToBase64(encodedBlob),\n                        });\n                        return;\n                    case 'activeProfile':\n                        const activeProfileMessage = message;\n                        context.settings.setActiveProfile(activeProfileMessage.profile).then(() => {\n                            const settingsUpdatedCommand = {\n                                sender: 'asbplayer-video',\n                                message: {\n                                    command: 'settings-updated',\n                                },\n                                src: context.video.src,\n                            };\n                            chrome.runtime.sendMessage(settingsUpdatedCommand);\n                        });\n                        return;\n                    case 'dismissedQuickSelectFtue':\n                        globalStateProvider.set({ ftueHasSeenAnkiDialogQuickSelect: true }).catch(console.error);\n                        return;\n                    case 'exported':\n                        const exportedMessage = message;\n                        context.settings.set({ lastSelectedAnkiExportMode: exportedMessage.mode }).then(() => {\n                            const settingsUpdatedCommand = {\n                                sender: 'asbplayer-video',\n                                message: {\n                                    command: 'settings-updated',\n                                },\n                                src: context.video.src,\n                            };\n                            chrome.runtime.sendMessage(settingsUpdatedCommand);\n                        });\n                        return;\n                }\n                context.keyBindings.bind(context);\n                context.subtitleController.forceHideSubtitles = false;\n                context.mobileVideoOverlayController.forceHide = false;\n                this.frame?.hide();\n                if (this.fullscreenElement) {\n                    this.fullscreenElement.requestFullscreen();\n                    this.fullscreenElement = undefined;\n                }\n                if (this.activeElement) {\n                    const activeHtmlElement = this.activeElement;\n                    if (typeof activeHtmlElement.focus === 'function') {\n                        activeHtmlElement.focus();\n                    }\n                    this.activeElement = undefined;\n                }\n                else {\n                    window.focus();\n                }\n                switch (message.command) {\n                    case 'resume':\n                        const resumeMessage = message;\n                        context.ankiUiSavedState = resumeMessage.uiState;\n                        if (resumeMessage.cardExported && resumeMessage.uiState.dialogRequestedTimestamp !== 0) {\n                            const seekTo = resumeMessage.uiState.dialogRequestedTimestamp / 1000;\n                            if (context.video.currentTime !== seekTo) {\n                                context.seek(seekTo);\n                            }\n                        }\n                        switch (context.postMinePlayback) {\n                            case PostMinePlayback.remember:\n                                if (context.wasPlayingBeforeRecordingMedia) {\n                                    context.play();\n                                }\n                                break;\n                            case PostMinePlayback.play:\n                                context.play();\n                                break;\n                            case PostMinePlayback.pause:\n                                // already paused, don't need to do anything\n                                break;\n                        }\n                        break;\n                    case 'rewind':\n                        const rewindMessage = message;\n                        context.ankiUiSavedState = rewindMessage.uiState;\n                        context.pause();\n                        context.seek(rewindMessage.uiState.subtitle.start / 1000);\n                        break;\n                    case 'rerecord':\n                        const rerecordMessage = message;\n                        context.rerecord(rerecordMessage.recordStart, rerecordMessage.recordEnd, rerecordMessage.uiState);\n                        break;\n                    default:\n                        console.error('Unknown message received from bridge: ' + message.command);\n                }\n            });\n        }\n        this.frame.show();\n        return client;\n    }\n    async _additionalUiState(context) {\n        const profilesPromise = context.settings.profiles();\n        const activeProfilePromise = context.settings.activeProfile();\n        const globalStatePromise = globalStateProvider.getAll();\n        return {\n            profiles: await profilesPromise,\n            activeProfile: (await activeProfilePromise)?.name,\n            ftueHasSeenAnkiDialogQuickSelect: (await globalStatePromise).ftueHasSeenAnkiDialogQuickSelect,\n        };\n    }\n    unbind() {\n        this.frame.unbind();\n        if (this.focusInListener) {\n            window.removeEventListener('focusin', this.focusInListener);\n            this.focusInListener = undefined;\n        }\n    }\n}\n","export default class ControlsController {\n    constructor(video) {\n        this.video = video;\n        this.elements = [];\n    }\n    show() {\n        for (const e of this.elements) {\n            e.classList.remove('asbplayer-hide');\n        }\n    }\n    hide() {\n        this._garbageCollectElements();\n        this._findElements();\n        for (const e of this.elements) {\n            e.classList.add('asbplayer-hide');\n        }\n        return new Promise((resolve, reject) => {\n            setTimeout(() => resolve(undefined), 0);\n        });\n    }\n    _garbageCollectElements() {\n        this.elements = this.elements.filter((e) => this.video.getRootNode().contains(e));\n    }\n    _findElements() {\n        const rootNode = this.video.getRootNode();\n        if (typeof rootNode.elementFromPoint !== 'function') {\n            return;\n        }\n        for (const p of this._samplePoints()) {\n            for (const element of this._path(rootNode.elementFromPoint(p.x, p.y), rootNode)) {\n                if (element &&\n                    !this._contains(this.elements, element) &&\n                    !element.classList.contains('asbplayer-ui-frame')) {\n                    this.elements.push(element);\n                }\n            }\n        }\n    }\n    *_samplePoints() {\n        const rect = this.video.getBoundingClientRect();\n        const stepX = rect.width / 12;\n        const stepY = rect.height / 12;\n        const maxX = rect.width + rect.x;\n        const maxY = rect.height + rect.y;\n        for (let x = rect.x; x <= maxX; x += stepX) {\n            for (let y = rect.y; y <= maxY; y += stepY) {\n                const point = {\n                    x: this._withNoise(x, stepX / 2, rect.x, maxX),\n                    y: this._withNoise(y, stepY / 2, rect.y, maxY),\n                };\n                yield point;\n            }\n        }\n    }\n    _withNoise(center, radius, min, max) {\n        return Math.min(max, Math.max(min, center + (Math.random() * radius * 2 - radius)));\n    }\n    *_path(element, rootNode) {\n        if (!element || element.contains(this.video)) {\n            return;\n        }\n        const host = rootNode.host;\n        let current = element;\n        yield current;\n        while (true) {\n            const parent = current.parentElement;\n            if (!parent || parent.contains(this.video) || (host !== undefined && parent.contains(host))) {\n                break;\n            }\n            current = parent;\n            yield current;\n        }\n    }\n    _contains(elements, element) {\n        for (const e of elements) {\n            if (e.isSameNode(element)) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","const dragImageWidth = 300;\nconst dragImageHeight = 300;\nexport default class ImageElement {\n    constructor(video) {\n        this.video = video;\n    }\n    element() {\n        if (this.imageElement) {\n            return this.imageElement;\n        }\n        const container = document.createElement('div');\n        container.classList.add('asbplayer-image-container');\n        container.classList.add('asbplayer-hide');\n        const image = document.createElement('img');\n        image.classList.add('asbplayer-image');\n        image.src = chrome.runtime.getURL('assets/image.png');\n        this._applyImageContainerStyles(image, container);\n        container.appendChild(image);\n        document.body.appendChild(container);\n        this.imageElementStylesInterval = setInterval(() => this._applyImageContainerStyles(image, container), 1000);\n        this.imageElement = container;\n        return this.imageElement;\n    }\n    _applyImageContainerStyles(image, container) {\n        const rect = this.video.getBoundingClientRect();\n        const containerWidth = Math.min(window.innerWidth, rect.width) * 0.9;\n        const containerHeight = Math.min(window.innerHeight, rect.height) * 0.9;\n        container.style.top = rect.top + window.scrollY + rect.height * 0.05 + 'px';\n        container.style.left = rect.left + rect.width * 0.05 + 'px';\n        container.style.width = containerWidth + 'px';\n        container.style.height = containerHeight + 'px';\n        const imageRatio = Math.min(1, Math.min(containerWidth / dragImageWidth, containerHeight / dragImageHeight));\n        const imageWidth = dragImageWidth * imageRatio;\n        const imageHeight = dragImageHeight * imageRatio;\n        const topOffset = (containerHeight - imageHeight) / 2;\n        const leftOffset = (containerWidth - imageWidth) / 2;\n        image.style.top = topOffset + 'px';\n        image.style.left = leftOffset + 'px';\n        image.style.width = imageWidth + 'px';\n        image.style.height = imageHeight + 'px';\n    }\n    remove() {\n        if (this.imageElementStylesInterval) {\n            clearInterval(this.imageElementStylesInterval);\n            this.imageElementStylesInterval = undefined;\n        }\n        if (this.imageElement) {\n            this.imageElement.remove();\n            this.imageElement = undefined;\n        }\n    }\n}\n","import ImageElement from '../services/image-element';\nexport default class DragController {\n    constructor(video) {\n        this.dragEnterElement = null;\n        this.bodyDragEnterElement = null;\n        this.video = video;\n        this.imageElement = new ImageElement(video);\n        this.bound = false;\n    }\n    bind(context) {\n        if (this.bound) {\n            return;\n        }\n        this.dropListener = async (e) => {\n            e.preventDefault();\n            this.dragEnterElement = null;\n            this.imageElement.element().classList.add('asbplayer-hide');\n            this.imageElement.element().classList.remove('asbplayer-image-fade-in');\n            this._dragElement().classList.remove('asbplayer-drag-zone-dragging');\n            this._dragElement().classList.add('asbplayer-hide');\n            if (!e.dataTransfer?.files || e.dataTransfer?.files.length === 0) {\n                return;\n            }\n            const files = [];\n            for (let i = 0; i < e.dataTransfer.files.length; ++i) {\n                const f = e.dataTransfer.files[i];\n                const extensionStartIndex = f.name.lastIndexOf('.');\n                if (extensionStartIndex === -1) {\n                    return false;\n                }\n                const extension = f.name.substring(extensionStartIndex + 1, f.name.length);\n                if (extension === 'ass' ||\n                    extension === 'srt' ||\n                    extension === 'vtt' ||\n                    extension === 'sup' ||\n                    extension === 'dfxp' ||\n                    extension === 'ttml2') {\n                    files.push(f);\n                }\n            }\n            context.loadSubtitles(files, false);\n        };\n        this.dragOverListener = (e) => e.preventDefault();\n        this.dragEnterListener = (e) => {\n            e.preventDefault();\n            this.dragEnterElement = e.target;\n            this.imageElement.element().classList.add('asbplayer-drag-image');\n            this.imageElement.element().classList.remove('asbplayer-hide');\n            this.imageElement.element().classList.add('asbplayer-image-fade-in');\n        };\n        this.dragLeaveListener = (e) => {\n            e.preventDefault();\n            if (this.dragEnterElement === e.target) {\n                this.imageElement.element().classList.add('asbplayer-hide');\n                this.imageElement.element().classList.remove('asbplayer-image-fade-in');\n                this._dragElement().classList.remove('asbplayer-drag-zone-dragging');\n                this._dragElement().classList.add('asbplayer-hide');\n            }\n        };\n        this.bodyDropListener = (e) => {\n            e.preventDefault();\n            this.imageElement.element().classList.add('asbplayer-hide');\n            this.imageElement.element().classList.remove('asbplayer-image-fade-in');\n            this._dragElement().classList.remove('asbplayer-drag-zone-dragging');\n            this._dragElement().classList.add('asbplayer-hide');\n        };\n        this.bodyDragOverListener = (e) => e.preventDefault();\n        this.bodyDragEnterListener = (e) => {\n            e.preventDefault();\n            this.bodyDragEnterElement = e.target;\n            this._dragElement().classList.add('asbplayer-drag-zone-dragging');\n            this._dragElement().classList.remove('asbplayer-hide');\n        };\n        this.bodyDragLeaveListener = (e) => {\n            e.preventDefault();\n            if (this.bodyDragEnterElement === e.target) {\n                this.imageElement.element().classList.add('asbplayer-hide');\n                this.imageElement.element().classList.remove('asbplayer-image-fade-in');\n                this._dragElement().classList.remove('asbplayer-drag-zone-dragging');\n                this._dragElement().classList.add('asbplayer-hide');\n            }\n        };\n        const dragElement = this._dragElement();\n        dragElement.addEventListener('drop', this.dropListener);\n        dragElement.addEventListener('dragover', this.dragOverListener);\n        dragElement.addEventListener('dragenter', this.dragEnterListener);\n        dragElement.addEventListener('dragleave', this.dragLeaveListener);\n        document.body.addEventListener('drop', this.bodyDropListener);\n        document.body.addEventListener('dragover', this.bodyDragOverListener);\n        document.body.addEventListener('dragenter', this.bodyDragEnterListener);\n        document.body.addEventListener('dragleave', this.bodyDragLeaveListener);\n        this.bound = true;\n    }\n    _dragElement() {\n        if (this.dragElement) {\n            return this.dragElement;\n        }\n        const dragElement = document.createElement('div');\n        dragElement.classList.add('asbplayer-drag-zone-initial');\n        this.dragElement = dragElement;\n        this._applyDragElementStyles(dragElement);\n        document.body.appendChild(dragElement);\n        this.dragElementStylesInterval = setInterval(() => this._applyDragElementStyles(dragElement), 1000);\n        return this.dragElement;\n    }\n    _applyDragElementStyles(dragElement) {\n        const rect = this.video.getBoundingClientRect();\n        // Shrink the drag zone slightly to avoid accidentally overflowing\n        // e.g. when the video's rect changes for some reason\n        dragElement.style.top = rect.top + window.scrollY + rect.height * 0.05 + 'px';\n        dragElement.style.left = rect.left + rect.width * 0.05 + 'px';\n        dragElement.style.height = Math.min(window.innerHeight, rect.height) * 0.9 + 'px';\n        dragElement.style.width = Math.min(window.innerWidth, rect.width) * 0.9 + 'px';\n    }\n    unbind() {\n        if (this.dropListener) {\n            this.dragElement?.removeEventListener('drop', this.dropListener, true);\n            this.dropListener = undefined;\n        }\n        if (this.dragOverListener) {\n            this.dragElement?.removeEventListener('dragover', this.dragOverListener, true);\n            this.dragOverListener = undefined;\n        }\n        if (this.dragEnterListener) {\n            this.dragElement?.removeEventListener('dragenter', this.dragEnterListener, true);\n            this.dragEnterListener = undefined;\n        }\n        if (this.dragLeaveListener) {\n            this.dragElement?.removeEventListener('dragleave', this.dragLeaveListener, true);\n            this.dragLeaveListener = undefined;\n        }\n        if (this.bodyDropListener) {\n            document.body.removeEventListener('drop', this.bodyDropListener);\n            this.bodyDropListener = undefined;\n        }\n        if (this.bodyDragOverListener) {\n            document.body.removeEventListener('dragover', this.bodyDragOverListener);\n            this.bodyDragOverListener = undefined;\n        }\n        if (this.bodyDragEnterListener) {\n            document.body.removeEventListener('dragenter', this.bodyDragEnterListener);\n            this.bodyDragEnterListener = undefined;\n        }\n        if (this.bodyDragLeaveListener) {\n            document.body.removeEventListener('dragleave', this.bodyDragLeaveListener);\n            this.bodyDragLeaveListener = undefined;\n        }\n        if (this.dragElementStylesInterval) {\n            clearInterval(this.dragElementStylesInterval);\n            this.dragElementStylesInterval = undefined;\n        }\n        if (this.dragElement) {\n            this.dragElement.remove();\n            this.dragElement = undefined;\n        }\n        this.imageElement.remove();\n        this.dragEnterElement = null;\n        this.bound = false;\n    }\n}\n","const timeLimit = 500;\nconst minimumDistance = 50;\nexport class MobileGestureController {\n    constructor(context) {\n        this._bound = false;\n        this._context = context;\n    }\n    bind() {\n        if (this._bound) {\n            return;\n        }\n        this._startTouchListener = (event) => {\n            this._startTouch = { x: event.changedTouches[0].clientX, timestamp: Date.now() };\n        };\n        this._endTouchListener = (event) => {\n            if (!this._startTouch) {\n                return;\n            }\n            const x = event.changedTouches[0].clientX;\n            const y = event.changedTouches[0].clientY;\n            if (this._insideRect(x, y) && Date.now() - this._startTouch.timestamp < timeLimit) {\n                if (this._startTouch.x >= x + minimumDistance) {\n                    this.onSwipeLeft?.();\n                }\n                else if (this._startTouch.x <= x - minimumDistance) {\n                    this.onSwipeRight?.();\n                }\n            }\n            this._startTouch = undefined;\n        };\n        document.addEventListener('touchstart', this._startTouchListener, true);\n        document.addEventListener('touchend', this._endTouchListener, true);\n        this._bound = true;\n    }\n    _insideRect(x, y) {\n        const rect = this._context.video.getBoundingClientRect();\n        return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    }\n    unbind() {\n        if (this._startTouchListener) {\n            document.removeEventListener('touchstart', this._startTouchListener, true);\n            this._startTouchListener = undefined;\n        }\n        if (this._endTouchListener) {\n            document.removeEventListener('touchend', this._endTouchListener, true);\n            this._endTouchListener = undefined;\n        }\n        this.onSwipeLeft = undefined;\n        this.onSwipeRight = undefined;\n        this._startTouch = undefined;\n        this._bound = false;\n    }\n}\n","import { OffscreenDomCache } from '@project/common';\nexport var OffsetAnchor;\n(function (OffsetAnchor) {\n    OffsetAnchor[OffsetAnchor[\"bottom\"] = 0] = \"bottom\";\n    OffsetAnchor[OffsetAnchor[\"top\"] = 1] = \"top\";\n})(OffsetAnchor || (OffsetAnchor = {}));\nexport class CachingElementOverlay {\n    constructor({ targetElement, nonFullscreenContainerClassName, nonFullscreenContentClassName, fullscreenContainerClassName, fullscreenContentClassName, offsetAnchor, contentPositionOffset, contentWidthPercentage, onMouseOver, }) {\n        this.domCache = new OffscreenDomCache();\n        this.offsetAnchor = OffsetAnchor.bottom;\n        this.targetElement = targetElement;\n        this.nonFullscreenContainerClassName = nonFullscreenContainerClassName;\n        this.nonFullscreenContentClassName = nonFullscreenContentClassName;\n        this.fullscreenContainerClassName = fullscreenContainerClassName;\n        this.fullscreenContentClassName = fullscreenContentClassName;\n        this.offsetAnchor = offsetAnchor;\n        this.contentPositionOffset = contentPositionOffset ?? 75;\n        this.contentWidthPercentage = contentWidthPercentage;\n        this.onMouseOver = onMouseOver;\n    }\n    *displayingElements() {\n        function* grandChildren(container) {\n            for (const content of container.childNodes) {\n                for (const el of content.childNodes) {\n                    if (el instanceof HTMLElement) {\n                        yield el;\n                    }\n                }\n            }\n        }\n        if (document.fullscreenElement && this.fullscreenContainerElement !== undefined) {\n            for (const el of grandChildren(this.fullscreenContainerElement)) {\n                yield el;\n            }\n        }\n        if (!document.fullscreenElement && this.nonFullscreenContainerElement !== undefined) {\n            for (const el of grandChildren(this.nonFullscreenContainerElement)) {\n                yield el;\n            }\n        }\n    }\n    uncacheHtml() {\n        this.domCache.clear();\n    }\n    cacheHtml(key, html) {\n        this.domCache.add(key, html);\n    }\n    setHtml(htmls) {\n        if (document.fullscreenElement) {\n            this._displayFullscreenContentElementsWithHtml(htmls);\n        }\n        else {\n            this._displayNonFullscreenContentElementsWithHtml(htmls);\n        }\n    }\n    _displayNonFullscreenContentElementsWithHtml(htmls) {\n        this._displayNonFullscreenContentElements(htmls.map((html) => this._cachedContentElement(html.html, html.key)));\n    }\n    _displayNonFullscreenContentElements(contentElements) {\n        for (const contentElement of contentElements) {\n            contentElement.className = this.nonFullscreenContentClassName;\n        }\n        this._setChildren(this._nonFullscreenContainerElement(), contentElements);\n    }\n    _displayFullscreenContentElementsWithHtml(htmls) {\n        this._displayFullscreenContentElements(htmls.map((html) => this._cachedContentElement(html.html, html.key)));\n    }\n    _displayFullscreenContentElements(contentElements) {\n        for (const contentElement of contentElements) {\n            contentElement.className = this.fullscreenContentClassName;\n        }\n        this._setChildren(this._fullscreenContainerElement(), contentElements);\n    }\n    _nonFullscreenContainerElement() {\n        if (this.nonFullscreenContainerElement) {\n            return this.nonFullscreenContainerElement;\n        }\n        const container = document.createElement('div');\n        container.className = this.nonFullscreenContainerClassName;\n        container.onmouseover = this.onMouseOver;\n        this._applyContainerStyles(container);\n        document.body.appendChild(container);\n        const toggle = () => {\n            if (document.fullscreenElement) {\n                container.style.setProperty('display', 'none', 'important');\n            }\n            else {\n                container.style.display = '';\n                if (this.fullscreenContainerElement) {\n                    this._transferChildren(this.fullscreenContainerElement, container);\n                }\n            }\n        };\n        toggle();\n        this.nonFullscreenElementFullscreenChangeListener = (e) => toggle();\n        this.nonFullscreenStylesInterval = setInterval(() => this._applyContainerStyles(container), 1000);\n        this.nonFullscreenElementFullscreenPollingInterval = setInterval(() => toggle(), 1000);\n        document.addEventListener('fullscreenchange', this.nonFullscreenElementFullscreenChangeListener);\n        this.nonFullscreenContainerElement = container;\n        return container;\n    }\n    _fullscreenContainerElement() {\n        if (this.fullscreenContainerElement) {\n            return this.fullscreenContainerElement;\n        }\n        const container = document.createElement('div');\n        container.className = this.fullscreenContainerClassName;\n        container.onmouseover = this.onMouseOver;\n        this._applyContainerStyles(container);\n        this._findFullscreenParentElement(container).appendChild(container);\n        container.style.setProperty('display', 'none', 'important');\n        const that = this;\n        const toggle = () => {\n            if (document.fullscreenElement) {\n                if (container.style.display === 'none') {\n                    container.style.display = '';\n                    container.remove();\n                    that._findFullscreenParentElement(container).appendChild(container);\n                }\n                if (this.nonFullscreenContainerElement) {\n                    this._transferChildren(this.nonFullscreenContainerElement, container);\n                }\n            }\n            else if (!document.fullscreenElement) {\n                container.style.setProperty('display', 'none', 'important');\n            }\n        };\n        toggle();\n        this.fullscreenElementFullscreenChangeListener = (e) => toggle();\n        this.fullscreenStylesInterval = setInterval(() => this._applyContainerStyles(container), 1000);\n        this.fullscreenElementFullscreenPollingInterval = setInterval(() => toggle(), 1000);\n        document.addEventListener('fullscreenchange', this.fullscreenElementFullscreenChangeListener);\n        this.fullscreenContainerElement = container;\n        return this.fullscreenContainerElement;\n    }\n    _findFullscreenParentElement(container) {\n        const testNode = container.cloneNode(true);\n        testNode.innerHTML = '&nbsp;'; // The node needs to take up some space to perform test clicks\n        let current = this.targetElement.parentElement;\n        if (!current) {\n            return document.body;\n        }\n        let chosen = undefined;\n        do {\n            const rect = current.getBoundingClientRect();\n            if (rect.height > 0 &&\n                (typeof chosen === 'undefined' ||\n                    // Typescript is not smart enough to know that it's possible for 'chosen' to be defined here\n                    rect.height >= chosen.getBoundingClientRect().height) &&\n                this._clickable(current, testNode)) {\n                chosen = current;\n                break;\n            }\n            current = current.parentElement;\n        } while (current && !current.isSameNode(document.body.parentElement));\n        if (chosen) {\n            return chosen;\n        }\n        return document.body;\n    }\n    _transferChildren(source, destination) {\n        if (!source) {\n            return;\n        }\n        while (source.firstChild) {\n            destination.appendChild(source.firstChild);\n        }\n    }\n    _setChildren(containerElement, contentElements) {\n        while (containerElement.firstChild) {\n            this.domCache.return(containerElement.lastChild);\n        }\n        for (const contentElement of contentElements) {\n            containerElement.appendChild(contentElement);\n        }\n    }\n    _cachedContentElement(html, key) {\n        if (key === undefined) {\n            if (!this.defaultContentElement) {\n                this.defaultContentElement = document.createElement('div');\n            }\n            this.defaultContentElement.innerHTML = html();\n            return this.defaultContentElement;\n        }\n        return this.domCache.get(key, html);\n    }\n    appendHtml(html) {\n        if (document.fullscreenElement) {\n            this._appendHtml(`${html}\\n`, this.fullscreenContentClassName, this._fullscreenContainerElement());\n        }\n        else {\n            this._appendHtml(`${html}\\n`, this.nonFullscreenContentClassName, this._nonFullscreenContainerElement());\n        }\n    }\n    _appendHtml(html, className, container) {\n        const breakLine = document.createElement('br');\n        const content = document.createElement('div');\n        content.innerHTML = html;\n        content.className = className;\n        container.appendChild(breakLine);\n        container.appendChild(content);\n    }\n    refresh() {\n        if (this.fullscreenContainerElement) {\n            this._applyContainerStyles(this.fullscreenContainerElement);\n        }\n        if (this.nonFullscreenContainerElement) {\n            this._applyContainerStyles(this.nonFullscreenContainerElement);\n        }\n    }\n    hide() {\n        if (this.nonFullscreenElementFullscreenChangeListener) {\n            document.removeEventListener('fullscreenchange', this.nonFullscreenElementFullscreenChangeListener);\n        }\n        if (this.nonFullscreenStylesInterval) {\n            clearInterval(this.nonFullscreenStylesInterval);\n        }\n        if (this.nonFullscreenElementFullscreenPollingInterval) {\n            clearInterval(this.nonFullscreenElementFullscreenPollingInterval);\n        }\n        if (this.fullscreenElementFullscreenChangeListener) {\n            document.removeEventListener('fullscreenchange', this.fullscreenElementFullscreenChangeListener);\n        }\n        if (this.fullscreenStylesInterval) {\n            clearInterval(this.fullscreenStylesInterval);\n        }\n        if (this.fullscreenElementFullscreenPollingInterval) {\n            clearInterval(this.fullscreenElementFullscreenPollingInterval);\n        }\n        this.defaultContentElement?.remove();\n        this.defaultContentElement = undefined;\n        this.nonFullscreenContainerElement?.remove();\n        this.nonFullscreenContainerElement = undefined;\n        this.fullscreenContainerElement?.remove();\n        this.fullscreenContainerElement = undefined;\n    }\n    _applyContainerStyles(container) {\n        const rect = this.targetElement.getBoundingClientRect();\n        container.style.left = rect.left + rect.width / 2 + 'px';\n        if (this.contentWidthPercentage === -1) {\n            container.style.maxWidth = rect.width + 'px';\n            container.style.width = '';\n        }\n        else {\n            container.style.maxWidth = '';\n            container.style.width =\n                Math.min(window.innerWidth, (rect.width * this.contentWidthPercentage) / 100) + 'px';\n        }\n        const clampedY = Math.max(rect.top + window.scrollY, 0);\n        if (this.offsetAnchor === OffsetAnchor.bottom) {\n            const clampedHeight = Math.min(clampedY + rect.height, window.innerHeight + window.scrollY);\n            container.style.top = clampedHeight - this.contentPositionOffset + 'px';\n            container.style.bottom = '';\n        }\n        else {\n            container.style.top = clampedY + this.contentPositionOffset + 'px';\n            container.style.bottom = '';\n        }\n    }\n    _clickable(container, element) {\n        container.appendChild(element);\n        const rect = element.getBoundingClientRect();\n        const clickedElement = document.elementFromPoint(rect.x, rect.y);\n        const clickable = element.isSameNode(clickedElement) || element.contains(clickedElement);\n        element.remove();\n        return clickable;\n    }\n    dispose() {\n        this.hide();\n        this.domCache.clear();\n    }\n}\nexport class DefaultElementOverlay {\n    constructor({ targetElement, nonFullscreenContainerClassName, nonFullscreenContentClassName, fullscreenContainerClassName, fullscreenContentClassName, offsetAnchor, contentPositionOffset, contentWidthPercentage, onMouseOver, }) {\n        this.offsetAnchor = OffsetAnchor.bottom;\n        this.targetElement = targetElement;\n        this.nonFullscreenContainerClassName = nonFullscreenContainerClassName;\n        this.nonFullscreenContentClassName = nonFullscreenContentClassName;\n        this.fullscreenContainerClassName = fullscreenContainerClassName;\n        this.fullscreenContentClassName = fullscreenContentClassName;\n        this.offsetAnchor = offsetAnchor;\n        this.contentPositionOffset = contentPositionOffset ?? 75;\n        this.contentWidthPercentage = contentWidthPercentage;\n        this.onMouseOver = onMouseOver;\n    }\n    *displayingElements() {\n        if (document.fullscreenElement && this.fullscreenContentElement !== undefined) {\n            for (const el of this.fullscreenContentElement.childNodes) {\n                if (el instanceof HTMLElement) {\n                    yield el;\n                }\n            }\n        }\n        if (!document.fullscreenElement && this.nonFullscreenContentElement !== undefined) {\n            for (const el of this.nonFullscreenContentElement.childNodes) {\n                if (el instanceof HTMLElement) {\n                    yield el;\n                }\n            }\n        }\n    }\n    uncacheHtml() { }\n    cacheHtml(html, key) { }\n    setHtml(htmls) {\n        const html = `${htmls.map((html) => html.html()).join('\\n')}\\n`;\n        this._nonFullscreenContentElement().innerHTML = html;\n        this._fullscreenContentElement().innerHTML = html;\n    }\n    appendHtml(html) {\n        const currentHtml = this._nonFullscreenContentElement().innerHTML;\n        const newHtml = currentHtml && currentHtml.length > 0 ? currentHtml + '<br>' + html : html;\n        this._nonFullscreenContentElement().innerHTML = `${newHtml}\\n`;\n        this._fullscreenContentElement().innerHTML = `${newHtml}\\n`;\n    }\n    refresh() {\n        if (this.fullscreenContainerElement) {\n            this._applyContainerStyles(this.fullscreenContainerElement);\n        }\n        if (this.nonFullscreenContainerElement) {\n            this._applyContainerStyles(this.nonFullscreenContainerElement);\n        }\n    }\n    hide() {\n        if (this.nonFullscreenContentElement) {\n            if (this.nonFullscreenElementFullscreenChangeListener) {\n                document.removeEventListener('fullscreenchange', this.nonFullscreenElementFullscreenChangeListener);\n            }\n            if (this.nonFullscreenStylesInterval) {\n                clearInterval(this.nonFullscreenStylesInterval);\n            }\n            if (this.nonFullscreenElementFullscreenPollingInterval) {\n                clearInterval(this.nonFullscreenElementFullscreenPollingInterval);\n            }\n            this.nonFullscreenContentElement.remove();\n            this.nonFullscreenContainerElement?.remove();\n            this.nonFullscreenContainerElement = undefined;\n            this.nonFullscreenContentElement = undefined;\n        }\n        if (this.fullscreenContentElement) {\n            if (this.fullscreenElementFullscreenChangeListener) {\n                document.removeEventListener('fullscreenchange', this.fullscreenElementFullscreenChangeListener);\n            }\n            if (this.fullscreenStylesInterval) {\n                clearInterval(this.fullscreenStylesInterval);\n            }\n            if (this.fullscreenElementFullscreenPollingInterval) {\n                clearInterval(this.fullscreenElementFullscreenPollingInterval);\n            }\n            this.fullscreenContentElement.remove();\n            this.fullscreenContainerElement?.remove();\n            this.fullscreenContainerElement = undefined;\n            this.fullscreenContentElement = undefined;\n        }\n    }\n    _nonFullscreenContentElement() {\n        if (this.nonFullscreenContentElement) {\n            return this.nonFullscreenContentElement;\n        }\n        const div = document.createElement('div');\n        const container = document.createElement('div');\n        container.appendChild(div);\n        container.className = this.nonFullscreenContainerClassName;\n        container.onmouseover = this.onMouseOver;\n        div.className = this.nonFullscreenContentClassName;\n        this._applyContainerStyles(container);\n        document.body.appendChild(container);\n        function toggle() {\n            if (document.fullscreenElement) {\n                container.style.setProperty('display', 'none', 'important');\n            }\n            else {\n                container.style.display = '';\n            }\n        }\n        toggle();\n        this.nonFullscreenElementFullscreenChangeListener = (e) => toggle();\n        this.nonFullscreenStylesInterval = setInterval(() => this._applyContainerStyles(container), 1000);\n        this.nonFullscreenElementFullscreenPollingInterval = setInterval(() => toggle(), 1000);\n        document.addEventListener('fullscreenchange', this.nonFullscreenElementFullscreenChangeListener);\n        this.nonFullscreenContentElement = div;\n        this.nonFullscreenContainerElement = container;\n        return this.nonFullscreenContentElement;\n    }\n    _applyContainerStyles(container) {\n        const rect = this.targetElement.getBoundingClientRect();\n        container.style.left = rect.left + rect.width / 2 + 'px';\n        if (this.contentWidthPercentage === -1) {\n            container.style.maxWidth = rect.width + 'px';\n            container.style.width = '';\n        }\n        else {\n            container.style.maxWidth = '';\n            container.style.width =\n                Math.min(window.innerWidth, (rect.width * this.contentWidthPercentage) / 100) + 'px';\n        }\n        const clampedY = Math.max(rect.top + window.scrollY, 0);\n        if (this.offsetAnchor === OffsetAnchor.bottom) {\n            const clampedHeight = Math.min(clampedY + rect.height, window.innerHeight + window.scrollY);\n            container.style.top = clampedHeight - this.contentPositionOffset + 'px';\n            container.style.bottom = '';\n        }\n        else {\n            container.style.top = clampedY + this.contentPositionOffset + 'px';\n            container.style.bottom = '';\n        }\n    }\n    _fullscreenContentElement() {\n        if (this.fullscreenContentElement) {\n            return this.fullscreenContentElement;\n        }\n        const div = document.createElement('div');\n        const container = document.createElement('div');\n        container.appendChild(div);\n        container.className = this.fullscreenContainerClassName;\n        container.onmouseover = this.onMouseOver;\n        div.className = this.fullscreenContentClassName;\n        this._applyContainerStyles(container);\n        this._findFullscreenParentElement(container).appendChild(container);\n        container.style.setProperty('display', 'none', 'important');\n        const that = this;\n        function toggle() {\n            if (document.fullscreenElement && container.style.display === 'none') {\n                container.style.display = '';\n                container.remove();\n                that._findFullscreenParentElement(container).appendChild(container);\n            }\n            else if (!document.fullscreenElement) {\n                container.style.setProperty('display', 'none', 'important');\n            }\n        }\n        toggle();\n        this.fullscreenElementFullscreenChangeListener = (e) => toggle();\n        this.fullscreenStylesInterval = setInterval(() => this._applyContainerStyles(container), 1000);\n        this.fullscreenElementFullscreenPollingInterval = setInterval(() => toggle(), 1000);\n        document.addEventListener('fullscreenchange', this.fullscreenElementFullscreenChangeListener);\n        this.fullscreenContentElement = div;\n        this.fullscreenContainerElement = container;\n        return this.fullscreenContentElement;\n    }\n    _findFullscreenParentElement(container) {\n        const testNode = container.cloneNode(true);\n        testNode.innerHTML = '&nbsp;'; // The node needs to take up some space to perform test clicks\n        let current = this.targetElement.parentElement;\n        if (!current) {\n            return document.body;\n        }\n        let chosen = undefined;\n        do {\n            const rect = current.getBoundingClientRect();\n            if (rect.height > 0 &&\n                (typeof chosen === 'undefined' ||\n                    // Typescript is not smart enough to know that it's possible for 'chosen' to be defined here\n                    rect.height >= chosen.getBoundingClientRect().height) &&\n                this._clickable(current, testNode)) {\n                chosen = current;\n                break;\n            }\n            current = current.parentElement;\n        } while (current && !current.isSameNode(document.body.parentElement));\n        if (chosen) {\n            return chosen;\n        }\n        return document.body;\n    }\n    _clickable(container, element) {\n        container.appendChild(element);\n        const rect = element.getBoundingClientRect();\n        const clickedElement = document.elementFromPoint(rect.x, rect.y);\n        const clickable = element.isSameNode(clickedElement) || element.contains(clickedElement);\n        element.remove();\n        return clickable;\n    }\n    dispose() {\n        this.hide();\n    }\n}\n","import { CachingElementOverlay, OffsetAnchor } from '../services/element-overlay';\nimport { adjacentSubtitle } from '@project/common/key-binder';\nconst smallScreenVideoHeightThreshold = 300;\nexport class MobileVideoOverlayController {\n    constructor(context, offsetAnchor) {\n        this._forceHiding = false;\n        this._showing = false;\n        this._uiInitialized = false;\n        this._bound = false;\n        this._context = context;\n        this._overlay = MobileVideoOverlayController._elementOverlay(context.video, offsetAnchor);\n    }\n    static _elementOverlay(video, offsetAnchor) {\n        const containerClassName = offsetAnchor === OffsetAnchor.top\n            ? 'asbplayer-mobile-video-overlay-container-top'\n            : 'asbplayer-mobile-video-overlay-container-bottom';\n        return new CachingElementOverlay({\n            targetElement: video,\n            nonFullscreenContainerClassName: containerClassName,\n            fullscreenContainerClassName: containerClassName,\n            nonFullscreenContentClassName: 'asbplayer-mobile-video-overlay',\n            fullscreenContentClassName: 'asbplayer-mobile-video-overlay',\n            offsetAnchor,\n            contentPositionOffset: 8,\n            contentWidthPercentage: -1,\n            onMouseOver: () => { },\n        });\n    }\n    set offsetAnchor(value) {\n        if (this._overlay.offsetAnchor === value) {\n            return;\n        }\n        this._overlay.dispose();\n        this._overlay = MobileVideoOverlayController._elementOverlay(this._context.video, value);\n        if (this._showing) {\n            this._doShow();\n        }\n    }\n    set forceHide(forceHide) {\n        if (!this._bound) {\n            return;\n        }\n        if (forceHide) {\n            if (this._showing) {\n                this._doHide();\n            }\n            this._forceHiding = true;\n        }\n        else {\n            if (this._forceHiding) {\n                this._forceHiding = false;\n                this._show();\n            }\n        }\n    }\n    bind() {\n        if (this._bound) {\n            return;\n        }\n        this._pauseListener = () => {\n            this._show();\n        };\n        this._playListener = () => {\n            this._hide();\n        };\n        this._seekedListener = () => {\n            this.updateModel();\n        };\n        this._context.video.addEventListener('pause', this._pauseListener);\n        this._context.video.addEventListener('play', this._playListener);\n        this._context.video.addEventListener('seeked', this._seekedListener);\n        this._messageListener = (message, sender, sendResponse) => {\n            if (message.sender !== 'asbplayer-mobile-overlay-to-video' || message.src !== this._context.video.src) {\n                return;\n            }\n            if (message.message.command === 'request-mobile-overlay-model') {\n                this._model().then(sendResponse);\n                this._uiInitialized = true;\n                return true;\n            }\n            if (message.message.command === 'playMode') {\n                const command = message;\n                this._context.playMode = command.message.playMode;\n            }\n            else if (message.message.command === 'hidden') {\n                this._doHide();\n            }\n        };\n        chrome.runtime.onMessage.addListener(this._messageListener);\n        this._bound = true;\n        if (this._context.video.paused) {\n            this._show();\n        }\n    }\n    async updateModel() {\n        if (!this._bound || !this._uiInitialized) {\n            return;\n        }\n        const model = await this._model();\n        const command = {\n            sender: 'asbplayer-video',\n            message: {\n                command: 'update-mobile-overlay-model',\n                model,\n            },\n            src: this._context.video.src,\n        };\n        chrome.runtime.sendMessage(command);\n    }\n    async _model() {\n        const subtitles = this._context.subtitleController.subtitles;\n        const subtitleDisplaying = subtitles.length > 0 && this._context.subtitleController.currentSubtitle()[0] !== null;\n        const timestamp = this._context.video.currentTime * 1000;\n        const { language, clickToMineDefaultAction, themeType, streamingDisplaySubtitles } = await this._context.settings.get([\n            'language',\n            'clickToMineDefaultAction',\n            'themeType',\n            'streamingDisplaySubtitles',\n        ]);\n        const model = {\n            offset: subtitles.length === 0 ? 0 : subtitles[0].start - subtitles[0].originalStart,\n            playbackRate: this._context.video.playbackRate,\n            emptySubtitleTrack: subtitles.length === 0,\n            recordingEnabled: this._context.recordMedia,\n            recording: this._context.recordingMedia,\n            previousSubtitleTimestamp: adjacentSubtitle(false, timestamp, subtitles)?.originalStart ?? undefined,\n            nextSubtitleTimestamp: adjacentSubtitle(true, timestamp, subtitles)?.originalStart ?? undefined,\n            currentTimestamp: timestamp,\n            language,\n            postMineAction: clickToMineDefaultAction,\n            subtitleDisplaying,\n            subtitlesAreVisible: streamingDisplaySubtitles,\n            playMode: this._context.playMode,\n            themeType,\n        };\n        return model;\n    }\n    show() {\n        if (!this._bound) {\n            return;\n        }\n        this._show();\n    }\n    disposeOverlay() {\n        this._overlay.dispose();\n        this._overlay = MobileVideoOverlayController._elementOverlay(this._context.video, this._overlay.offsetAnchor);\n    }\n    _show() {\n        if (!this._context.synced || this._forceHiding) {\n            return;\n        }\n        this._doShow();\n    }\n    _doShow() {\n        const frameParams = this._getFrameParams();\n        const { width, height, anchor, src, tooltips } = frameParams;\n        if (this._frameParams !== undefined && this._differentFrameParams(frameParams, this._frameParams)) {\n            this._overlay.uncacheHtml();\n        }\n        this._overlay.setHtml([\n            {\n                key: 'ui',\n                html: () => `<iframe style=\"border: 0; color-scheme: normal; width: ${width}px; height: ${height}px\" src=\"${chrome.runtime.getURL('mobile-video-overlay-ui.html')}?src=${src}&anchor=${anchor}&tooltips=${tooltips}\"/>`,\n            },\n        ]);\n        this._frameParams = frameParams;\n        this._showing = true;\n    }\n    _getFrameParams() {\n        const anchor = this._overlay.offsetAnchor === OffsetAnchor.bottom ? 'bottom' : 'top';\n        const videoRect = this._context.video.getBoundingClientRect();\n        const smallScreen = videoRect.height < smallScreenVideoHeightThreshold;\n        const height = smallScreen ? 64 : 108;\n        const tooltips = !smallScreen;\n        const width = Math.max(videoRect.width, 400);\n        const src = encodeURIComponent(this._context.video.src);\n        return { width, height, anchor, src, tooltips };\n    }\n    _differentFrameParams(a, b) {\n        if (a.width !== b.width) {\n            return true;\n        }\n        if (a.height !== b.height) {\n            return true;\n        }\n        if (a.anchor !== b.anchor) {\n            return true;\n        }\n        if (a.src !== b.src) {\n            return true;\n        }\n        if (a.tooltips !== b.tooltips) {\n            return true;\n        }\n        return false;\n    }\n    hide() {\n        if (!this._bound) {\n            return;\n        }\n        this._hide();\n    }\n    _hide() {\n        if (!this._context.synced || this._context.recordingMedia) {\n            return;\n        }\n        this._doHide();\n    }\n    _doHide() {\n        this._overlay.hide();\n        this._showing = false;\n    }\n    unbind() {\n        if (this._pauseListener) {\n            this._context.video.removeEventListener('pause', this._pauseListener);\n            this._pauseListener = undefined;\n        }\n        if (this._playListener) {\n            this._context.video.removeEventListener('play', this._playListener);\n            this._playListener = undefined;\n        }\n        if (this._seekedListener) {\n            this._context.video.removeEventListener('seeked', this._seekedListener);\n            this._seekedListener = undefined;\n        }\n        if (this._messageListener) {\n            chrome.runtime.onMessage.removeListener(this._messageListener);\n            this._messageListener = undefined;\n        }\n        this._overlay.dispose();\n        this._overlay = MobileVideoOverlayController._elementOverlay(this._context.video, this._overlay.offsetAnchor);\n        this._showing = false;\n        this._bound = false;\n    }\n}\n","import UiFrame from '../services/ui-frame';\nimport { fetchLocalization } from '../services/localization-fetcher';\nexport default class NotificationController {\n    constructor(context) {\n        this._context = context;\n        this._frame = new UiFrame(async (lang) => `<!DOCTYPE html>\n                    <html lang=\"en\">\n                    <head>\n                        <meta charset=\"utf-8\" />\n                        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n                        <title>asbplayer</title>\n                        <style>\n                        @import url(${chrome.runtime.getURL('./assets/fonts.css')});\n                        </style>\n                    </head>\n                    <body>\n                        <div id=\"root\" style=\"width:100%;height:100vh;\"></div>\n                        <script type=\"application/json\" id=\"loc\">${JSON.stringify(await fetchLocalization(lang))}</script>\n                        <script src=\"${chrome.runtime.getURL('./notification-ui.js')}\"></script>\n                    </body>\n                </html>`);\n    }\n    get showing() {\n        return !this._frame.hidden;\n    }\n    hide() {\n        this._frame.hide();\n    }\n    async show(titleLocKey, messageLocKey) {\n        await this._prepareAndShowFrame('asbplayer-ui-frame');\n        if (document.fullscreenElement) {\n            document.exitFullscreen();\n        }\n        this._client.updateState({\n            themeType: await this._context.settings.getSingle('themeType'),\n            titleLocKey,\n            messageLocKey,\n            alertLocKey: '',\n        });\n        this._context.pause();\n    }\n    async updateAlert(newVersion) {\n        await this._prepareAndShowFrame('asbplayer-alert');\n        this._client.updateState({\n            themeType: await this._context.settings.getSingle('themeType'),\n            titleLocKey: '',\n            messageLocKey: '',\n            newVersion,\n        });\n    }\n    async _prepareAndShowFrame(className) {\n        this._frame.language = await this._context.settings.getSingle('language');\n        const isNewClient = await this._frame.bind();\n        this._frame.frame.className = className;\n        this._client = await this._frame.client();\n        if (isNewClient) {\n            this._client.onMessage((message) => {\n                if (message.command === 'close') {\n                    this._context.subtitleController.forceHideSubtitles = false;\n                    this._context.mobileVideoOverlayController.forceHide = false;\n                    this._context.controlsController.show();\n                    this._frame.hide();\n                    this.onClose?.();\n                }\n            });\n        }\n        this._frame.show();\n    }\n    unbind() {\n        this._frame?.unbind();\n    }\n}\n","/**\r\n * Created by Alex Bol on 4/1/2017.\r\n */\r\n\r\n/**\r\n * Interval is a pair of numbers or a pair of any comparable objects on which may be defined predicates\r\n * *equal*, *less* and method *max(p1, p1)* that returns maximum in a pair.\r\n * When interval is an object rather than pair of numbers, this object should have properties *low*, *high*, *max*\r\n * and implement methods *less_than(), equal_to(), intersect(), not_intersect(), clone(), output()*.\r\n * Two static methods *comparable_max(), comparable_less_than()* define how to compare values in pair. <br/>\r\n * This interface is described in typescript definition file *index.d.ts*\r\n *\r\n * Axis aligned rectangle is an example of such interval.\r\n * We may look at rectangle as an interval between its low left and top right corners.\r\n * See **Box** class in [flatten-js](https://github.com/alexbol99/flatten-js) library as the example\r\n * of Interval interface implementation\r\n * @type {Interval}\r\n */\r\nconst Interval = class Interval {\r\n    /**\r\n     * Accept two comparable values and creates new instance of interval\r\n     * Predicate Interval.comparable_less(low, high) supposed to return true on these values\r\n     * @param low\r\n     * @param high\r\n     */\r\n    constructor(low, high) {\r\n        this.low = low;\r\n        this.high = high;\r\n    }\r\n\r\n    /**\r\n     * Clone interval\r\n     * @returns {Interval}\r\n     */\r\n    clone() {\r\n        return new Interval(this.low, this.high);\r\n    }\r\n\r\n    /**\r\n     * Propery max returns clone of this interval\r\n     * @returns {Interval}\r\n     */\r\n    get max() {\r\n        return this.clone();   // this.high;\r\n    }\r\n\r\n    /**\r\n     * Predicate returns true is this interval less than other interval\r\n     * @param other_interval\r\n     * @returns {boolean}\r\n     */\r\n    less_than(other_interval) {\r\n        return this.low < other_interval.low ||\r\n            this.low == other_interval.low && this.high < other_interval.high;\r\n    }\r\n\r\n    /**\r\n     * Predicate returns true is this interval equals to other interval\r\n     * @param other_interval\r\n     * @returns {boolean}\r\n     */\r\n    equal_to(other_interval) {\r\n        return this.low == other_interval.low && this.high == other_interval.high;\r\n    }\r\n\r\n    /**\r\n     * Predicate returns true if this interval intersects other interval\r\n     * @param other_interval\r\n     * @returns {boolean}\r\n     */\r\n    intersect(other_interval) {\r\n        return !this.not_intersect(other_interval);\r\n    }\r\n\r\n    /**\r\n     * Predicate returns true if this interval does not intersect other interval\r\n     * @param other_interval\r\n     * @returns {boolean}\r\n     */\r\n    not_intersect(other_interval) {\r\n        return (this.high < other_interval.low || other_interval.high < this.low);\r\n    }\r\n\r\n    /**\r\n     * Returns new interval merged with other interval\r\n     * @param {Interval} interval - Other interval to merge with\r\n     * @returns {Interval}\r\n     */\r\n    merge(other_interval) {\r\n        return new Interval(\r\n            this.low === undefined ? other_interval.low : Math.min(this.low, other_interval.low),\r\n            this.high === undefined ? other_interval.high : Math.max(this.high, other_interval.high)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Returns how key should return\r\n     */\r\n    output() {\r\n        return [this.low, this.high];\r\n    }\r\n\r\n    /**\r\n     * Function returns maximum between two comparable values\r\n     * @param interval1\r\n     * @param interval2\r\n     * @returns {Interval}\r\n     */\r\n    static comparable_max(interval1, interval2) {\r\n        return interval1.merge(interval2);\r\n    }\r\n\r\n    /**\r\n     * Predicate returns true if first value less than second value\r\n     * @param val1\r\n     * @param val2\r\n     * @returns {boolean}\r\n     */\r\n    static comparable_less_than(val1, val2 ) {\r\n        return val1 < val2;\r\n    }\r\n};\n\n/**\r\n * Created by Alex Bol on 3/28/2017.\r\n */\r\n\r\n// module.exports = {\r\n//     RB_TREE_COLOR_RED: 0,\r\n//     RB_TREE_COLOR_BLACK: 1\r\n// };\r\n\r\nconst RB_TREE_COLOR_RED = 0;\r\nconst RB_TREE_COLOR_BLACK = 1;\n\n/**\r\n * Created by Alex Bol on 4/1/2017.\r\n */\r\n\r\nclass Node {\r\n    constructor(key = undefined, value = undefined,\r\n                left = null, right = null, parent = null, color = RB_TREE_COLOR_BLACK) {\r\n        this.left = left;                     // reference to left child node\r\n        this.right = right;                   // reference to right child node\r\n        this.parent = parent;                 // reference to parent node\r\n        this.color = color;\r\n\r\n        this.item = {key: key, value: value};   // key is supposed to be instance of Interval\r\n\r\n        /* If not, this should by an array of two numbers */\r\n        if (key && key instanceof Array && key.length == 2) {\r\n            if (!Number.isNaN(key[0]) && !Number.isNaN(key[1])) {\r\n                this.item.key = new Interval(Math.min(key[0], key[1]), Math.max(key[0], key[1]));\r\n            }\r\n        }\r\n\r\n        this.max = this.item.key ? this.item.key.max : undefined;\r\n    }\r\n\r\n    isNil() {\r\n        return (this.item.key === undefined && this.item.value === undefined &&\r\n            this.left === null && this.right === null && this.color === RB_TREE_COLOR_BLACK);\r\n    }\r\n\r\n    less_than(other_node) {\r\n        // if tree stores only keys\r\n        if (this.item.value === this.item.key && other_node.item.value === other_node.item.key) {\r\n            return this.item.key.less_than(other_node.item.key);\r\n        }\r\n        else {    // if tree stores keys and values\r\n            let value_less_than = this.item.value && other_node.item.value && this.item.value.less_than ? this.item.value.less_than(other_node.item.value) :\r\n                this.item.value < other_node.item.value;\r\n            return this.item.key.less_than(other_node.item.key) ||\r\n                this.item.key.equal_to((other_node.item.key)) && value_less_than;\r\n        }\r\n\r\n        // if (this.item.value && other_node.item.value) {\r\n        //     let item_less_than = this.item.value.less_than ? this.item.value.less_than(other_node.item.value) :\r\n        //         this.item.value < other_node.item.value;\r\n        //     return this.item.key.less_than(other_node.item.key) ||\r\n        //         this.item.key.equal_to((other_node.item.key)) && item_less_than;\r\n        // }\r\n        // else {\r\n        //     return this.item.key.less_than(other_node.item.key);\r\n        // }\r\n    }\r\n\r\n    equal_to(other_node) {\r\n        // if tree stores only keys\r\n        if (this.item.value === this.item.key && other_node.item.value === other_node.item.key) {\r\n            return this.item.key.equal_to(other_node.item.key);\r\n        }\r\n        else {    // if tree stores keys and values\r\n            let value_equal = this.item.value && other_node.item.value && this.item.value.equal_to ? this.item.value.equal_to(other_node.item.value) :\r\n                this.item.value == other_node.item.value;\r\n            return this.item.key.equal_to(other_node.item.key) && value_equal;\r\n        }\r\n\r\n        // let value_equal = true;\r\n        // if (this.item.value && other_node.item.value) {\r\n        //     value_equal = this.item.value.equal_to ? this.item.value.equal_to(other_node.item.value) :\r\n        //         this.item.value == other_node.item.value;\r\n        // }\r\n        // return this.item.key.equal_to(other_node.item.key) && value_equal;\r\n    }\r\n\r\n    intersect(other_node) {\r\n        return this.item.key.intersect(other_node.item.key);\r\n    }\r\n\r\n    copy_data(other_node) {\r\n        this.item.key = other_node.item.key;\r\n        this.item.value = other_node.item.value;\r\n    }\r\n\r\n    update_max() {\r\n        // use key (Interval) max property instead of key.high\r\n        this.max = this.item.key ? this.item.key.max : undefined;\r\n        if (this.right && this.right.max) {\r\n            const comparable_max = this.item.key.constructor.comparable_max;  // static method\r\n            this.max = comparable_max(this.max, this.right.max);\r\n        }\r\n        if (this.left && this.left.max) {\r\n            const comparable_max = this.item.key.constructor.comparable_max;  // static method\r\n            this.max = comparable_max(this.max, this.left.max);\r\n        }\r\n    }\r\n\r\n    // Other_node does not intersect any node of left subtree, if this.left.max < other_node.item.key.low\r\n    not_intersect_left_subtree(search_node) {\r\n        const comparable_less_than = this.item.key.constructor.comparable_less_than;  // static method\r\n        let high = this.left.max.high !== undefined ? this.left.max.high : this.left.max;\r\n        return comparable_less_than(high, search_node.item.key.low);\r\n    }\r\n\r\n    // Other_node does not intersect right subtree if other_node.item.key.high < this.right.key.low\r\n    not_intersect_right_subtree(search_node) {\r\n        const comparable_less_than = this.item.key.constructor.comparable_less_than;  // static method\r\n        let low = this.right.max.low !== undefined ? this.right.max.low : this.right.item.key.low;\r\n        return comparable_less_than(search_node.item.key.high, low);\r\n    }\r\n}\n\n/**\r\n * Created by Alex Bol on 3/31/2017.\r\n */\r\n\r\n// const nil_node = new Node();\r\n\r\n/**\r\n * Implementation of interval binary search tree <br/>\r\n * Interval tree stores items which are couples of {key:interval, value: value} <br/>\r\n * Interval is an object with high and low properties or simply pair [low,high] of numeric values <br />\r\n * @type {IntervalTree}\r\n */\r\nclass IntervalTree {\r\n    /**\r\n     * Construct new empty instance of IntervalTree\r\n     */\r\n    constructor() {\r\n        this.root = null;\r\n        this.nil_node = new Node();\r\n    }\r\n\r\n    /**\r\n     * Returns number of items stored in the interval tree\r\n     * @returns {number}\r\n     */\r\n    get size() {\r\n        let count = 0;\r\n        this.tree_walk(this.root, () => count++);\r\n        return count;\r\n    }\r\n\r\n    /**\r\n     * Returns array of sorted keys in the ascending order\r\n     * @returns {Array}\r\n     */\r\n    get keys() {\r\n        let res = [];\r\n        this.tree_walk(this.root, (node) => res.push(\r\n            node.item.key.output ? node.item.key.output() : node.item.key\r\n        ));\r\n        return res;\r\n    }\r\n\r\n    /**\r\n     * Return array of values in the ascending keys order\r\n     * @returns {Array}\r\n     */\r\n    get values() {\r\n        let res = [];\r\n        this.tree_walk(this.root, (node) => res.push(node.item.value));\r\n        return res;\r\n    }\r\n\r\n    /**\r\n     * Returns array of items (<key,value> pairs) in the ascended keys order\r\n     * @returns {Array}\r\n     */\r\n    get items() {\r\n        let res = [];\r\n        this.tree_walk(this.root, (node) => res.push({\r\n            key: node.item.key.output ? node.item.key.output() : node.item.key,\r\n            value: node.item.value\r\n        }));\r\n        return res;\r\n    }\r\n\r\n    /**\r\n     * Returns true if tree is empty\r\n     * @returns {boolean}\r\n     */\r\n    isEmpty() {\r\n        return (this.root == null || this.root == this.nil_node);\r\n    }\r\n\r\n    /**\r\n     * Clear tree\r\n     */\r\n    clear() {\r\n        this.root = null;\r\n    }\r\n\r\n    /**\r\n     * Insert new item into interval tree\r\n     * @param {Interval} key - interval object or array of two numbers [low, high]\r\n     * @param {any} value - value representing any object (optional)\r\n     * @returns {Node} returns reference to inserted node as an object {key:interval, value: value}\r\n     */\r\n    insert(key, value = key) {\r\n        if (key === undefined) return;\r\n        let insert_node = new Node(key, value, this.nil_node, this.nil_node, null, RB_TREE_COLOR_RED);\r\n        this.tree_insert(insert_node);\r\n        this.recalc_max(insert_node);\r\n        return insert_node;\r\n    }\r\n\r\n    /**\r\n     * Returns true if item {key,value} exist in the tree\r\n     * @param {Interval} key - interval correspondent to keys stored in the tree\r\n     * @param {any} value - value object to be checked\r\n     * @returns {boolean} true if item {key, value} exist in the tree, false otherwise\r\n     */\r\n    exist(key, value = key) {\r\n        let search_node = new Node(key, value);\r\n        return this.tree_search(this.root, search_node) ? true : false;\r\n    }\r\n\r\n    /**\r\n     * Remove entry {key, value} from the tree\r\n     * @param {Interval} key - interval correspondent to keys stored in the tree\r\n     * @param {any} value - value object\r\n     * @returns {boolean} true if item {key, value} deleted, false if not found\r\n     */\r\n    remove(key, value = key) {\r\n        let search_node = new Node(key, value);\r\n        let delete_node = this.tree_search(this.root, search_node);\r\n        if (delete_node) {\r\n            this.tree_delete(delete_node);\r\n        }\r\n        return delete_node;\r\n    }\r\n\r\n    /**\r\n     * Returns array of entry values which keys intersect with given interval <br/>\r\n     * If no values stored in the tree, returns array of keys which intersect given interval\r\n     * @param {Interval} interval - search interval, or tuple [low, high]\r\n     * @param outputMapperFn(value,key) - optional function that maps (value, key) to custom output\r\n     * @returns {Array}\r\n     */\r\n    search(interval, outputMapperFn = (value, key) => value === key ? key.output() : value) {\r\n        let search_node = new Node(interval);\r\n        let resp_nodes = [];\r\n        this.tree_search_interval(this.root, search_node, resp_nodes);\r\n        return resp_nodes.map(node => outputMapperFn(node.item.value, node.item.key))\r\n    }\r\n\r\n    /**\r\n     * Returns true if intersection between given and any interval stored in the tree found\r\n     * @param {Interval} interval - search interval or tuple [low, high]\r\n     * @returns {boolean}\r\n     */\r\n    intersect_any(interval) {\r\n        let search_node = new Node(interval);\r\n        let found = this.tree_find_any_interval(this.root, search_node);\r\n        return found;\r\n    }\r\n\r\n    /**\r\n     * Tree visitor. For each node implement a callback function. <br/>\r\n     * Method calls a callback function with two parameters (key, value)\r\n     * @param visitor(key,value) - function to be called for each tree item\r\n     */\r\n    forEach(visitor) {\r\n        this.tree_walk(this.root, (node) => visitor(node.item.key, node.item.value));\r\n    }\r\n\r\n    /** Value Mapper. Walk through every node and map node value to another value\r\n    * @param callback(value,key) - function to be called for each tree item\r\n    */\r\n    map(callback) {\r\n        const tree = new IntervalTree();\r\n        this.tree_walk(this.root, (node) => tree.insert(node.item.key, callback(node.item.value, node.item.key)));\r\n        return tree;\r\n    }\r\n\r\n    recalc_max(node) {\r\n        let node_current = node;\r\n        while (node_current.parent != null) {\r\n            node_current.parent.update_max();\r\n            node_current = node_current.parent;\r\n        }\r\n    }\r\n\r\n    tree_insert(insert_node) {\r\n        let current_node = this.root;\r\n        let parent_node = null;\r\n\r\n        if (this.root == null || this.root == this.nil_node) {\r\n            this.root = insert_node;\r\n        }\r\n        else {\r\n            while (current_node != this.nil_node) {\r\n                parent_node = current_node;\r\n                if (insert_node.less_than(current_node)) {\r\n                    current_node = current_node.left;\r\n                }\r\n                else {\r\n                    current_node = current_node.right;\r\n                }\r\n            }\r\n\r\n            insert_node.parent = parent_node;\r\n\r\n            if (insert_node.less_than(parent_node)) {\r\n                parent_node.left = insert_node;\r\n            }\r\n            else {\r\n                parent_node.right = insert_node;\r\n            }\r\n        }\r\n\r\n        this.insert_fixup(insert_node);\r\n    }\r\n\r\n// After insertion insert_node may have red-colored parent, and this is a single possible violation\r\n// Go upwords to the root and re-color until violation will be resolved\r\n    insert_fixup(insert_node) {\r\n        let current_node;\r\n        let uncle_node;\r\n\r\n        current_node = insert_node;\r\n        while (current_node != this.root && current_node.parent.color == RB_TREE_COLOR_RED) {\r\n            if (current_node.parent == current_node.parent.parent.left) {   // parent is left child of grandfather\r\n                uncle_node = current_node.parent.parent.right;              // right brother of parent\r\n                if (uncle_node.color == RB_TREE_COLOR_RED) {             // Case 1. Uncle is red\r\n                    // re-color father and uncle into black\r\n                    current_node.parent.color = RB_TREE_COLOR_BLACK;\r\n                    uncle_node.color = RB_TREE_COLOR_BLACK;\r\n                    current_node.parent.parent.color = RB_TREE_COLOR_RED;\r\n                    current_node = current_node.parent.parent;\r\n                }\r\n                else {                                                    // Case 2 & 3. Uncle is black\r\n                    if (current_node == current_node.parent.right) {     // Case 2. Current if right child\r\n                        // This case is transformed into Case 3.\r\n                        current_node = current_node.parent;\r\n                        this.rotate_left(current_node);\r\n                    }\r\n                    current_node.parent.color = RB_TREE_COLOR_BLACK;    // Case 3. Current is left child.\r\n                    // Re-color father and grandfather, rotate grandfather right\r\n                    current_node.parent.parent.color = RB_TREE_COLOR_RED;\r\n                    this.rotate_right(current_node.parent.parent);\r\n                }\r\n            }\r\n            else {                                                         // parent is right child of grandfather\r\n                uncle_node = current_node.parent.parent.left;              // left brother of parent\r\n                if (uncle_node.color == RB_TREE_COLOR_RED) {             // Case 4. Uncle is red\r\n                    // re-color father and uncle into black\r\n                    current_node.parent.color = RB_TREE_COLOR_BLACK;\r\n                    uncle_node.color = RB_TREE_COLOR_BLACK;\r\n                    current_node.parent.parent.color = RB_TREE_COLOR_RED;\r\n                    current_node = current_node.parent.parent;\r\n                }\r\n                else {\r\n                    if (current_node == current_node.parent.left) {             // Case 5. Current is left child\r\n                        // Transform into case 6\r\n                        current_node = current_node.parent;\r\n                        this.rotate_right(current_node);\r\n                    }\r\n                    current_node.parent.color = RB_TREE_COLOR_BLACK;    // Case 6. Current is right child.\r\n                    // Re-color father and grandfather, rotate grandfather left\r\n                    current_node.parent.parent.color = RB_TREE_COLOR_RED;\r\n                    this.rotate_left(current_node.parent.parent);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.root.color = RB_TREE_COLOR_BLACK;\r\n    }\r\n\r\n    tree_delete(delete_node) {\r\n        let cut_node;   // node to be cut - either delete_node or successor_node  (\"y\" from 14.4)\r\n        let fix_node;   // node to fix rb tree property   (\"x\" from 14.4)\r\n\r\n        if (delete_node.left == this.nil_node || delete_node.right == this.nil_node) {  // delete_node has less then 2 children\r\n            cut_node = delete_node;\r\n        }\r\n        else {                                                    // delete_node has 2 children\r\n            cut_node = this.tree_successor(delete_node);\r\n        }\r\n\r\n        // fix_node if single child of cut_node\r\n        if (cut_node.left != this.nil_node) {\r\n            fix_node = cut_node.left;\r\n        }\r\n        else {\r\n            fix_node = cut_node.right;\r\n        }\r\n\r\n        // remove cut_node from parent\r\n        /*if (fix_node != this.nil_node) {*/\r\n            fix_node.parent = cut_node.parent;\r\n        /*}*/\r\n\r\n        if (cut_node == this.root) {\r\n            this.root = fix_node;\r\n        }\r\n        else {\r\n            if (cut_node == cut_node.parent.left) {\r\n                cut_node.parent.left = fix_node;\r\n            }\r\n            else {\r\n                cut_node.parent.right = fix_node;\r\n            }\r\n            cut_node.parent.update_max();        // update max property of the parent\r\n        }\r\n\r\n        this.recalc_max(fix_node);              // update max property upward from fix_node to root\r\n\r\n        // COPY DATA !!!\r\n        // Delete_node becomes cut_node, it means that we cannot hold reference\r\n        // to node in outer structure and we will have to delete by key, additional search need\r\n        if (cut_node != delete_node) {\r\n            delete_node.copy_data(cut_node);\r\n            delete_node.update_max();           // update max property of the cut node at the new place\r\n            this.recalc_max(delete_node);       // update max property upward from delete_node to root\r\n        }\r\n\r\n        if (/*fix_node != this.nil_node && */cut_node.color == RB_TREE_COLOR_BLACK) {\r\n            this.delete_fixup(fix_node);\r\n        }\r\n    }\r\n\r\n    delete_fixup(fix_node) {\r\n        let current_node = fix_node;\r\n        let brother_node;\r\n\r\n        while (current_node != this.root && current_node.parent != null && current_node.color == RB_TREE_COLOR_BLACK) {\r\n            if (current_node == current_node.parent.left) {          // fix node is left child\r\n                brother_node = current_node.parent.right;\r\n                if (brother_node.color == RB_TREE_COLOR_RED) {   // Case 1. Brother is red\r\n                    brother_node.color = RB_TREE_COLOR_BLACK;         // re-color brother\r\n                    current_node.parent.color = RB_TREE_COLOR_RED;    // re-color father\r\n                    this.rotate_left(current_node.parent);\r\n                    brother_node = current_node.parent.right;                      // update brother\r\n                }\r\n                // Derive to cases 2..4: brother is black\r\n                if (brother_node.left.color == RB_TREE_COLOR_BLACK &&\r\n                    brother_node.right.color == RB_TREE_COLOR_BLACK) {  // case 2: both nephews black\r\n                    brother_node.color = RB_TREE_COLOR_RED;              // re-color brother\r\n                    current_node = current_node.parent;                  // continue iteration\r\n                }\r\n                else {\r\n                    if (brother_node.right.color == RB_TREE_COLOR_BLACK) {   // case 3: left nephew red, right nephew black\r\n                        brother_node.color = RB_TREE_COLOR_RED;          // re-color brother\r\n                        brother_node.left.color = RB_TREE_COLOR_BLACK;   // re-color nephew\r\n                        this.rotate_right(brother_node);\r\n                        brother_node = current_node.parent.right;                     // update brother\r\n                        // Derive to case 4: left nephew black, right nephew red\r\n                    }\r\n                    // case 4: left nephew black, right nephew red\r\n                    brother_node.color = current_node.parent.color;\r\n                    current_node.parent.color = RB_TREE_COLOR_BLACK;\r\n                    brother_node.right.color = RB_TREE_COLOR_BLACK;\r\n                    this.rotate_left(current_node.parent);\r\n                    current_node = this.root;                         // exit from loop\r\n                }\r\n            }\r\n            else {                                             // fix node is right child\r\n                brother_node = current_node.parent.left;\r\n                if (brother_node.color == RB_TREE_COLOR_RED) {   // Case 1. Brother is red\r\n                    brother_node.color = RB_TREE_COLOR_BLACK;         // re-color brother\r\n                    current_node.parent.color = RB_TREE_COLOR_RED;    // re-color father\r\n                    this.rotate_right(current_node.parent);\r\n                    brother_node = current_node.parent.left;                        // update brother\r\n                }\r\n                // Go to cases 2..4\r\n                if (brother_node.left.color == RB_TREE_COLOR_BLACK &&\r\n                    brother_node.right.color == RB_TREE_COLOR_BLACK) {   // case 2\r\n                    brother_node.color = RB_TREE_COLOR_RED;             // re-color brother\r\n                    current_node = current_node.parent;                              // continue iteration\r\n                }\r\n                else {\r\n                    if (brother_node.left.color == RB_TREE_COLOR_BLACK) {  // case 3: right nephew red, left nephew black\r\n                        brother_node.color = RB_TREE_COLOR_RED;            // re-color brother\r\n                        brother_node.right.color = RB_TREE_COLOR_BLACK;    // re-color nephew\r\n                        this.rotate_left(brother_node);\r\n                        brother_node = current_node.parent.left;                        // update brother\r\n                        // Derive to case 4: right nephew black, left nephew red\r\n                    }\r\n                    // case 4: right nephew black, left nephew red\r\n                    brother_node.color = current_node.parent.color;\r\n                    current_node.parent.color = RB_TREE_COLOR_BLACK;\r\n                    brother_node.left.color = RB_TREE_COLOR_BLACK;\r\n                    this.rotate_right(current_node.parent);\r\n                    current_node = this.root;                               // force exit from loop\r\n                }\r\n            }\r\n        }\r\n\r\n        current_node.color = RB_TREE_COLOR_BLACK;\r\n    }\r\n\r\n    tree_search(node, search_node) {\r\n        if (node == null || node == this.nil_node)\r\n            return undefined;\r\n\r\n        if (search_node.equal_to(node)) {\r\n            return node;\r\n        }\r\n        if (search_node.less_than(node)) {\r\n            return this.tree_search(node.left, search_node);\r\n        }\r\n        else {\r\n            return this.tree_search(node.right, search_node);\r\n        }\r\n    }\r\n\r\n    // Original search_interval method; container res support push() insertion\r\n    // Search all intervals intersecting given one\r\n    tree_search_interval(node, search_node, res) {\r\n        if (node != null && node != this.nil_node) {\r\n            // if (node->left != this.nil_node && node->left->max >= low) {\r\n            if (node.left != this.nil_node && !node.not_intersect_left_subtree(search_node)) {\r\n                this.tree_search_interval(node.left, search_node, res);\r\n            }\r\n            // if (low <= node->high && node->low <= high) {\r\n            if (node.intersect(search_node)) {\r\n                res.push(node);\r\n            }\r\n            // if (node->right != this.nil_node && node->low <= high) {\r\n            if (node.right != this.nil_node && !node.not_intersect_right_subtree(search_node)) {\r\n                this.tree_search_interval(node.right, search_node, res);\r\n            }\r\n        }\r\n    }\r\n\r\n    tree_find_any_interval(node, search_node) {\r\n        let found = false;\r\n        if (node != null && node != this.nil_node) {\r\n            // if (node->left != this.nil_node && node->left->max >= low) {\r\n            if (node.left != this.nil_node && !node.not_intersect_left_subtree(search_node)) {\r\n                found = this.tree_find_any_interval(node.left, search_node);\r\n            }\r\n            // if (low <= node->high && node->low <= high) {\r\n            if (!found) {\r\n                found = node.intersect(search_node);\r\n            }\r\n            // if (node->right != this.nil_node && node->low <= high) {\r\n            if (!found && node.right != this.nil_node && !node.not_intersect_right_subtree(search_node)) {\r\n                found = this.tree_find_any_interval(node.right, search_node);\r\n            }\r\n        }\r\n        return found;\r\n    }\r\n\r\n    local_minimum(node) {\r\n        let node_min = node;\r\n        while (node_min.left != null && node_min.left != this.nil_node) {\r\n            node_min = node_min.left;\r\n        }\r\n        return node_min;\r\n    }\r\n\r\n    // not in use\r\n    local_maximum(node) {\r\n        let node_max = node;\r\n        while (node_max.right != null && node_max.right != this.nil_node) {\r\n            node_max = node_max.right;\r\n        }\r\n        return node_max;\r\n    }\r\n\r\n    tree_successor(node) {\r\n        let node_successor;\r\n        let current_node;\r\n        let parent_node;\r\n\r\n        if (node.right != this.nil_node) {\r\n            node_successor = this.local_minimum(node.right);\r\n        }\r\n        else {\r\n            current_node = node;\r\n            parent_node = node.parent;\r\n            while (parent_node != null && parent_node.right == current_node) {\r\n                current_node = parent_node;\r\n                parent_node = parent_node.parent;\r\n            }\r\n            node_successor = parent_node;\r\n        }\r\n        return node_successor;\r\n    }\r\n\r\n    //           |            right-rotate(T,y)       |\r\n    //           y            ---------------.       x\r\n    //          / \\                                  / \\\r\n    //         x   c          left-rotate(T,x)      a   y\r\n    //        / \\             <---------------         / \\\r\n    //       a   b                                    b   c\r\n\r\n    rotate_left(x) {\r\n        let y = x.right;\r\n\r\n        x.right = y.left;           // b goes to x.right\r\n\r\n        if (y.left != this.nil_node) {\r\n            y.left.parent = x;     // x becomes parent of b\r\n        }\r\n        y.parent = x.parent;       // move parent\r\n\r\n        if (x == this.root) {\r\n            this.root = y;           // y becomes root\r\n        }\r\n        else {                        // y becomes child of x.parent\r\n            if (x == x.parent.left) {\r\n                x.parent.left = y;\r\n            }\r\n            else {\r\n                x.parent.right = y;\r\n            }\r\n        }\r\n        y.left = x;                 // x becomes left child of y\r\n        x.parent = y;               // and y becomes parent of x\r\n\r\n        if (x != null && x != this.nil_node) {\r\n            x.update_max();\r\n        }\r\n\r\n        y = x.parent;\r\n        if (y != null && y != this.nil_node) {\r\n            y.update_max();\r\n        }\r\n    }\r\n\r\n    rotate_right(y) {\r\n        let x = y.left;\r\n\r\n        y.left = x.right;           // b goes to y.left\r\n\r\n        if (x.right != this.nil_node) {\r\n            x.right.parent = y;        // y becomes parent of b\r\n        }\r\n        x.parent = y.parent;          // move parent\r\n\r\n        if (y == this.root) {        // x becomes root\r\n            this.root = x;\r\n        }\r\n        else {                        // y becomes child of x.parent\r\n            if (y == y.parent.left) {\r\n                y.parent.left = x;\r\n            }\r\n            else {\r\n                y.parent.right = x;\r\n            }\r\n        }\r\n        x.right = y;                 // y becomes right child of x\r\n        y.parent = x;               // and x becomes parent of y\r\n\r\n        if (y != null && y != this.nil_node) {\r\n            y.update_max();\r\n        }\r\n\r\n        x = y.parent;\r\n        if (x != null && x != this.nil_node) {\r\n            x.update_max();\r\n        }\r\n    }\r\n\r\n    tree_walk(node, action) {\r\n        if (node != null && node != this.nil_node) {\r\n            this.tree_walk(node.left, action);\r\n            // arr.push(node.toArray());\r\n            action(node);\r\n            this.tree_walk(node.right, action);\r\n        }\r\n    }\r\n\r\n    /* Return true if all red nodes have exactly two black child nodes */\r\n    testRedBlackProperty() {\r\n        let res = true;\r\n        this.tree_walk(this.root, function (node) {\r\n            if (node.color == RB_TREE_COLOR_RED) {\r\n                if (!(node.left.color == RB_TREE_COLOR_BLACK && node.right.color == RB_TREE_COLOR_BLACK)) {\r\n                    res = false;\r\n                }\r\n            }\r\n        });\r\n        return res;\r\n    }\r\n\r\n    /* Throw error if not every path from root to bottom has same black height */\r\n    testBlackHeightProperty(node) {\r\n        let height = 0;\r\n        let heightLeft = 0;\r\n        let heightRight = 0;\r\n        if (node.color == RB_TREE_COLOR_BLACK) {\r\n            height++;\r\n        }\r\n        if (node.left != this.nil_node) {\r\n            heightLeft = this.testBlackHeightProperty(node.left);\r\n        }\r\n        else {\r\n            heightLeft = 1;\r\n        }\r\n        if (node.right != this.nil_node) {\r\n            heightRight = this.testBlackHeightProperty(node.right);\r\n        }\r\n        else {\r\n            heightRight = 1;\r\n        }\r\n        if (heightLeft != heightRight) {\r\n            throw new Error('Red-black height property violated');\r\n        }\r\n        height += heightLeft;\r\n        return height;\r\n    };\r\n}\n\nexport default IntervalTree;\nexport { Node, Interval };\n","import IntervalTree from '@flatten-js/interval-tree';\nexport class SubtitleCollection {\n    constructor(subtitles, options = {}) {\n        this.tree = new IntervalTree();\n        this.options = options;\n        if (options.returnLastShown || options.returnNextToShow) {\n            let last;\n            this.gapsTree = new IntervalTree();\n            if (subtitles.length > 0 && subtitles[0].start > 0) {\n                this.gapsTree.insert([0, subtitles[0].start - 1], subtitles[0]);\n            }\n            for (const s of subtitles) {\n                if (s.start < s.end) {\n                    this.tree.insert([s.start, s.end - 1], s);\n                }\n                if (last !== undefined && last.end < s.start) {\n                    this.gapsTree.insert([last.end, s.start - 1], last);\n                }\n                last = s;\n            }\n        }\n        else {\n            for (const s of subtitles) {\n                this.tree.insert([s.start, s.end - 1], s);\n            }\n        }\n    }\n    static empty() {\n        return SubtitleCollection.emptySubtitleCollection;\n    }\n    subtitlesAt(timestamp) {\n        const interval = [timestamp, timestamp];\n        const showing = this.tree.search(interval);\n        let lastShown;\n        let nextToShow;\n        let startedShowing;\n        let willStopShowing;\n        if (showing.length === 0) {\n            if (this.gapsTree !== undefined) {\n                // One of returnLastShown or returnNextToShow is true due to constructor\n                const gapIntervals = [];\n                lastShown = this.gapsTree.search(interval, (s, i) => {\n                    gapIntervals.push(i);\n                    return s;\n                });\n                if (lastShown.length > 0 && this.options.returnNextToShow) {\n                    const nextStart = gapIntervals[0].high + 1;\n                    nextToShow = this.tree.search([nextStart, nextStart]);\n                }\n            }\n        }\n        else if (this.options.showingCheckRadiusMs !== undefined) {\n            for (const s of showing) {\n                if (willStopShowing === undefined && s.end <= timestamp + this.options.showingCheckRadiusMs) {\n                    willStopShowing = s;\n                }\n                if (startedShowing === undefined && timestamp - this.options.showingCheckRadiusMs < s.start) {\n                    startedShowing = s;\n                }\n                if (startedShowing !== undefined && willStopShowing !== undefined) {\n                    break;\n                }\n            }\n        }\n        return { showing, lastShown, nextToShow, startedShowing, willStopShowing };\n    }\n}\nSubtitleCollection.emptySubtitleCollection = new SubtitleCollection([]);\n","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _toArray from '@babel/runtime/helpers/esm/toArray';\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$6(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Logger);\n    this.init(concreteLogger, options);\n  }\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread$6(_objectSpread$6({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }), this.options));\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(options) {\n      options = options || this.options;\n      options.prefix = options.prefix || this.prefix;\n      return new Logger(this.logger, options);\n    }\n  }]);\n  return Logger;\n}();\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n    this.observers = {};\n  }\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n    obj = _getLastOfPath.obj,\n    k = _getLastOfPath.k;\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n    obj = _getLastOfPath2.obj,\n    k = _getLastOfPath2.k;\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n    obj = _getLastOfPath3.obj,\n    k = _getLastOfPath3.k;\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && typeof window.navigator.userAgentData === 'undefined' && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\nvar chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  var possibleChars = chars.filter(function (c) {\n    return nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0;\n  });\n  if (possibleChars.length === 0) return true;\n  var r = new RegExp(\"(\".concat(possibleChars.map(function (c) {\n    return c === '?' ? '\\\\?' : c;\n  }).join('|'), \")\"));\n  var matched = !r.test(key);\n  if (!matched) {\n    var ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n}\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n    current = current[paths[i]];\n  }\n  return current;\n}\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$5(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n  var _super = _createSuper$3(ResourceStore);\n  function ResourceStore(data) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n    _classCallCheck(this, ResourceStore);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.data = data || {};\n    _this.options = options;\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n    return _this;\n  }\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread$5(_objectSpread$5({}, pack), resources);\n      }\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread$5(_objectSpread$5({}, {}), this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"hasLanguageSomeTranslations\",\n    value: function hasLanguageSomeTranslations(lng) {\n      var data = this.getDataByLanguage(lng);\n      var n = data && Object.keys(data) || [];\n      return !!n.find(function (v) {\n        return data[v] && Object.keys(data[v]).length > 0;\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$4(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar checkedLoadedFor = {};\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n  var _super = _createSuper$2(Translator);\n  function Translator(services) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Translator);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      if (key === undefined || key === null) {\n        return false;\n      }\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS || [];\n      var wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n      var seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n      if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n        var m = key.match(this.interpolator.nestingRegexp);\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n        key = _this$extractFromKey.key,\n        namespaces = _this$extractFromKey.namespaces;\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n          if (returnDetails) {\n            return {\n              res: \"\".concat(namespace).concat(nsSeparator).concat(key),\n              usedKey: key,\n              exactUsedKey: key,\n              usedLng: lng,\n              usedNS: namespace\n            };\n          }\n          return \"\".concat(namespace).concat(nsSeparator).concat(key);\n        }\n        if (returnDetails) {\n          return {\n            res: key,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace\n          };\n        }\n        return key;\n      }\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n          var r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread$4(_objectSpread$4({}, options), {}, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n          if (returnDetails) {\n            resolved.res = r;\n            return resolved;\n          }\n          return r;\n        }\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread$4(_objectSpread$4({}, options), {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread$4(_objectSpread$4({}, options), {}, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n          var send = function send(l, k, specificDefaultValue) {\n            var defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n            }\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language, options).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n          if (this.options.compatibilityAPI !== 'v1') {\n            res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? \"\".concat(namespace, \":\").concat(key) : key, usedDefault ? res : undefined);\n          } else {\n            res = this.options.parseMissingKeyHandler(res);\n          }\n        }\n      }\n      if (returnDetails) {\n        resolved.res = res;\n        return resolved;\n      }\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, _objectSpread$4(_objectSpread$4({}, this.options.interpolation.defaultVariables), options), resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread$4(_objectSpread$4({}, options), {\n          interpolation: _objectSpread$4(_objectSpread$4({}, this.options.interpolation), options.interpolation)\n        }));\n        var skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n        var nestBef;\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread$4(_objectSpread$4({}, this.options.interpolation.defaultVariables), data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n        if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = resolved.usedLng;\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n            return null;\n          }\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread$4({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n        var extracted = _this4.extractFromKey(k, options);\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && _this4.pluralResolver.shouldUseIntlApi();\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKeys = [key];\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count, options);\n              var zeroSuffix = \"\".concat(_this4.options.pluralSeparator, \"zero\");\n              if (needsPluralHandling) {\n                finalKeys.push(key + pluralSuffix);\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(key + zeroSuffix);\n                }\n              }\n              if (needsContextHandling) {\n                var contextKey = \"\".concat(key).concat(_this4.options.contextSeparator).concat(options.context);\n                finalKeys.push(contextKey);\n                if (needsPluralHandling) {\n                  finalKeys.push(contextKey + pluralSuffix);\n                  if (needsZeroSuffixLookup) {\n                    finalKeys.push(contextKey + zeroSuffix);\n                  }\n                }\n              }\n            }\n            var possibleKey;\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }]);\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n        return p.join('-');\n      }\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n        var cleanedLng = _this.formatLanguageCode(code);\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n          var lngOnly = _this.getLanguagePartFromCode(code);\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng === lngOnly) return supportedLng;\n            if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n      var addCode = function addCode(c) {\n        if (!c) return;\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nvar deprecatedJsonVersions = ['v1', 'v2', 'v3'];\nvar suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, PluralResolver);\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    if ((!this.options.compatibilityJSON || this.options.compatibilityJSON === 'v4') && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n    this.rules = createRules();\n  }\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this.shouldUseIntlApi()) {\n        try {\n          return new Intl.PluralRules(code, {\n            type: options.ordinal ? 'ordinal' : 'cardinal'\n          });\n        } catch (_unused) {\n          return;\n        }\n      }\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n      if (this.shouldUseIntlApi()) {\n        return rule && rule.resolvedOptions().pluralCategories.length > 1;\n      }\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.getSuffixes(code, options).map(function (suffix) {\n        return \"\".concat(key).concat(suffix);\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n      if (!rule) {\n        return [];\n      }\n      if (this.shouldUseIntlApi()) {\n        return rule.resolvedOptions().pluralCategories.sort(function (pluralCategory1, pluralCategory2) {\n          return suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2];\n        }).map(function (pluralCategory) {\n          return \"\".concat(_this.options.prepend).concat(pluralCategory);\n        });\n      }\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number, options);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var rule = this.getRule(code, options);\n      if (rule) {\n        if (this.shouldUseIntlApi()) {\n          return \"\".concat(this.options.prepend).concat(rule.select(count));\n        }\n        return this.getSuffixRetroCompatible(rule, count);\n      }\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }, {\n    key: \"getSuffixRetroCompatible\",\n    value: function getSuffixRetroCompatible(rule, count) {\n      var _this2 = this;\n      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n      var suffix = rule.numbers[idx];\n      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        if (suffix === 2) {\n          suffix = 'plural';\n        } else if (suffix === 1) {\n          suffix = '';\n        }\n      }\n      var returnSuffix = function returnSuffix() {\n        return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n      };\n      if (this.options.compatibilityJSON === 'v1') {\n        if (suffix === 1) return '';\n        if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n        return returnSuffix();\n      } else if (this.options.compatibilityJSON === 'v2') {\n        return returnSuffix();\n      } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        return returnSuffix();\n      }\n      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n    }\n  }, {\n    key: \"shouldUseIntlApi\",\n    value: function shouldUseIntlApi() {\n      return !deprecatedJsonVersions.includes(this.options.compatibilityJSON);\n    }\n  }]);\n  return PluralResolver;\n}();\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$3(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction deepFindWithDefaults(data, defaultData, key) {\n  var keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';\n  var ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  var path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && typeof key === 'string') {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n}\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Interpolator);\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n    this.init(options);\n  }\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = deepFindWithDefaults(data, defaultData, key, _this.options.keySeparator, _this.options.ignoreJSONStructure);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n            interpolationkey: key\n          })) : path;\n        }\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(deepFindWithDefaults(data, defaultData, k, _this.options.keySeparator, _this.options.ignoreJSONStructure), f, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n          interpolationkey: k\n        }));\n      };\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n        while (match = todo.regex.exec(str)) {\n          var matchedVar = match[1].trim();\n          value = handleFormat(matchedVar);\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n              value = '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(matchedVar, \" for interpolating \").concat(str));\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n          if (skipOnVariables) {\n            todo.regex.lastIndex += value.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n          replaces++;\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n      var clonedOptions;\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        var matchedSingleQuotes = optionsString.match(/'/g);\n        var matchedDoubleQuotes = optionsString.match(/\"/g);\n        if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n          optionsString = optionsString.replace(/'/g, '\"');\n        }\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread$3(_objectSpread$3({}, inheritedOptions), clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        clonedOptions = _objectSpread$3({}, options);\n        clonedOptions = clonedOptions.replace && typeof clonedOptions.replace !== 'string' ? clonedOptions.replace : clonedOptions;\n        clonedOptions.applyPostProcessor = false;\n        delete clonedOptions.defaultValue;\n        var doReduce = false;\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread$3(_objectSpread$3({}, options), {}, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n      return str;\n    }\n  }]);\n  return Interpolator;\n}();\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction parseFormatStr(formatStr) {\n  var formatName = formatStr.toLowerCase().trim();\n  var formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    var p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    var optStr = p[1].substring(0, p[1].length - 1);\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      var opts = optStr.split(';');\n      opts.forEach(function (opt) {\n        if (!opt) return;\n        var _opt$split = opt.split(':'),\n          _opt$split2 = _toArray(_opt$split),\n          key = _opt$split2[0],\n          rest = _opt$split2.slice(1);\n        var val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n  return {\n    formatName: formatName,\n    formatOptions: formatOptions\n  };\n}\nfunction createCachedFormatter(fn) {\n  var cache = {};\n  return function invokeFormatter(val, lng, options) {\n    var key = lng + JSON.stringify(options);\n    var formatter = cache[key];\n    if (!formatter) {\n      formatter = fn(lng, options);\n      cache[key] = formatter;\n    }\n    return formatter(val);\n  };\n}\nvar Formatter = function () {\n  function Formatter() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Formatter);\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.NumberFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      currency: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.NumberFormat(lng, _objectSpread$2(_objectSpread$2({}, opt), {}, {\n          style: 'currency'\n        }));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      datetime: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.DateTimeFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      relativetime: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.RelativeTimeFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val, opt.range || 'day');\n        };\n      }),\n      list: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.ListFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      })\n    };\n    this.init(options);\n  }\n  _createClass(Formatter, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var iOpts = options.interpolation;\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    }\n  }, {\n    key: \"add\",\n    value: function add(name, fc) {\n      this.formats[name.toLowerCase().trim()] = fc;\n    }\n  }, {\n    key: \"addCached\",\n    value: function addCached(name, fc) {\n      this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n    }\n  }, {\n    key: \"format\",\n    value: function format(value, _format, lng) {\n      var _this = this;\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var formats = _format.split(this.formatSeparator);\n      var result = formats.reduce(function (mem, f) {\n        var _parseFormatStr = parseFormatStr(f),\n          formatName = _parseFormatStr.formatName,\n          formatOptions = _parseFormatStr.formatOptions;\n        if (_this.formats[formatName]) {\n          var formatted = mem;\n          try {\n            var valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n            var l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n            formatted = _this.formats[formatName](mem, l, _objectSpread$2(_objectSpread$2(_objectSpread$2({}, formatOptions), options), valOptions));\n          } catch (error) {\n            _this.logger.warn(error);\n          }\n          return formatted;\n        } else {\n          _this.logger.warn(\"there was no format function for \".concat(formatName));\n        }\n        return mem;\n      }, value);\n      return result;\n    }\n  }]);\n  return Formatter;\n}();\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n  var _super = _createSuper$1(Connector);\n  function Connector(backend, store, services) {\n    var _this;\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    _classCallCheck(this, Connector);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.waitingReads = [];\n    _this.maxParallelReads = options.maxParallelReads || 10;\n    _this.readingCalls = 0;\n    _this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    _this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    _this.state = {};\n    _this.queue = [];\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n    return _this;\n  }\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n      var toLoad = {};\n      var pending = {};\n      var toLoadLanguages = {};\n      var toLoadNamespaces = {};\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending[name] === undefined) pending[name] = true;\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending[name] === undefined) pending[name] = true;\n            if (toLoad[name] === undefined) toLoad[name] = true;\n            if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n      });\n      if (Object.keys(toLoad).length || Object.keys(pending).length) {\n        this.queue.push({\n          pending: pending,\n          pendingCount: Object.keys(pending).length,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n      return {\n        toLoad: Object.keys(toLoad),\n        pending: Object.keys(pending),\n        toLoadLanguages: Object.keys(toLoadLanguages),\n        toLoadNamespaces: Object.keys(toLoadNamespaces)\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        removePending(q, name);\n        if (err) q.errors.push(err);\n        if (q.pendingCount === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = {};\n            var loadedKeys = q.loaded[l];\n            if (loadedKeys.length) {\n              loadedKeys.forEach(function (n) {\n                if (loaded[l][n] === undefined) loaded[l][n] = true;\n              });\n            }\n          });\n          q.done = true;\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n      if (this.readingCalls >= this.maxParallelReads) {\n        this.waitingReads.push({\n          lng: lng,\n          ns: ns,\n          fcName: fcName,\n          tried: tried,\n          wait: wait,\n          callback: callback\n        });\n        return;\n      }\n      this.readingCalls++;\n      var resolver = function resolver(err, data) {\n        _this3.readingCalls--;\n        if (_this3.waitingReads.length > 0) {\n          var next = _this3.waitingReads.shift();\n          _this3.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n        }\n        if (err && data && tried < _this3.maxRetries) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n        callback(err, data);\n      };\n      var fc = this.backend[fcName].bind(this.backend);\n      if (fc.length === 2) {\n        try {\n          var r = fc(lng, ns);\n          if (r && typeof r.then === 'function') {\n            r.then(function (data) {\n              return resolver(null, data);\n            })[\"catch\"](resolver);\n          } else {\n            resolver(null, r);\n          }\n        } catch (err) {\n          resolver(err);\n        }\n        return;\n      }\n      return fc(lng, ns, resolver);\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n      var clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : function () {};\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n      if (key === undefined || key === null || key === '') return;\n      if (this.backend && this.backend.create) {\n        var opts = _objectSpread$1(_objectSpread$1({}, options), {}, {\n          isUpdate: isUpdate\n        });\n        var fc = this.backend.create.bind(this.backend);\n        if (fc.length < 6) {\n          try {\n            var r;\n            if (fc.length === 5) {\n              r = fc(languages, namespace, key, fallbackValue, opts);\n            } else {\n              r = fc(languages, namespace, key, fallbackValue);\n            }\n            if (r && typeof r.then === 'function') {\n              r.then(function (data) {\n                return clb(null, data);\n              })[\"catch\"](clb);\n            } else {\n              clb(null, r);\n            }\n          } catch (err) {\n            clb(err);\n          }\n        } else {\n          fc(languages, namespace, key, fallbackValue, clb, opts);\n        }\n      }\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n  return options;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction noop() {}\nfunction bindMemberFunctions(inst) {\n  var mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(function (mem) {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n  var _super = _createSuper(I18n);\n  function I18n() {\n    var _this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n    _classCallCheck(this, I18n);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n    bindMemberFunctions(_assertThisInitialized(_this));\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n    return _this;\n  }\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n      if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n        if (typeof options.ns === 'string') {\n          options.defaultNS = options.ns;\n        } else if (options.ns.indexOf('translation') < 0) {\n          options.defaultNS = options.ns[0];\n        }\n      }\n      var defOpts = get();\n      this.options = _objectSpread(_objectSpread(_objectSpread({}, defOpts), this.options), transformOptions(options));\n      if (this.options.compatibilityAPI !== 'v1') {\n        this.options.interpolation = _objectSpread(_objectSpread({}, defOpts.interpolation), this.options.interpolation);\n      }\n      if (options.keySeparator !== undefined) {\n        this.options.userDefinedKeySeparator = options.keySeparator;\n      }\n      if (options.nsSeparator !== undefined) {\n        this.options.userDefinedNsSeparator = options.nsSeparator;\n      }\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n        var formatter;\n        if (this.modules.formatter) {\n          formatter = this.modules.formatter;\n        } else if (typeof Intl !== 'undefined') {\n          formatter = Formatter;\n        }\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n        if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n          s.formatter = createClassOnDemand(formatter);\n          s.formatter.init(s, this.options);\n          this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n        }\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n        }\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n          return _this2;\n        };\n      });\n      var deferred = defer();\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n          _this2.emit('initialized', _this2.options);\n          deferred.resolve(t);\n          callback(err, t);\n        };\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n        var append = function append(lng) {\n          if (!lng) return;\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n        this.services.backendConnector.load(toLoad, this.options.ns, function (e) {\n          if (!e && !_this3.resolvedLanguage && _this3.language) _this3.setResolvedLanguage(_this3.language);\n          usedCallback(e);\n        });\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n      if (module.type === 'formatter') {\n        this.modules.formatter = module;\n      }\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n      return this;\n    }\n  }, {\n    key: \"setResolvedLanguage\",\n    value: function setResolvedLanguage(l) {\n      if (!l || !this.languages) return;\n      if (['cimode', 'dev'].indexOf(l) > -1) return;\n      for (var li = 0; li < this.languages.length; li++) {\n        var lngInLngs = this.languages[li];\n        if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n        if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n          this.resolvedLanguage = lngInLngs;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n      var setLngProps = function setLngProps(l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        _this4.resolvedLanguage = undefined;\n        _this4.setResolvedLanguage(l);\n      };\n      var done = function done(err, l) {\n        if (l) {\n          setLngProps(l);\n          _this4.translator.changeLanguage(l);\n          _this4.isLanguageChangingTo = undefined;\n          _this4.emit('languageChanged', l);\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n        if (l) {\n          if (!_this4.language) {\n            setLngProps(l);\n          }\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector && _this4.services.languageDetector.cacheUserLanguage) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        if (this.services.languageDetector.detect.length === 0) {\n          this.services.languageDetector.detect().then(setLng);\n        } else {\n          this.services.languageDetector.detect(setLng);\n        }\n      } else {\n        setLng(lng);\n      }\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n      var fixedT = function fixedT(key, opts) {\n        var options;\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread({}, opts);\n        }\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey;\n        if (options.keyPrefix && Array.isArray(key)) {\n          resultKey = key.map(function (k) {\n            return \"\".concat(options.keyPrefix).concat(keySeparator).concat(k);\n          });\n        } else {\n          resultKey = options.keyPrefix ? \"\".concat(options.keyPrefix).concat(keySeparator).concat(key) : key;\n        }\n        return _this5.t(resultKey, options);\n      };\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n      var lng = this.resolvedLanguage || this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n        return loadState === -1 || loadState === 2;\n      };\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n      var deferred = defer();\n      if (!this.options.ns) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n      var languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());\n      return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var mergedOptions = _objectSpread(_objectSpread(_objectSpread({}, this.options), options), {\n        isClone: true\n      });\n      var clone = new I18n(mergedOptions);\n      if (options.debug !== undefined || options.prefix !== undefined) {\n        clone.logger = clone.logger.clone(options);\n      }\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages,\n        resolvedLanguage: this.resolvedLanguage\n      };\n    }\n  }]);\n  return I18n;\n}(EventEmitter);\n_defineProperty(I18n, \"createInstance\", function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var callback = arguments.length > 1 ? arguments[1] : undefined;\n  return new I18n(options, callback);\n});\nvar instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nvar createInstance = instance.createInstance;\nvar dir = instance.dir;\nvar init = instance.init;\nvar loadResources = instance.loadResources;\nvar reloadResources = instance.reloadResources;\nvar use = instance.use;\nvar changeLanguage = instance.changeLanguage;\nvar getFixedT = instance.getFixedT;\nvar t = instance.t;\nvar exists = instance.exists;\nvar setDefaultNamespace = instance.setDefaultNamespace;\nvar hasLoadedNamespace = instance.hasLoadedNamespace;\nvar loadNamespaces = instance.loadNamespaces;\nvar loadLanguages = instance.loadLanguages;\n\nexport { changeLanguage, createInstance, instance as default, dir, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { AutoPauseContext, } from '@project/common';\nimport { allTextSubtitleSettings, } from '@project/common/settings';\nimport { SubtitleCollection } from '@project/common/subtitle-collection';\nimport { computeStyleString, surroundingSubtitles } from '@project/common/util';\nimport i18n from 'i18next';\nimport { CachingElementOverlay, DefaultElementOverlay, OffsetAnchor, } from '../services/element-overlay';\nexport default class SubtitleController {\n    constructor(video, settings) {\n        this.autoPauseContext = new AutoPauseContext();\n        this.video = video;\n        this.settings = settings;\n        this._preCacheDom = false;\n        this._subtitles = [];\n        this.subtitleCollection = new SubtitleCollection([]);\n        this.showingSubtitles = [];\n        this.shouldRenderBottomOverlay = true;\n        this.shouldRenderTopOverlay = false;\n        this.unblurredSubtitleTracks = {};\n        this.disabledSubtitleTracks = {};\n        this.subtitleTrackAlignments = { 0: 'bottom' };\n        this._forceHideSubtitles = false;\n        this._displaySubtitles = true;\n        this.lastLoadedMessageTimestamp = 0;\n        this.lastOffsetChangeTimestamp = 0;\n        this.showingOffset = undefined;\n        this.surroundingSubtitlesCountRadius = 1;\n        this.surroundingSubtitlesTimeRadius = 5000;\n        this.showingLoadedMessage = false;\n        this.autoCopyCurrentSubtitle = false;\n        const { subtitlesElementOverlay, topSubtitlesElementOverlay, notificationElementOverlay } = this._overlays(this._preCacheDom);\n        this.bottomSubtitlesElementOverlay = subtitlesElementOverlay;\n        this.topSubtitlesElementOverlay = topSubtitlesElementOverlay;\n        this.notificationElementOverlay = notificationElementOverlay;\n    }\n    get subtitles() {\n        return this._subtitles;\n    }\n    set subtitles(subtitles) {\n        this._subtitles = subtitles;\n        this.subtitleCollection = new SubtitleCollection(subtitles, {\n            showingCheckRadiusMs: 150,\n            returnNextToShow: true,\n        });\n        this.autoPauseContext.clear();\n    }\n    get preCacheDom() {\n        return this._preCacheDom;\n    }\n    set preCacheDom(preCacheDom) {\n        if (this._preCacheDom === preCacheDom) {\n            return;\n        }\n        this._resetOverlays(preCacheDom);\n        this._preCacheDom = preCacheDom;\n    }\n    reset() {\n        this.subtitles = [];\n        this.subtitleFileNames = undefined;\n        this.cacheHtml();\n    }\n    cacheHtml() {\n        const htmls = this._buildSubtitlesHtml(this.subtitles);\n        if (this.shouldRenderBottomOverlay && this.bottomSubtitlesElementOverlay instanceof CachingElementOverlay) {\n            this.bottomSubtitlesElementOverlay.uncacheHtml();\n            for (const html of htmls) {\n                this.bottomSubtitlesElementOverlay.cacheHtml(html.key, html.html());\n            }\n        }\n        if (this.shouldRenderTopOverlay && this.topSubtitlesElementOverlay instanceof CachingElementOverlay) {\n            this.topSubtitlesElementOverlay.uncacheHtml();\n            for (const html of htmls) {\n                this.topSubtitlesElementOverlay.cacheHtml(html.key, html.html());\n            }\n        }\n    }\n    set bottomSubtitlePositionOffset(value) {\n        this.bottomSubtitlesElementOverlay.contentPositionOffset = value;\n    }\n    set topSubtitlePositionOffset(value) {\n        this.topSubtitlesElementOverlay.contentPositionOffset = value;\n    }\n    set subtitlesWidth(value) {\n        this.bottomSubtitlesElementOverlay.contentWidthPercentage = value;\n        this.topSubtitlesElementOverlay.contentWidthPercentage = value;\n    }\n    setSubtitleSettings(newSubtitleSettings) {\n        const styles = this._computeStyles(newSubtitleSettings);\n        const classes = this._computeClasses(newSubtitleSettings);\n        if (this.subtitleStyles === undefined ||\n            !this._arrayEquals(styles, this.subtitleStyles, (a, b) => a === b) ||\n            this.subtitleClasses === undefined ||\n            !this._arrayEquals(classes, this.subtitleClasses, (a, b) => a === b)) {\n            this.subtitleStyles = styles;\n            this.subtitleClasses = classes;\n            this.cacheHtml();\n        }\n        const newAlignments = allTextSubtitleSettings(newSubtitleSettings).map((s) => s.subtitleAlignment);\n        if (!this._arrayEquals(newAlignments, Object.values(this.subtitleTrackAlignments), (a, b) => a === b)) {\n            this.subtitleTrackAlignments = newAlignments;\n            this.shouldRenderBottomOverlay = Object.values(this.subtitleTrackAlignments).includes('bottom');\n            this.shouldRenderTopOverlay = Object.values(this.subtitleTrackAlignments).includes('top');\n            const { subtitleOverlayParams, topSubtitleOverlayParams, notificationOverlayParams } = this._elementOverlayParams();\n            this._applyElementOverlayParams(this.bottomSubtitlesElementOverlay, subtitleOverlayParams);\n            this._applyElementOverlayParams(this.topSubtitlesElementOverlay, topSubtitleOverlayParams);\n            this._applyElementOverlayParams(this.notificationElementOverlay, notificationOverlayParams);\n            this.bottomSubtitlesElementOverlay.hide();\n            this.topSubtitlesElementOverlay.hide();\n            this.notificationElementOverlay.hide();\n        }\n        this.unblurredSubtitleTracks = {};\n        this.subtitleSettings = newSubtitleSettings;\n    }\n    _computeStyles(settings) {\n        return allTextSubtitleSettings(settings).map((s) => computeStyleString(s));\n    }\n    _computeClasses(settings) {\n        return allTextSubtitleSettings(settings).map((s) => this._computeClassesForTrack(s));\n    }\n    _computeClassesForTrack(settings) {\n        return settings.subtitleBlur ? 'asbplayer-subtitles-blurred' : '';\n    }\n    _getSubtitleTrackAlignment(trackIndex) {\n        return this.subtitleTrackAlignments[trackIndex] || this.subtitleTrackAlignments[0];\n    }\n    _applyElementOverlayParams(overlay, params) {\n        overlay.offsetAnchor = params.offsetAnchor;\n        overlay.fullscreenContainerClassName = params.fullscreenContainerClassName;\n        overlay.fullscreenContentClassName = params.fullscreenContentClassName;\n        overlay.nonFullscreenContainerClassName = params.nonFullscreenContainerClassName;\n        overlay.nonFullscreenContentClassName = params.nonFullscreenContentClassName;\n    }\n    set displaySubtitles(displaySubtitles) {\n        this._displaySubtitles = displaySubtitles;\n        this.showingSubtitles = undefined;\n    }\n    set forceHideSubtitles(forceHideSubtitles) {\n        this._forceHideSubtitles = forceHideSubtitles;\n        this.showingSubtitles = undefined;\n    }\n    _resetOverlays(preCacheDom, skipCacheHtml = false) {\n        const { subtitlesElementOverlay, topSubtitlesElementOverlay, notificationElementOverlay } = this._overlays(preCacheDom);\n        this.notificationElementOverlay.dispose();\n        notificationElementOverlay.contentPositionOffset = this.notificationElementOverlay.contentPositionOffset;\n        notificationElementOverlay.contentWidthPercentage = this.notificationElementOverlay.contentWidthPercentage;\n        this.notificationElementOverlay = notificationElementOverlay;\n        if (this.shouldRenderBottomOverlay) {\n            this.bottomSubtitlesElementOverlay.dispose();\n            subtitlesElementOverlay.contentPositionOffset = this.bottomSubtitlesElementOverlay.contentPositionOffset;\n            subtitlesElementOverlay.contentWidthPercentage = this.bottomSubtitlesElementOverlay.contentWidthPercentage;\n            this.bottomSubtitlesElementOverlay = subtitlesElementOverlay;\n        }\n        if (this.shouldRenderTopOverlay) {\n            this.topSubtitlesElementOverlay.dispose();\n            topSubtitlesElementOverlay.contentPositionOffset = this.topSubtitlesElementOverlay.contentPositionOffset;\n            topSubtitlesElementOverlay.contentWidthPercentage = this.topSubtitlesElementOverlay.contentWidthPercentage;\n            this.topSubtitlesElementOverlay = topSubtitlesElementOverlay;\n        }\n        if (!skipCacheHtml) {\n            this.cacheHtml();\n        }\n    }\n    _overlays(preCacheDom) {\n        const { subtitleOverlayParams, topSubtitleOverlayParams, notificationOverlayParams } = this._elementOverlayParams();\n        if (preCacheDom) {\n            return {\n                subtitlesElementOverlay: new CachingElementOverlay(subtitleOverlayParams),\n                topSubtitlesElementOverlay: new CachingElementOverlay(topSubtitleOverlayParams),\n                notificationElementOverlay: new CachingElementOverlay(notificationOverlayParams),\n            };\n        }\n        return {\n            subtitlesElementOverlay: new DefaultElementOverlay(subtitleOverlayParams),\n            topSubtitlesElementOverlay: new DefaultElementOverlay(topSubtitleOverlayParams),\n            notificationElementOverlay: new DefaultElementOverlay(notificationOverlayParams),\n        };\n    }\n    _elementOverlayParams() {\n        const subtitleOverlayParams = {\n            targetElement: this.video,\n            nonFullscreenContainerClassName: 'asbplayer-subtitles-container-bottom',\n            nonFullscreenContentClassName: 'asbplayer-subtitles',\n            fullscreenContainerClassName: 'asbplayer-subtitles-container-bottom',\n            fullscreenContentClassName: 'asbplayer-fullscreen-subtitles',\n            offsetAnchor: OffsetAnchor.bottom,\n            contentWidthPercentage: -1,\n            onMouseOver: (event) => this.onMouseOver?.(event),\n        };\n        const topSubtitleOverlayParams = {\n            targetElement: this.video,\n            nonFullscreenContainerClassName: 'asbplayer-subtitles-container-top',\n            nonFullscreenContentClassName: 'asbplayer-subtitles',\n            fullscreenContainerClassName: 'asbplayer-subtitles-container-top',\n            fullscreenContentClassName: 'asbplayer-fullscreen-subtitles',\n            offsetAnchor: OffsetAnchor.top,\n            contentWidthPercentage: -1,\n            onMouseOver: (event) => this.onMouseOver?.(event),\n        };\n        const notificationOverlayParams = this._getSubtitleTrackAlignment(0) === 'bottom'\n            ? {\n                targetElement: this.video,\n                nonFullscreenContainerClassName: 'asbplayer-notification-container-top',\n                nonFullscreenContentClassName: 'asbplayer-notification',\n                fullscreenContainerClassName: 'asbplayer-notification-container-top',\n                fullscreenContentClassName: 'asbplayer-notification',\n                offsetAnchor: OffsetAnchor.top,\n                contentWidthPercentage: -1,\n                onMouseOver: (event) => this.onMouseOver?.(event),\n            }\n            : {\n                targetElement: this.video,\n                nonFullscreenContainerClassName: 'asbplayer-notification-container-bottom',\n                nonFullscreenContentClassName: 'asbplayer-notification',\n                fullscreenContainerClassName: 'asbplayer-notification-container-bottom',\n                fullscreenContentClassName: 'asbplayer-notification',\n                offsetAnchor: OffsetAnchor.bottom,\n                contentWidthPercentage: -1,\n                onMouseOver: (event) => this.onMouseOver?.(event),\n            };\n        return { subtitleOverlayParams, topSubtitleOverlayParams, notificationOverlayParams };\n    }\n    bind() {\n        this.subtitlesInterval = setInterval(() => {\n            if (this.lastLoadedMessageTimestamp > 0 && Date.now() - this.lastLoadedMessageTimestamp < 1000) {\n                return;\n            }\n            if (this.showingLoadedMessage) {\n                this._setSubtitlesHtml(this.bottomSubtitlesElementOverlay, [{ html: () => '' }]);\n                this._setSubtitlesHtml(this.topSubtitlesElementOverlay, [{ html: () => '' }]);\n                this.showingLoadedMessage = false;\n            }\n            if (this.subtitles.length === 0) {\n                return;\n            }\n            const showOffset = this.lastOffsetChangeTimestamp > 0 && Date.now() - this.lastOffsetChangeTimestamp < 1000;\n            const offset = showOffset ? this._computeOffset() : 0;\n            const now = 1000 * this.video.currentTime;\n            let showingSubtitles = [];\n            const slice = this.subtitleCollection.subtitlesAt(now);\n            showingSubtitles = slice.showing.filter((s) => this._trackEnabled(s)).sort((s1, s2) => s1.track - s2.track);\n            this.onSlice?.(slice);\n            if (slice.willStopShowing && this._trackEnabled(slice.willStopShowing)) {\n                this.autoPauseContext.willStopShowing(slice.willStopShowing);\n            }\n            if (slice.startedShowing && this._trackEnabled(slice.startedShowing)) {\n                this.autoPauseContext.startedShowing(slice.startedShowing);\n            }\n            if (slice.nextToShow && slice.nextToShow.length > 0) {\n                this.onNextToShow?.(slice.nextToShow[0]);\n            }\n            const subtitlesAreNew = this.showingSubtitles === undefined ||\n                !this._arrayEquals(showingSubtitles, this.showingSubtitles, (a, b) => a.index === b.index);\n            if (subtitlesAreNew) {\n                this.showingSubtitles = showingSubtitles;\n                this._autoCopyToClipboard(showingSubtitles);\n            }\n            const shouldRenderOffset = (showOffset && offset !== this.showingOffset) || (!showOffset && this.showingOffset !== undefined);\n            if ((!showOffset && !this._displaySubtitles) || this._forceHideSubtitles) {\n                this.bottomSubtitlesElementOverlay.hide();\n                this.topSubtitlesElementOverlay.hide();\n            }\n            else if (subtitlesAreNew || shouldRenderOffset) {\n                this._resetUnblurState();\n                if (this.shouldRenderBottomOverlay) {\n                    const showingSubtitlesBottom = showingSubtitles.filter((s) => this._getSubtitleTrackAlignment(s.track) === 'bottom');\n                    this._renderSubtitles(showingSubtitlesBottom, OffsetAnchor.bottom);\n                }\n                if (this.shouldRenderTopOverlay) {\n                    const showingSubtitlesTop = showingSubtitles.filter((s) => this._getSubtitleTrackAlignment(s.track) === 'top');\n                    this._renderSubtitles(showingSubtitlesTop, OffsetAnchor.top);\n                }\n                if (showOffset) {\n                    this._appendSubtitlesHtml(this._buildTextHtml(this._formatOffset(offset)));\n                    this.showingOffset = offset;\n                }\n                else {\n                    this.showingOffset = undefined;\n                }\n            }\n        }, 100);\n    }\n    _renderSubtitles(subtitles, offset) {\n        if (offset == OffsetAnchor.top) {\n            this._setSubtitlesHtml(this.topSubtitlesElementOverlay, this._buildSubtitlesHtml(subtitles));\n        }\n        else {\n            this._setSubtitlesHtml(this.bottomSubtitlesElementOverlay, this._buildSubtitlesHtml(subtitles));\n        }\n    }\n    _resetUnblurState() {\n        if (Object.keys(this.unblurredSubtitleTracks).length === 0) {\n            return;\n        }\n        for (const element of [\n            ...this.bottomSubtitlesElementOverlay.displayingElements(),\n            ...this.topSubtitlesElementOverlay.displayingElements(),\n        ]) {\n            const track = Number(element.dataset.track);\n            if (this.unblurredSubtitleTracks[track] === true) {\n                element.classList.add('asbplayer-subtitles-blurred');\n            }\n        }\n        this.unblurredSubtitleTracks = {};\n    }\n    _autoCopyToClipboard(subtitles) {\n        if (this.autoCopyCurrentSubtitle && subtitles.length > 0 && document.hasFocus()) {\n            const text = subtitles\n                .map((s) => s.text)\n                .filter((text) => text !== '')\n                .join('\\n');\n            if (text !== '') {\n                const command = {\n                    sender: 'asbplayer-video',\n                    message: {\n                        command: 'copy-to-clipboard',\n                        dataUrl: `data:,${encodeURIComponent(text)}`,\n                    },\n                    src: this.video.src,\n                };\n                chrome.runtime.sendMessage(command);\n            }\n        }\n    }\n    _trackEnabled(subtitle) {\n        return subtitle.track === undefined || !this.disabledSubtitleTracks[subtitle.track];\n    }\n    _buildSubtitlesHtml(subtitles) {\n        return subtitles.map((subtitle) => {\n            return {\n                html: () => {\n                    if (subtitle.textImage) {\n                        const className = this.subtitleClasses?.[subtitle.track] ?? '';\n                        const imageScale = ((this.subtitleSettings?.imageBasedSubtitleScaleFactor ?? 1) *\n                            this.video.getBoundingClientRect().width) /\n                            subtitle.textImage.screen.width;\n                        const width = imageScale * subtitle.textImage.image.width;\n                        return `\n                            <div data-track=\"${subtitle.track ?? 0}\" style=\"max-width:${width}px;margin:auto;\" class=\"${className}\"}\">\n                                <img\n                                    style=\"width:100%;\"\n                                    alt=\"subtitle\"\n                                    src=\"${subtitle.textImage.dataUrl}\"\n                                />\n                            </div>\n                        `;\n                    }\n                    else {\n                        return this._buildTextHtml(subtitle.text, subtitle.track);\n                    }\n                },\n                key: String(subtitle.index),\n            };\n        });\n    }\n    _buildTextHtml(text, track) {\n        return `<span data-track=\"${track ?? 0}\" class=\"${this._subtitleClasses(track)}\" style=\"${this._subtitleStyles(track)}\">${text}</span>`;\n    }\n    unbind() {\n        if (this.subtitlesInterval) {\n            clearInterval(this.subtitlesInterval);\n            this.subtitlesInterval = undefined;\n        }\n        if (this.notificationElementOverlayHideTimeout) {\n            clearTimeout(this.notificationElementOverlayHideTimeout);\n            this.notificationElementOverlayHideTimeout = undefined;\n        }\n        this.bottomSubtitlesElementOverlay.dispose();\n        this.topSubtitlesElementOverlay.dispose();\n        this.notificationElementOverlay.dispose();\n        this.onNextToShow = undefined;\n        this.onSlice = undefined;\n        this.onOffsetChange = undefined;\n        this.onMouseOver = undefined;\n    }\n    refresh() {\n        if (this.shouldRenderBottomOverlay)\n            this.bottomSubtitlesElementOverlay.refresh();\n        if (this.shouldRenderTopOverlay)\n            this.topSubtitlesElementOverlay.refresh();\n        this.notificationElementOverlay.refresh();\n    }\n    currentSubtitle() {\n        const now = 1000 * this.video.currentTime;\n        let subtitle = null;\n        let index = null;\n        for (let i = 0; i < this.subtitles.length; ++i) {\n            const s = this.subtitles[i];\n            if (now >= s.start &&\n                now < s.end &&\n                (typeof s.track === 'undefined' || !this.disabledSubtitleTracks[s.track])) {\n                subtitle = s;\n                index = i;\n                break;\n            }\n        }\n        if (subtitle === null || index === null) {\n            return [null, null];\n        }\n        return [\n            subtitle,\n            surroundingSubtitles(this.subtitles, index, this.surroundingSubtitlesCountRadius, this.surroundingSubtitlesTimeRadius),\n        ];\n    }\n    unblur(track) {\n        for (const element of [\n            ...this.bottomSubtitlesElementOverlay.displayingElements(),\n            ...this.topSubtitlesElementOverlay.displayingElements(),\n        ]) {\n            const elementTrack = Number(element.dataset.track);\n            if (track === elementTrack && element.classList.contains('asbplayer-subtitles-blurred')) {\n                this.unblurredSubtitleTracks[track] = true;\n                element.classList.remove('asbplayer-subtitles-blurred');\n            }\n        }\n    }\n    offset(offset, skipNotifyPlayer = false) {\n        if (!this.subtitles || this.subtitles.length === 0) {\n            return;\n        }\n        this.subtitles = this.subtitles.map((s) => ({\n            text: s.text,\n            textImage: s.textImage,\n            start: s.originalStart + offset,\n            originalStart: s.originalStart,\n            end: s.originalEnd + offset,\n            originalEnd: s.originalEnd,\n            track: s.track,\n            index: s.index,\n        }));\n        this.lastOffsetChangeTimestamp = Date.now();\n        if (!skipNotifyPlayer) {\n            const command = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'offset',\n                    value: offset,\n                },\n                src: this.video.src,\n            };\n            chrome.runtime.sendMessage(command);\n        }\n        this.onOffsetChange?.();\n        this.settings.getSingle('rememberSubtitleOffset').then((rememberSubtitleOffset) => {\n            if (rememberSubtitleOffset) {\n                this.settings.set({ lastSubtitleOffset: offset });\n            }\n        });\n    }\n    _computeOffset() {\n        if (!this.subtitles || this.subtitles.length === 0) {\n            return 0;\n        }\n        const s = this.subtitles[0];\n        return s.start - s.originalStart;\n    }\n    _formatOffset(offset) {\n        const roundedOffset = Math.floor(offset);\n        return roundedOffset >= 0 ? '+' + roundedOffset + ' ms' : roundedOffset + ' ms';\n    }\n    notification(locKey, replacements) {\n        const text = i18n.t(locKey, replacements ?? {});\n        this.notificationElementOverlay.setHtml([{ html: () => this._buildTextHtml(text) }]);\n        if (this.notificationElementOverlayHideTimeout) {\n            clearTimeout(this.notificationElementOverlayHideTimeout);\n        }\n        this.notificationElementOverlayHideTimeout = setTimeout(() => {\n            this.notificationElementOverlay.hide();\n            this.notificationElementOverlayHideTimeout = undefined;\n        }, 3000);\n    }\n    showLoadedMessage(nonEmptyTrackIndex) {\n        if (!this.subtitleFileNames) {\n            return;\n        }\n        let loadedMessage;\n        const nonEmptySubtitleFileNames = this._nonEmptySubtitleNames(nonEmptyTrackIndex);\n        if (nonEmptySubtitleFileNames.length === 0) {\n            loadedMessage = this.subtitleFileNames[0];\n        }\n        else {\n            loadedMessage = nonEmptySubtitleFileNames.join('<br>');\n        }\n        if (this.subtitles.length > 0) {\n            const offset = this.subtitles[0].start - this.subtitles[0].originalStart;\n            if (offset !== 0) {\n                loadedMessage += `<br>${this._formatOffset(offset)}`;\n            }\n        }\n        const overlay = this._getSubtitleTrackAlignment(0) === 'bottom'\n            ? this.bottomSubtitlesElementOverlay\n            : this.topSubtitlesElementOverlay;\n        this._setSubtitlesHtml(overlay, [\n            {\n                html: () => {\n                    return this._buildTextHtml(loadedMessage);\n                },\n            },\n        ]);\n        this.showingLoadedMessage = true;\n        this.lastLoadedMessageTimestamp = Date.now();\n    }\n    _nonEmptySubtitleNames(nonEmptyTrackIndex) {\n        if (nonEmptyTrackIndex.length === 0)\n            return [];\n        const nonEmptySubtitleFileNames = [];\n        for (let i = 0; i < nonEmptyTrackIndex.length; i++) {\n            nonEmptySubtitleFileNames.push(this.subtitleFileNames[nonEmptyTrackIndex[i]]);\n        }\n        return nonEmptySubtitleFileNames;\n    }\n    _setSubtitlesHtml(subtitlestOverlay, htmls) {\n        subtitlestOverlay.setHtml(htmls);\n    }\n    _appendSubtitlesHtml(html) {\n        if (this.shouldRenderBottomOverlay)\n            this.bottomSubtitlesElementOverlay.appendHtml(html);\n        if (this.shouldRenderTopOverlay)\n            this.topSubtitlesElementOverlay.appendHtml(html);\n    }\n    _subtitleClasses(track) {\n        if (track === undefined || this.subtitleClasses === undefined) {\n            return '';\n        }\n        return this.subtitleClasses[track] ?? this.subtitleClasses;\n    }\n    _subtitleStyles(track) {\n        if (this.subtitleStyles === undefined) {\n            return '';\n        }\n        if (track === undefined) {\n            return this.subtitleStyles[0] ?? '';\n        }\n        return this.subtitleStyles[track] ?? this.subtitleStyles[0] ?? '';\n    }\n    _arrayEquals(a, b, equals) {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; ++i) {\n            if (!equals(a[i], b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n","import pagesConfig from '../pages.json';\nexport function currentPageDelegate() {\n    const urlObj = new URL(window.location.href);\n    for (const page of pagesConfig.pages) {\n        const regex = new RegExp(page.host);\n        if (regex.test(urlObj.host)) {\n            return new PageDelegate(page, urlObj);\n        }\n    }\n    return undefined;\n}\nexport class PageDelegate {\n    constructor(config, url) {\n        this.config = config;\n        this.url = url;\n    }\n    loadScripts() {\n        if (this.config.script === undefined) {\n            return;\n        }\n        const s = document.createElement('script');\n        s.src = chrome.runtime.getURL(`pages/${this.config.script}`);\n        s.onload = () => s.remove();\n        (document.head || document.documentElement).appendChild(s);\n    }\n    shouldIgnore(element) {\n        if (this.config.ignore === undefined) {\n            return false;\n        }\n        if (this.config.ignore.class !== undefined && element.classList.contains(this.config.ignore.class)) {\n            return true;\n        }\n        if (this.config.ignore.style !== undefined) {\n            for (const key of Object.keys(this.config.ignore.style)) {\n                if (element.style[key] === this.config.ignore.style[key]) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    canAutoSync(element) {\n        return (this.config.autoSync !== undefined &&\n            this.config.autoSync.enabled &&\n            (this.config.autoSync.elementId === undefined || element.id === this.config.autoSync.elementId) &&\n            (this.config.autoSync.videoSrc === undefined || new RegExp(this.config.autoSync.videoSrc).test(element.src)));\n    }\n    isVideoPage() {\n        var hashMatch = true;\n        var pathMatch = true;\n        if (this.config.hash) {\n            hashMatch = new RegExp(this.config.hash).test(this.url.hash);\n        }\n        if (this.config.path) {\n            pathMatch = new RegExp(this.config.path).test(this.url.pathname);\n        }\n        return hashMatch && pathMatch;\n    }\n}\n","/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\nvar Stream = /*#__PURE__*/function () {\n  function Stream() {\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  var _proto = Stream.prototype;\n\n  _proto.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  }\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {boolean} if we could turn it off or not\n   */\n  ;\n\n  _proto.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener); // TODO: which is better?\n    // In Video.js we slice listener functions\n    // on trigger so that it does not mess up the order\n    // while we loop through.\n    //\n    // Here we slice on off so that the loop in trigger\n    // can continue using it's old reference to loop without\n    // messing up the order.\n\n    this.listeners[type] = this.listeners[type].slice(0);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  }\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {string} type the event name\n   */\n  ;\n\n  _proto.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      var length = callbacks.length;\n\n      for (var i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      var args = Array.prototype.slice.call(arguments, 1);\n      var _length = callbacks.length;\n\n      for (var _i = 0; _i < _length; ++_i) {\n        callbacks[_i].apply(this, args);\n      }\n    }\n  }\n  /**\n   * Destroys the stream and cleans up.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.listeners = {};\n  }\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n  ;\n\n  _proto.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n\nexport { Stream as default };","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import window from 'global/window';\n\nvar atob = function atob(s) {\n  return window.atob ? window.atob(s) : Buffer.from(s, 'base64').toString('binary');\n};\n\nexport default function decodeB64ToUint8Array(b64Text) {\n  var decodedString = atob(b64Text);\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}","/*! @name m3u8-parser @version 6.0.0 @license Apache-2.0 */\nimport Stream from '@videojs/vhs-utils/es/stream.js';\nimport _extends from '@babel/runtime/helpers/extends';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/es/decode-b64-to-uint8-array.js';\n\n/**\n * @file m3u8/line-stream.js\n */\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\nclass LineStream extends Stream {\n  constructor() {\n    super();\n    this.buffer = '';\n  }\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */\n\n\n  push(data) {\n    let nextNewline;\n    this.buffer += data;\n    nextNewline = this.buffer.indexOf('\\n');\n\n    for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n      this.trigger('data', this.buffer.substring(0, nextNewline));\n      this.buffer = this.buffer.substring(nextNewline + 1);\n    }\n  }\n\n}\n\nconst TAB = String.fromCharCode(0x09);\n\nconst parseByterange = function (byterangeString) {\n  // optionally match and capture 0+ digits before `@`\n  // optionally match and capture 0+ digits after `@`\n  const match = /([0-9.]*)?@?([0-9.]*)?/.exec(byterangeString || '');\n  const result = {};\n\n  if (match[1]) {\n    result.length = parseInt(match[1], 10);\n  }\n\n  if (match[2]) {\n    result.offset = parseInt(match[2], 10);\n  }\n\n  return result;\n};\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\n\n\nconst attributeSeparator = function () {\n  const key = '[^=]*';\n  const value = '\"[^\"]*\"|[^,]*';\n  const keyvalue = '(?:' + key + ')=(?:' + value + ')';\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */\n\n\nconst parseAttributes = function (attributes) {\n  const result = {};\n\n  if (!attributes) {\n    return result;\n  } // split the string using attributes as the separator\n\n\n  const attrs = attributes.split(attributeSeparator());\n  let i = attrs.length;\n  let attr;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    } // split the key and value\n\n\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n\n  return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\n\nclass ParseStream extends Stream {\n  constructor() {\n    super();\n    this.customParsers = [];\n    this.tagMappers = [];\n  }\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */\n\n\n  push(line) {\n    let match;\n    let event; // strip whitespace\n\n    line = line.trim();\n\n    if (line.length === 0) {\n      // ignore empty lines\n      return;\n    } // URIs\n\n\n    if (line[0] !== '#') {\n      this.trigger('data', {\n        type: 'uri',\n        uri: line\n      });\n      return;\n    } // map tags\n\n\n    const newLines = this.tagMappers.reduce((acc, mapper) => {\n      const mappedLine = mapper(line); // skip if unchanged\n\n      if (mappedLine === line) {\n        return acc;\n      }\n\n      return acc.concat([mappedLine]);\n    }, [line]);\n    newLines.forEach(newLine => {\n      for (let i = 0; i < this.customParsers.length; i++) {\n        if (this.customParsers[i].call(this, newLine)) {\n          return;\n        }\n      } // Comments\n\n\n      if (newLine.indexOf('#EXT') !== 0) {\n        this.trigger('data', {\n          type: 'comment',\n          text: newLine.slice(1)\n        });\n        return;\n      } // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n\n\n      newLine = newLine.replace('\\r', ''); // Tags\n\n      match = /^#EXTM3U/.exec(newLine);\n\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n        return;\n      }\n\n      match = /^#EXTINF:([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n\n        if (match[2]) {\n          event.title = match[2];\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-VERSION:([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA-SEQUENCE:(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-BYTERANGE:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = _extends(parseByterange(match[1]), {\n          type: 'tag',\n          tagType: 'byterange'\n        });\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-MAP:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          const attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n\n          if (attributes.BYTERANGE) {\n            event.byterange = parseByterange(attributes.BYTERANGE);\n          }\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-STREAM-INF:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            const split = event.attributes.RESOLUTION.split('x');\n            const resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n\n            event.attributes.RESOLUTION = resolution;\n          }\n\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n\n          if (event.attributes['FRAME-RATE']) {\n            event.attributes['FRAME-RATE'] = parseFloat(event.attributes['FRAME-RATE']);\n          }\n\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-ENDLIST/.exec(newLine);\n\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n        return;\n      }\n\n      match = /^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-KEY:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-START:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'start'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          event.attributes['TIME-OFFSET'] = parseFloat(event.attributes['TIME-OFFSET']);\n          event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-CUE-IN:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-SKIP:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'skip'\n        };\n        event.attributes = parseAttributes(match[1]);\n\n        if (event.attributes.hasOwnProperty('SKIPPED-SEGMENTS')) {\n          event.attributes['SKIPPED-SEGMENTS'] = parseInt(event.attributes['SKIPPED-SEGMENTS'], 10);\n        }\n\n        if (event.attributes.hasOwnProperty('RECENTLY-REMOVED-DATERANGES')) {\n          event.attributes['RECENTLY-REMOVED-DATERANGES'] = event.attributes['RECENTLY-REMOVED-DATERANGES'].split(TAB);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-PART:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['DURATION'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['INDEPENDENT', 'GAP'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n\n        if (event.attributes.hasOwnProperty('BYTERANGE')) {\n          event.attributes.byterange = parseByterange(event.attributes.BYTERANGE);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'server-control'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['CAN-SKIP-UNTIL', 'PART-HOLD-BACK', 'HOLD-BACK'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['CAN-SKIP-DATERANGES', 'CAN-BLOCK-RELOAD'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-PART-INF:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part-inf'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['PART-TARGET'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'preload-hint'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['BYTERANGE-START', 'BYTERANGE-LENGTH'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n            const subkey = key === 'BYTERANGE-LENGTH' ? 'length' : 'offset';\n            event.attributes.byterange = event.attributes.byterange || {};\n            event.attributes.byterange[subkey] = event.attributes[key]; // only keep the parsed byterange object.\n\n            delete event.attributes[key];\n          }\n        });\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'rendition-report'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['LAST-MSN', 'LAST-PART'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n          }\n        });\n        this.trigger('data', event);\n        return;\n      } // unknown tag type\n\n\n      this.trigger('data', {\n        type: 'tag',\n        data: newLine.slice(4)\n      });\n    });\n  }\n  /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n\n\n  addParser({\n    expression,\n    customType,\n    dataParser,\n    segment\n  }) {\n    if (typeof dataParser !== 'function') {\n      dataParser = line => line;\n    }\n\n    this.customParsers.push(line => {\n      const match = expression.exec(line);\n\n      if (match) {\n        this.trigger('data', {\n          type: 'custom',\n          data: dataParser(line),\n          customType,\n          segment\n        });\n        return true;\n      }\n    });\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n\n\n  addTagMapper({\n    expression,\n    map\n  }) {\n    const mapFn = line => {\n      if (expression.test(line)) {\n        return map(line);\n      }\n\n      return line;\n    };\n\n    this.tagMappers.push(mapFn);\n  }\n\n}\n\nconst camelCase = str => str.toLowerCase().replace(/-(\\w)/g, a => a[1].toUpperCase());\n\nconst camelCaseKeys = function (attributes) {\n  const result = {};\n  Object.keys(attributes).forEach(function (key) {\n    result[camelCase(key)] = attributes[key];\n  });\n  return result;\n}; // set SERVER-CONTROL hold back based upon targetDuration and partTargetDuration\n// we need this helper because defaults are based upon targetDuration and\n// partTargetDuration being set, but they may not be if SERVER-CONTROL appears before\n// target durations are set.\n\n\nconst setHoldBack = function (manifest) {\n  const {\n    serverControl,\n    targetDuration,\n    partTargetDuration\n  } = manifest;\n\n  if (!serverControl) {\n    return;\n  }\n\n  const tag = '#EXT-X-SERVER-CONTROL';\n  const hb = 'holdBack';\n  const phb = 'partHoldBack';\n  const minTargetDuration = targetDuration && targetDuration * 3;\n  const minPartDuration = partTargetDuration && partTargetDuration * 2;\n\n  if (targetDuration && !serverControl.hasOwnProperty(hb)) {\n    serverControl[hb] = minTargetDuration;\n    this.trigger('info', {\n      message: `${tag} defaulting HOLD-BACK to targetDuration * 3 (${minTargetDuration}).`\n    });\n  }\n\n  if (minTargetDuration && serverControl[hb] < minTargetDuration) {\n    this.trigger('warn', {\n      message: `${tag} clamping HOLD-BACK (${serverControl[hb]}) to targetDuration * 3 (${minTargetDuration})`\n    });\n    serverControl[hb] = minTargetDuration;\n  } // default no part hold back to part target duration * 3\n\n\n  if (partTargetDuration && !serverControl.hasOwnProperty(phb)) {\n    serverControl[phb] = partTargetDuration * 3;\n    this.trigger('info', {\n      message: `${tag} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${serverControl[phb]}).`\n    });\n  } // if part hold back is too small default it to part target duration * 2\n\n\n  if (partTargetDuration && serverControl[phb] < minPartDuration) {\n    this.trigger('warn', {\n      message: `${tag} clamping PART-HOLD-BACK (${serverControl[phb]}) to partTargetDuration * 2 (${minPartDuration}).`\n    });\n    serverControl[phb] = minPartDuration;\n  }\n};\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\n\nclass Parser extends Stream {\n  constructor() {\n    super();\n    this.lineStream = new LineStream();\n    this.parseStream = new ParseStream();\n    this.lineStream.pipe(this.parseStream);\n    /* eslint-disable consistent-this */\n\n    const self = this;\n    /* eslint-enable consistent-this */\n\n    const uris = [];\n    let currentUri = {}; // if specified, the active EXT-X-MAP definition\n\n    let currentMap; // if specified, the active decryption key\n\n    let key;\n    let hasParts = false;\n\n    const noop = function () {};\n\n    const defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n    // used in MPDs with Widevine encrypted streams.\n\n    const widevineUuid = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'; // group segments into numbered timelines delineated by discontinuities\n\n    let currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n\n    this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    }; // keep track of the last seen segment's byte range end, as segments are not required\n    // to provide the offset, in which case it defaults to the next byte after the\n    // previous segment\n\n    let lastByterangeEnd = 0; // keep track of the last seen part's byte range end.\n\n    let lastPartByterangeEnd = 0;\n    this.on('end', () => {\n      // only add preloadSegment if we don't yet have a uri for it.\n      // and we actually have parts/preloadHints\n      if (currentUri.uri || !currentUri.parts && !currentUri.preloadHints) {\n        return;\n      }\n\n      if (!currentUri.map && currentMap) {\n        currentUri.map = currentMap;\n      }\n\n      if (!currentUri.key && key) {\n        currentUri.key = key;\n      }\n\n      if (!currentUri.timeline && typeof currentTimeline === 'number') {\n        currentUri.timeline = currentTimeline;\n      }\n\n      this.manifest.preloadSegment = currentUri;\n    }); // update the manifest with the m3u8 entry from the parse stream\n\n    this.parseStream.on('data', function (entry) {\n      let mediaGroup;\n      let rendition;\n      ({\n        tag() {\n          // switch based on the tag type\n          (({\n            version() {\n              if (entry.version) {\n                this.manifest.version = entry.version;\n              }\n            },\n\n            'allow-cache'() {\n              this.manifest.allowCache = entry.allowed;\n\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n\n            byterange() {\n              const byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  /*\n                   * From the latest spec (as of this writing):\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.2.2\n                   *\n                   * Same text since EXT-X-BYTERANGE's introduction in draft 7:\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-07#section-3.3.1)\n                   *\n                   * \"If o [offset] is not present, the sub-range begins at the next byte\n                   * following the sub-range of the previous media segment.\"\n                   */\n                  entry.offset = lastByterangeEnd;\n                }\n              }\n\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n\n              lastByterangeEnd = byterange.offset + byterange.length;\n            },\n\n            endlist() {\n              this.manifest.endList = true;\n            },\n\n            inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n\n            key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              } // clear the active encryption key\n\n\n              if (entry.attributes.METHOD === 'NONE') {\n                key = null;\n                return;\n              }\n\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              }\n\n              if (entry.attributes.KEYFORMAT === 'com.apple.streamingkeydelivery') {\n                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n\n                this.manifest.contentProtection['com.apple.fps.1_0'] = {\n                  attributes: entry.attributes\n                };\n                return;\n              }\n\n              if (entry.attributes.KEYFORMAT === 'com.microsoft.playready') {\n                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n\n                this.manifest.contentProtection['com.microsoft.playready'] = {\n                  uri: entry.attributes.URI\n                };\n                return;\n              } // check if the content is encrypted for Widevine\n              // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n\n\n              if (entry.attributes.KEYFORMAT === widevineUuid) {\n                const VALID_METHODS = ['SAMPLE-AES', 'SAMPLE-AES-CTR', 'SAMPLE-AES-CENC'];\n\n                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                  this.trigger('warn', {\n                    message: 'invalid key method provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (entry.attributes.METHOD === 'SAMPLE-AES-CENC') {\n                  this.trigger('warn', {\n                    message: 'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'\n                  });\n                }\n\n                if (entry.attributes.URI.substring(0, 23) !== 'data:text/plain;base64,') {\n                  this.trigger('warn', {\n                    message: 'invalid key URI provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === '0x')) {\n                  this.trigger('warn', {\n                    message: 'invalid key ID provided for Widevine'\n                  });\n                  return;\n                } // if Widevine key attributes are valid, store them as `contentProtection`\n                // on the manifest to emulate Widevine tag structure in a DASH mpd\n\n\n                this.manifest.contentProtection = this.manifest.contentProtection || {};\n                this.manifest.contentProtection['com.widevine.alpha'] = {\n                  attributes: {\n                    schemeIdUri: entry.attributes.KEYFORMAT,\n                    // remove '0x' from the key id string\n                    keyId: entry.attributes.KEYID.substring(2)\n                  },\n                  // decode the base64-encoded PSSH box\n                  pssh: decodeB64ToUint8Array(entry.attributes.URI.split(',')[1])\n                };\n                return;\n              }\n\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              } // setup an encryption key for upcoming segments\n\n\n              key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                key.iv = entry.attributes.IV;\n              }\n            },\n\n            'media-sequence'() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.mediaSequence = entry.number;\n            },\n\n            'discontinuity-sequence'() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n\n            'playlist-type'() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n\n              this.manifest.playlistType = entry.playlistType;\n            },\n\n            map() {\n              currentMap = {};\n\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n\n              if (key) {\n                currentMap.key = key;\n              }\n            },\n\n            'stream-inf'() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n\n              _extends(currentUri.attributes, entry.attributes);\n            },\n\n            media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              } // find the media group, creating defaults as necessary\n\n\n              const mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']]; // collect the rendition metadata\n\n              rendition = {\n                default: /yes/i.test(entry.attributes.DEFAULT)\n              };\n\n              if (rendition.default) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              } // insert the new rendition\n\n\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n\n            discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n\n            'program-date-time'() {\n              if (typeof this.manifest.dateTimeString === 'undefined') {\n                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                // to the manifest object\n                // TODO: Consider removing this in future major version\n                this.manifest.dateTimeString = entry.dateTimeString;\n                this.manifest.dateTimeObject = entry.dateTimeObject;\n              }\n\n              currentUri.dateTimeString = entry.dateTimeString;\n              currentUri.dateTimeObject = entry.dateTimeObject;\n            },\n\n            targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.targetDuration = entry.duration;\n              setHoldBack.call(this, this.manifest);\n            },\n\n            start() {\n              if (!entry.attributes || isNaN(entry.attributes['TIME-OFFSET'])) {\n                this.trigger('warn', {\n                  message: 'ignoring start declaration without appropriate attribute list'\n                });\n                return;\n              }\n\n              this.manifest.start = {\n                timeOffset: entry.attributes['TIME-OFFSET'],\n                precise: entry.attributes.PRECISE\n              };\n            },\n\n            'cue-out'() {\n              currentUri.cueOut = entry.data;\n            },\n\n            'cue-out-cont'() {\n              currentUri.cueOutCont = entry.data;\n            },\n\n            'cue-in'() {\n              currentUri.cueIn = entry.data;\n            },\n\n            'skip'() {\n              this.manifest.skip = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-SKIP', entry.attributes, ['SKIPPED-SEGMENTS']);\n            },\n\n            'part'() {\n              hasParts = true; // parts are always specifed before a segment\n\n              const segmentIndex = this.manifest.segments.length;\n              const part = camelCaseKeys(entry.attributes);\n              currentUri.parts = currentUri.parts || [];\n              currentUri.parts.push(part);\n\n              if (part.byterange) {\n                if (!part.byterange.hasOwnProperty('offset')) {\n                  part.byterange.offset = lastPartByterangeEnd;\n                }\n\n                lastPartByterangeEnd = part.byterange.offset + part.byterange.length;\n              }\n\n              const partIndex = currentUri.parts.length - 1;\n              this.warnOnMissingAttributes_(`#EXT-X-PART #${partIndex} for segment #${segmentIndex}`, entry.attributes, ['URI', 'DURATION']);\n\n              if (this.manifest.renditionReports) {\n                this.manifest.renditionReports.forEach((r, i) => {\n                  if (!r.hasOwnProperty('lastPart')) {\n                    this.trigger('warn', {\n                      message: `#EXT-X-RENDITION-REPORT #${i} lacks required attribute(s): LAST-PART`\n                    });\n                  }\n                });\n              }\n            },\n\n            'server-control'() {\n              const attrs = this.manifest.serverControl = camelCaseKeys(entry.attributes);\n\n              if (!attrs.hasOwnProperty('canBlockReload')) {\n                attrs.canBlockReload = false;\n                this.trigger('info', {\n                  message: '#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false'\n                });\n              }\n\n              setHoldBack.call(this, this.manifest);\n\n              if (attrs.canSkipDateranges && !attrs.hasOwnProperty('canSkipUntil')) {\n                this.trigger('warn', {\n                  message: '#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set'\n                });\n              }\n            },\n\n            'preload-hint'() {\n              // parts are always specifed before a segment\n              const segmentIndex = this.manifest.segments.length;\n              const hint = camelCaseKeys(entry.attributes);\n              const isPart = hint.type && hint.type === 'PART';\n              currentUri.preloadHints = currentUri.preloadHints || [];\n              currentUri.preloadHints.push(hint);\n\n              if (hint.byterange) {\n                if (!hint.byterange.hasOwnProperty('offset')) {\n                  // use last part byterange end or zero if not a part.\n                  hint.byterange.offset = isPart ? lastPartByterangeEnd : 0;\n\n                  if (isPart) {\n                    lastPartByterangeEnd = hint.byterange.offset + hint.byterange.length;\n                  }\n                }\n              }\n\n              const index = currentUri.preloadHints.length - 1;\n              this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${index} for segment #${segmentIndex}`, entry.attributes, ['TYPE', 'URI']);\n\n              if (!hint.type) {\n                return;\n              } // search through all preload hints except for the current one for\n              // a duplicate type.\n\n\n              for (let i = 0; i < currentUri.preloadHints.length - 1; i++) {\n                const otherHint = currentUri.preloadHints[i];\n\n                if (!otherHint.type) {\n                  continue;\n                }\n\n                if (otherHint.type === hint.type) {\n                  this.trigger('warn', {\n                    message: `#EXT-X-PRELOAD-HINT #${index} for segment #${segmentIndex} has the same TYPE ${hint.type} as preload hint #${i}`\n                  });\n                }\n              }\n            },\n\n            'rendition-report'() {\n              const report = camelCaseKeys(entry.attributes);\n              this.manifest.renditionReports = this.manifest.renditionReports || [];\n              this.manifest.renditionReports.push(report);\n              const index = this.manifest.renditionReports.length - 1;\n              const required = ['LAST-MSN', 'URI'];\n\n              if (hasParts) {\n                required.push('LAST-PART');\n              }\n\n              this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${index}`, entry.attributes, required);\n            },\n\n            'part-inf'() {\n              this.manifest.partInf = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-PART-INF', entry.attributes, ['PART-TARGET']);\n\n              if (this.manifest.partInf.partTarget) {\n                this.manifest.partTargetDuration = this.manifest.partInf.partTarget;\n              }\n\n              setHoldBack.call(this, this.manifest);\n            }\n\n          })[entry.tagType] || noop).call(self);\n        },\n\n        uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri); // if no explicit duration was declared, use the target duration\n\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          } // annotate with encryption information, if necessary\n\n\n          if (key) {\n            currentUri.key = key;\n          }\n\n          currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n\n          if (currentMap) {\n            currentUri.map = currentMap;\n          } // reset the last byterange end as it needs to be 0 between parts\n\n\n          lastPartByterangeEnd = 0; // prepare for the next URI\n\n          currentUri = {};\n        },\n\n        comment() {// comments are not important for playback\n        },\n\n        custom() {\n          // if this is segment-level data attach the output to the segment\n          if (entry.segment) {\n            currentUri.custom = currentUri.custom || {};\n            currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n          } else {\n            this.manifest.custom = this.manifest.custom || {};\n            this.manifest.custom[entry.customType] = entry.data;\n          }\n        }\n\n      })[entry.type].call(self);\n    });\n  }\n\n  warnOnMissingAttributes_(identifier, attributes, required) {\n    const missing = [];\n    required.forEach(function (key) {\n      if (!attributes.hasOwnProperty(key)) {\n        missing.push(key);\n      }\n    });\n\n    if (missing.length) {\n      this.trigger('warn', {\n        message: `${identifier} lacks required attribute(s): ${missing.join(', ')}`\n      });\n    }\n  }\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */\n\n\n  push(chunk) {\n    this.lineStream.push(chunk);\n  }\n  /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */\n\n\n  end() {\n    // flush any buffered input\n    this.lineStream.push('\\n');\n    this.trigger('end');\n  }\n  /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n\n\n  addParser(options) {\n    this.parseStream.addParser(options);\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n\n\n  addTagMapper(options) {\n    this.parseStream.addTagMapper(options);\n  }\n\n}\n\nexport { LineStream, ParseStream, Parser };\n","import { VideoDataUiOpenReason, } from '@project/common';\nimport { base64ToBlob, bufferToBase64 } from '@project/common/base64';\nimport { currentPageDelegate } from '../services/pages';\nimport { Parser as m3U8Parser } from 'm3u8-parser';\nimport UiFrame from '../services/ui-frame';\nimport { fetchLocalization } from '../services/localization-fetcher';\nimport i18n from 'i18next';\nasync function html(lang) {\n    return `<!DOCTYPE html>\n            <html lang=\"en\">\n            <head>\n                <meta charset=\"utf-8\" />\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n                <title>asbplayer - Video Data Sync</title>\n                <style>\n                    @import url(${chrome.runtime.getURL('./assets/fonts.css')});\n                </style>\n            </head>\n            <body>\n                <div id=\"root\" style=\"width:100%;height:100vh;\"></div>\n                <script type=\"application/json\" id=\"loc\">${JSON.stringify(await fetchLocalization(lang))}</script>\n                <script src=\"${chrome.runtime.getURL('./video-data-sync-ui.js')}\"></script>\n            </body>\n            </html>`;\n}\nconst fetchDataForLanguageOnDemand = (language) => {\n    return new Promise((resolve, reject) => {\n        const listener = (event) => {\n            const data = event.detail;\n            resolve(data);\n            document.removeEventListener('asbplayer-synced-language-data', listener, false);\n        };\n        document.addEventListener('asbplayer-synced-language-data', listener, false);\n        document.dispatchEvent(new CustomEvent('asbplayer-get-synced-language-data', { detail: language }));\n    });\n};\nexport default class VideoDataSyncController {\n    constructor(context, settings) {\n        this._autoSyncAttempted = false;\n        this._context = context;\n        this._settings = settings;\n        this._autoSync = false;\n        this._lastLanguagesSynced = {};\n        this._emptySubtitle = {\n            id: '-',\n            language: '-',\n            url: '-',\n            label: i18n.t('extension.videoDataSync.emptySubtitleTrack'),\n            extension: 'srt',\n        };\n        this._domain = new URL(window.location.href).host;\n        this._frame = new UiFrame(html);\n    }\n    get lastLanguagesSynced() {\n        return this._lastLanguagesSynced[this._domain] ?? [];\n    }\n    set lastLanguagesSynced(value) {\n        this._lastLanguagesSynced[this._domain] = value;\n    }\n    unbind() {\n        if (this._dataReceivedListener) {\n            document.removeEventListener('asbplayer-synced-data', this._dataReceivedListener, false);\n        }\n        this._dataReceivedListener = undefined;\n        this._syncedData = undefined;\n    }\n    updateSettings({ streamingAutoSync, streamingLastLanguagesSynced }) {\n        this._autoSync = streamingAutoSync;\n        this._lastLanguagesSynced = streamingLastLanguagesSynced;\n        if (this._frame.clientIfLoaded !== undefined) {\n            this._context.settings.getSingle('themeType').then((themeType) => {\n                const profilesPromise = this._context.settings.profiles();\n                const activeProfilePromise = this._context.settings.activeProfile();\n                Promise.all([profilesPromise, activeProfilePromise]).then(([profiles, activeProfile]) => {\n                    this._frame.clientIfLoaded?.updateState({\n                        settings: {\n                            themeType,\n                            profiles,\n                            activeProfile: activeProfile?.name,\n                        },\n                    });\n                });\n            });\n        }\n    }\n    requestSubtitles() {\n        if (!this._context.hasPageScript || !currentPageDelegate()?.isVideoPage()) {\n            return;\n        }\n        this._syncedData = undefined;\n        this._autoSyncAttempted = false;\n        if (!this._dataReceivedListener) {\n            this._dataReceivedListener = (event) => {\n                const data = event.detail;\n                this._setSyncedData(data);\n            };\n            document.addEventListener('asbplayer-synced-data', this._dataReceivedListener, false);\n        }\n        document.dispatchEvent(new CustomEvent('asbplayer-get-synced-data'));\n    }\n    async show({ reason, fromAsbplayerId }) {\n        const client = await this._client();\n        const additionalFields = {\n            open: true,\n            openReason: reason,\n        };\n        if (fromAsbplayerId !== undefined) {\n            additionalFields.openedFromAsbplayerId = fromAsbplayerId;\n        }\n        const model = await this._buildModel(additionalFields);\n        this._prepareShow();\n        client.updateState(model);\n    }\n    async _buildModel(additionalFields) {\n        const subtitleTrackChoices = this._syncedData?.subtitles ?? [];\n        const subs = this._matchLastSyncedWithAvailableTracks();\n        const autoSelectedTracks = subs.autoSelectedTracks;\n        const autoSelectedTrackIds = autoSelectedTracks.map((subtitle) => subtitle.id || '-');\n        const defaultCheckboxState = subs.completeMatch;\n        const themeType = await this._context.settings.getSingle('themeType');\n        const profilesPromise = this._context.settings.profiles();\n        const activeProfilePromise = this._context.settings.activeProfile();\n        return this._syncedData\n            ? {\n                isLoading: this._syncedData.subtitles === undefined,\n                suggestedName: this._syncedData.basename,\n                selectedSubtitle: autoSelectedTrackIds,\n                subtitles: subtitleTrackChoices,\n                error: this._syncedData.error,\n                defaultCheckboxState: defaultCheckboxState,\n                openedFromAsbplayerId: '',\n                settings: {\n                    themeType: themeType,\n                    profiles: await profilesPromise,\n                    activeProfile: (await activeProfilePromise)?.name,\n                },\n                ...additionalFields,\n            }\n            : {\n                isLoading: this._context.hasPageScript,\n                suggestedName: document.title,\n                selectedSubtitle: autoSelectedTrackIds,\n                error: '',\n                showSubSelect: true,\n                subtitles: subtitleTrackChoices,\n                defaultCheckboxState: defaultCheckboxState,\n                openedFromAsbplayerId: '',\n                settings: {\n                    themeType: themeType,\n                    profiles: await profilesPromise,\n                    activeProfile: (await activeProfilePromise)?.name,\n                },\n                ...additionalFields,\n            };\n    }\n    _matchLastSyncedWithAvailableTracks() {\n        const subtitleTrackChoices = this._syncedData?.subtitles ?? [];\n        let tracks = {\n            autoSelectedTracks: [this._emptySubtitle, this._emptySubtitle, this._emptySubtitle],\n            completeMatch: false,\n        };\n        const emptyChoice = this.lastLanguagesSynced.some((lang) => lang !== '-') === undefined;\n        if (!subtitleTrackChoices.length && emptyChoice) {\n            tracks.completeMatch = true;\n        }\n        else {\n            let matches = 0;\n            for (let i = 0; i < this.lastLanguagesSynced.length; i++) {\n                const language = this.lastLanguagesSynced[i];\n                for (let j = 0; j < subtitleTrackChoices.length; j++) {\n                    if (language === '-') {\n                        matches++;\n                        break;\n                    }\n                    else if (language === subtitleTrackChoices[j].language) {\n                        tracks.autoSelectedTracks[i] = subtitleTrackChoices[j];\n                        matches++;\n                        break;\n                    }\n                }\n            }\n            if (matches === this.lastLanguagesSynced.length) {\n                tracks.completeMatch = true;\n            }\n        }\n        return tracks;\n    }\n    _defaultVideoName(basename, subtitleTrack) {\n        if (subtitleTrack.url === '-') {\n            return basename ?? '';\n        }\n        if (basename) {\n            return `${basename} - ${subtitleTrack.label}`;\n        }\n        return subtitleTrack.label;\n    }\n    async _setSyncedData(data) {\n        this._syncedData = data;\n        if (this._syncedData?.subtitles !== undefined && this._canAutoSync()) {\n            if (!this._autoSyncAttempted) {\n                this._autoSyncAttempted = true;\n                const subs = this._matchLastSyncedWithAvailableTracks();\n                if (subs.completeMatch) {\n                    const autoSelectedTracks = subs.autoSelectedTracks;\n                    await this._syncData(autoSelectedTracks);\n                    if (!this._frame.hidden) {\n                        this._hideAndResume();\n                    }\n                }\n                else {\n                    await this.show({ reason: VideoDataUiOpenReason.failedToAutoLoadPreferredTrack });\n                }\n            }\n        }\n        else if (this._frame.clientIfLoaded !== undefined) {\n            this._frame.clientIfLoaded.updateState(await this._buildModel({}));\n        }\n    }\n    _canAutoSync() {\n        const page = currentPageDelegate();\n        if (page === undefined) {\n            return this._autoSync ?? false;\n        }\n        return this._autoSync === true && page.canAutoSync(this._context.video);\n    }\n    async _client() {\n        this._frame.language = await this._settings.getSingle('language');\n        const isNewClient = await this._frame.bind();\n        const client = await this._frame.client();\n        if (isNewClient) {\n            client.onMessage(async (message) => {\n                if ('openSettings' === message.command) {\n                    const openSettingsCommand = {\n                        sender: 'asbplayer-video',\n                        message: {\n                            command: 'open-asbplayer-settings',\n                        },\n                        src: this._context.video.src,\n                    };\n                    chrome.runtime.sendMessage(openSettingsCommand);\n                    return;\n                }\n                if ('activeProfile' === message.command) {\n                    const activeProfileMessage = message;\n                    await this._context.settings.setActiveProfile(activeProfileMessage.profile);\n                    const settingsUpdatedCommand = {\n                        sender: 'asbplayer-video',\n                        message: {\n                            command: 'settings-updated',\n                        },\n                        src: this._context.video.src,\n                    };\n                    chrome.runtime.sendMessage(settingsUpdatedCommand);\n                    return;\n                }\n                let dataWasSynced = true;\n                if ('confirm' === message.command) {\n                    const confirmMessage = message;\n                    if (confirmMessage.shouldRememberTrackChoices) {\n                        this.lastLanguagesSynced = confirmMessage.data\n                            .map((track) => track.language)\n                            .filter((language) => language !== undefined);\n                        await this._context.settings\n                            .set({ streamingLastLanguagesSynced: this._lastLanguagesSynced })\n                            .catch(() => { });\n                    }\n                    const data = confirmMessage.data;\n                    dataWasSynced = await this._syncDataArray(data, confirmMessage.syncWithAsbplayerId);\n                }\n                else if ('openFile' === message.command) {\n                    const openFileMessage = message;\n                    const subtitles = openFileMessage.subtitles;\n                    try {\n                        await this._syncSubtitles(subtitles, false);\n                        dataWasSynced = true;\n                    }\n                    catch (e) {\n                        if (e instanceof Error) {\n                            await this._reportError(e.message);\n                        }\n                    }\n                }\n                if (dataWasSynced) {\n                    this._hideAndResume();\n                }\n            });\n        }\n        this._frame.show();\n        return client;\n    }\n    _prepareShow() {\n        this._wasPaused = this._wasPaused ?? this._context.video.paused;\n        this._context.pause();\n        if (document.fullscreenElement) {\n            this._fullscreenElement = document.fullscreenElement;\n            document.exitFullscreen();\n        }\n        if (document.activeElement) {\n            this._activeElement = document.activeElement;\n        }\n        this._context.keyBindings.unbind();\n        this._context.subtitleController.forceHideSubtitles = true;\n        this._context.mobileVideoOverlayController.forceHide = true;\n    }\n    _hideAndResume() {\n        this._context.keyBindings.bind(this._context);\n        this._context.subtitleController.forceHideSubtitles = false;\n        this._context.mobileVideoOverlayController.forceHide = false;\n        this._frame?.hide();\n        if (this._fullscreenElement) {\n            this._fullscreenElement.requestFullscreen();\n            this._fullscreenElement = undefined;\n        }\n        if (this._activeElement) {\n            if (typeof this._activeElement.focus === 'function') {\n                this._activeElement.focus();\n            }\n            this._activeElement = undefined;\n        }\n        else {\n            window.focus();\n        }\n        if (!this._wasPaused) {\n            this._context.play();\n        }\n        this._wasPaused = undefined;\n    }\n    async _syncData(data) {\n        try {\n            let subtitles = [];\n            for (let i = 0; i < data.length; i++) {\n                const { extension, url, language, localFile } = data[i];\n                const subtitleFiles = await this._subtitlesForUrl(this._defaultVideoName(this._syncedData?.basename, data[i]), language, extension, url, localFile);\n                if (subtitleFiles !== undefined) {\n                    subtitles.push(...subtitleFiles);\n                }\n            }\n            await this._syncSubtitles(subtitles, data.some((track) => track.extension === 'm3u8'));\n            return true;\n        }\n        catch (error) {\n            if (typeof error.message !== 'undefined') {\n                await this._reportError(`Data Sync failed: ${error.message}`);\n            }\n            return false;\n        }\n    }\n    async _syncDataArray(data, syncWithAsbplayerId) {\n        try {\n            let subtitles = [];\n            for (let i = 0; i < data.length; i++) {\n                const { name, language, extension, url, localFile } = data[i];\n                const subtitleFiles = await this._subtitlesForUrl(name, language, extension, url, localFile);\n                if (subtitleFiles !== undefined) {\n                    subtitles.push(...subtitleFiles);\n                }\n            }\n            await this._syncSubtitles(subtitles, data.some((track) => track.extension === 'm3u8'), syncWithAsbplayerId);\n            return true;\n        }\n        catch (error) {\n            if (typeof error.message !== 'undefined') {\n                await this._reportError(`Data Sync failed: ${error.message}`);\n            }\n            return false;\n        }\n    }\n    async _syncSubtitles(serializedFiles, flatten, syncWithAsbplayerId) {\n        const files = await Promise.all(serializedFiles.map(async (f) => new File([base64ToBlob(f.base64, 'text/plain')], f.name)));\n        this._context.loadSubtitles(files, flatten, syncWithAsbplayerId);\n    }\n    async _subtitlesForUrl(name, language, extension, url, localFile) {\n        if (url === '-') {\n            return [\n                {\n                    name: `${name}.${extension}`,\n                    base64: '',\n                },\n            ];\n        }\n        if (url === 'lazy') {\n            if (language === undefined) {\n                await this._reportError('Unable to determine language');\n                return undefined;\n            }\n            const data = await fetchDataForLanguageOnDemand(language);\n            if (data.error) {\n                await this._reportError(data.error);\n                return undefined;\n            }\n            const lazilyFetchedUrl = data.subtitles?.find((t) => t.language === language)?.url;\n            if (lazilyFetchedUrl === undefined) {\n                await this._reportError('Failed to fetch subtitles for specified language');\n                return undefined;\n            }\n            url = lazilyFetchedUrl;\n        }\n        const response = await fetch(url)\n            .catch((error) => this._reportError(error.message))\n            .finally(() => {\n            if (localFile) {\n                URL.revokeObjectURL(url);\n            }\n        });\n        if (!response) {\n            return undefined;\n        }\n        if (extension === 'm3u8') {\n            const m3U8Response = await fetch(url);\n            const parser = new m3U8Parser();\n            parser.push(await m3U8Response.text());\n            parser.end();\n            if (!parser.manifest.segments || parser.manifest.segments.length === 0) {\n                return undefined;\n            }\n            const firstUri = parser.manifest.segments[0].uri;\n            const partExtension = firstUri.substring(firstUri.lastIndexOf('.') + 1);\n            const m3U8BaseUrl = url.substring(0, url.lastIndexOf('/'));\n            const fileName = `${name}.${partExtension}`;\n            const promises = parser.manifest.segments\n                .filter((s) => !s.discontinuity && s.uri)\n                .map((s) => fetch(`${m3U8BaseUrl}/${s.uri}`));\n            const tracks = [];\n            let totalPromises = promises.length;\n            let finishedPromises = 0;\n            for (const p of promises) {\n                const response = await p;\n                if (!response.ok) {\n                    throw new Error(`Subtitle Retrieval failed with Status ${response.status}/${response.statusText}...`);\n                }\n                ++finishedPromises;\n                this._context.subtitleController.notification(`${fileName} (${Math.floor((finishedPromises / totalPromises) * 100)}%)`);\n                tracks.push({\n                    name: fileName,\n                    base64: bufferToBase64(await response.arrayBuffer()),\n                });\n            }\n            return tracks;\n        }\n        if (!response.ok) {\n            throw new Error(`Subtitle Retrieval failed with Status ${response.status}/${response.statusText}...`);\n        }\n        return [\n            {\n                name: `${name}.${extension}`,\n                base64: response ? bufferToBase64(await response.arrayBuffer()) : '',\n            },\n        ];\n    }\n    async _reportError(error) {\n        const client = await this._client();\n        const themeType = await this._context.settings.getSingle('themeType');\n        this._prepareShow();\n        return client.updateState({\n            open: true,\n            isLoading: false,\n            showSubSelect: true,\n            error,\n            themeType: themeType,\n        });\n    }\n}\n","import { bufferToBase64 } from '@project/common/base64';\nexport class TimedRecordingInProgressError extends Error {\n}\nexport default class AudioRecorder {\n    constructor() {\n        this.recording = false;\n        this.recorder = null;\n        this.stream = null;\n        this.blobPromise = null;\n    }\n    startWithTimeout(stream, time, onStartedCallback, doNotManageStream = false) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                if (this.recording) {\n                    console.error('Already recording, cannot start with timeout.');\n                    reject('Already recording');\n                    return;\n                }\n                await this.start(stream, doNotManageStream);\n                onStartedCallback();\n                this.timeoutResolve = resolve;\n                this.timeoutId = setTimeout(async () => {\n                    this.timeoutId = undefined;\n                    resolve(await this.stop(doNotManageStream));\n                }, time);\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    }\n    start(stream, doNotManageStream = false) {\n        return new Promise((resolve, reject) => {\n            if (this.recording) {\n                reject('Already recording, cannot start');\n                return;\n            }\n            try {\n                const recorder = new MediaRecorder(stream);\n                const chunks = [];\n                recorder.ondataavailable = (e) => {\n                    chunks.push(e.data);\n                };\n                this.blobPromise = new Promise((resolve, reject) => {\n                    recorder.onstop = (e) => {\n                        resolve(new Blob(chunks));\n                    };\n                });\n                recorder.start();\n                if (!doNotManageStream) {\n                    const output = new AudioContext();\n                    const source = output.createMediaStreamSource(stream);\n                    source.connect(output.destination);\n                }\n                this.recorder = recorder;\n                this.recording = true;\n                this.stream = stream;\n                resolve(undefined);\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    }\n    async stopSafely(doNotManageStream = false) {\n        this.recording = false;\n        this.recorder?.stop();\n        this.recorder = null;\n        if (!doNotManageStream) {\n            this.stream?.getTracks()?.forEach((t) => t.stop());\n            this.stream = null;\n        }\n        if (this.blobPromise !== null) {\n            const blob = await this.blobPromise;\n            this.blobPromise = null;\n            const base64 = await bufferToBase64(await blob.arrayBuffer());\n            if (this.timeoutId !== undefined) {\n                clearTimeout(this.timeoutId);\n                this.timeoutId = undefined;\n                this.timeoutResolve?.(base64);\n                this.timeoutResolve = undefined;\n            }\n        }\n    }\n    async stop(doNotManageStream = false) {\n        if (!this.recording) {\n            throw new Error('Not recording, unable to stop');\n        }\n        this.recording = false;\n        this.recorder?.stop();\n        this.recorder = null;\n        if (!doNotManageStream) {\n            this.stream?.getTracks()?.forEach((t) => t.stop());\n            this.stream = null;\n        }\n        const blob = await this.blobPromise;\n        this.blobPromise = null;\n        const base64 = await bufferToBase64(await blob.arrayBuffer());\n        if (this.timeoutId !== undefined) {\n            clearTimeout(this.timeoutId);\n            this.timeoutId = undefined;\n            this.timeoutResolve?.(base64);\n            this.timeoutResolve = undefined;\n            throw new TimedRecordingInProgressError();\n        }\n        return base64;\n    }\n}\n","export const isMobile = navigator.userAgent.toLowerCase().includes('android') ?? navigator.userAgentData?.mobile ?? false;\n","import i18n from 'i18next';\nimport { fetchLocalization } from './localization-fetcher';\nlet initializedPromise;\nconst langsInitialized = {};\nexport const i18nInit = async (lang) => {\n    if (initializedPromise) {\n        await initializedPromise;\n        const notAddedYet = !(lang in langsInitialized);\n        if (notAddedYet) {\n            const loc = await fetchLocalization(lang);\n            i18n.addResourceBundle(loc.lang, 'translation', loc.strings);\n            langsInitialized[lang] = loc.lang;\n        }\n        // If a localization doesn't exist for lang then actualLanguage will be a fallback language\n        const actualLanguage = langsInitialized[lang];\n        if (i18n.language !== actualLanguage) {\n            i18n.changeLanguage(actualLanguage);\n        }\n        return;\n    }\n    initializedPromise = new Promise(async (resolve, reject) => {\n        try {\n            const loc = await fetchLocalization(lang);\n            i18n.init({\n                resources: { [loc.lang]: { translation: loc.strings } },\n                lng: loc.lang,\n                fallbackLng: loc.lang,\n                debug: process.env.NODE_ENV === 'development',\n                ns: 'translation',\n                defaultNS: 'translation',\n                interpolation: {\n                    escapeValue: false,\n                },\n            });\n            langsInitialized[lang] = loc.lang;\n            resolve();\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n    await initializedPromise;\n};\n","import { PlayMode, } from '@project/common';\nimport { DefaultKeyBinder } from '@project/common/key-binder';\nexport default class KeyBindings {\n    constructor() {\n        this._unbindPlay = false;\n        this._unbindAutoPause = false;\n        this._unbindCondensedPlayback = false;\n        this._unbindFastForwardPlayback = false;\n        this._unbindSeekToSubtitle = false;\n        this._unbindSeekToBeginningOfCurrentSubtitle = false;\n        this._unbindSeekBackwardOrForward = false;\n        this._unbindToggleSubtitles = false;\n        this._unbindToggleSubtitleTrackInVideo = false;\n        this._unbindToggleSubtitleTrackInList = false;\n        this._unbindUnblurTrack = false;\n        this._unbindOffsetToSubtitle = false;\n        this._unbindAdjustOffset = false;\n        this._unbindResetOffset = false;\n        this._unbindAdjustPlaybackRate = false;\n        this._unbindToggleRepeat = false;\n        this._bound = false;\n    }\n    setKeyBindSet(context, keyBindSet) {\n        this._keyBinder = new DefaultKeyBinder(keyBindSet);\n        this.unbind();\n        this.bind(context);\n    }\n    bind(context) {\n        if (!this._keyBinder) {\n            return;\n        }\n        if (this._bound) {\n            this.unbind();\n        }\n        this._unbindPlay = this._keyBinder.bindPlay((event) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            if (context.video.paused) {\n                context.play();\n            }\n            else {\n                context.pause();\n            }\n        }, () => !context.synced, true);\n        this._unbindAutoPause = this._keyBinder.bindAutoPause((event) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.playMode = context.playMode === PlayMode.autoPause ? PlayMode.normal : PlayMode.autoPause;\n        }, () => context.subtitleController.subtitles.length === 0, true);\n        this._unbindCondensedPlayback = this._keyBinder.bindCondensedPlayback((event) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.playMode = context.playMode === PlayMode.condensed ? PlayMode.normal : PlayMode.condensed;\n        }, () => context.subtitleController.subtitles.length === 0, true);\n        this._unbindToggleRepeat = this._keyBinder.bindToggleRepeat((event) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            const [currentSubtitle] = context.subtitleController.currentSubtitle();\n            if (currentSubtitle) {\n                context.playMode = context.playMode === PlayMode.repeat ? PlayMode.normal : PlayMode.repeat;\n            }\n        }, () => context.subtitleController.subtitles.length === 0, true);\n        this._unbindFastForwardPlayback = this._keyBinder.bindFastForwardPlayback((event) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.playMode = context.playMode === PlayMode.fastForward ? PlayMode.normal : PlayMode.fastForward;\n        }, () => context.subtitleController.subtitles.length === 0, true);\n        this._unbindSeekToSubtitle = this._keyBinder.bindSeekToSubtitle((event, subtitle) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.seek(subtitle.start / 1000);\n        }, () => context.subtitleController.subtitles.length === 0, () => context.video.currentTime * 1000, () => context.subtitleController.subtitles, true);\n        this._unbindSeekBackwardOrForward = this._keyBinder.bindSeekBackwardOrForward((event, forward) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            if (forward) {\n                context.seek(Math.min(context.video.duration, context.video.currentTime + 10));\n            }\n            else {\n                context.seek(Math.max(0, context.video.currentTime - 10));\n            }\n        }, () => !context.synced, true);\n        this._unbindSeekToBeginningOfCurrentSubtitle = this._keyBinder.bindSeekToBeginningOfCurrentSubtitle((event, subtitle) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.seek(subtitle.start / 1000);\n            if (context.alwaysPlayOnSubtitleRepeat)\n                context.play();\n        }, () => context.subtitleController.subtitles.length === 0, () => context.video.currentTime * 1000, () => context.subtitleController.subtitles, true);\n        this._unbindToggleSubtitles = this._keyBinder.bindToggleSubtitles((event) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            const toggleSubtitlesCommand = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'toggle-subtitles',\n                },\n                src: context.video.src,\n            };\n            chrome.runtime.sendMessage(toggleSubtitlesCommand);\n        }, () => context.subtitleController.subtitles.length === 0, true);\n        this._unbindToggleSubtitleTrackInVideo = this._keyBinder.bindToggleSubtitleTrackInVideo((event, track) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.subtitleController.disabledSubtitleTracks[track] =\n                !context.subtitleController.disabledSubtitleTracks[track];\n        }, () => context.subtitleController.subtitles.length === 0, true);\n        this._unbindUnblurTrack = this._keyBinder.bindUnblurTrack((event, track) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.subtitleController.unblur(track);\n        }, () => context.subtitleController.subtitles.length === 0, true);\n        this._unbindToggleSubtitleTrackInList = this._keyBinder.bindToggleSubtitleTrackInList((event, track) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            const command = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'toggleSubtitleTrackInList',\n                    track: track,\n                },\n                src: context.video.src,\n            };\n            chrome.runtime.sendMessage(command);\n        }, () => context.subtitleController.subtitles.length === 0, true);\n        this._unbindOffsetToSubtitle = this._keyBinder.bindOffsetToSubtitle((event, offset) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.subtitleController.offset(offset);\n        }, () => context.subtitleController.subtitles.length === 0, () => context.video.currentTime * 1000, () => context.subtitleController.subtitles, true);\n        this._unbindAdjustOffset = this._keyBinder.bindAdjustOffset((event, offset) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.subtitleController.offset(offset);\n        }, () => context.subtitleController.subtitles.length === 0, () => context.subtitleController.subtitles, true);\n        this._unbindResetOffset = this._keyBinder.bindResetOffet((event) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            context.subtitleController.offset(0);\n        }, () => context.subtitleController.subtitles.length === 0, true);\n        this._unbindAdjustPlaybackRate = this._keyBinder.bindAdjustPlaybackRate((event, increase) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            const currentSpeed = context.video.playbackRate;\n            const speedOffset = context.speedChangeStep * 10;\n            context.playMode = PlayMode.normal;\n            if (increase) {\n                context.video.playbackRate = Math.min(5, Math.round(currentSpeed * 10 + speedOffset) / 10);\n            }\n            else {\n                context.video.playbackRate = Math.max(0.1, Math.round(currentSpeed * 10 - speedOffset) / 10);\n            }\n        }, () => !context.synced, true);\n        this._bound = true;\n    }\n    unbind() {\n        if (this._unbindPlay) {\n            this._unbindPlay();\n            this._unbindPlay = false;\n        }\n        if (this._unbindAutoPause) {\n            this._unbindAutoPause();\n            this._unbindAutoPause = false;\n        }\n        if (this._unbindCondensedPlayback) {\n            this._unbindCondensedPlayback();\n            this._unbindCondensedPlayback = false;\n        }\n        if (this._unbindFastForwardPlayback) {\n            this._unbindFastForwardPlayback();\n            this._unbindFastForwardPlayback = false;\n        }\n        if (this._unbindSeekToSubtitle) {\n            this._unbindSeekToSubtitle();\n            this._unbindSeekToSubtitle = false;\n        }\n        if (this._unbindSeekToBeginningOfCurrentSubtitle) {\n            this._unbindSeekToBeginningOfCurrentSubtitle();\n            this._unbindSeekToBeginningOfCurrentSubtitle = false;\n        }\n        if (this._unbindSeekBackwardOrForward) {\n            this._unbindSeekBackwardOrForward();\n            this._unbindSeekBackwardOrForward = false;\n        }\n        if (this._unbindToggleSubtitles) {\n            this._unbindToggleSubtitles();\n            this._unbindToggleSubtitles = false;\n        }\n        if (this._unbindToggleSubtitleTrackInVideo) {\n            this._unbindToggleSubtitleTrackInVideo();\n            this._unbindToggleSubtitleTrackInVideo = false;\n        }\n        if (this._unbindToggleSubtitleTrackInList) {\n            this._unbindToggleSubtitleTrackInList();\n            this._unbindToggleSubtitleTrackInList = false;\n        }\n        if (this._unbindUnblurTrack) {\n            this._unbindUnblurTrack();\n            this._unbindUnblurTrack = false;\n        }\n        if (this._unbindOffsetToSubtitle) {\n            this._unbindOffsetToSubtitle();\n            this._unbindOffsetToSubtitle = false;\n        }\n        if (this._unbindAdjustOffset) {\n            this._unbindAdjustOffset();\n            this._unbindAdjustOffset = false;\n        }\n        if (this._unbindResetOffset) {\n            this._unbindResetOffset();\n            this._unbindResetOffset = false;\n        }\n        if (this._unbindToggleRepeat) {\n            this._unbindToggleRepeat();\n            this._unbindToggleRepeat = false;\n        }\n        if (this._unbindAdjustPlaybackRate) {\n            this._unbindAdjustPlaybackRate();\n            this._unbindAdjustPlaybackRate = false;\n        }\n        this._bound = false;\n    }\n}\n","const shouldShowKey = 'shouldShowUpdateAlert';\nconst lastUpdateAlertVersionKey = 'lastUpdateAlertVersion';\nexport const enqueueUpdateAlert = async () => {\n    const lastUpdateVersion = (await chrome.storage.local.get(lastUpdateAlertVersionKey))[lastUpdateAlertVersionKey];\n    if (lastUpdateVersion === chrome.runtime.getManifest().version) {\n        return;\n    }\n    await chrome.storage.local.set({ [shouldShowKey]: true });\n};\nexport const shouldShowUpdateAlert = async () => {\n    const shouldShow = (await chrome.storage.local.get({ [shouldShowKey]: false }))[shouldShowKey];\n    if (shouldShow) {\n        await chrome.storage.local.remove(shouldShowKey);\n        await chrome.storage.local.set({ [lastUpdateAlertVersionKey]: chrome.runtime.getManifest().version });\n    }\n    return shouldShow;\n};\n","import { AutoPausePreference, cropAndResize, PlayMode, PostMineAction, PostMinePlayback, StartRecordingErrorCode, StopRecordingErrorCode, VideoDataUiOpenReason, } from '@project/common';\nimport Mp3Encoder from '@project/common/audio-clip/mp3-encoder';\nimport { adjacentSubtitle } from '@project/common/key-binder';\nimport { extractAnkiSettings, PauseOnHoverMode, SettingsProvider, SubtitleListPreference, } from '@project/common/settings';\nimport { SubtitleReader } from '@project/common/subtitle-reader';\nimport { extractText, seekWithNudge, sourceString, surroundingSubtitlesAroundInterval } from '@project/common/util';\nimport AnkiUiController from '../controllers/anki-ui-controller';\nimport ControlsController from '../controllers/controls-controller';\nimport DragController from '../controllers/drag-controller';\nimport { MobileGestureController } from '../controllers/mobile-gesture-controller';\nimport { MobileVideoOverlayController } from '../controllers/mobile-video-overlay-controller';\nimport NotificationController from '../controllers/notification-controller';\nimport SubtitleController from '../controllers/subtitle-controller';\nimport VideoDataSyncController from '../controllers/video-data-sync-controller';\nimport AudioRecorder, { TimedRecordingInProgressError } from './audio-recorder';\nimport { isMobile } from '@project/common/device-detection/mobile';\nimport { OffsetAnchor } from './element-overlay';\nimport { ExtensionSettingsStorage } from './extension-settings-storage';\nimport { i18nInit } from './i18n';\nimport KeyBindings from './key-bindings';\nimport { shouldShowUpdateAlert } from './update-alert';\nimport { mp3WorkerFactory } from './mp3-worker-factory';\nimport { bufferToBase64 } from '@project/common/base64';\nlet netflix = false;\ndocument.addEventListener('asbplayer-netflix-enabled', (e) => {\n    netflix = e.detail;\n});\ndocument.dispatchEvent(new CustomEvent('asbplayer-query-netflix'));\nconst youtube = /(m|www)\\.youtube\\.com/.test(window.location.host);\nvar RecordingState;\n(function (RecordingState) {\n    RecordingState[RecordingState[\"requested\"] = 0] = \"requested\";\n    RecordingState[RecordingState[\"started\"] = 1] = \"started\";\n    RecordingState[RecordingState[\"notRecording\"] = 2] = \"notRecording\";\n})(RecordingState || (RecordingState = {}));\nconst startAudioRecordingErrorResponse = (e) => {\n    let errorCode;\n    if (e.name === 'NS_ERROR_FAILURE') {\n        errorCode = StartRecordingErrorCode.drmProtected;\n    }\n    else {\n        console.error(e);\n        errorCode = StartRecordingErrorCode.other;\n    }\n    const errorResponse = {\n        started: false,\n        error: { code: errorCode, message: e.message },\n    };\n    return errorResponse;\n};\nexport default class Binding {\n    constructor(video, hasPageScript, frameId) {\n        this.subscribed = false;\n        this.recordingState = RecordingState.notRecording;\n        this.postMinePlayback = PostMinePlayback.remember;\n        this.pausedDueToHover = false;\n        this._playMode = PlayMode.normal;\n        this._speedChangeStep = 0.1;\n        this._audioRecorder = new AudioRecorder();\n        this.condensedPlaybackMinimumSkipIntervalMs = 1000;\n        this.fastForwardPlaybackMinimumGapMs = 600;\n        this.fastForwardModePlaybackRate = 2.7;\n        this.imageDelay = 0;\n        this.pauseOnHoverMode = PauseOnHoverMode.disabled;\n        this.video = video;\n        this.hasPageScript = hasPageScript;\n        this.settings = new SettingsProvider(new ExtensionSettingsStorage());\n        this.subtitleController = new SubtitleController(video, this.settings);\n        this.videoDataSyncController = new VideoDataSyncController(this, this.settings);\n        this.controlsController = new ControlsController(video);\n        this.dragController = new DragController(video);\n        this.keyBindings = new KeyBindings();\n        this.ankiUiController = new AnkiUiController();\n        this.notificationController = new NotificationController(this);\n        this.mobileVideoOverlayController = new MobileVideoOverlayController(this, OffsetAnchor.top);\n        this.subtitleController.onOffsetChange = () => this.mobileVideoOverlayController.updateModel();\n        this.mobileGestureController = new MobileGestureController(this);\n        this.recordMedia = true;\n        this.takeScreenshot = true;\n        this.cleanScreenshot = true;\n        this.audioPaddingStart = 0;\n        this.audioPaddingEnd = 500;\n        this.maxImageWidth = 0;\n        this.maxImageHeight = 0;\n        this.autoPausePreference = AutoPausePreference.atEnd;\n        this.copyToClipboardOnMine = false;\n        this.alwaysPlayOnSubtitleRepeat = true;\n        this.postMinePlayback = PostMinePlayback.remember;\n        this._synced = false;\n        this.recordingMediaWithScreenshot = false;\n        this.frameId = frameId;\n    }\n    get recordingMedia() {\n        return this.recordingState !== RecordingState.notRecording;\n    }\n    get synced() {\n        return this._synced;\n    }\n    get speedChangeStep() {\n        return this._speedChangeStep;\n    }\n    get playMode() {\n        return this._playMode;\n    }\n    set playMode(newPlayMode) {\n        if (this._playMode === newPlayMode) {\n            return;\n        }\n        // Disable old play mode\n        switch (this._playMode) {\n            case PlayMode.autoPause:\n                this.subtitleController.autoPauseContext.onStartedShowing = undefined;\n                this.subtitleController.autoPauseContext.onWillStopShowing = undefined;\n                break;\n            case PlayMode.condensed:\n                this.subtitleController.onNextToShow = undefined;\n                break;\n            case PlayMode.fastForward:\n                this.subtitleController.onSlice = undefined;\n                this.video.playbackRate = 1;\n                break;\n            case PlayMode.repeat:\n                this.subtitleController.autoPauseContext.onWillStopShowing = undefined;\n                break;\n        }\n        let changed = false;\n        // Enable new play mode\n        switch (newPlayMode) {\n            case PlayMode.autoPause:\n                this.subtitleController.autoPauseContext.onStartedShowing = () => {\n                    if (this.recordingMedia || this.autoPausePreference !== AutoPausePreference.atStart) {\n                        return;\n                    }\n                    this.pause();\n                };\n                this.subtitleController.autoPauseContext.onWillStopShowing = () => {\n                    if (this.recordingMedia || this.autoPausePreference !== AutoPausePreference.atEnd) {\n                        return;\n                    }\n                    this.pause();\n                };\n                this.subtitleController.notification('info.enabledAutoPause');\n                changed = true;\n                break;\n            case PlayMode.condensed:\n                let seeking = false;\n                this.subtitleController.onNextToShow = async (subtitle) => {\n                    try {\n                        if (this.recordingMedia ||\n                            seeking ||\n                            this.video.paused ||\n                            subtitle.start - this.video.currentTime * 1000 <=\n                                this.condensedPlaybackMinimumSkipIntervalMs) {\n                            return;\n                        }\n                        seeking = true;\n                        this.seek(subtitle.start / 1000);\n                        await this.play();\n                        seeking = false;\n                    }\n                    finally {\n                        seeking = false;\n                    }\n                };\n                this.subtitleController.notification('info.enabledCondensedPlayback');\n                changed = true;\n                break;\n            case PlayMode.fastForward:\n                this.subtitleController.onSlice = async (slice) => {\n                    const subtitlesAreSufficientlyOffsetFromNow = (subtitleEdgeTime) => {\n                        return (subtitleEdgeTime &&\n                            Math.abs(subtitleEdgeTime - this.video.currentTime * 1000) >\n                                this.fastForwardPlaybackMinimumGapMs);\n                    };\n                    if (slice.showing.length === 0 &&\n                        // Find latest ending subtitle among the shown last ones\n                        subtitlesAreSufficientlyOffsetFromNow(Math.max.apply(undefined, (slice?.lastShown || []).map((e) => e.end))) &&\n                        // Find earliest starting subtitle among the next ones to be shown\n                        subtitlesAreSufficientlyOffsetFromNow(Math.min.apply(undefined, (slice?.nextToShow || []).map((e) => e.start)))) {\n                        this.video.playbackRate = this.fastForwardModePlaybackRate;\n                    }\n                    else {\n                        this.video.playbackRate = 1;\n                    }\n                };\n                this.subtitleController.notification('info.enabledFastForwardPlayback');\n                changed = true;\n                break;\n            case PlayMode.repeat:\n                const [currentSubtitle] = this.subtitleController.currentSubtitle();\n                if (currentSubtitle) {\n                    this.subtitleController.autoPauseContext.onWillStopShowing = () => {\n                        this.seek(currentSubtitle.start / 1000);\n                    };\n                    this.subtitleController.notification('info.enabledRepeatPlayback');\n                    changed = true;\n                }\n                break;\n            case PlayMode.normal:\n                if (this._playMode === PlayMode.repeat) {\n                    this.subtitleController.notification('info.disabledRepeatPlayback');\n                }\n                else if (this._playMode === PlayMode.autoPause) {\n                    this.subtitleController.notification('info.disabledAutoPause');\n                }\n                else if (this._playMode === PlayMode.condensed) {\n                    this.subtitleController.notification('info.disabledCondensedPlayback');\n                }\n                else if (this._playMode === PlayMode.fastForward) {\n                    this.subtitleController.notification('info.disabledFastForwardPlayback');\n                }\n                changed = true;\n                break;\n            default:\n                console.error('Unknown play mode ' + newPlayMode);\n        }\n        if (changed) {\n            this._playMode = newPlayMode;\n            this.mobileVideoOverlayController.updateModel();\n        }\n    }\n    subtitleFileName(track = 0) {\n        return this.subtitleController.subtitleFileNames?.[track] ?? '';\n    }\n    get _imageCaptureParams() {\n        const rect = this.video.getBoundingClientRect();\n        return {\n            maxWidth: this.maxImageWidth,\n            maxHeight: this.maxImageHeight,\n            rect: {\n                left: rect.left,\n                top: rect.top,\n                width: rect.width,\n                height: rect.height,\n            },\n            frameId: this.frameId,\n        };\n    }\n    bind() {\n        let bound = false;\n        if (this.video.readyState === 4) {\n            this._bind();\n            bound = true;\n        }\n        else {\n            this.canPlayListener = (event) => {\n                if (!bound) {\n                    this._bind();\n                    bound = true;\n                }\n                const command = {\n                    sender: 'asbplayer-video',\n                    message: {\n                        command: 'readyState',\n                        value: 4,\n                    },\n                    src: this.video.src,\n                };\n                chrome.runtime.sendMessage(command);\n            };\n            this.video.addEventListener('canplay', this.canPlayListener);\n        }\n    }\n    _bind() {\n        this._notifyReady();\n        this._subscribe();\n        this._refreshSettings().then(() => {\n            this.videoDataSyncController.requestSubtitles();\n        });\n        this.subtitleController.bind();\n        this.dragController.bind(this);\n        this.mobileGestureController.bind();\n        const seek = (forward) => {\n            const subtitle = adjacentSubtitle(forward, this.video.currentTime * 1000, this.subtitleController.subtitles);\n            if (subtitle !== null) {\n                this.seek(subtitle.start / 1000);\n            }\n        };\n        this.mobileGestureController.onSwipeLeft = () => seek(false);\n        this.mobileGestureController.onSwipeRight = () => seek(true);\n    }\n    _notifyReady() {\n        const command = {\n            sender: 'asbplayer-video',\n            message: {\n                command: 'ready',\n                duration: this.video.duration,\n                currentTime: this.video.currentTime,\n                paused: this.video.paused,\n                audioTracks: undefined,\n                selectedAudioTrack: undefined,\n                playbackRate: this.video.playbackRate,\n            },\n            src: this.video.src,\n        };\n        chrome.runtime.sendMessage(command);\n    }\n    _subscribe() {\n        this.playListener = (event) => {\n            const command = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'play',\n                    echo: false,\n                },\n                src: this.video.src,\n            };\n            chrome.runtime.sendMessage(command);\n        };\n        this.pauseListener = (event) => {\n            const command = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'pause',\n                    echo: false,\n                },\n                src: this.video.src,\n            };\n            chrome.runtime.sendMessage(command);\n            if (this.recordingMedia && this.recordingPostMineAction !== undefined) {\n                this._toggleRecordingMedia(this.recordingPostMineAction);\n            }\n        };\n        this.seekedListener = (event) => {\n            const currentTimeCommand = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'currentTime',\n                    value: this.video.currentTime,\n                    echo: false,\n                },\n                src: this.video.src,\n            };\n            const readyStateCommand = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'readyState',\n                    value: this.video.readyState,\n                },\n                src: this.video.src,\n            };\n            chrome.runtime.sendMessage(currentTimeCommand);\n            chrome.runtime.sendMessage(readyStateCommand);\n            this.subtitleController.autoPauseContext.clear();\n        };\n        this.playbackRateListener = (event) => {\n            const command = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'playbackRate',\n                    value: this.video.playbackRate,\n                    echo: false,\n                },\n                src: this.video.src,\n            };\n            chrome.runtime.sendMessage(command);\n            if (this._synced && this._playMode !== PlayMode.fastForward) {\n                this.subtitleController.notification('info.playbackRate', {\n                    rate: this.video.playbackRate.toFixed(1),\n                });\n            }\n            this.mobileVideoOverlayController.updateModel();\n        };\n        this.mouseOverListener = () => {\n            if (this.pauseOnHoverMode === PauseOnHoverMode.inAndOut && this.pausedDueToHover && this.video.paused) {\n                this.play();\n            }\n            this.pausedDueToHover = false;\n        };\n        this.video.addEventListener('play', this.playListener);\n        this.video.addEventListener('pause', this.pauseListener);\n        this.video.addEventListener('seeked', this.seekedListener);\n        this.video.addEventListener('ratechange', this.playbackRateListener);\n        this.video.addEventListener('mouseover', this.mouseOverListener);\n        this.subtitleController.onMouseOver = () => {\n            if (this.pauseOnHoverMode !== PauseOnHoverMode.disabled && !this.video.paused) {\n                this.video.pause();\n                this.pausedDueToHover = true;\n            }\n        };\n        if (this.hasPageScript) {\n            this.videoChangeListener = () => {\n                this.videoDataSyncController.requestSubtitles();\n                this._resetSubtitles();\n            };\n            this.video.addEventListener('loadedmetadata', this.videoChangeListener);\n        }\n        this.heartbeatInterval = setInterval(() => {\n            const command = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'heartbeat',\n                    subscribed: this.subscribed,\n                    synced: this._synced,\n                    syncedTimestamp: this._syncedTimestamp,\n                    loadedSubtitles: this.subtitleController.subtitles.length > 0,\n                },\n                src: this.video.src,\n            };\n            chrome.runtime.sendMessage(command);\n        }, 1000);\n        window.addEventListener('beforeunload', (event) => {\n            this.heartbeatInterval && clearInterval(this.heartbeatInterval);\n        });\n        this.listener = (request, sender, sendResponse) => {\n            if (request.sender === 'asbplayer-extension-to-video' && request.src === this.video.src) {\n                switch (request.message.command) {\n                    case 'init':\n                        this._notifyReady();\n                        break;\n                    case 'ready':\n                        // ignore\n                        break;\n                    case 'play':\n                        this.play();\n                        break;\n                    case 'pause':\n                        this.pause();\n                        break;\n                    case 'currentTime':\n                        const currentTimeMessage = request.message;\n                        this.seek(currentTimeMessage.value);\n                        break;\n                    case 'close':\n                        // ignore\n                        break;\n                    case 'subtitles':\n                        const subtitlesMessage = request.message;\n                        const subtitles = subtitlesMessage.value;\n                        this._updateSubtitles(subtitles.map((s, index) => ({ ...s, index })), subtitlesMessage.names || [subtitlesMessage.name]);\n                        break;\n                    case 'request-subtitles':\n                        sendResponse({\n                            subtitles: this.subtitleController.subtitles,\n                            subtitleFileNames: this.subtitleController.subtitleFileNames ?? [],\n                        });\n                        break;\n                    case 'offset':\n                        const offsetMessage = request.message;\n                        this.subtitleController.offset(offsetMessage.value, !offsetMessage.echo);\n                        break;\n                    case 'playbackRate':\n                        const playbackRateMessage = request.message;\n                        this.video.playbackRate = playbackRateMessage.value;\n                        break;\n                    case 'subtitleSettings':\n                        // ignore\n                        break;\n                    case 'ankiSettings':\n                        // ignore\n                        break;\n                    case 'miscSettings':\n                        // ignore\n                        break;\n                    case 'settings-updated':\n                        this._refreshSettings();\n                        break;\n                    case 'copy-subtitle':\n                        const copySubtitleMessage = request.message;\n                        if (this._synced) {\n                            if (copySubtitleMessage.subtitle !== undefined &&\n                                copySubtitleMessage.surroundingSubtitles !== undefined) {\n                                this._copySubtitle(copySubtitleMessage);\n                            }\n                            else if (this.subtitleController.subtitles.length > 0) {\n                                const [subtitle, surroundingSubtitles] = this.subtitleController.currentSubtitle();\n                                if (subtitle !== null && surroundingSubtitles !== null) {\n                                    this._copySubtitle({ ...copySubtitleMessage, subtitle, surroundingSubtitles });\n                                }\n                            }\n                            else {\n                                this._toggleRecordingMedia(copySubtitleMessage.postMineAction);\n                            }\n                            this.mobileVideoOverlayController.updateModel();\n                        }\n                        break;\n                    case 'toggle-recording':\n                        if (this._synced) {\n                            this._toggleRecordingMedia(PostMineAction.showAnkiDialog);\n                            this.mobileVideoOverlayController.updateModel();\n                        }\n                        break;\n                    case 'card-updated':\n                    case 'card-exported':\n                    case 'card-saved':\n                        const cardMessage = request.message;\n                        let locKey;\n                        switch (cardMessage.command) {\n                            case 'card-updated':\n                                locKey = 'info.updatedCard';\n                                break;\n                            case 'card-exported':\n                                locKey = 'info.exportedCard';\n                                break;\n                            case 'card-saved':\n                                locKey = 'info.copiedSubtitle2';\n                                break;\n                        }\n                        this.subtitleController.notification(locKey, { result: request.message.cardName });\n                        this.ankiUiSavedState = {\n                            ...cardMessage,\n                            text: cardMessage.text ?? '',\n                            definition: cardMessage.definition ?? '',\n                            word: cardMessage.word ?? cardMessage.cardName,\n                            source: sourceString(this.subtitleFileName(), cardMessage.subtitle.start),\n                            url: cardMessage.url ?? '',\n                            customFieldValues: cardMessage.customFieldValues ?? {},\n                            timestampInterval: [cardMessage.subtitle.start, cardMessage.subtitle.end],\n                            initialTimestampInterval: [cardMessage.subtitle.start, cardMessage.subtitle.end],\n                            lastAppliedTimestampIntervalToText: [cardMessage.subtitle.start, cardMessage.subtitle.end],\n                            lastAppliedTimestampIntervalToAudio: [cardMessage.subtitle.start, cardMessage.subtitle.end],\n                            dialogRequestedTimestamp: this.video.currentTime * 1000,\n                        };\n                        this.mobileVideoOverlayController.updateModel();\n                        break;\n                    case 'notify-error':\n                        const notifyErrorMessage = request.message;\n                        this.subtitleController.notification('info.error', { message: notifyErrorMessage.message });\n                        break;\n                    case 'recording-started':\n                        this.recordingState = RecordingState.started;\n                        break;\n                    case 'recording-finished':\n                        this.recordingState = RecordingState.notRecording;\n                        this.recordingMediaStartedTimestamp = undefined;\n                        switch (this.postMinePlayback) {\n                            case PostMinePlayback.remember:\n                                if (!this.wasPlayingBeforeRecordingMedia) {\n                                    this.video.pause();\n                                }\n                                else if (!this.video.paused) {\n                                    this.mobileVideoOverlayController.hide();\n                                }\n                                break;\n                            case PostMinePlayback.play:\n                                // already playing, don't need to do anything\n                                this.mobileVideoOverlayController.hide();\n                                break;\n                            case PostMinePlayback.pause:\n                                this.video.pause();\n                                break;\n                        }\n                        break;\n                    case 'show-anki-ui':\n                        const showAnkiUiMessage = request.message;\n                        this.ankiUiController.show(this, showAnkiUiMessage);\n                        break;\n                    case 'show-anki-ui-after-rerecord':\n                        const showAnkiUiAfterRerecordMessage = request.message;\n                        this.ankiUiController.showAfterRerecord(this, showAnkiUiAfterRerecordMessage.uiState);\n                        break;\n                    case 'take-screenshot':\n                        if (this._synced) {\n                            if (this.ankiUiController.showing) {\n                                this.ankiUiController.requestRewind(this);\n                            }\n                            else {\n                                this._takeScreenshot();\n                            }\n                        }\n                        break;\n                    case 'screenshot-taken':\n                        const screenshotTakenMessage = request.message;\n                        this.subtitleController.forceHideSubtitles = false;\n                        this.mobileVideoOverlayController.forceHide = false;\n                        this.controlsController.show();\n                        if (!this.recordingMedia && screenshotTakenMessage.ankiUiState) {\n                            this.ankiUiController.showAfterRetakingScreenshot(this, screenshotTakenMessage.ankiUiState);\n                        }\n                        break;\n                    case 'alert':\n                        // ignore\n                        break;\n                    case 'request-active-tab-permission':\n                        this.notificationController.onClose = () => {\n                            this._notifyRequestingActiveTabPermission(false);\n                        };\n                        this.notificationController.show('activeTabPermissionRequest.title', 'activeTabPermissionRequest.prompt');\n                        this._notifyRequestingActiveTabPermission(true);\n                        break;\n                    case 'granted-active-tab-permission':\n                        if (this.notificationController.showing) {\n                            this.notificationController.show('activeTabPermissionRequest.grantedTitle', 'activeTabPermissionRequest.grantedPrompt');\n                        }\n                        break;\n                    case 'load-subtitles':\n                        this.showVideoDataDialog(false);\n                        break;\n                    case 'start-recording-audio-with-timeout':\n                        const startRecordingAudioWithTimeoutMessage = request.message;\n                        this._captureStream()\n                            .then((stream) => this._audioRecorder\n                            .stopSafely(true)\n                            .then(() => this._audioRecorder.startWithTimeout(stream, startRecordingAudioWithTimeoutMessage.timeout, () => sendResponse({ started: true }), true)))\n                            .then((audioBase64) => this._sendAudioBase64(audioBase64, startRecordingAudioWithTimeoutMessage.requestId, startRecordingAudioWithTimeoutMessage.encodeAsMp3))\n                            .catch((e) => {\n                            sendResponse(startAudioRecordingErrorResponse(e));\n                        });\n                        return true;\n                    case 'start-recording-audio':\n                        this.currentAudioRecordingRequestId = request.message.requestId;\n                        this._captureStream()\n                            .then((stream) => this._audioRecorder.stopSafely(true).then(() => this._audioRecorder.start(stream, true)))\n                            .then(() => sendResponse({ started: true }))\n                            .catch((e) => {\n                            sendResponse(startAudioRecordingErrorResponse(e));\n                        });\n                        return true;\n                    case 'stop-recording-audio':\n                        const stopRecordingAudioMessage = request.message;\n                        this._audioRecorder\n                            .stop(true)\n                            .then((audioBase64) => {\n                            sendResponse({ stopped: true });\n                            this._sendAudioBase64(audioBase64, this.currentAudioRecordingRequestId, stopRecordingAudioMessage.encodeAsMp3);\n                        })\n                            .catch((e) => {\n                            let errorCode;\n                            if (e instanceof TimedRecordingInProgressError) {\n                                errorCode = StopRecordingErrorCode.timedAudioRecordingInProgress;\n                            }\n                            else {\n                                console.error(e);\n                                errorCode = StopRecordingErrorCode.other;\n                            }\n                            const errorResponse = {\n                                stopped: false,\n                                error: {\n                                    code: errorCode,\n                                    message: e.message,\n                                },\n                            };\n                            sendResponse(errorResponse);\n                        });\n                        return true;\n                    case 'notification-dialog':\n                        const notificationDialogMessage = request.message;\n                        this.notificationController.show(notificationDialogMessage.titleLocKey, notificationDialogMessage.messageLocKey);\n                        break;\n                }\n                if ('messageId' in request.message) {\n                    const ackCommand = {\n                        sender: 'asbplayer-video',\n                        message: {\n                            command: 'ack-message',\n                            messageId: request.message['messageId'],\n                        },\n                        src: this.video.src,\n                    };\n                    chrome.runtime.sendMessage(ackCommand);\n                }\n            }\n        };\n        chrome.runtime.onMessage.addListener(this.listener);\n        this.subscribed = true;\n    }\n    async _refreshSettings() {\n        const currentSettings = await this.settings.getAll();\n        this._speedChangeStep = currentSettings.speedChangeStep;\n        this.recordMedia = currentSettings.streamingRecordMedia;\n        this.takeScreenshot = currentSettings.streamingTakeScreenshot;\n        this.cleanScreenshot = currentSettings.streamingTakeScreenshot && currentSettings.streamingCleanScreenshot;\n        this.condensedPlaybackMinimumSkipIntervalMs = currentSettings.streamingCondensedPlaybackMinimumSkipIntervalMs;\n        this.fastForwardModePlaybackRate = currentSettings.fastForwardModePlaybackRate;\n        this.imageDelay = currentSettings.streamingScreenshotDelay;\n        this.audioPaddingStart = currentSettings.audioPaddingStart;\n        this.audioPaddingEnd = currentSettings.audioPaddingEnd;\n        this.maxImageWidth = currentSettings.maxImageWidth;\n        this.maxImageHeight = currentSettings.maxImageHeight;\n        this.copyToClipboardOnMine = currentSettings.copyToClipboardOnMine;\n        this.autoPausePreference = currentSettings.autoPausePreference;\n        this.alwaysPlayOnSubtitleRepeat = currentSettings.alwaysPlayOnSubtitleRepeat;\n        this.pauseOnHoverMode = currentSettings.pauseOnHoverMode;\n        this.subtitleController.displaySubtitles = currentSettings.streamingDisplaySubtitles;\n        this.subtitleController.bottomSubtitlePositionOffset = currentSettings.subtitlePositionOffset;\n        this.subtitleController.topSubtitlePositionOffset = currentSettings.topSubtitlePositionOffset;\n        this.subtitleController.subtitlesWidth = currentSettings.subtitlesWidth;\n        this.subtitleController.surroundingSubtitlesCountRadius = currentSettings.surroundingSubtitlesCountRadius;\n        this.subtitleController.surroundingSubtitlesTimeRadius = currentSettings.surroundingSubtitlesTimeRadius;\n        this.subtitleController.autoCopyCurrentSubtitle = currentSettings.autoCopyCurrentSubtitle;\n        this.subtitleController.preCacheDom = currentSettings.preCacheSubtitleDom;\n        this.subtitleController.setSubtitleSettings(currentSettings);\n        this.subtitleController.refresh();\n        this.videoDataSyncController.updateSettings(currentSettings);\n        this.ankiUiController.updateSettings({\n            ...extractAnkiSettings(currentSettings),\n            themeType: currentSettings.themeType,\n            lastSelectedAnkiExportMode: currentSettings.lastSelectedAnkiExportMode,\n        }, this.settings);\n        this.postMinePlayback = currentSettings.postMiningPlaybackState;\n        this.keyBindings.setKeyBindSet(this, currentSettings.keyBindSet);\n        if (currentSettings.streamingSubsDragAndDrop) {\n            this.dragController.bind(this);\n        }\n        else {\n            this.dragController.unbind();\n        }\n        if (currentSettings.streamingEnableOverlay) {\n            this.mobileVideoOverlayController.offsetAnchor =\n                currentSettings.subtitleAlignment === 'bottom' ? OffsetAnchor.top : OffsetAnchor.bottom;\n            this.mobileVideoOverlayController.bind();\n            this.mobileVideoOverlayController.updateModel();\n        }\n        else {\n            this.mobileVideoOverlayController.unbind();\n        }\n        await i18nInit(currentSettings.language);\n    }\n    unbind() {\n        if (this.canPlayListener) {\n            this.video.removeEventListener('canplay', this.canPlayListener);\n            this.canPlayListener = undefined;\n        }\n        if (this.playListener) {\n            this.video.removeEventListener('play', this.playListener);\n            this.playListener = undefined;\n        }\n        if (this.pauseListener) {\n            this.video.removeEventListener('pause', this.pauseListener);\n            this.pauseListener = undefined;\n        }\n        if (this.seekedListener) {\n            this.video.removeEventListener('seeked', this.seekedListener);\n            this.seekedListener = undefined;\n        }\n        if (this.playbackRateListener) {\n            this.video.removeEventListener('ratechange', this.playbackRateListener);\n            this.playbackRateListener = undefined;\n        }\n        if (this.videoChangeListener) {\n            this.video.removeEventListener('loadedmetadata', this.videoChangeListener);\n            this.videoChangeListener = undefined;\n        }\n        if (this.mouseOverListener) {\n            this.video.removeEventListener('mouseover', this.mouseOverListener);\n            this.mouseOverListener = undefined;\n        }\n        if (this.heartbeatInterval) {\n            clearInterval(this.heartbeatInterval);\n            this.heartbeatInterval = undefined;\n        }\n        if (this.listener) {\n            chrome.runtime.onMessage.removeListener(this.listener);\n            this.listener = undefined;\n        }\n        this.subtitleController.unbind();\n        this.dragController.unbind();\n        this.keyBindings.unbind();\n        this.videoDataSyncController.unbind();\n        this.mobileVideoOverlayController.unbind();\n        this.mobileGestureController.unbind();\n        this.notificationController.unbind();\n        this.subscribed = false;\n        const command = {\n            sender: 'asbplayer-video',\n            message: {\n                command: 'video-disappeared',\n            },\n            src: this.video.src,\n        };\n        chrome.runtime.sendMessage(command);\n    }\n    async _takeScreenshot() {\n        if (!this.takeScreenshot) {\n            return;\n        }\n        await this._prepareScreenshot();\n        const command = {\n            sender: 'asbplayer-video',\n            message: {\n                command: 'take-screenshot',\n                ankiUiState: this.ankiUiSavedState,\n                ...this._imageCaptureParams,\n                subtitleFileName: this.subtitleFileName(),\n                mediaTimestamp: this.video.currentTime * 1000,\n            },\n            src: this.video.src,\n        };\n        chrome.runtime.sendMessage(command);\n        this.ankiUiSavedState = undefined;\n    }\n    async _copySubtitle({ postMineAction, subtitle, surroundingSubtitles, text, definition, word, customFieldValues, }) {\n        if (!subtitle || !surroundingSubtitles) {\n            return;\n        }\n        if (this.recordMedia && this.recordingMedia) {\n            return;\n        }\n        if (this.copyToClipboardOnMine) {\n            navigator.clipboard.writeText(subtitle.text);\n        }\n        if (this.takeScreenshot) {\n            await this._prepareScreenshot();\n        }\n        if (this.recordMedia) {\n            this.recordingState = RecordingState.requested;\n            this.recordingPostMineAction = postMineAction;\n            this.wasPlayingBeforeRecordingMedia = !this.video.paused;\n            this.recordingMediaStartedTimestamp = this.video.currentTime * 1000;\n            this.recordingMediaWithScreenshot = this.takeScreenshot;\n            const start = Math.max(0, subtitle.start - this.audioPaddingStart);\n            this.seek(start / 1000);\n            await this.play();\n        }\n        if (!text || subtitle.text.includes(text.trim())) {\n            text = extractText(subtitle, surroundingSubtitles);\n        }\n        const command = {\n            sender: 'asbplayer-video',\n            message: {\n                command: 'record-media-and-forward-subtitle',\n                subtitle: subtitle,\n                surroundingSubtitles: surroundingSubtitles,\n                record: this.recordMedia,\n                screenshot: this.takeScreenshot,\n                url: this.url(subtitle.start, subtitle.end),\n                mediaTimestamp: this.video.currentTime * 1000,\n                subtitleFileName: this.subtitleFileName(subtitle.track),\n                postMineAction: postMineAction,\n                audioPaddingStart: this.audioPaddingStart,\n                audioPaddingEnd: this.audioPaddingEnd,\n                imageDelay: this.imageDelay,\n                playbackRate: this.video.playbackRate,\n                text,\n                definition,\n                word,\n                customFieldValues,\n                ...this._imageCaptureParams,\n            },\n            src: this.video.src,\n        };\n        chrome.runtime.sendMessage(command);\n    }\n    async _toggleRecordingMedia(postMineAction) {\n        if (this.recordingState === RecordingState.requested) {\n            return;\n        }\n        if (this.recordingState === RecordingState.started) {\n            const currentTimestamp = this.video.currentTime * 1000;\n            const command = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'stop-recording-media',\n                    postMineAction: postMineAction,\n                    startTimestamp: this.recordingMediaStartedTimestamp,\n                    endTimestamp: currentTimestamp,\n                    playbackRate: this.video.playbackRate,\n                    screenshot: this.recordingMediaWithScreenshot,\n                    videoDuration: this.video.duration * 1000,\n                    url: this.url(this.recordingMediaStartedTimestamp, currentTimestamp),\n                    subtitleFileName: this.subtitleFileName(),\n                    ...this._imageCaptureParams,\n                    ...this._surroundingSubtitlesAroundInterval(this.recordingMediaStartedTimestamp, currentTimestamp),\n                },\n                src: this.video.src,\n            };\n            chrome.runtime.sendMessage(command);\n        }\n        else {\n            this.ankiUiSavedState = undefined;\n            if (this.takeScreenshot) {\n                await this._prepareScreenshot();\n            }\n            const timestamp = this.video.currentTime * 1000;\n            if (this.recordMedia) {\n                this.recordingState = RecordingState.requested;\n                this.wasPlayingBeforeRecordingMedia = !this.video.paused;\n                this.recordingMediaStartedTimestamp = timestamp;\n                this.recordingMediaWithScreenshot = this.takeScreenshot;\n                this.recordingPostMineAction = postMineAction;\n                if (this.video.paused) {\n                    await this.play();\n                }\n            }\n            const command = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'start-recording-media',\n                    mediaTimestamp: timestamp,\n                    record: this.recordMedia,\n                    postMineAction: postMineAction,\n                    screenshot: this.takeScreenshot,\n                    url: this.url(timestamp),\n                    subtitleFileName: this.subtitleFileName(),\n                    imageDelay: this.imageDelay,\n                    ...this._imageCaptureParams,\n                },\n                src: this.video.src,\n            };\n            chrome.runtime.sendMessage(command);\n        }\n    }\n    _surroundingSubtitlesAroundInterval(start, end) {\n        return surroundingSubtitlesAroundInterval(this.subtitleController.subtitles, start, end, this.ankiUiController.settings.surroundingSubtitlesCountRadius, this.ankiUiController.settings.surroundingSubtitlesTimeRadius);\n    }\n    async _prepareScreenshot() {\n        if (this.cleanScreenshot) {\n            this.notificationController.hide();\n            this.subtitleController.forceHideSubtitles = true;\n            this.mobileVideoOverlayController.forceHide = true;\n            await this.controlsController.hide();\n        }\n    }\n    async rerecord(start, end, uiState) {\n        if (this.recordingMedia) {\n            return;\n        }\n        const noSubtitles = this.subtitleController.subtitles.length === 0;\n        const audioPaddingStart = noSubtitles ? 0 : this.audioPaddingStart;\n        const audioPaddingEnd = noSubtitles ? 0 : this.audioPaddingEnd;\n        this.recordingState = RecordingState.requested;\n        this.recordingMediaStartedTimestamp = this.video.currentTime * 1000;\n        this.seek(Math.max(0, start - audioPaddingStart) / 1000);\n        await this.play();\n        const command = {\n            sender: 'asbplayer-video',\n            message: {\n                command: 'rerecord-media',\n                duration: end - start,\n                uiState: uiState,\n                audioPaddingStart: audioPaddingStart,\n                audioPaddingEnd: audioPaddingEnd,\n                playbackRate: this.video.playbackRate,\n                timestamp: start,\n                subtitleFileName: this.subtitleFileName(),\n            },\n            src: this.video.src,\n        };\n        chrome.runtime.sendMessage(command);\n    }\n    seek(timestamp) {\n        if (netflix) {\n            document.dispatchEvent(new CustomEvent('asbplayer-netflix-seek', {\n                detail: timestamp * 1000,\n            }));\n        }\n        else {\n            seekWithNudge(this.video, timestamp);\n        }\n    }\n    async play() {\n        if (netflix) {\n            await this._playNetflix();\n            return;\n        }\n        try {\n            await this.video.play();\n        }\n        catch (ex) {\n            // Ignore exception\n            if (this.video.readyState !== 4) {\n                // Deal with Amazon Prime player pausing in the middle of play, without loss of generality\n                return new Promise((resolve, reject) => {\n                    const listener = async (evt) => {\n                        let retries = 3;\n                        for (let i = 0; i < retries; ++i) {\n                            try {\n                                await this.video.play();\n                                break;\n                            }\n                            catch (ex2) {\n                                console.error(ex2);\n                            }\n                        }\n                        resolve(undefined);\n                        this.video.removeEventListener('canplay', listener);\n                    };\n                    this.video.addEventListener('canplay', listener);\n                });\n            }\n        }\n    }\n    _playNetflix() {\n        return new Promise((resolve, reject) => {\n            const listener = async (evt) => {\n                this.video.removeEventListener('play', listener);\n                this.video.removeEventListener('playing', listener);\n                resolve(undefined);\n            };\n            this.video.addEventListener('play', listener);\n            this.video.addEventListener('playing', listener);\n            document.dispatchEvent(new CustomEvent('asbplayer-netflix-play'));\n        });\n    }\n    pause() {\n        if (netflix) {\n            document.dispatchEvent(new CustomEvent('asbplayer-netflix-pause'));\n            return;\n        }\n        this.video.pause();\n    }\n    showVideoDataDialog(openedFromMiningCommand, fromAsbplayerId) {\n        this.videoDataSyncController.show({\n            reason: openedFromMiningCommand ? VideoDataUiOpenReason.miningCommand : VideoDataUiOpenReason.userRequested,\n            fromAsbplayerId,\n        });\n    }\n    async cropAndResize(tabImageDataUrl) {\n        const rect = this.video.getBoundingClientRect();\n        const maxWidth = this.maxImageWidth;\n        const maxHeight = this.maxImageHeight;\n        return await cropAndResize(maxWidth, maxHeight, rect, tabImageDataUrl);\n    }\n    async loadSubtitles(files, flatten, syncWithAsbplayerId) {\n        const { streamingSubtitleListPreference, subtitleRegexFilter, subtitleRegexFilterTextReplacement, rememberSubtitleOffset, lastSubtitleOffset, } = await this.settings.get([\n            'streamingSubtitleListPreference',\n            'subtitleRegexFilter',\n            'subtitleRegexFilterTextReplacement',\n            'rememberSubtitleOffset',\n            'lastSubtitleOffset',\n        ]);\n        const syncWithAsbplayerTab = async (withSyncedAsbplayerOnly, withAsbplayerId) => {\n            const syncMessage = {\n                sender: 'asbplayer-video',\n                message: {\n                    command: 'sync',\n                    subtitles: await Promise.all(files.map(async (f) => {\n                        const base64 = await bufferToBase64(await f.arrayBuffer());\n                        return {\n                            name: f.name,\n                            base64: base64,\n                        };\n                    })),\n                    withSyncedAsbplayerOnly,\n                    withAsbplayerId,\n                },\n                src: this.video.src,\n            };\n            chrome.runtime.sendMessage(syncMessage);\n        };\n        switch (streamingSubtitleListPreference) {\n            case SubtitleListPreference.noSubtitleList:\n                const reader = new SubtitleReader({\n                    regexFilter: subtitleRegexFilter,\n                    regexFilterTextReplacement: subtitleRegexFilterTextReplacement,\n                    pgsWorkerFactory: async () => {\n                        const code = await (await fetch(chrome.runtime.getURL('./pgs-parser-worker.js'))).text();\n                        const blob = new Blob([code], { type: 'application/javascript' });\n                        return new Worker(URL.createObjectURL(blob));\n                    },\n                });\n                const offset = rememberSubtitleOffset ? lastSubtitleOffset : 0;\n                const subtitles = await reader.subtitles(files, flatten);\n                this._updateSubtitles(subtitles.map((s, index) => ({\n                    start: s.start + offset,\n                    end: s.end + offset,\n                    text: s.text,\n                    textImage: s.textImage,\n                    track: s.track,\n                    index,\n                    originalStart: s.start,\n                    originalEnd: s.end,\n                })), files.map((f) => f.name));\n                // If target asbplayer is not specified, then sync with any already-synced asbplayer\n                // Otherwise, sync with the target asbplayer\n                const withSyncedAsbplayerOnly = syncWithAsbplayerId === undefined;\n                syncWithAsbplayerTab(withSyncedAsbplayerOnly, syncWithAsbplayerId);\n                break;\n            case SubtitleListPreference.app:\n                syncWithAsbplayerTab(false, undefined);\n                break;\n        }\n    }\n    _updateSubtitles(subtitles, subtitleFileNames) {\n        this.subtitleController.subtitles = subtitles;\n        this.subtitleController.subtitleFileNames = subtitleFileNames;\n        this.subtitleController.cacheHtml();\n        if (this._playMode !== PlayMode.normal && (!subtitles || subtitles.length === 0)) {\n            this.playMode = PlayMode.normal;\n        }\n        let nonEmptyTrackIndex = [];\n        for (let i = 0; i < subtitles.length; i++) {\n            if (!nonEmptyTrackIndex.includes(subtitles[i].track)) {\n                nonEmptyTrackIndex.push(subtitles[i].track);\n            }\n        }\n        this.subtitleController.showLoadedMessage(nonEmptyTrackIndex);\n        this.ankiUiSavedState = undefined;\n        this._synced = true;\n        this._syncedTimestamp = Date.now();\n        if (this.video.paused) {\n            this.mobileVideoOverlayController.show();\n        }\n        this.mobileVideoOverlayController.updateModel();\n        if (!isMobile && subtitles.length > 0) {\n            this.settings\n                .get(['streamingDisplaySubtitles', 'keyBindSet'])\n                .then(({ streamingDisplaySubtitles, keyBindSet }) => {\n                if (!streamingDisplaySubtitles && keyBindSet.toggleSubtitles.keys) {\n                    this.subtitleController.notification('info.toggleSubtitlesShortcut', {\n                        keys: keyBindSet.toggleSubtitles.keys,\n                    });\n                }\n            });\n        }\n        shouldShowUpdateAlert().then((shouldShowUpdateAlert) => {\n            if (shouldShowUpdateAlert) {\n                this.notificationController.updateAlert(chrome.runtime.getManifest().version);\n            }\n        });\n    }\n    _resetSubtitles() {\n        this.subtitleController.reset();\n        this.ankiUiSavedState = undefined;\n        this._synced = false;\n        this._syncedTimestamp = undefined;\n        this.mobileVideoOverlayController.disposeOverlay();\n    }\n    _captureStream() {\n        return new Promise((resolve, reject) => {\n            const existingStream = this._existingActiveAudioStream();\n            if (existingStream !== undefined) {\n                resolve(existingStream);\n                return;\n            }\n            try {\n                let stream;\n                if (typeof this.video.captureStream === 'function') {\n                    stream = this.video.captureStream();\n                }\n                if (typeof this.video.mozCaptureStreamUntilEnded === 'function') {\n                    stream = this.video.mozCaptureStreamUntilEnded();\n                }\n                if (stream === undefined) {\n                    reject(new Error('Unable to capture stream from audio'));\n                    return;\n                }\n                const audioStream = new MediaStream();\n                for (const track of stream.getVideoTracks()) {\n                    track.stop();\n                }\n                for (const track of stream.getAudioTracks()) {\n                    if (track.enabled) {\n                        audioStream.addTrack(track);\n                    }\n                }\n                // Ensure audio keeps playing through computer speakers\n                const output = new AudioContext();\n                const source = output.createMediaStreamSource(audioStream);\n                source.connect(output.destination);\n                this.audioStream = audioStream;\n                resolve(audioStream);\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    }\n    _existingActiveAudioStream() {\n        if (this.audioStream === undefined) {\n            return undefined;\n        }\n        return this.audioStream.active ? this.audioStream : undefined;\n    }\n    async _sendAudioBase64(base64, requestId, encodeAsMp3) {\n        if (encodeAsMp3) {\n            const blob = await (await fetch('data:audio/webm;base64,' + base64)).blob();\n            const mp3Blob = await Mp3Encoder.encode(blob, mp3WorkerFactory);\n            base64 = bufferToBase64(await mp3Blob.arrayBuffer());\n        }\n        const command = {\n            sender: 'asbplayer-video',\n            message: {\n                command: 'audio-base64',\n                base64,\n                requestId,\n            },\n            src: this.video.src,\n        };\n        chrome.runtime.sendMessage(command);\n    }\n    _notifyRequestingActiveTabPermission(requesting) {\n        const command = {\n            sender: 'asbplayer-video',\n            message: {\n                command: 'requesting-active-tab-permission',\n                requesting,\n            },\n            src: this.video.src,\n        };\n        chrome.runtime.sendMessage(command);\n    }\n    url(start, end) {\n        if (youtube) {\n            const toSeconds = (ms) => Math.floor(ms / 1000);\n            const videoId = new URLSearchParams(window.location.search).get('v');\n            if (videoId !== null) {\n                const embedUrl = `https://www.youtube.com/embed/${videoId}?start=${toSeconds(start)}&autoplay=1`;\n                return end === undefined ? embedUrl : `${embedUrl}&end=${toSeconds(end)}`;\n            }\n        }\n        return window.location !== window.parent.location ? document.referrer : document.location.href;\n    }\n}\n","import { SettingsProvider } from '@project/common/settings';\nimport UiFrame from '../services/ui-frame';\nimport { fetchLocalization } from '../services/localization-fetcher';\nimport { ExtensionSettingsStorage } from '../services/extension-settings-storage';\nexport default class VideoSelectController {\n    constructor(bindings) {\n        this._settings = new SettingsProvider(new ExtensionSettingsStorage());\n        this._bindings = bindings;\n        this._frame = new UiFrame(async (lang) => `<!DOCTYPE html>\n                <html lang=\"en\">\n                <head>\n                    <meta charset=\"utf-8\" />\n                    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n                    <title>asbplayer - Video Select</title>\n                    <style>\n                        @import url(${chrome.runtime.getURL('./assets/fonts.css')});\n                    </style>\n                </head>\n                <body>\n                    <div id=\"root\" style=\"width:100%;height:100vh;\"></div>\n                    <script type=\"application/json\" id=\"loc\">${JSON.stringify(await fetchLocalization(lang))}</script>\n                    <script src=\"${chrome.runtime.getURL('./video-select-ui.js')}\"></script>\n                </body>\n            </html>`);\n    }\n    bind() {\n        this.messageListener = (request, sender, sendResponse) => {\n            if (request.sender !== 'asbplayer-extension-to-video') {\n                return;\n            }\n            switch (request.message.command) {\n                case 'toggle-video-select':\n                    this._trigger(false, request.message.fromAsbplayerId, request.src, request.message.subtitleFiles);\n                    break;\n                case 'copy-subtitle':\n                case 'toggle-recording':\n                case 'take-screenshot':\n                    if (this._bindings.find((b) => b.synced) === undefined) {\n                        this._trigger(true);\n                    }\n                    break;\n                case 'subtitles':\n                    this._hideUi();\n                    break;\n                default:\n                // ignore\n            }\n        };\n        chrome.runtime.onMessage.addListener(this.messageListener);\n    }\n    unbind() {\n        this._frame.unbind();\n        if (this.messageListener) {\n            chrome.runtime.onMessage.removeListener(this.messageListener);\n            this.messageListener = undefined;\n        }\n    }\n    async _trigger(openedFromMiningCommand, fromAsbplayerId, targetSrc, subtitleFiles) {\n        if (targetSrc !== undefined) {\n            var binding = this._bindings.find((b) => b.video.src === targetSrc);\n            if (binding !== undefined && binding.subscribed) {\n                if (subtitleFiles !== undefined) {\n                    binding.loadSubtitles(await this._filesForSubtitleFiles(subtitleFiles), false, fromAsbplayerId);\n                }\n                else {\n                    binding.showVideoDataDialog(openedFromMiningCommand, fromAsbplayerId);\n                }\n            }\n        }\n        else if (this._bindings.length === 1) {\n            // Special case - skip video select dialog since there is only one element\n            const binding = this._bindings[0];\n            if (binding.subscribed) {\n                if (subtitleFiles !== undefined) {\n                    binding.loadSubtitles(await this._filesForSubtitleFiles(subtitleFiles), false);\n                }\n                else {\n                    binding.showVideoDataDialog(openedFromMiningCommand);\n                }\n            }\n        }\n        else if (this._bindings.length > 1) {\n            // Toggle on\n            this._showUi(openedFromMiningCommand);\n            this._subtitleFiles = subtitleFiles;\n        }\n    }\n    async _showUi(openedFromMiningCommand) {\n        const captureVisibleTabCommand = {\n            sender: 'asbplayer-foreground',\n            message: { command: 'capture-visible-tab' },\n        };\n        const tabImageDataUrl = (await chrome.runtime.sendMessage(captureVisibleTabCommand));\n        const videoElementPromises = this._bindings.map(async (b) => {\n            return {\n                src: b.video.src,\n                imageDataUrl: await b.cropAndResize(tabImageDataUrl),\n            };\n        });\n        const videoElements = [];\n        for (const p of videoElementPromises) {\n            videoElements.push(await p);\n        }\n        const client = await this._prepareAndShowFrame();\n        const themeType = await this._settings.getSingle('themeType');\n        client.updateState({ open: true, themeType, videoElements, openedFromMiningCommand });\n    }\n    async _prepareAndShowFrame() {\n        this._frame.language = await this._settings.getSingle('language');\n        const isNewClient = await this._frame.bind();\n        const client = await this._frame.client();\n        if (isNewClient) {\n            client.onMessage(async (message) => {\n                if (message.command === 'confirm') {\n                    client.updateState({ open: false });\n                    this._frame.hide();\n                    const binding = this._bindings.find((b) => b.video.src === message.selectedVideoElementSrc);\n                    if (binding !== undefined) {\n                        if (this._subtitleFiles === undefined) {\n                            binding.showVideoDataDialog(false);\n                        }\n                        else {\n                            binding.loadSubtitles(await this._filesForSubtitleFiles(this._subtitleFiles), false);\n                            this._subtitleFiles = undefined;\n                        }\n                    }\n                }\n                else if (message.command === 'openSettings') {\n                    const openSettingsCommand = {\n                        sender: 'asbplayer-video-tab',\n                        message: {\n                            command: 'open-asbplayer-settings',\n                        },\n                    };\n                    chrome.runtime.sendMessage(openSettingsCommand);\n                }\n                else if (message.command === 'cancel') {\n                    client.updateState({ open: false });\n                    this._frame.hide();\n                    this._subtitleFiles = undefined;\n                }\n            });\n        }\n        this._frame.show();\n        return client;\n    }\n    async _hideUi() {\n        if (this._frame.hidden) {\n            return;\n        }\n        const client = await this._frame.client();\n        client.updateState({ open: false });\n        this._frame.hide();\n    }\n    async _filesForSubtitleFiles(subtitleFiles) {\n        const filePromises = subtitleFiles.map(async (f) => new File([await (await fetch('data:text/plain;base64,' + f.base64)).blob()], f.name));\n        return await Promise.all(filePromises);\n    }\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import { v4 as uuidv4 } from 'uuid';\nexport class FrameInfoBroadcaster {\n    constructor() {\n        this.frameId = uuidv4();\n        this._bound = false;\n    }\n    bind() {\n        if (this._bound) {\n            return;\n        }\n        this._broadcastInterval = setInterval(() => this._broadcast(), 10000);\n        this._broadcast();\n        this._bound = true;\n    }\n    _broadcast() {\n        window.parent.postMessage({\n            sender: 'asbplayer-video',\n            message: {\n                frameId: this.frameId,\n            },\n        }, '*');\n    }\n    unbind() {\n        if (this._broadcastInterval !== undefined) {\n            clearInterval(this._broadcastInterval);\n            this._broadcastInterval = undefined;\n        }\n        this._bound = false;\n    }\n}\nexport class FrameInfoListener {\n    constructor() {\n        this.iframesById = {};\n        this._bound = false;\n    }\n    bind() {\n        if (this._bound) {\n            return;\n        }\n        this._listener = (event) => {\n            if (event.data?.sender !== 'asbplayer-video') {\n                return;\n            }\n            const sourceIframe = this._sourceIframeForEvent(event);\n            if (sourceIframe === undefined) {\n                return;\n            }\n            const frameId = event.data.message.frameId;\n            if (!frameId) {\n                return;\n            }\n            this.iframesById[frameId] = sourceIframe;\n        };\n        window.addEventListener('message', this._listener);\n        this._bound = true;\n    }\n    unbind() {\n        if (this._listener !== undefined) {\n            window.removeEventListener('message', this._listener);\n            this._listener = undefined;\n        }\n        this._bound = false;\n    }\n    _sourceIframeForEvent(event) {\n        const iframes = document.getElementsByTagName('iframe');\n        for (const iframe of iframes) {\n            if (iframe.contentWindow === event.source) {\n                return iframe;\n            }\n        }\n        return undefined;\n    }\n}\n","export const isFirefox = navigator.userAgent.toLowerCase().includes('firefox');\n","import { ankiSettingsKeys } from '@project/common/settings';\nimport { sourceString } from '@project/common/util';\nimport UiFrame from '../services/ui-frame';\nimport { fetchLocalization } from '../services/localization-fetcher';\nimport { Mp3Encoder } from '@project/common/audio-clip';\nimport { base64ToBlob, blobToBase64 } from '@project/common/base64';\nimport { mp3WorkerFactory } from '../services/mp3-worker-factory';\nimport { ExtensionGlobalStateProvider } from '../services/extension-global-state-provider';\nconst globalStateProvider = new ExtensionGlobalStateProvider();\n// We need to write the HTML into the iframe manually so that the iframe keeps it's about:blank URL.\n// Otherwise, Chrome won't insert content scripts into the iframe (e.g. Yomichan won't work).\nasync function html(language) {\n    return `<!DOCTYPE html>\n                <html lang=\"en\">\n                <head>\n                    <meta charset=\"utf-8\" />\n                    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n                    <title>asbplayer - Anki</title>\n                    <style>\n                        @import url(${chrome.runtime.getURL('./assets/fonts.css')});\n                    </style>\n                </head>\n                <body>\n                    <div id=\"root\" style=\"width:100%;height:100vh;\"></div>\n                    <script type=\"application/json\" id=\"loc\">${JSON.stringify(await fetchLocalization(language))}</script>\n                    <script src=\"${chrome.runtime.getURL('./anki-ui.js')}\"></script>\n                </body>\n            </html>`;\n}\nexport class TabAnkiUiController {\n    constructor(settings) {\n        this._frame = new UiFrame(html);\n        this._settings = settings;\n    }\n    async show(card) {\n        const { language, ...ankiDialogSettings } = await this._settings.get([\n            'language',\n            'themeType',\n            'lastSelectedAnkiExportMode',\n            ...ankiSettingsKeys,\n        ]);\n        const profilesPromise = this._settings.profiles();\n        const activeProfilePromise = this._settings.activeProfile();\n        const globalStatePromise = globalStateProvider.getAll();\n        const client = await this._client(language, ankiDialogSettings);\n        const state = {\n            type: 'initial',\n            open: true,\n            canRerecord: false,\n            settings: ankiDialogSettings,\n            source: sourceString(card.subtitleFileName, card.mediaTimestamp ?? 0),\n            dialogRequestedTimestamp: 0,\n            ...card,\n            profiles: await profilesPromise,\n            activeProfile: (await activeProfilePromise)?.name,\n            ftueHasSeenAnkiDialogQuickSelect: (await globalStatePromise).ftueHasSeenAnkiDialogQuickSelect,\n        };\n        client.updateState(state);\n    }\n    async updateSettings() {\n        const ankiDialogSettings = await this._settings.get([\n            'themeType',\n            'lastSelectedAnkiExportMode',\n            ...ankiSettingsKeys,\n        ]);\n        if (this._frame.bound) {\n            this._frame.client().then(async (client) => {\n                const profilesPromise = this._settings.profiles();\n                const activeProfilePromise = this._settings.activeProfile();\n                const message = {\n                    command: 'settings',\n                    settings: ankiDialogSettings,\n                    profiles: await profilesPromise,\n                    activeProfile: (await activeProfilePromise)?.name,\n                };\n                client.sendMessage(message);\n            });\n        }\n    }\n    async _client(language, ankiSettings) {\n        this._frame.fetchOptions = {\n            allowedFetchUrl: ankiSettings.ankiConnectUrl,\n        };\n        this._frame.language = language;\n        const isNewClient = await this._frame.bind();\n        const client = await this._frame.client();\n        if (isNewClient) {\n            client.onMessage(async (message) => {\n                switch (message.command) {\n                    case 'openSettings':\n                        const openSettingsCommand = {\n                            sender: 'asbplayer-video-tab',\n                            message: {\n                                command: 'open-asbplayer-settings',\n                            },\n                        };\n                        chrome.runtime.sendMessage(openSettingsCommand);\n                        return;\n                    case 'copy-to-clipboard':\n                        const copyToClipboardMessage = message;\n                        const copyToClipboardCommand = {\n                            sender: 'asbplayer-video-tab',\n                            message: {\n                                command: 'copy-to-clipboard',\n                                dataUrl: copyToClipboardMessage.dataUrl,\n                            },\n                        };\n                        chrome.runtime.sendMessage(copyToClipboardCommand);\n                        return;\n                    case 'encode-mp3':\n                        const { base64, messageId, extension } = message;\n                        const encodedBlob = await Mp3Encoder.encode(await base64ToBlob(base64, `audio/${extension}`), mp3WorkerFactory);\n                        client.sendMessage({\n                            messageId,\n                            base64: await blobToBase64(encodedBlob),\n                        });\n                        return;\n                    case 'resume':\n                        this._frame.hide();\n                        return;\n                    case 'activeProfile':\n                        const activeProfileMessage = message;\n                        this._settings.setActiveProfile(activeProfileMessage.profile).then(() => {\n                            const settingsUpdatedCommand = {\n                                sender: 'asbplayer-video-tab',\n                                message: {\n                                    command: 'settings-updated',\n                                },\n                            };\n                            chrome.runtime.sendMessage(settingsUpdatedCommand);\n                        });\n                        return;\n                    case 'dismissedQuickSelectFtue':\n                        globalStateProvider.set({ ftueHasSeenAnkiDialogQuickSelect: true }).catch(console.error);\n                        return;\n                    case 'exported':\n                        const exportedMessage = message;\n                        this._settings.set({ lastSelectedAnkiExportMode: exportedMessage.mode }).then(() => {\n                            const settingsUpdatedCommand = {\n                                sender: 'asbplayer-video-tab',\n                                message: {\n                                    command: 'settings-updated',\n                                },\n                            };\n                            chrome.runtime.sendMessage(settingsUpdatedCommand);\n                        });\n                        return;\n                }\n            });\n        }\n        this._frame.show();\n        return client;\n    }\n    unbind() {\n        this._frame.unbind();\n    }\n}\n","export const shadowRootHosts = [];\nconst nodes = [];\nconst iterationLimit = 100;\nconst garbageCollect = () => {\n    let i = 0;\n    while (i < shadowRootHosts.length) {\n        const host = shadowRootHosts[i];\n        if (!document.contains(host) || !host.shadowRoot) {\n            shadowRootHosts.splice(i, 1);\n        }\n        else {\n            ++i;\n        }\n    }\n};\nexport const incrementallyFindShadowRoots = () => {\n    garbageCollect();\n    if (nodes.length === 0) {\n        if (shadowRootHosts.length > 0) {\n            return;\n        }\n        nodes.push(document);\n    }\n    let iteration = 0;\n    while (nodes.length > 0 && ++iteration < iterationLimit) {\n        const node = nodes.pop();\n        if (!node) {\n            continue;\n        }\n        const shadowRoot = node.shadowRoot;\n        if (shadowRoot) {\n            shadowRootHosts.push(node);\n        }\n        for (const child of node.childNodes) {\n            nodes.push(child);\n        }\n    }\n};\n","import Binding from './services/binding';\nimport { currentPageDelegate } from './services/pages';\nimport VideoSelectController from './controllers/video-select-controller';\nimport { SettingsProvider } from '@project/common/settings';\nimport { FrameInfoBroadcaster, FrameInfoListener } from './services/frame-info';\nimport { cropAndResize } from '@project/common/src/image-transformer';\nimport { TabAnkiUiController } from './controllers/tab-anki-ui-controller';\nimport { ExtensionSettingsStorage } from './services/extension-settings-storage';\nimport { DefaultKeyBinder } from '@project/common/key-binder';\nimport { incrementallyFindShadowRoots, shadowRootHosts } from './services/shadow-roots';\nimport { isFirefoxBuild } from './services/build-flags';\nconst extensionSettingsStorage = new ExtensionSettingsStorage();\nconst settingsProvider = new SettingsProvider(extensionSettingsStorage);\nlet unbindToggleSidePanel;\nconst bindToggleSidePanel = () => {\n    settingsProvider.getSingle('keyBindSet').then((keyBindSet) => {\n        unbindToggleSidePanel?.();\n        unbindToggleSidePanel = new DefaultKeyBinder(keyBindSet).bindToggleSidePanel((event) => {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            const command = {\n                sender: 'asbplayer-video-tab',\n                message: {\n                    command: 'toggle-side-panel',\n                },\n            };\n            chrome.runtime.sendMessage(command);\n        }, () => false, true);\n    });\n};\nconst hasValidVideoSource = (videoElement, page) => {\n    if (page?.config?.allowBlankSrc) {\n        return true;\n    }\n    if (videoElement.src) {\n        return true;\n    }\n    for (let index = 0, length = videoElement.children.length; index < length; index++) {\n        const elm = videoElement.children[index];\n        if ('SOURCE' === elm.tagName && elm.src) {\n            return true;\n        }\n    }\n    return false;\n};\nconst bind = () => {\n    const bindings = [];\n    const page = currentPageDelegate();\n    let hasPageScript = page?.config.script !== undefined;\n    let frameInfoListener;\n    let frameInfoBroadcaster;\n    const isParentDocument = window.self === window.top;\n    if (isParentDocument) {\n        // Parent document, listen for child iframe info\n        frameInfoListener = new FrameInfoListener();\n        frameInfoListener.bind();\n    }\n    else {\n        // Child iframe, broadcast frame info\n        frameInfoBroadcaster = new FrameInfoBroadcaster();\n    }\n    const bindToVideoElements = () => {\n        const videoElements = [...document.getElementsByTagName('video')];\n        for (const shadowRootHost of shadowRootHosts) {\n            if (!shadowRootHost.shadowRoot) {\n                continue;\n            }\n            for (const video of shadowRootHost.shadowRoot.querySelectorAll('video')) {\n                videoElements.push(video);\n            }\n        }\n        for (let i = 0; i < videoElements.length; ++i) {\n            const videoElement = videoElements[i];\n            const bindingExists = bindings.filter((b) => b.video.isSameNode(videoElement)).length > 0;\n            if (!bindingExists && hasValidVideoSource(videoElement, page) && !page?.shouldIgnore(videoElement)) {\n                const b = new Binding(videoElement, hasPageScript, frameInfoBroadcaster?.frameId);\n                b.bind();\n                bindings.push(b);\n            }\n        }\n        for (let i = bindings.length - 1; i >= 0; --i) {\n            const b = bindings[i];\n            let videoElementExists = false;\n            for (let j = 0; j < videoElements.length; ++j) {\n                const videoElement = videoElements[j];\n                if (videoElement.isSameNode(b.video) && hasValidVideoSource(videoElement, page)) {\n                    videoElementExists = true;\n                    break;\n                }\n            }\n            if (!videoElementExists) {\n                bindings.splice(i, 1);\n                b.unbind();\n            }\n        }\n        if (bindings.length === 0) {\n            frameInfoBroadcaster?.unbind();\n        }\n        else {\n            frameInfoBroadcaster?.bind();\n        }\n    };\n    bindToVideoElements();\n    const videoInterval = setInterval(bindToVideoElements, 1000);\n    const shadowRootInterval = page?.config.searchShadowRoots\n        ? setInterval(incrementallyFindShadowRoots, 100)\n        : undefined;\n    const videoSelectController = new VideoSelectController(bindings);\n    videoSelectController.bind();\n    const ankiUiController = new TabAnkiUiController(settingsProvider);\n    if (isParentDocument) {\n        bindToggleSidePanel();\n    }\n    const messageListener = (request, sender, sendResponse) => {\n        if (!isParentDocument) {\n            // Inside iframe - only root window is allowed to handle messages here\n            return;\n        }\n        if (request.sender !== 'asbplayer-extension-to-video') {\n            return;\n        }\n        switch (request.message.command) {\n            case 'copy-to-clipboard':\n                const copyToClipboardMessage = request.message;\n                fetch(copyToClipboardMessage.dataUrl)\n                    .then((response) => response.blob())\n                    .then((blob) => {\n                    if (isFirefoxBuild) {\n                        if (blob.type.startsWith('text/plain')) {\n                            blob.text()\n                                .then((text) => navigator.clipboard.writeText(text))\n                                .catch(console.info);\n                        }\n                        else {\n                            console.error(`Cannot write blob type ${blob.type} to clipboard on Firefox`);\n                        }\n                    }\n                    else {\n                        navigator.clipboard.write([new ClipboardItem({ [blob.type]: blob })]).catch(console.error);\n                    }\n                });\n                break;\n            case 'crop-and-resize':\n                const cropAndResizeMessage = request.message;\n                let rect = cropAndResizeMessage.rect;\n                if (cropAndResizeMessage.frameId !== undefined) {\n                    const iframe = frameInfoListener?.iframesById?.[cropAndResizeMessage.frameId];\n                    if (iframe !== undefined) {\n                        const iframeRect = iframe.getBoundingClientRect();\n                        rect = {\n                            left: rect.left + iframeRect.left,\n                            top: rect.top + iframeRect.top,\n                            width: rect.width,\n                            height: rect.height,\n                        };\n                    }\n                }\n                cropAndResize(cropAndResizeMessage.maxWidth, cropAndResizeMessage.maxHeight, rect, cropAndResizeMessage.dataUrl).then((dataUrl) => sendResponse({ dataUrl }));\n                return true;\n            case 'show-anki-ui':\n                if (request.src === undefined) {\n                    // Message intended for the tab, and not a specific video binding\n                    ankiUiController.show(request.message);\n                }\n                break;\n            case 'settings-updated':\n                bindToggleSidePanel();\n                ankiUiController.updateSettings();\n                break;\n            default:\n            // ignore\n        }\n    };\n    chrome.runtime.onMessage.addListener(messageListener);\n    window.addEventListener('beforeunload', (event) => {\n        for (let b of bindings) {\n            b.unbind();\n        }\n        bindings.length = 0;\n        clearInterval(videoInterval);\n        if (shadowRootInterval !== undefined) {\n            clearInterval(shadowRootInterval);\n        }\n        videoSelectController.unbind();\n        frameInfoListener?.unbind();\n        frameInfoBroadcaster?.unbind();\n        unbindToggleSidePanel?.();\n        chrome.runtime.onMessage.removeListener(messageListener);\n    });\n};\nif (document.readyState === 'complete') {\n    bind();\n}\nelse {\n    document.addEventListener('readystatechange', (event) => {\n        if (document.readyState === 'complete') {\n            bind();\n        }\n    });\n}\n"],"names":["$defineProperty","GetIntrinsic","value","e","module","exports","undefined","$Error","$EvalError","$RangeError","$ReferenceError","$SyntaxError","$TypeError","$URIError","$Function","Function","getEvalledConstructor","expressionSyntax","$gOPD","Object","getOwnPropertyDescriptor","throwTypeError","ThrowTypeError","calleeThrows","arguments","get","gOPDthrows","hasSymbols","hasProto","getProto","getPrototypeOf","x","__proto__","needsEval","TypedArray","Uint8Array","INTRINSICS","AggregateError","Array","ArrayBuffer","Symbol","iterator","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","eval","Float32Array","Float64Array","FinalizationRegistry","Int8Array","Int16Array","Int32Array","isFinite","isNaN","JSON","Map","Math","Number","parseFloat","parseInt","Promise","Proxy","Reflect","RegExp","Set","SharedArrayBuffer","String","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","WeakRef","WeakSet","error","errorProto","doEval","name","fn","prototype","gen","LEGACY_ALIASES","bind","hasOwn","$concat","call","concat","$spliceApply","apply","splice","$replace","replace","$strSlice","slice","$exec","exec","rePropName","reEscapeChar","getBaseIntrinsic","allowMissing","alias","intrinsicName","length","parts","string","first","last","result","match","number","quote","subString","stringToPath","intrinsicBaseName","intrinsic","intrinsicRealName","skipFurtherCaching","i","isOwn","part","desc","EvalError","Error","RangeError","ReferenceError","SyntaxError","TypeError","URIError","validator","XMLParser","XMLBuilder","XMLValidator","nameStartChar","nameRegexp","regexName","isExist","v","isEmptyObject","obj","keys","merge","target","a","arrayMode","len","getValue","isName","getAllMatches","regex","matches","allmatches","startIndex","lastIndex","index","push","util","defaultOptions","allowBooleanAttributes","unpairedTags","isWhiteSpace","char","readPI","xmlData","start","tagname","substr","getErrorObject","getLineNumberForPosition","readCommentAndCDATA","angleBracketsCount","validate","options","assign","tags","tagFound","reachedRoot","err","tagStartPos","closingTag","tagName","trim","substring","msg","readAttributeStr","attrStr","attrStrStart","isValid","validateAttributeString","code","line","tagClosed","otg","pop","openPos","col","indexOf","afterAmp","validateAmpersand","stringify","map","t","doubleQuote","singleQuote","startChar","validAttrStrRegxp","attrNames","getPositionFromMatch","attrName","validateAttrName","hasOwnProperty","re","validateNumberAmpersand","count","message","lineNumber","lines","split","buildFromOrderedJs","attributeNamePrefix","attributesGroupName","textNodeName","ignoreAttributes","cdataPropName","format","indentBy","suppressEmptyNode","suppressUnpairedNode","suppressBooleanAttributes","tagValueProcessor","key","attributeValueProcessor","preserveOrder","commentPropName","entities","val","processEntities","stopNodes","Builder","this","isAttribute","attrPrefixLen","processTextOrObjNode","indentate","tagEndChar","newLine","buildTextNode","buildEmptyTextNode","buildObjNode","buildEmptyObjNode","buildTextValNode","buildObjectNode","replaceEntitiesValue","buildAttrPairStr","object","level","j2x","tagEndExp","piClosingChar","textValue","entity","repeat","startsWith","build","jObj","isArray","arrayNodeName","attr","newval","arrLen","j","item","Ks","L","arrToStr","arr","jPath","xmlStr","indentation","tagObj","propName","newJPath","tagText","isStopNode","attStr","attr_to_str","tempInd","piTextNodeName","tagStart","tagValue","attrMap","attrVal","lastIndexOf","jArray","entityRegex","parseEntityExp","exp","regx","hasBody","comment","removeNSPrefix","parseTagValue","parseAttributeValue","trimValues","numberParseOptions","hex","leadingZeros","alwaysCreateTextNode","htmlEntities","ignoreDeclaration","ignorePiTags","buildOptions","xmlNode","readDocType","toNumber","addExternalEntities","externalEntities","entKeys","ent","lastEntities","parseTextData","dontTrim","hasAttributes","isLeafNode","escapeEntities","parseValue","resolveNameSpace","prefix","charAt","attrsRegx","buildAttributesMap","attrs","oldVal","aName","newVal","attrCollection","parseXml","xmlObj","currentNode","textData","closeIndex","findClosingIndex","colonIndex","saveTextToParentTag","tagsNodeStack","tagData","readTagExp","childNode","add","tagExp","attrExpPresent","addChild","endIndex","docTypeEntities","lastTag","isItStopNode","tagContent","readStopNodeData","child","entityName","currentTagName","allNodesExp","stopNodePath","stopNodeExp","str","errMsg","closingIndex","closingChar","attrBoundary","ch","data","tagExpWithClosingIndex","separatorIndex","search","shouldParse","constructor","OrderedObjParser","prettify","parse","validationOption","toString","orderedObjParser","orderedResult","addEntity","compress","text","compressedObj","property","newJpath","isLeaf","isLeafTag","assignAttributes","jpath","atrrName","propCount","node","toStr","max","concatty","b","that","bound","args","arrLike","offset","slicy","boundLength","boundArgs","joiner","joiny","Empty","implementation","win","window","g","self","test","foo","$Object","origSymbol","hasSymbolSham","getOwnPropertySymbols","sym","symObj","getOwnPropertyNames","syms","propertyIsEnumerable","descriptor","enumerable","$hasOwn","helpers","ValidatorResult","SchemaError","attribute","validators","testSchemaNoThrow","instance","ctx","callback","schema","throwError","throwAll","res","validateSchema","valid","getEnumerableProperty","testAdditionalProperty","types","properties","additionalProperties","addError","argument","preValidateProperty","makeChild","importErrors","type","some","testType","list","id","$id","anyOf","inner","title","nestedErrors","join","allOf","forEach","errors","oneOf","filter","if","isSchema","ifValid","then","else","propertyNames","subschema","prop","patternProperties","pattern","regexp","_e","minProperties","maxProperties","items","array","every","additionalItems","contains","minimum","exclusiveMinimum","maximum","exclusiveMaximum","validateMultipleOfOrDivisbleBy","validationType","errorMessage","validationArgument","instanceDecimals","getDecimalPlaces","divisorDecimals","maxDecimals","multiplier","pow","round","testArrays","deepCompareStrict","multipleOf","divisibleBy","required","n","disableFormat","isFormat","minLength","hsp","maxLength","minItems","maxItems","uniqueItems","dependencies","dep","childContext","propertyPath","not","disallow","notTypes","schemaId","uri","ValidationError","path","reduce","sum","makeSuffix","stack","throwFirst","stringizer","ValidatorResultError","captureStackTrace","detail","validatorType","defineProperty","create","SchemaContext","base","schemas","resolve","propertyName","FORMAT_REGEXPS","input","ipv4","customFormats","deepMerger","dst","deepMerge","copyist","src","copyistWithDeepMerge","pathEncoder","aKeys","bKeys","objectGetPath","o","s","k","shift","encodePath","decimalPlaces","decimalParts","urilib","SchemaScanResult","found","ref","scanSchema","baseuri","$ref","resolvedUri","ourBase","scanArray","extends","scanObject","definitions","p","Validator","unresolvedRefs","attributes","shouldResolve","addSchema","scan","ourUri","addSubSchemaArray","addSubSchema","addSubSchemaObject","setSchemas","getSchema","urn","sch","schemaobj","schemaTraverser","superResolve","switchSchema","resolved","subctx","skipAttributes","ignoreProperties","validatorErr","allowUnknownAttributes","rewrite","parsed","fragment","hash","document","integer","boolean","date","any","hasMap","mapSizeDescriptor","mapSize","mapForEach","hasSet","setSizeDescriptor","setSize","setForEach","weakMapHas","has","weakSetHas","weakRefDeref","deref","booleanValueOf","valueOf","objectToString","functionToString","$match","$slice","$toUpperCase","toUpperCase","$toLowerCase","toLowerCase","$test","$join","$arrSlice","$floor","floor","bigIntValueOf","gOPS","symToString","hasShammedSymbols","toStringTag","isEnumerable","gPO","O","addNumericSeparator","num","Infinity","sepRegex","int","intStr","dec","utilInspect","inspectCustom","custom","inspectSymbol","isSymbol","wrapQuotes","defaultStyle","opts","quoteChar","quoteStyle","isRegExp","inspect_","depth","seen","maxStringLength","customInspect","indent","numericSeparator","inspectString","bigIntStr","maxDepth","baseIndent","prev","getIndent","inspect","from","noIndent","newOpts","f","m","nameOf","arrObjKeys","symString","markBoxed","HTMLElement","nodeName","getAttribute","childNodes","xs","singleLineValues","indentedJoin","isError","cause","isMap","mapParts","collectionOf","isSet","setParts","isWeakMap","weakCollectionOf","isWeakSet","isWeakRef","isNumber","isBigInt","isBoolean","isString","isDate","ys","isPlainObject","protoTag","stringTag","tag","l","remaining","trailer","lowbyte","c","charCodeAt","size","entries","lineJoiner","isArr","symMap","truncate","illegalRe","controlRe","reservedRe","windowsReservedRe","windowsTrailingRe","sanitize","replacement","sanitized","output","hexRegex","numRegex","consider","decimalPoint","eNotation","trimmedStr","skipLike","sign","numTrimmedByZeros","numStr","getLength","isHighSurrogate","codePoint","isLowSurrogate","byteLength","segment","charLength","curByteLength","callBind","$indexOf","setFunctionLength","$apply","$call","$reflectApply","$max","originalFunction","func","applyBind","gopd","nonEnumerable","nonWritable","nonConfigurable","loose","configurable","writable","hasPropertyDescriptors","hasArrayLengthDefineBug","root","nodeType","freeGlobal","global","punycode","maxInt","tMax","skew","damp","regexPunycode","regexNonASCII","regexSeparators","baseMinusTMin","stringFromCharCode","fromCharCode","mapDomain","ucs2decode","extra","counter","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","decode","out","basic","oldi","w","baseMinusT","inputLength","bias","encode","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","percentTwenties","Format","formatters","RFC1738","RFC3986","formats","utils","defaults","allowDots","allowEmptyArrays","allowPrototypes","allowSparse","arrayLimit","charset","charsetSentinel","comma","decodeDotInKeys","decoder","delimiter","duplicates","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","plainObjects","strictDepth","strictNullHandling","$0","numberStr","parseArrayValue","parseKeys","givenKey","valuesParsed","parent","chain","leaf","cleanRoot","decodedRoot","parseObject","normalizeParseOptions","tempObj","cleanStr","limit","skipIndex","bracketEqualsPos","pos","maybeMap","encodedVal","existing","combine","parseValues","newObj","compact","getSideChannel","arrayPrefixGenerators","brackets","indices","pushToArray","valueOrArray","toISO","toISOString","defaultFormat","addQueryPrefix","arrayFormat","encodeDotInKeys","encoder","encodeValuesOnly","formatter","serializeDate","skipNulls","sentinel","generateArrayPrefix","commaRoundTrip","sort","sideChannel","tmpSc","step","findFlag","isBuffer","objKeys","values","encodedPrefix","adjustedPrefix","encodedKey","keyPrefix","set","valueSideChannel","normalizeStringifyOptions","joined","hexTable","arrayToObject","source","acc","queue","refs","compacted","compactQueue","strWithoutPlus","unescape","defaultEncoder","kind","escape","mapped","mergeTarget","targetItem","define","hasDescriptors","gOPD","functionLengthIsConfigurable","functionLengthIsWritable","callBound","$WeakMap","$Map","$weakMapGet","$weakMapSet","$weakMapHas","$mapGet","$mapSet","$mapHas","listGetNode","curr","next","$wm","$m","$o","channel","assert","objects","listGet","listHas","listSet","Url","protocol","slashes","auth","host","port","hostname","query","pathname","href","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","file","querystring","urlParse","url","parseQueryString","slashesDenoteHost","u","queryIndex","splitter","uSplit","rest","simplePath","proto","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","newpart","validParts","notHost","bit","unshift","toASCII","h","ae","esc","qm","relative","resolveObject","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","hasTrailingSlash","up","isAbsolute","prevCodePoint","WebVTT","VTTCue","VTTRegion","makeColorSet","color","opacity","fontScale","observe","subject","topic","fontColor","Services","prefs","getCharPref","fontOpacity","getIntPref","WebVTTSet","fontSet","backgroundColor","backgroundOpacity","backgroundSet","edgeType","edgeColor","edgeSet","pref","addObserver","_objCreate","F","ParsingError","errorData","parseTimeStamp","computeSeconds","Settings","parseOptions","keyValueDelim","groupDelim","groups","kv","parseCue","cue","regionList","oInput","consumeTimeStamp","ts","Errors","BadTimeStamp","skipWhitespace","startTime","endTime","settings","region","alt","vals","vals0","percent","vertical","lineAlign","snapToLines","align","position","positionAlign","left","middle","end","right","consumeCueSettings","BadSignature","dflt","defaultKey","ESCAPE","TAG_NAME","ruby","rt","lang","TAG_ANNOTATION","NEEDS_PARENT","parseContent","nextToken","unescape1","shouldAdd","current","element","localName","createElement","annotation","rootDiv","tagStack","appendChild","createTextNode","parentNode","createProcessingInstruction","className","strongRTLRanges","isStrongRTLChar","charCode","currentRange","StyleBox","CueStyleBox","styleOptions","isIE8","navigator","userAgent","textShadow","cueDiv","styles","top","bottom","display","writingMode","unicodeBidi","applyStyles","div","textAlign","font","whiteSpace","direction","nodeStack","pushNodes","nextTextNode","textContent","innerText","determineBidi","stylesunicodeBidi","textPos","formatStyle","width","height","move","box","BoxPosition","lh","offsetHeight","offsetWidth","offsetTop","rects","getClientRects","getBoundingClientRect","lineHeight","moveBoxToLinePosition","styleBox","containerBox","boxPositions","boxPosition","linePos","track","textTrackList","mediaElement","trackList","mode","computeLinePos","axis","maxPosition","initialAxis","abs","ceil","reverse","calculatedPercentage","bestPosition","specifiedPosition","percentage","overlapsOppositeAxis","within","overlapsAny","intersectPercentage","findBestPosition","toCSSCompatValues","style","unit","toMove","overlaps","b2","boxes","container","min","reference","getSimpleBoxPosition","StringDecoder","convertCueToDOMTree","cuetext","processCues","cues","overlay","firstChild","removeChild","paddedOverlay","margin","hasBeenReset","displayState","shouldCompute","Parser","state","buffer","TextDecoder","reportOrThrowError","onparsingerror","collectNextLine","stream","alreadyCollectedLine","xy","anchor","regionAnchorX","regionAnchorY","viewportAnchorX","viewportAnchorY","scroll","onregion","parseRegion","hasSubstring","oncue","flush","onflush","toJSON","fromJSON","json","directionSetting","alignSetting","findAlignSetting","extend","cobj","baseObj","_id","_pauseOnExit","_startTime","_endTime","_text","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","setting","findDirectionSetting","getCueAsHTML","scrollSetting","isValidPercentValue","_width","_lines","_regionAnchorX","_regionAnchorY","_viewportAnchorX","_viewportAnchorY","_scroll","defineProperties","findScrollSetting","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","getter","__esModule","d","definition","globalThis","nmd","paths","children","VideoDataUiOpenReason","PostMineAction","PostMinePlayback","AutoPausePreference","PlayMode","ControlType","AudioErrorCode","ImageErrorCode","Direction","surroundingSubtitles","subtitles","countRadius","timeRadius","atBoundary","backward","forward","indexNearTimestamp","timestamp","initialIndex","withinBoundaryAroundInterval","kebabize","kebabized","$","ofs","sourceString","subtitleFileName","nearestTenth","totalSeconds","seconds","minutes","hours","padStart","humanReadableTime","cropAndResize","async","maxWidth","maxHeight","rect","imageDataUrl","reject","image","Image","onload","canvas","r","devicePixelRatio","getContext","drawImage","widthRatio","heightRatio","ratio","newWidth","newHeight","createImageBitmap","resizeWidth","resizeHeight","resizeQuality","sprite","catch","toDataURL","console","StartRecordingErrorCode","StopRecordingErrorCode","AutoPauseContext","willStopShowing","subtitle","lastWillStopShowing","onWillStopShowing","startedShowing","lastStartedShowing","onStartedShowing","clear","OffscreenDomCache","_cachedContentElements","_empty","empty","offscreenElement","remove","html","cached","innerHTML","_offscreenElement","body","append","blob","workerFactory","reader","FileReader","audioContext","AudioContext","audioBuffer","decodeAudioData","channels","numberOfChannels","getChannelData","workerValue","worker","Worker","postMessage","command","sampleRate","onmessage","Blob","terminate","onerror","readAsArrayBuffer","isff","addEvent","event","method","useCapture","addEventListener","attachEvent","getMods","modifier","mods","getKeys","_keyMap","backspace","tab","enter","return","space","down","del","delete","ins","insert","home","pageup","pagedown","capslock","num_0","num_1","num_2","num_3","num_4","num_5","num_6","num_7","num_8","num_9","num_multiply","num_add","num_enter","num_subtract","num_decimal","num_divide","_modifier","option","ctrl","control","cmd","modifierMap","shiftKey","ctrlKey","altKey","metaKey","_mods","_handlers","_downKeys","winListendFocus","_scope","elementHasBindEvent","setScope","scope","getScope","eachUnbind","_ref","_ref$splitKey","splitKey","originKey","unbindKeys","lastKey","keyCode","record","a1","a2","arr1","arr2","isIndex","compareArray","eventHandler","handler","modifiersMatch","y","shortcut","preventDefault","returnValue","stopPropagation","cancelBubble","dispatch","asterisk","which","hotkeys","keyName","keyNum","getModifierState","keydown","keyup","_i","keyShortcut","_downKeysCurrent","capture","isElementBind","clearModifier","PauseOnHoverMode","_api","getPressedKeyString","find","getModifier","deleteScope","newScope","handlers","getPressedKeyCodes","isPressed","srcElement","isContentEditable","readOnly","trigger","unbind","keysInfo","info","_len","_key","keyMap","_hotkeys","noConflict","deep","adjacentSubtitle","time","now","adjacentSubtitleIndex","minDiff","MAX_SAFE_INTEGER","diff","DefaultKeyBinder","keyBindSet","bindCopy","onCopy","disabledGetter","subtitleGetter","copySubtitle","copyHandler","_bind","bindAnkiExport","onAnkiExport","ankiExport","ankiExportHandler","bindUpdateLastCard","onUpdateLastCard","updateLastCard","updateLastCardHandler","bindTakeScreenshot","onTakeScreenshot","takeScreenshot","takeScreenshotHandler","bindToggleRecording","onToggleRecording","toggleRecording","toggleRecordingHandler","bindSeekToSubtitle","onSeekToSubtitle","timeGetter","subtitlesGetter","delegate","previousShortcut","seekToPreviousSubtitle","nextShortcut","seekToNextSubtitle","unbindPrevious","unbindNext","bindSeekToBeginningOfCurrentSubtitle","onSeekToBeginningOfCurrentSubtitle","seekToBeginningOfCurrentSubtitle","_currentOrPreviousSubtitle","currentSubtitle","previousSubtitle","bindSeekBackwardOrForward","onSeekBackwardOrForward","backShortcut","seekBackward","seekForward","unbindBack","bindOffsetToSubtitle","onOffsetChange","subtitleStart","originalStart","adjustOffsetToPreviousSubtitle","adjustOffsetToNextSubtitle","bindAdjustOffset","increase","currentOffset","decreaseShortcut","decreaseOffset","increaseShortcut","increaseOffset","unbindDecrease","unbindIncrease","bindResetOffet","onResetOffset","resetOffset","bindAdjustPlaybackRate","onAdjustPlaybackRate","increasePlaybackRate","decreasePlaybackRate","bindToggleSubtitles","onToggleSubtitles","toggleSubtitles","bindToggleSubtitleTrackInVideo","onToggleSubtitleTrack","shortcuts","toggleVideoSubtitleTrack1","toggleVideoSubtitleTrack2","toggleVideoSubtitleTrack3","unbindHandlers","unbindHandler","bindToggleSubtitleTrackInList","onToggleSubtitleTrackInList","toggleAsbplayerSubtitleTrack1","toggleAsbplayerSubtitleTrack2","toggleAsbplayerSubtitleTrack3","bindUnblurTrack","onUnblurTrack","unblurAsbplayerTrack1","unblurAsbplayerTrack2","unblurAsbplayerTrack3","bindPlay","onPlay","togglePlay","bindAutoPause","onAutoPause","toggleAutoPause","bindCondensedPlayback","onCondensedPlayback","toggleCondensedPlayback","bindFastForwardPlayback","onFastForwardPlayback","toggleFastForwardPlayback","bindToggleSidePanel","onToggleSidePanel","toggleSidePanel","bindToggleRepeat","onToggleRepeat","toggleRepeat","handled","wrappedHandler","stopImmediatePropagation","ankiSettingsKeys","ankiConnectUrl","deck","noteType","sentenceField","definitionField","audioField","imageField","wordField","sourceField","urlField","track1Field","track2Field","track3Field","customAnkiFields","recordWithAudioPlayback","preferMp3","audioPaddingStart","audioPaddingEnd","maxImageWidth","maxImageHeight","surroundingSubtitlesCountRadius","surroundingSubtitlesTimeRadius","ankiFieldSettings","customAnkiFieldSettings","textSubtitleSettingsKeys","subtitleColor","subtitleSize","subtitleThickness","subtitleOutlineThickness","subtitleOutlineColor","subtitleShadowThickness","subtitleShadowColor","subtitleBackgroundOpacity","subtitleBackgroundColor","subtitleFontFamily","subtitleCustomStyles","subtitleBlur","subtitleAlignment","extractAnkiSettings","imageBasedSubtitleScaleFactor","subtitlePositionOffset","topSubtitlePositionOffset","subtitleTracksV2","subtitlesWidth","fromEntries","SubtitleListPreference","isMacOs","userAgentData","platform","defaultSettings","sentence","order","word","audio","track1","track2","track3","subtitlePreview","autoPausePreference","atEnd","speedChangeStep","fastForwardModePlaybackRate","tabName","miningHistoryStorageLimit","preCacheSubtitleDom","clickToMineDefaultAction","showAnkiDialog","postMiningPlaybackState","remember","themeType","copyToClipboardOnMine","rememberSubtitleOffset","lastSubtitleOffset","autoCopyCurrentSubtitle","alwaysPlayOnSubtitleRepeat","subtitleRegexFilter","subtitleRegexFilterTextReplacement","language","streamingAppUrl","streamingDisplaySubtitles","streamingRecordMedia","streamingTakeScreenshot","streamingCleanScreenshot","streamingCropScreenshot","streamingSubsDragAndDrop","streamingAutoSync","streamingLastLanguagesSynced","streamingCondensedPlaybackMinimumSkipIntervalMs","streamingScreenshotDelay","streamingSubtitleListPreference","noSubtitleList","streamingEnableOverlay","webSocketClientEnabled","webSocketServerUrl","pauseOnHoverMode","lastSelectedAnkiExportMode","allTextSubtitleSettings","subtitleSettings","textSettings","textSubtitleSettingsForTrack","valuesAllSame","deepEquals","mergedSettings","complexValuedKeys","SettingsProvider","storage","_complexValues","_storage","getAll","getSingle","parameters","lastValue","_ensureConsistencyOnRead","keyBindSetModified","newKeyBindSet","ankiFieldSettingsModified","newAnkiFieldSettings","keyBindName","fieldName","_ensureConsistencyOnWrite","modifyCustomAnkiFieldSettings","activeProfile","setActiveProfile","profiles","addProfile","removeProfile","prefixKey","profile","unprefixKey","prefixedSettings","prefixed","supportedLanguages","parseEffect","param","delay","leftToRight","fadeAwayWidth","y1","y2","fadeAwayHeight","parseDrawing","numRegexs","nt","parseTag","fs","alpha","clip","inverse","scale","drawing","dots","t1","t2","accel","parseTags","parseText","pairs","isDrawing","raw","combined","frag","parseTime","parseDialogue","fields","textField","dia","fmt","fld","parseFormat","sources","parseStyle","idx","createCommand","points","toSVGPath","instructions","compileDrawing","rawCommands","commands","additionPoints","results","bb1","bb2","bb3","dot4","px","py","s2b","minX","minY","maxX","maxY","getViewBox","tTags","compileTag","presets","x1","x2","fade","a3","t3","t4","xbord","ybord","xshad","yshad","a4","frz","kf","compiledTag","a2an","globalTags","compileText","alignment","org","slices","fragments","prevTag","reset","pTag","ko","kt","an","sliceTag","c1","c2","c3","c4","compileDialogues","dialogues","minLayer","Start","End","Style","stl","compiledText","Text","Alignment","Layer","layer","Name","MarginL","MarginR","MarginV","effect","Effect","DEFAULT_STYLE","Fontname","Fontsize","PrimaryColour","SecondaryColour","OutlineColour","BackColour","Bold","Italic","Underline","StrikeOut","ScaleX","ScaleY","Spacing","Angle","BorderStyle","Outline","Shadow","Encoding","parseStyleColor","aabbggrr","endOfLine","numericTimestamps","timestampToSeconds","srtTimestamp","millisecondsString","milliseconds","secondsToTimestamp","getHours","getMinutes","getSeconds","ms","padLeft","correctFormat","front","millisecond","fixedStrDigit","frontHour","frontMinute","frontSecond","digitCount","padEnd","tryComma","dataArray","tryDot","fromSrt","originalData","toSrt","vttClassRegex","assNewLineRegex","helperElement","sortVttCue","sortVttCues","SubtitleReader","regexFilter","regexFilterTextReplacement","pgsWorkerFactory","_textFilter","_pgsWorkerFactory","files","flatten","allNodes","all","_subtitles","flatMap","nodes","textImage","n1","n2","_deduplicate","deduplicated","_isSame","endsWith","_filterText","isFromNetflix","parser","allBuffers","lastTimestamp","replaceAll","newLines","_fixRTL","tree","events","dialogue","fscx","fscy","fsp","fe","WrapStyle","compileStyles","PlayResX","PlayResY","collisions","Collisions","xml","_xmlParser","textNodes","lastSubtitle","overlappingCount","elm","_decodeHTML","_parsePgs","doc","DOMParser","parseFromString","_xmlNodePath","documentElement","beginAttribute","endAttribute","_parseTtmlTimestamp","content","to","imageBlob","dataUrl","_blobToDataUrl","offscreenCanvas","transferControlToOffscreen","fileStream","readAsDataURL","onloadend","_dropTagNamespace","index1","index2","rubyTextElements","getElementsByTagName","rubyTextElement","xmlParser","removeXml","subtitlesToSrt","subtitleNode","filesToSrt","activeProfileKey","profilesKey","ExtensionSettingsStorage","chrome","local","keysAndDefaults","unprefixed","unprefixedSettings","initialValues","newProfiles","prefixedKeys","session","fetchLocalization","cachedStringsForLang","bundledStringsForLang","defaultLang","strings","fetch","runtime","getURL","stringsKey","stringsKeyForLang","FrameBridgeClient","frame","fetchOptions","bindPromise","_bindClient","updateState","frameId","contentWindow","sender","sendMessage","onMessage","listener","serverMessageListener","windowMessageListener","removeEventListener","ready","_resolveHttpPost","setTimeout","allowedFetchUrl","httpPostCommand","httpPostMessage","messageId","videoSrc","postResponse","response","lastError","UiFrame","_language","_dirty","_bound","_html","_fetchOptions","hidden","_frame","classList","clientIfLoaded","_client","_init","client","colorScheme","documentColorSchemeMetaTag","querySelector","documentColorScheme","light","includes","dark","frameColorScheme","setAttribute","contentDocument","open","write","close","show","hide","blur","bufferToBase64","binary","bytes","btoa","base64","mimeType","decoded","atob","mp3WorkerFactory","URL","createObjectURL","initialGlobalState","ftueHasSeenAnkiDialogQuickSelect","ExtensionGlobalStateProvider","partialInitialGlobalState","globalStateProvider","AnkiUiController","_settings","updateSettings","settingsProvider","profilesPromise","activeProfilePromise","showing","context","customFieldValues","_prepareShow","canRerecord","dialogRequestedTimestamp","video","currentTime","_additionalUiState","showAfterRerecord","uiState","showAfterRetakingScreenshot","requestRewind","pause","activeElement","fullscreenElement","exitFullscreen","keyBindings","subtitleController","forceHideSubtitles","mobileVideoOverlayController","forceHide","isNewClient","focusInListener","openSettingsCommand","copyToClipboardCommand","extension","encodedBlob","activeProfileMessage","settingsUpdatedCommand","exportedMessage","requestFullscreen","activeHtmlElement","focus","resumeMessage","ankiUiSavedState","cardExported","seekTo","seek","postMinePlayback","wasPlayingBeforeRecordingMedia","play","rewindMessage","rerecordMessage","rerecord","recordStart","recordEnd","globalStatePromise","ControlsController","elements","_garbageCollectElements","_findElements","getRootNode","rootNode","elementFromPoint","_samplePoints","_path","_contains","stepX","stepY","point","_withNoise","center","radius","random","parentElement","isSameNode","ImageElement","imageElement","_applyImageContainerStyles","imageElementStylesInterval","setInterval","containerWidth","innerWidth","containerHeight","innerHeight","scrollY","imageRatio","imageWidth","imageHeight","topOffset","leftOffset","clearInterval","DragController","dragEnterElement","bodyDragEnterElement","dropListener","_dragElement","dataTransfer","extensionStartIndex","loadSubtitles","dragOverListener","dragEnterListener","dragLeaveListener","bodyDropListener","bodyDragOverListener","bodyDragEnterListener","bodyDragLeaveListener","dragElement","_applyDragElementStyles","dragElementStylesInterval","MobileGestureController","_context","_startTouchListener","_startTouch","changedTouches","clientX","_endTouchListener","clientY","_insideRect","onSwipeLeft","onSwipeRight","OffsetAnchor","CachingElementOverlay","targetElement","nonFullscreenContainerClassName","nonFullscreenContentClassName","fullscreenContainerClassName","fullscreenContentClassName","offsetAnchor","contentPositionOffset","contentWidthPercentage","onMouseOver","domCache","displayingElements","grandChildren","el","fullscreenContainerElement","nonFullscreenContainerElement","uncacheHtml","cacheHtml","setHtml","htmls","_displayFullscreenContentElementsWithHtml","_displayNonFullscreenContentElementsWithHtml","_displayNonFullscreenContentElements","_cachedContentElement","contentElements","contentElement","_setChildren","_nonFullscreenContainerElement","_displayFullscreenContentElements","_fullscreenContainerElement","onmouseover","_applyContainerStyles","toggle","setProperty","_transferChildren","nonFullscreenElementFullscreenChangeListener","nonFullscreenStylesInterval","nonFullscreenElementFullscreenPollingInterval","_findFullscreenParentElement","fullscreenElementFullscreenChangeListener","fullscreenStylesInterval","fullscreenElementFullscreenPollingInterval","testNode","cloneNode","chosen","_clickable","destination","containerElement","lastChild","defaultContentElement","appendHtml","_appendHtml","breakLine","refresh","clampedY","clampedHeight","clickedElement","clickable","dispose","DefaultElementOverlay","fullscreenContentElement","nonFullscreenContentElement","_nonFullscreenContentElement","_fullscreenContentElement","currentHtml","newHtml","MobileVideoOverlayController","_forceHiding","_showing","_uiInitialized","_overlay","_elementOverlay","containerClassName","_doShow","_doHide","_show","_pauseListener","_playListener","_hide","_seekedListener","updateModel","_messageListener","sendResponse","_model","playMode","addListener","paused","model","subtitleDisplaying","playbackRate","emptySubtitleTrack","recordingEnabled","recordMedia","recording","recordingMedia","previousSubtitleTimestamp","nextSubtitleTimestamp","currentTimestamp","postMineAction","subtitlesAreVisible","disposeOverlay","synced","frameParams","_getFrameParams","tooltips","_frameParams","_differentFrameParams","videoRect","smallScreen","removeListener","NotificationController","titleLocKey","messageLocKey","_prepareAndShowFrame","alertLocKey","updateAlert","newVersion","controlsController","onClose","Interval","low","high","clone","less_than","other_interval","equal_to","intersect","not_intersect","comparable_max","interval1","interval2","comparable_less_than","val1","val2","Node","isNil","other_node","value_less_than","value_equal","copy_data","update_max","not_intersect_left_subtree","search_node","not_intersect_right_subtree","IntervalTree","nil_node","tree_walk","isEmpty","insert_node","tree_insert","recalc_max","exist","tree_search","delete_node","tree_delete","interval","outputMapperFn","resp_nodes","tree_search_interval","intersect_any","tree_find_any_interval","visitor","node_current","current_node","parent_node","insert_fixup","uncle_node","rotate_left","rotate_right","cut_node","fix_node","tree_successor","delete_fixup","brother_node","local_minimum","node_min","local_maximum","node_max","node_successor","action","testRedBlackProperty","testBlackHeightProperty","heightLeft","heightRight","SubtitleCollection","returnLastShown","returnNextToShow","gapsTree","emptySubtitleCollection","subtitlesAt","lastShown","nextToShow","gapIntervals","nextStart","showingCheckRadiusMs","_typeof","_classCallCheck","Constructor","_toPropertyKey","arg","hint","prim","toPrimitive","_defineProperties","props","_createClass","protoProps","staticProps","_assertThisInitialized","_setPrototypeOf","setPrototypeOf","_inherits","subClass","superClass","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_arrayLikeToArray","ownKeys$6","enumerableOnly","symbols","_objectSpread$6","getOwnPropertyDescriptors","consoleLogger","log","warn","baseLogger","Logger","concreteLogger","init","logger","debug","bool","_len2","_key2","_len3","_key3","_len4","_key4","lvl","debugOnly","moduleName","EventEmitter","observers","_this","observer","defer","rej","promise","makeString","getLastOfPath","cleanKey","canNotTraverseDeeper","setPath","newValue","_getLastOfPath","getPath","_getLastOfPath3","deepExtend","overwrite","regexEscape","_entityMap","isIE10","chars","deepFind","keySeparator","mix","joinedPath","ownKeys$5","_objectSpread$5","ResourceStore","_EventEmitter","Derived","hasNativeReflectConstruct","_super","construct","sham","_isNativeReflectConstruct$3","Super","NewTarget","ns","defaultNS","ignoreJSONStructure","lng","silent","addNamespaces","emit","resources","addResource","pack","hasResourceBundle","removeNamespaces","getResource","compatibilityAPI","getDataByLanguage","postProcessor","processors","addPostProcessor","handle","translator","processor","process","ownKeys$4","_objectSpread$4","checkedLoadedFor","Translator","_isNativeReflectConstruct$2","services","interpolation","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","possibleChars","matched","ki","looksLikeObjectPath","interpolator","nestingRegexp","_this2","overloadTranslationOptionHandler","returnDetails","_this$extractFromKey","extractFromKey","namespace","appendNamespaceToCIMode","usedKey","exactUsedKey","usedLng","usedNS","resUsedKey","resExactUsedKey","resType","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","copy","newKeyToUse","deepKey","translate","extendTranslation","usedDefault","needsPluralHandling","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","defaultValue","isValidLookup","resForMissing","missingKeyNoValueFallbackToKey","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","specificDefaultValue","defaultForMissing","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","getSuffixes","suffix","appendNamespaceToMissingKey","parseMissingKeyHandler","_this3","defaultVariables","skipInterpolation","nestBef","skipOnVariables","nb","interpolate","na","nest","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","_this4","extracted","fallbackNS","needsZeroSuffixLookup","ordinal","shouldUseIntlApi","needsContextHandling","codes","hasLoadedNamespace","possibleKey","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","pluralSeparator","contextKey","contextSeparator","returnNull","returnEmptyString","resourceStore","capitalize","LanguageUtil","supportedLngs","formatLanguageCode","specialCases","lowerCaseLng","cleanCode","load","nonExplicitSupportedLngs","getLanguagePartFromCode","cleanedLng","isSupportedCode","lngOnly","supportedLng","fallbacks","getScriptPartFromCode","fallbackCode","fallbackCodes","addCode","fc","sets","nr","_rulesPluralsTypes","deprecatedJsonVersions","suffixesOrder","zero","one","two","few","many","other","PluralResolver","rules","compatibilityJSON","Intl","PluralRules","numbers","plurals","_unused","rule","getRule","resolvedOptions","pluralCategories","pluralCategory1","pluralCategory2","pluralCategory","prepend","select","getSuffixRetroCompatible","noAbs","simplifyPluralSuffix","returnSuffix","ownKeys$3","_objectSpread$3","deepFindWithDefaults","defaultData","getPathWithDefaults","Interpolator","escapeValue","iOpts","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","handleFormat","interpolationkey","missingInterpolationHandler","safeValue","todo","matchedVar","temp","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","matchedSingleQuotes","matchedDoubleQuotes","doReduce","elem","ownKeys$2","_objectSpread$2","createCachedFormatter","cache","Formatter","opt","NumberFormat","currency","datetime","DateTimeFormat","relativetime","RelativeTimeFormat","range","ListFormat","_format","mem","_parseFormatStr","formatStr","formatName","formatOptions","optStr","_opt$split2","iter","minLen","parseFormatStr","formatted","valOptions","formatParams","locale","ownKeys$1","_objectSpread$1","Connector","_isNativeReflectConstruct$1","backend","store","waitingReads","maxParallelReads","readingCalls","maxRetries","retryTimeout","languages","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","pendingCount","addResourceBundle","_getLastOfPath2","pushPath","removePending","done","loadedKeys","fcName","tried","wait","resolver","read","queueLoad","loadOne","prepareLoading","_this5","fallbackValue","isUpdate","clb","initImmediate","preload","partialBundledLanguages","ret","tDescription","transformOptions","ownKeys","_objectSpread","noop","I18n","_isNativeReflectConstruct","inst","modules","external","isInitialized","isClone","defOpts","createClassOnDemand","ClassOrObject","lu","on","languageDetector","detection","_this2$store","_this2$store2","deferred","finish","initializedStoreOnce","changeLanguage","usedCallback","resolvedLanguage","setResolvedLanguage","li","lngInLngs","hasLanguageSomeTranslations","isLanguageChangingTo","setLngProps","setLng","getBestMatchFromCodes","cacheUserLanguage","loadResources","detect","fixedT","resultKey","_this$translator","_this$translator2","exists","_this6","lastLng","loadNotPending","loadState","precheck","preResult","_this7","preloaded","newLngs","_this8","mergedOptions","createInstance","dir","reloadResources","use","getFixedT","setDefaultNamespace","loadNamespaces","loadLanguages","SubtitleController","autoPauseContext","_preCacheDom","subtitleCollection","showingSubtitles","shouldRenderBottomOverlay","shouldRenderTopOverlay","unblurredSubtitleTracks","disabledSubtitleTracks","subtitleTrackAlignments","_forceHideSubtitles","_displaySubtitles","lastLoadedMessageTimestamp","lastOffsetChangeTimestamp","showingOffset","showingLoadedMessage","subtitlesElementOverlay","topSubtitlesElementOverlay","notificationElementOverlay","_overlays","bottomSubtitlesElementOverlay","preCacheDom","_resetOverlays","subtitleFileNames","_buildSubtitlesHtml","bottomSubtitlePositionOffset","setSubtitleSettings","newSubtitleSettings","_computeStyles","classes","_computeClasses","subtitleStyles","_arrayEquals","subtitleClasses","newAlignments","subtitleOverlayParams","topSubtitleOverlayParams","notificationOverlayParams","_elementOverlayParams","_applyElementOverlayParams","styleSettings","stylesMap","fontSize","fontWeight","thickness","customStyle","computeStyles","styleList","computeStyleString","_computeClassesForTrack","_getSubtitleTrackAlignment","trackIndex","params","displaySubtitles","skipCacheHtml","subtitlesInterval","_setSubtitlesHtml","showOffset","_computeOffset","_trackEnabled","s1","s2","onSlice","onNextToShow","subtitlesAreNew","_autoCopyToClipboard","shouldRenderOffset","_resetUnblurState","showingSubtitlesBottom","_renderSubtitles","showingSubtitlesTop","_appendSubtitlesHtml","_buildTextHtml","_formatOffset","dataset","hasFocus","screen","_subtitleClasses","_subtitleStyles","notificationElementOverlayHideTimeout","clearTimeout","unblur","skipNotifyPlayer","originalEnd","roundedOffset","notification","locKey","replacements","showLoadedMessage","nonEmptyTrackIndex","loadedMessage","nonEmptySubtitleFileNames","_nonEmptySubtitleNames","subtitlestOverlay","equals","currentPageDelegate","urlObj","location","page","PageDelegate","config","loadScripts","script","head","shouldIgnore","ignore","class","canAutoSync","autoSync","enabled","elementId","isVideoPage","hashMatch","pathMatch","Stream","listeners","_proto","off","callbacks","_length","pipe","_extends","decodeB64ToUint8Array","b64Text","decodedString","Buffer","LineStream","super","nextNewline","TAB","parseByterange","byterangeString","parseAttributes","ParseStream","customParsers","tagMappers","mapper","mappedLine","tagType","duration","version","playlistType","allowed","URI","BYTERANGE","byterange","RESOLUTION","resolution","BANDWIDTH","dateTimeString","dateTimeObject","IV","PRECISE","subkey","addParser","expression","customType","dataParser","addTagMapper","camelCaseKeys","setHoldBack","manifest","serverControl","targetDuration","partTargetDuration","hb","phb","minTargetDuration","minPartDuration","lineStream","parseStream","uris","currentMap","currentUri","hasParts","defaultMediaGroups","currentTimeline","allowCache","discontinuityStarts","segments","lastByterangeEnd","lastPartByterangeEnd","preloadHints","timeline","preloadSegment","entry","mediaGroup","rendition","endlist","endList","inf","mediaSequence","discontinuitySequence","METHOD","KEYFORMAT","contentProtection","KEYID","schemeIdUri","keyId","pssh","iv","playlist","playlists","mediaGroups","media","TYPE","NAME","mediaGroupType","default","DEFAULT","autoselect","AUTOSELECT","LANGUAGE","instreamId","CHARACTERISTICS","characteristics","FORCED","forced","discontinuity","targetduration","timeOffset","precise","cueOut","cueOutCont","cueIn","skip","warnOnMissingAttributes_","segmentIndex","partIndex","renditionReports","canBlockReload","canSkipDateranges","isPart","otherHint","report","partInf","partTarget","identifier","missing","chunk","VideoDataSyncController","_autoSyncAttempted","_autoSync","_lastLanguagesSynced","_emptySubtitle","label","_domain","lastLanguagesSynced","_dataReceivedListener","_syncedData","requestSubtitles","hasPageScript","_setSyncedData","dispatchEvent","CustomEvent","reason","fromAsbplayerId","additionalFields","openReason","openedFromAsbplayerId","_buildModel","subtitleTrackChoices","subs","_matchLastSyncedWithAvailableTracks","autoSelectedTrackIds","autoSelectedTracks","defaultCheckboxState","completeMatch","isLoading","suggestedName","basename","selectedSubtitle","showSubSelect","tracks","emptyChoice","_defaultVideoName","subtitleTrack","_canAutoSync","_syncData","_hideAndResume","failedToAutoLoadPreferredTrack","dataWasSynced","confirmMessage","shouldRememberTrackChoices","_syncDataArray","syncWithAsbplayerId","_syncSubtitles","_reportError","_wasPaused","_fullscreenElement","_activeElement","localFile","subtitleFiles","_subtitlesForUrl","serializedFiles","File","fetchDataForLanguageOnDemand","lazilyFetchedUrl","finally","revokeObjectURL","m3U8Response","firstUri","partExtension","m3U8BaseUrl","fileName","promises","totalPromises","finishedPromises","ok","status","statusText","arrayBuffer","TimedRecordingInProgressError","AudioRecorder","recorder","blobPromise","startWithTimeout","onStartedCallback","doNotManageStream","timeoutResolve","timeoutId","stop","MediaRecorder","chunks","ondataavailable","onstop","createMediaStreamSource","connect","stopSafely","getTracks","isMobile","mobile","initializedPromise","langsInitialized","KeyBindings","_unbindPlay","_unbindAutoPause","_unbindCondensedPlayback","_unbindFastForwardPlayback","_unbindSeekToSubtitle","_unbindSeekToBeginningOfCurrentSubtitle","_unbindSeekBackwardOrForward","_unbindToggleSubtitles","_unbindToggleSubtitleTrackInVideo","_unbindToggleSubtitleTrackInList","_unbindUnblurTrack","_unbindOffsetToSubtitle","_unbindAdjustOffset","_unbindResetOffset","_unbindAdjustPlaybackRate","_unbindToggleRepeat","setKeyBindSet","_keyBinder","autoPause","normal","condensed","fastForward","toggleSubtitlesCommand","currentSpeed","speedOffset","shouldShowKey","netflix","youtube","RecordingState","startAudioRecordingErrorResponse","errorCode","drmProtected","started","Binding","subscribed","recordingState","notRecording","pausedDueToHover","_playMode","_speedChangeStep","_audioRecorder","condensedPlaybackMinimumSkipIntervalMs","fastForwardPlaybackMinimumGapMs","imageDelay","disabled","videoDataSyncController","dragController","ankiUiController","notificationController","mobileGestureController","cleanScreenshot","_synced","recordingMediaWithScreenshot","newPlayMode","changed","atStart","seeking","subtitlesAreSufficientlyOffsetFromNow","subtitleEdgeTime","_imageCaptureParams","readyState","canPlayListener","_notifyReady","_subscribe","_refreshSettings","audioTracks","selectedAudioTrack","playListener","echo","pauseListener","recordingPostMineAction","_toggleRecordingMedia","seekedListener","currentTimeCommand","readyStateCommand","playbackRateListener","rate","toFixed","mouseOverListener","inAndOut","videoChangeListener","_resetSubtitles","heartbeatInterval","syncedTimestamp","_syncedTimestamp","loadedSubtitles","request","currentTimeMessage","subtitlesMessage","_updateSubtitles","names","offsetMessage","playbackRateMessage","copySubtitleMessage","_copySubtitle","cardMessage","cardName","timestampInterval","initialTimestampInterval","lastAppliedTimestampIntervalToText","lastAppliedTimestampIntervalToAudio","notifyErrorMessage","recordingMediaStartedTimestamp","showAnkiUiMessage","showAnkiUiAfterRerecordMessage","_takeScreenshot","screenshotTakenMessage","ankiUiState","_notifyRequestingActiveTabPermission","showVideoDataDialog","startRecordingAudioWithTimeoutMessage","_captureStream","timeout","audioBase64","_sendAudioBase64","requestId","encodeAsMp3","currentAudioRecordingRequestId","stopRecordingAudioMessage","stopped","timedAudioRecordingInProgress","errorResponse","notificationDialogMessage","ackCommand","currentSettings","loc","actualLanguage","translation","i18nInit","_prepareScreenshot","mediaTimestamp","clipboard","writeText","requested","overlapStart","subtitleIntersectsTimeInterval","extractText","screenshot","startTimestamp","endTimestamp","videoDuration","_surroundingSubtitlesAroundInterval","startBoundaryIndex","indexAfterStartTimestamp","endBoundaryIndex","indexBeforeEndTimestamp","surroundingSubtitlesAroundInterval","noSubtitles","timestampSeconds","_playNetflix","ex","evt","ex2","openedFromMiningCommand","miningCommand","userRequested","tabImageDataUrl","syncWithAsbplayerTab","withSyncedAsbplayerOnly","withAsbplayerId","syncMessage","app","shouldShow","getManifest","shouldShowUpdateAlert","existingStream","_existingActiveAudioStream","captureStream","mozCaptureStreamUntilEnded","audioStream","MediaStream","getVideoTracks","getAudioTracks","addTrack","active","mp3Blob","requesting","toSeconds","videoId","URLSearchParams","embedUrl","referrer","VideoSelectController","bindings","_bindings","messageListener","_trigger","_hideUi","targetSrc","binding","_filesForSubtitleFiles","_showUi","_subtitleFiles","videoElementPromises","videoElements","selectedVideoElementSrc","filePromises","getRandomValues","rnds8","rng","crypto","msCrypto","byteToHex","uuid","buf","rnds","FrameInfoBroadcaster","_broadcastInterval","_broadcast","FrameInfoListener","iframesById","_listener","sourceIframe","_sourceIframeForEvent","iframes","iframe","TabAnkiUiController","card","ankiDialogSettings","ankiSettings","shadowRootHosts","incrementallyFindShadowRoots","shadowRoot","garbageCollect","iteration","extensionSettingsStorage","unbindToggleSidePanel","hasValidVideoSource","videoElement","allowBlankSrc","frameInfoListener","frameInfoBroadcaster","isParentDocument","bindToVideoElements","shadowRootHost","querySelectorAll","videoElementExists","videoInterval","shadowRootInterval","searchShadowRoots","videoSelectController","copyToClipboardMessage","ClipboardItem","cropAndResizeMessage","iframeRect"],"sourceRoot":""}