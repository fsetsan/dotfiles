(()=>{"use strict";var e,t={9612:(e,t,a)=>{a.d(t,{zt:()=>r});const r=e=>({id:i(e),...e}),i=e=>`${e.language}:${e.label}:${e.url}`}},a={};function r(e){var i=a[e];if(void 0!==i)return i.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=r(9612),document.addEventListener("asbplayer-get-synced-data",(async()=>{const t={error:"",basename:"",subtitles:[]};if(!ApiClient)return t.error="ApiClient is undefined",document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:t}));const a=ApiClient?._deviceId;let r;for(let e=0;e<5&&(r=(await ApiClient.getSessions({deviceId:a}))[0],!r.PlayState.MediaSourceId);e++)await new Promise((e=>setTimeout(e,1e3)));if(!r||!r.PlayState.MediaSourceId)return t.error="Failed to retrieve a valid MediaSourceId after 5 attempts",document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:t}));var i=r.PlayState.MediaSourceId,n=r.NowPlayingItem;t.basename=n.FileName??n.Name;const s=[];n.MediaStreams.filter((e=>e.IsTextSubtitleStream)).forEach((t=>{const a=t.Path?t.Path.split(".").pop():t.Codec;var r="/Videos/"+n.Id+"/"+i+"/Subtitles/"+t.Index+"/Stream."+a;s.push((0,e.zt)({label:t.DisplayTitle,language:t.Language||"",url:r,extension:a}))})),t.subtitles=s,document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:t}))}),!1)})();
//# sourceMappingURL=emby-jellyfin-page.js.map