(()=>{"use strict";var e={9612:(e,t,r)=>{r.d(t,{zt:()=>n});const n=e=>({id:a(e),...e}),a=e=>`${e.language}:${e.label}:${e.url}`}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(9612);let t;void 0!==window.trustedTypes&&(null===window.trustedTypes.defaultPolicy&&window.trustedTypes.createPolicy("default",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e}),t=window.trustedTypes.createPolicy("passThrough",{createHTML:e=>e,createScript:e=>e}));const n=t=>(0,e.zt)({label:`${t.languageCode} - ${t.name?.simpleText??t.name?.runs?.[0]?.text}`,language:t.languageCode.toLowerCase(),url:t.baseUrl,extension:"ytxml"});document.addEventListener("asbplayer-get-synced-data",(async()=>{const e={error:"",basename:"",subtitles:[]},r=window.location.href;try{const r=await fetch(window.location.href).then((e=>{if(!e.ok)throw new Error(`YT Context Retrieval failed with Status ${e.status}/${e.statusText}...`);return e.text()})).then((e=>(void 0!==t&&(e=t.createHTML(e)),(new window.DOMParser).parseFromString(e,"text/html")))).then((e=>{const r=e.body.querySelectorAll("script");for(let e=0;e<r.length;++e){const n=r[e];if(n.textContent?.includes("ytInitialPlayerResponse")){let e=`${n.textContent}; return ytInitialPlayerResponse;`;void 0!==t&&(e=t.createScript(e));const r=new Function(e)();if(r)return r}}}));if(!r)throw new Error("YT Player Context not found...");e.basename=r.videoDetails?.title||document.title,e.subtitles=(r?.captions?.playerCaptionsTracklistRenderer?.captionTracks||[]).map(n)}catch(t){t instanceof Error?e.error=t.message:e.error=String(t)}finally{r===window.location.href&&document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:e}))}}),!1);const a={};let o;setInterval((()=>{for(const e of Object.keys(a))o!==e&&window.location.pathname.includes(e)&&(document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:a[e]})),o=e)}),500);const s=JSON.parse;JSON.parse=function(){const e=s.apply(this,arguments),t=e?.captions?.playerCaptionsTracklistRenderer?.captionTracks;if("object"==typeof t&&Array.isArray(t)&&"string"==typeof e?.videoDetails?.videoId){const r=e.videoDetails.videoId,o=t.map(n),s=e.videoDetails?.title||document.title;a[r]={subtitles:o,basename:s,error:""},location.pathname.includes(r)&&document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{subtitles:o,basename:s,error:""}}))}return e}})()})();
//# sourceMappingURL=youtube-page.js.map