(()=>{"use strict";var t,e={9612:(t,e,n)=>{function a(t,e){const n=t.lastIndexOf(".");let a=e;if(-1!==n){a=t.substring(n+1);const e=a.indexOf("?");-1!==e&&(a=a.substring(0,e))}return a}n.d(e,{UC:()=>s,YU:()=>a});const o=t=>`${t.language}:${t.label}:${t.url}`;function s({onJson:t,onRequest:e,waitForBasename:n}){setTimeout((()=>{const a={};let s="",i=!1;if(void 0!==t){const e=JSON.parse;JSON.parse=function(){const n=e.apply(this,arguments);let r=!1,d=!1;return t?.(n,(t=>{const e=window.location.pathname;void 0===a[e]&&(a[e]=[]);const n=o(t);void 0===a[e].find((t=>t.id===n))&&(a[e].push({id:n,...t}),r=!0)}),(t=>{s=t,d=!0})),i&&(r||d)&&document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:s,subtitles:a[window.location.pathname]}})),n}}document.addEventListener("asbplayer-get-synced-data",(async()=>{e?.((t=>{const e=window.location.pathname;void 0===a[e]&&(a[e]=[]);const n=o(t);void 0===a[e].find((t=>t.id===n))&&a[e].push({id:n,...t})}),(t=>{s=t,i||document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:s,subtitles:void 0}}))}));const t=()=>(!n||""!==s)&&window.location.pathname in a;t()||await function(t,e=1e4){return new Promise((async(n,a)=>{t()&&n(!0);const o=Date.now();let s=!1;for(;!s&&Date.now()<o+e;)await new Promise((e=>{setTimeout((()=>{s=t(),e()}),1e3)}));n(s)}))}(t),document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:s,subtitles:a[window.location.pathname]??[]}})),function(){for(const t of Object.keys(a))t!==window.location.pathname&&delete a[t]}(),i=!0}),!1)}),0)}}},n={};function a(t){var o=n[t];if(void 0!==o)return o.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,a),s.exports}a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(0,(t=a(9612)).UC)({onJson:(e,n)=>{if(e?.subtitleUrls instanceof Array)for(const a of e.subtitleUrls)"string"==typeof e?.catalogMetadata?.catalog?.title&&"string"==typeof a.url&&"string"==typeof a.languageCode&&"string"==typeof a.displayName&&n({label:`${e.catalogMetadata.catalog.title} ${a.displayName}`,language:a.languageCode.toLowerCase(),url:a.url,extension:(0,t.YU)(a.url,"dfxp")})},waitForBasename:!1})})();
//# sourceMappingURL=amazon-prime-page.js.map