(()=>{"use strict";var t={9612:(t,e,n)=>{n.d(e,{UC:()=>o});const a=t=>`${t.language}:${t.label}:${t.url}`;function o({onJson:t,onRequest:e,waitForBasename:n}){setTimeout((()=>{const o={};let s="",i=!1;if(void 0!==t){const e=JSON.parse;JSON.parse=function(){const n=e.apply(this,arguments);let r=!1,l=!1;return t?.(n,(t=>{const e=window.location.pathname;void 0===o[e]&&(o[e]=[]);const n=a(t);void 0===o[e].find((t=>t.id===n))&&(o[e].push({id:n,...t}),r=!0)}),(t=>{s=t,l=!0})),i&&(r||l)&&document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:s,subtitles:o[window.location.pathname]}})),n}}document.addEventListener("asbplayer-get-synced-data",(async()=>{e?.((t=>{const e=window.location.pathname;void 0===o[e]&&(o[e]=[]);const n=a(t);void 0===o[e].find((t=>t.id===n))&&o[e].push({id:n,...t})}),(t=>{s=t,i||document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:s,subtitles:void 0}}))}));const t=()=>(!n||""!==s)&&window.location.pathname in o;t()||await function(t,e=1e4){return new Promise((async(n,a)=>{t()&&n(!0);const o=Date.now();let s=!1;for(;!s&&Date.now()<o+e;)await new Promise((e=>{setTimeout((()=>{s=t(),e()}),1e3)}));n(s)}))}(t),document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:s,subtitles:o[window.location.pathname]??[]}})),function(){for(const t of Object.keys(o))t!==window.location.pathname&&delete o[t]}(),i=!0}),!1)}),0)}}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(9612);const e=window.fetch;let a;window.fetch=(...t)=>{let n;for(const e of t)"string"==typeof e&&e.includes("metadata")&&(n=e),e instanceof Request&&e.url.includes("metadata")&&(n=e.url);return void 0!==n&&(a=n),e(...t)};const o=async t=>{const e=[];try{const n=await(await fetch(t)).json();if("object"==typeof n?.playable?.subtitles&&Array.isArray(n.playable.subtitles))for(const t of n.playable.subtitles)"string"==typeof t.label&&"string"==typeof t.language&&"string"==typeof t.webVtt&&e.push({label:t.label,language:t.language,url:t.webVtt,extension:"vtt"})}catch(t){console.error(t)}return e};(0,t.UC)({onRequest:async(t,e)=>{if(void 0===a)return;const n=new URL(a),s=await(await fetch(a)).json();if("string"==typeof s?.preplay?.titles?.title&&e("string"==typeof s?.preplay?.titles?.subtitle?`${s.preplay.titles.title} ${s.preplay.titles.subtitle}`:s.preplay.titles.title),"object"==typeof s?._links?.manifests&&Array.isArray(s._links.manifests))for(const e of s._links.manifests)if("string"==typeof e.href){const a=await o(`${n.origin}${e.href}`);for(const e of a)t(e)}},waitForBasename:!0})})()})();
//# sourceMappingURL=nrk-tv-page.js.map