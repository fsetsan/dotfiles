(()=>{"use strict";var t,e={9612:(t,e,n)=>{function o(t,e){const n=t.lastIndexOf(".");let o=e;if(-1!==n){o=t.substring(n+1);const e=o.indexOf("?");-1!==e&&(o=o.substring(0,e))}return o}function s(t,e=1e4){return new Promise((async(n,o)=>{t()&&n(!0);const s=Date.now();let a=!1;for(;!a&&Date.now()<s+e;)await new Promise((e=>{setTimeout((()=>{a=t(),e()}),1e3)}));n(a)}))}n.d(e,{$l:()=>s,UC:()=>i,YU:()=>o});const a=t=>`${t.language}:${t.label}:${t.url}`;function i({onJson:t,onRequest:e,waitForBasename:n}){setTimeout((()=>{const o={};let i="",r=!1;if(void 0!==t){const e=JSON.parse;JSON.parse=function(){const n=e.apply(this,arguments);let s=!1,c=!1;return t?.(n,(t=>{const e=window.location.pathname;void 0===o[e]&&(o[e]=[]);const n=a(t);void 0===o[e].find((t=>t.id===n))&&(o[e].push({id:n,...t}),s=!0)}),(t=>{i=t,c=!0})),r&&(s||c)&&document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:i,subtitles:o[window.location.pathname]}})),n}}document.addEventListener("asbplayer-get-synced-data",(async()=>{e?.((t=>{const e=window.location.pathname;void 0===o[e]&&(o[e]=[]);const n=a(t);void 0===o[e].find((t=>t.id===n))&&o[e].push({id:n,...t})}),(t=>{i=t,r||document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:i,subtitles:void 0}}))}));const t=()=>(!n||""!==i)&&window.location.pathname in o;t()||await s(t),document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:i,subtitles:o[window.location.pathname]??[]}})),function(){for(const t of Object.keys(o))t!==window.location.pathname&&delete o[t]}(),r=!0}),!1)}),0)}}},n={};function o(t){var s=n[t];if(void 0!==s)return s.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(0,(t=o(9612)).UC)({onJson:(e,n,o)=>{let s;if(e?.bc?.text_tracks instanceof Array){for(const o of e.bc.text_tracks)if("subtitles"===o.kind&&"text/webvtt"===o.mime_type&&o.sources instanceof Array&&o.sources.length>0&&"string"==typeof o.sources[0].src&&"string"==typeof o.srclang){const e="string"==typeof o.label?`${o.srclang} - ${o?.label}`:o.srclang,s=o.sources[0].src.replace(/^http:\/\//,"https://");n({label:e,language:o.srclang.toLowerCase(),url:s,extension:(0,t.YU)(s,"vtt")})}"string"==typeof e.bc.name&&(s=e.bc.name,o(e.bc.name))}void 0===s&&"string"==typeof e?.bch?.episode_title&&(s=e.bch.episode_title,o(e.bch.episode_title))},onRequest:async(e,n)=>{await(0,t.$l)((()=>{const t=function(){const t=document.getElementById("bch-series-title"),e=document.getElementById("bch-story-title");if(t&&e&&t.textContent&&e.childNodes&&0!==e.childNodes.length)return`${t.textContent} ${e.childNodes[0].nodeValue}`}();return!!t&&(n(t),!0)}))||n(document.title)},waitForBasename:!0})})();
//# sourceMappingURL=bandai-channel-page.js.map