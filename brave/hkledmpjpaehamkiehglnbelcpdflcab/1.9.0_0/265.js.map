{"version":3,"file":"265.js","mappings":"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","sources":["webpack://@project/extension/webpack/runtime/chunk loaded","webpack://@project/extension/webpack/runtime/startup chunk dependencies","webpack://@project/extension/../common/audio-clip/mp3-encoder-worker.ts","webpack://@project/extension/webpack/bootstrap","webpack://@project/extension/webpack/runtime/ensure chunk","webpack://@project/extension/webpack/runtime/get javascript chunk filename","webpack://@project/extension/webpack/runtime/global","webpack://@project/extension/webpack/runtime/hasOwnProperty shorthand","webpack://@project/extension/webpack/runtime/publicPath","webpack://@project/extension/webpack/runtime/importScripts chunk loading","webpack://@project/extension/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(53).then(next);\n};","import { WavHeader, Mp3Encoder } from 'lamejs';\nconst samplesPerFrame = 1152;\nconst bitRate = 192;\n// https://stackoverflow.com/questions/61264581/how-to-convert-audio-buffer-to-mp3-in-javascript\nclass Wav {\n    constructor(audioBuffer) {\n        const length = audioBuffer.length * audioBuffer.numberOfChannels * 2 + 44;\n        const view = new View(new DataView(new ArrayBuffer(length)));\n        view.setUint32(0x46464952); // \"RIFF\"\n        view.setUint32(length - 8); // file length - 8\n        view.setUint32(0x45564157); // \"WAVE\"\n        view.setUint32(0x20746d66); // \"fmt \" chunk\n        view.setUint32(16); // length = 16\n        view.setUint16(1); // PCM (uncompressed)\n        view.setUint16(audioBuffer.numberOfChannels);\n        view.setUint32(audioBuffer.sampleRate);\n        view.setUint32(audioBuffer.sampleRate * 2 * audioBuffer.numberOfChannels); // avg. bytes/sec\n        view.setUint16(audioBuffer.numberOfChannels * 2); // block-align\n        view.setUint16(16); // 16-bit\n        view.setUint32(0x61746164); // \"data\" - chunk\n        view.setUint32(length - view.position - 4); // chunk length\n        const channels = audioBuffer.channels;\n        let offset = 0;\n        while (view.position < length) {\n            for (let i = 0; i < audioBuffer.numberOfChannels; ++i) {\n                let sample = Math.max(-1, Math.min(1, channels[i][offset])); // clamp\n                sample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767) | 0; // scale to 16-bit signed int\n                view.setInt16(sample); // write 16-bit sample\n            }\n            ++offset; // next source sample\n        }\n        this.header = WavHeader.readHeader(view.dataView);\n        this.samples = new Int16Array(view.dataView.buffer, this.header.dataOffset, this.header.dataLen / 2);\n    }\n}\nclass View {\n    constructor(dataView) {\n        this.dataView = dataView;\n        this.position = 0;\n    }\n    setUint16(data) {\n        this.dataView.setUint16(this.position, data, true);\n        this.position += 2;\n    }\n    setUint32(data) {\n        this.dataView.setUint32(this.position, data, true);\n        this.position += 4;\n    }\n    setInt16(data) {\n        this.dataView.setInt16(this.position, data, true);\n        this.position += 2;\n    }\n}\nasync function encode(audioBuffer) {\n    const wav = new Wav(audioBuffer);\n    const channels = wav.header.channels;\n    const sampleRate = wav.header.sampleRate;\n    const samples = wav.samples;\n    let left;\n    let right = null;\n    if (channels === 1) {\n        left = new Int16Array(samples);\n    }\n    else if (channels === 2) {\n        let leftSamples = [];\n        let rightSamples = [];\n        for (let i = 0; i < samples.length; i += 2) {\n            leftSamples.push(samples[i]);\n            rightSamples.push(samples[i + 1]);\n        }\n        left = new Int16Array(leftSamples);\n        right = new Int16Array(rightSamples);\n    }\n    else {\n        throw new Error('Unsupport number of channels ' + channels);\n    }\n    const buffer = [];\n    const encoder = new Mp3Encoder(channels, sampleRate, bitRate);\n    let remaining = samples.length;\n    for (var i = 0; remaining >= samplesPerFrame; i += samplesPerFrame) {\n        const rightSubArray = right === null ? null : right.subarray(i, i + samplesPerFrame);\n        var mp3Buff = encoder.encodeBuffer(left.subarray(i, i + samplesPerFrame), rightSubArray);\n        if (mp3Buff.length > 0) {\n            buffer.push(new Int8Array(mp3Buff));\n        }\n        remaining -= samplesPerFrame;\n    }\n    const data = encoder.flush();\n    if (data.length > 0) {\n        buffer.push(new Int8Array(data));\n    }\n    return buffer;\n}\nonmessage = async (e) => {\n    postMessage({\n        command: 'finished',\n        buffer: await encode(e.data.audioBuffer),\n    });\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [53], () => (__webpack_require__(9894)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t265: 1,\n\t894: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunk_project_extension\"] = self[\"webpackChunk_project_extension\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["deferred","next","samplesPerFrame","Wav","constructor","audioBuffer","length","numberOfChannels","view","View","DataView","ArrayBuffer","setUint32","setUint16","sampleRate","position","channels","offset","i","sample","Math","max","min","setInt16","this","header","readHeader","dataView","samples","Int16Array","buffer","dataOffset","dataLen","data","async","encode","wav","left","right","Error","leftSamples","rightSamples","push","encoder","remaining","rightSubArray","subarray","mp3Buff","encodeBuffer","Int8Array","flush","onmessage","e","postMessage","command","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","r","f","chunkId","Promise","all","reduce","promises","u","g","globalThis","Function","window","o","obj","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","replace","p","installedChunks","chunkLoadingGlobal","self","parentChunkLoadingFunction","bind","moreModules","runtime","pop","then"],"sourceRoot":""}