"use strict";const draw=()=>{if(!1===location.href.includes("/watch?"))return;let t=document.querySelector(".ytp-settings-button");if(!t)return;let e=[...document.querySelectorAll(".html5-video-player")].sort((t,e)=>e.offsetHeight-t.offsetHeight).shift();if(!e)return;let i=document.querySelector(".ytp-mpip-button");if(!i){let r=e.querySelector("video");if(!r)return;r.addEventListener("enterpictureinpicture",function(){s.dataset.visible=!1}),r.addEventListener("leavepictureinpicture",function(){s.dataset.visible=!0});let s=t.cloneNode(!0);s.style="",s.textContent="",s.title="Switch to PiP mode",s.classList.add("ytp-mpip-button"),s.classList.remove("ytp-settings-button"),s.addEventListener("click",t=>{let e=t.target.closest(".html5-video-player")?.querySelector("video")||r;e.requestPictureInPicture().catch(t=>alert(t.message))});let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("height","100%"),l.setAttribute("width","100%"),l.setAttribute("version","1.1"),l.setAttribute("viewBox","0 0 36 36");let n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","m 28,11 0,14 -20,0 0,-14 z m -18,2 16,0 0,10 -16,0 0,-10 z"),n.setAttribute("fill","#fff"),n.setAttribute("fill-rule","evenodd"),l.appendChild(n);let u=document.createElementNS("http://www.w3.org/2000/svg","rect");u.setAttribute("fill","red"),u.setAttribute("x","16"),u.setAttribute("y","18"),u.setAttribute("width","14"),u.setAttribute("height","10"),l.appendChild(u),s.appendChild(l),t.parentNode.insertBefore(s,t)}};addEventListener("yt-navigate-finish",draw),addEventListener("play",draw,!0);